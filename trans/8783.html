<html>
<head>
<title>SQL like Experience with Redis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">类似SQL的Redis体验</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/sql-like-experience-with-redis-90926462162b?source=collection_archive---------6-----------------------#2021-01-21">https://medium.datadriveninvestor.com/sql-like-experience-with-redis-90926462162b?source=collection_archive---------6-----------------------#2021-01-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="cddb" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">Redis事件</h2><div class=""/><div class=""><h2 id="af47" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">讲解如何在Redis中获得类似SQL的体验</h2></div><p id="bf10" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">大家好，</p><p id="7bcb" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">随着时间的推移，技术在不断变化。当我们设计一个软件系统时，我们可能会考虑我们将使用什么技术来实现这个系统。技术不是一个固定的东西。它可能会随着时间的推移，随着用途或用途的改变，甚至随着客户的要求等而改变。我们的系统必须具有适应新技术的能力，而不需要在实现层面上做太多的改变。程序员可能出于各种目的喜欢一种旧技术。他们总是在寻找新技术与旧技术相比有哪些相似的能力。他们的思维总是沿着旧的思路去和新的一起工作。这是一件普通的事情，而不是一件奇怪的事情。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi lk"><img src="../Images/79ae8f4466e25bad67ec4bf71210ee0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*H_MNenxIFJkCs1YR"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk">Photo by <a class="ae ma" href="https://unsplash.com/@rossf?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ross Findon</a> on <a class="ae ma" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="717d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">今天我们将讨论如何在Redis中获得类似SQL的体验。开发人员熟悉SQL相关数据库的时间比熟悉NoSQL相关数据库的时间长。突然从使用SQL转向NoSQL将会更加困难。大多数较老的软件系统通常也希望Redis具有SQL类型的经验。尽管两者具有相同的功能，但它们的质量属性、应用程序和交互可能不同。Redis是一个高级的键值数据存储。您可能会从我以前的文章中对Redis有更好的了解，如<a class="ae ma" href="https://medium.com/nerd-for-tech/introduction-to-redis-3e6c3a0083a7" rel="noopener">Redis简介</a>、<a class="ae ma" href="https://sthenusan.medium.com/data-persistence-with-redis-52b7d7cdfc53" rel="noopener">Redis数据持久性</a>、<a class="ae ma" href="https://blog.usejournal.com/availability-with-redis-66611f5a5e2b" rel="noopener ugc nofollow" target="_blank">Redis可用性</a>、<a class="ae ma" href="https://sthenusan.medium.com/redis-vs-infinispan-vs-memcached-7f7cf3b26522" rel="noopener">Redis比较博客、Infinispan和Memcached </a>、<a class="ae ma" href="https://medium.com/nerd-for-tech/redis-as-object-storage-e6a084b46f8b" rel="noopener"> Redis作为对象存储</a>和<a class="ae ma" href="https://medium.com/datadriveninvestor/redis-data-structures-495baef3d486" rel="noopener"> Redis数据结构</a>。作为Redis的一个组织良好的教程集，这些文章可能对新手有所帮助。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi mb"><img src="../Images/706aa1adb79f0351e2402c687261e3f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WFNbg7wlpEaFN1Nw"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk">Photo by <a class="ae ma" href="https://unsplash.com/@impatrickt?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Patrick Tomasso</a> on <a class="ae ma" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="06cc" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">从一种技术转移到另一种技术的最佳方式是在两种技术之间映射可用的资源和用途。SQL有存储数据的表，但是Redis是一个键值存储。Redis中没有可用的表，但是Redis数据结构可以替代表。因此，转换中最重要的一步是将表重新建模为Redis数据结构。使用这个选项，我们通常需要对系统代码进行修改，以使用Redis命令来代替SQL查询。</p><p id="049b" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在本文中，我计划展示如何将从SQL插入和检索数据映射到Redis。例如，在此之前，我们假设要将基于产品的工厂软件系统从关系数据库更改为Redis数据库，而不更改系统的逻辑。</p><h1 id="b8e6" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">1.插入数据</h1><pre class="ll lm ln lo gt mu mv mw mx aw my bi"><span id="1128" class="mz md iq mv b gy na nb l nc nd">SQL:</span><span id="ae0e" class="mz md iq mv b gy ne nb l nc nd">insert into basic_info (product_id, name, category, price)<br/>values (1001, “Anchor”,“MilkPowder”, 400);</span></pre><p id="7952" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在SQL中，我们使用示例性数据将数据插入到basic_info表中。我们必须将表改造成Redis数据结构，但是我们不能盲目地这样做。考虑到数据的使用，我们需要这样做。产品细节必须能够查询其属性，特别是价格和产品id。因此，我们将产品细节存储在Redis散列表中，将产品id和价格存储在Redis排序集中。</p><pre class="ll lm ln lo gt mu mv mw mx aw my bi"><span id="94e5" class="mz md iq mv b gy na nb l nc nd">Redis:</span><span id="a8c0" class="mz md iq mv b gy ne nb l nc nd">MULTI<br/>HMSET product:1001 name Anchor category “MilkPowder” price 400<br/>ZADD product_list 1001 product:1001<br/>ZADD product_price 400 product:1001<br/>EXEC</span></pre><h1 id="8c63" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">2.按价格查询</h1><pre class="ll lm ln lo gt mu mv mw mx aw my bi"><span id="2e32" class="mz md iq mv b gy na nb l nc nd">SQL:</span><span id="90b0" class="mz md iq mv b gy ne nb l nc nd">select * from basic_info where price &lt; 250</span></pre><p id="a609" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">SQL为我们提供了一种使用不等式查询条件表的简便方法。这里我们想得到价格低于250英镑的产品的数据。如果没有适当的数据结构模型，我们就不能在Redis中做到这一点。由于我们将价格数据存储在已排序的集合中，因此根据所需的价格范围获取已排序的产品id非常方便。</p><pre class="ll lm ln lo gt mu mv mw mx aw my bi"><span id="6233" class="mz md iq mv b gy na nb l nc nd">Redis:<br/> <br/>ZRANGEBYSCORE product_price 0 250</span></pre><h1 id="5469" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">3.按产品id查询</h1><pre class="ll lm ln lo gt mu mv mw mx aw my bi"><span id="e231" class="mz md iq mv b gy na nb l nc nd">SQL:</span><span id="7d47" class="mz md iq mv b gy ne nb l nc nd">select * from basic_info where id = 1001</span></pre><p id="455e" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在SQL端，我们只是从basic_info表中查询数据。这是一项非常直截了当的工作。因为我们使用“product:id”模式作为Redis散列表中的键，所以我们也能够简单地从Redis端获得数据。</p><pre class="ll lm ln lo gt mu mv mw mx aw my bi"><span id="171e" class="mz md iq mv b gy na nb l nc nd">Redis:</span><span id="760c" class="mz md iq mv b gy ne nb l nc nd">HGETALL product:10200</span></pre></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><p id="6a59" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">对于需要使用Redis数据库的程序员来说，还有更重要的几点。</p><ul class=""><li id="5d78" class="nm nn iq kq b kr ks ku kv kx no lb np lf nq lj nr ns nt nu bi translated">Redis中没有关系数据库中的主键特性。无论如何，Redis键需要是唯一的。因此，明智地为每个记录设计唯一的键，而不违反任何数据完整性或一致性。</li><li id="912f" class="nm nn iq kq b kr nv ku nw kx nx lb ny lf nz lj nr ns nt nu bi translated">Redis中有一个称为“Redis expires”的特殊功能，用于从数据存储中删除数据。我们可以为数据库中的任何密钥设置到期时间。在该特定时间后，键和值都将被删除。</li><li id="3085" class="nm nn iq kq b kr nv ku nw kx nx lb ny lf nz lj nr ns nt nu bi translated">尽可能使用Redis散列，因为Redis散列的设计采用了内存优化，而不是简单的键值对。</li><li id="3fb2" class="nm nn iq kq b kr nv ku nw kx nx lb ny lf nz lj nr ns nt nu bi translated">永远不要通过文本格式在Redis中存储对象。我们需要将对象序列化为字节数组或流，通过Redis的二进制函数将它们存储在Redis数据存储中。这篇<a class="ae ma" href="https://medium.com/nerd-for-tech/redis-as-object-storage-e6a084b46f8b" rel="noopener">文章</a>有助于深入理解。</li></ul><p id="76ab" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这些要点肯定会帮助你与Redis合作。</p><p id="54fb" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我相信你理解了今天讨论的项目。如果您有任何问题或任何澄清，不要犹豫，通过回复部分与我联系。感谢您花费宝贵的时间阅读本文。</p><p id="cf48" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">干杯…</p><h1 id="841e" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">参考</h1><div class="oa ob gp gr oc od"><a href="https://redislabs.com/" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ja gy z fp oi fr fs oj fu fw iz bi translated">Redis实验室|最佳Redis体验</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">如果简单的缓存是你使用Redis的全部目的，那你就错过了。利用实时数据库Redis Enterprise</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">redislabs.com</p></div></div><div class="om l"><div class="on l oo op oq om or lu od"/></div></div></a></div><div class="oa ob gp gr oc od"><a href="https://redis.io/" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ja gy z fp oi fr fs oj fu fw iz bi translated">雷迪斯</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">Redis是一个开源的(BSD许可的)、内存中的数据结构存储，用作数据库、缓存和消息代理…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">redis.io</p></div></div><div class="om l"><div class="os l oo op oq om or lu od"/></div></div></a></div><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi ot"><img src="../Images/2c096acaf026581e9362ed505d96beb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*omF3icA28udcPs_W"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk">Photo by <a class="ae ma" href="https://unsplash.com/@morvanic?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Morvanic Lee</a> on <a class="ae ma" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div></div>    
</body>
</html>