<html>
<head>
<title>Geocoding on the Fly: Nominatim</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">动态地理编码:命名</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/geocoding-on-the-fly-nominatim-b7bc86e27f10?source=collection_archive---------15-----------------------#2021-02-16">https://medium.datadriveninvestor.com/geocoding-on-the-fly-nominatim-b7bc86e27f10?source=collection_archive---------15-----------------------#2021-02-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0bb2a2aff1a99c54c27cb816ddeb2211.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qFUoCmUVrUgV5DIwJEhXJw.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@sxy_selia?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Sangga Rima Roman Selia</a> on <a class="ae kc" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0bae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们有了一致的服务地址字段，我们可以开始地理编码来查找XY坐标。在这篇文章中，我将专注于地理编码器，解释我研究的选项。然后在另一篇文章中，我将提供一个用于从熊猫数据帧中获取坐标的python脚本。</p><p id="3e4a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我看了几个地理编码器。使用OpenStreetMap的Nominatim是我最喜欢的选项。我已经简单的提到过，nomist在格式上更严格，但是对于一个免费的服务来说，它是非常好的。我已经关注OpenStreetMap好几年了，它的全球开源社区非常稳定。世界各地有几家大型咨询公司，如Geofabrik <a class="ae kc" href="http://download.geofabrik.de/" rel="noopener ugc nofollow" target="_blank"> data extracts </a>，他们在OpenStreetMap数据上编写产品，这有助于使其成为稳定的产品。</p><p id="490b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我在他们的开发者<a class="ae kc" href="https://developers.google.com/maps/documentation/geocoding/usage-and-billing" rel="noopener ugc nofollow" target="_blank">网站</a>上查看了谷歌的API。截至2021年2月15日，每1000个请求大约5美元。这是一个合理的价格，地理编码API非常宽容。因此，如果清理和格式化数据帧不适合您，这将是一个低成本的选择。但是，如果您需要多次运行代码，这可能不会长期保持低成本。我在调试时已经运行了几次我的代码。和许多软件公司一样，谷歌历来提供低价服务，价格会随着时间的推移悄悄上涨。</p><p id="3667" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">行业标准通常是ESRI的ArcGIS产品，它们非常好，但也非常昂贵。还有一个行业选项可以与ArcGIS相媲美，那就是QGIS。它确实提供了MMQGIS，同样使用OpenStreetMap对地址进行地理编码。所以OpenStreetMap再次出手相救。ArcGIS和QGIS的一个重要方面是，如果您不是GIS专家，可能很难浏览该软件。</p><p id="c3d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这又回到了提名。它运行在<a class="ae kc" href="https://geopy.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> Geopy </a>上，这是一个用于处理地理数据的python库。这些是我将演练的导入和设置:</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="df7e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">访问Nominatim API时，需要有一个用户名。您可以创建您的用户名，我在这里使用了“我的用户代理”。我使用速率限制器来防止API超时太快。代码越长，ping API所需的时间就越长。对于大多数代码块来说，超时错误会在2秒内发生，因为处理代码的时间太长。速率限制器将延迟ping API的时间，从而避免API错误。在下一篇文章中，当我逐步介绍python代码时，您将会看到为什么需要这样做。</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="2572" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个代码代表了地理编码器正在做什么。如果我需要英国伦敦的坐标，我可以将这些变量放入我的地理定位器中，方法是将它们组合成地理编码方法参数中的一个字符串。一旦它通过地理定位器传递到limit，地理编码就对pings进行限制，OpenStreetMap返回地址信息。从那里我可以提取属性<em class="lh">。纬度</em>和<em class="lh">。来自<em class="lh">位置</em>变量的经度</em>。我将在以后的文章中更详细地解释来自geolocator.geocode的位置信息的变量。</p></div></div>    
</body>
</html>