<html>
<head>
<title>Creating a Discrete Colorbar with Custom Bin Sizes in Matplotlib</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Matplotlib中创建具有自定义Bin大小的离散颜色条</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/creating-a-discrete-colorbar-with-custom-bin-sizes-in-matplotlib-50b0daf8dd46?source=collection_archive---------7-----------------------#2021-02-02">https://medium.datadriveninvestor.com/creating-a-discrete-colorbar-with-custom-bin-sizes-in-matplotlib-50b0daf8dd46?source=collection_archive---------7-----------------------#2021-02-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="3791" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如何在matplotlib中创建完全定制的颜色映射。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/98609767ce14279e993acfc26b343371.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_IRx-iTfvgUT-Dqa"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/@davidpisnoy?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">David Pisnoy</a> on <a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="9694" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">问题</h1><p id="f596" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">我们的数据被分成不一致的类别，线性颜色条将是低效的。在本教程中，我们将介绍如何创建一个自定义的颜色图，颜色与我们选择的尺寸相匹配。</p><h1 id="f1dc" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">解决方案:离散色条</h1><p id="6814" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">我们从导入所需的包开始</p><pre class="kp kq kr ks gt mi mj mk ml aw mm bi"><span id="9287" class="mn lg it mj b gy mo mp l mq mr">import matplotlib as mpl<br/>import matplotlib.pyplot as plt<br/>import numpy as np</span></pre><p id="5333" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，我们决定我们的颜色:</p><pre class="kp kq kr ks gt mi mj mk ml aw mm bi"><span id="2be7" class="mn lg it mj b gy mo mp l mq mr">colours = ['#ffbe0b', '#fb5607', '#ff006e', '#8338ec', '#3a86ff']</span></pre><p id="4e57" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以及对应于它们的容器大小。—例如{0 → .3}、{0.3 → .7 }等。我有意选择了不均匀的面元。</p><pre class="kp kq kr ks gt mi mj mk ml aw mm bi"><span id="f0a9" class="mn lg it mj b gy mo mp l mq mr">bins = [0 , 0.3 , 0.7 , 1.75 , 1.9]</span></pre><h2 id="c995" class="mn lg it bd lh ms mt dn ll mu mv dp lp kb mw mx lt kf my mz lx kj na nb mb nc bi translated">设置映射</h2><p id="de43" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">已经决定了我们的颜色和箱，我们现在可以生成我们的cmap</p><pre class="kp kq kr ks gt mi mj mk ml aw mm bi"><span id="ff28" class="mn lg it mj b gy mo mp l mq mr">assert len(bins)== len(colours)<br/>cmap = mpl.colors.ListedColormap(colours)<br/>norm = mpl.colors.BoundaryNorm(boundaries=bins, ncolors=len(cmap.colors)-1 )</span></pre><h2 id="b42f" class="mn lg it bd lh ms mt dn ll mu mv dp lp kb mw mx lt kf my mz lx kj na nb mb nc bi translated">创建颜色条</h2><p id="83d2" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">为了测试我们的产品系列，我们可以画出相应的颜色条</p><pre class="kp kq kr ks gt mi mj mk ml aw mm bi"><span id="91e7" class="mn lg it mj b gy mo mp l mq mr">fig, ax = plt.subplots(figsize=(6, 1))<br/>fig.subplots_adjust(bottom=0.5)</span><span id="155c" class="mn lg it mj b gy nd mp l mq mr">cb2 = mpl.colorbar.ColorbarBase(ax, cmap=cmap,<br/>                                norm=norm,<br/>                                boundaries= [-.1] + bins + [2.1],<br/>                                extend='both',<br/>                                ticks=bins,<br/>                                spacing='proportional',<br/>                                orientation='horizontal')<br/>cb2.set_label('Custom colour bar')<br/>plt.show()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/7f6d4b32f1bef3495fe8c064642296de.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*o-68JcqwZwC5hXscvJg1wg.png"/></div></figure></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="24d6" class="lf lg it bd lh li nm lk ll lm nn lo lp lq no ls lt lu np lw lx ly nq ma mb mc bi translated">最后，将其应用于一些样本数据</h1><p id="9300" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">我们首先生成一个样本数据集:</p><pre class="kp kq kr ks gt mi mj mk ml aw mm bi"><span id="19af" class="mn lg it mj b gy mo mp l mq mr">x = np.linspace(0,2.5,100)<br/>y = [np.random.random()*2 for i in range(100)]</span></pre><h2 id="19e8" class="mn lg it bd lh ms mt dn ll mu mv dp lp kb mw mx lt kf my mz lx kj na nb mb nc bi translated">彩色散点图</h2><p id="5eb8" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">然后在我们的情节中，我们需要提供我们之前生成的<code class="fe nr ns nt mj b">norm</code>和<code class="fe nr ns nt mj b">cmap</code>。此外，我们需要分配用于给我们的点着色的变量，在这种情况下，它将是x距离，以便它与上面的颜色条匹配。尺寸是随机选择的，随高度而减小。</p><pre class="kp kq kr ks gt mi mj mk ml aw mm bi"><span id="53b9" class="mn lg it mj b gy mo mp l mq mr">size = 2 + (1.2-np.array(y))*2</span><span id="e393" class="mn lg it mj b gy nd mp l mq mr">plt.scatter(x,y,c=x,cmap=cmap,norm = norm, s=2 + (1.2-y)*2)</span><span id="08fe" class="mn lg it mj b gy nd mp l mq mr">plt.show()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/d78efa455d7bcef2e310f934d90ce618.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*LzkadW5ymq7LXL-JFdteyw.png"/></div></figure><p id="a694" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们到了。—如果你觉得这有用，请鼓掌。</p></div></div>    
</body>
</html>