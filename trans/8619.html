<html>
<head>
<title>Handling lists with react-window</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用反应窗口处理列表</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/handling-lists-with-react-window-79c68a73c55a?source=collection_archive---------0-----------------------#2021-01-16">https://medium.datadriveninvestor.com/handling-lists-with-react-window-79c68a73c55a?source=collection_archive---------0-----------------------#2021-01-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div class="gh gi io"><img src="../Images/850b349b8261b55e29e7b0ca12e03e23.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*sN7qi5R_Rzv43cyEuVK1IA.png"/></div></figure><div class=""/><p id="3610" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><em class="ks">加载大列表智能方式</em></p><p id="f836" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">最近，我接到了处理大量数据的任务。任何给定时间点的最低记录数都在50万左右。通常，后端人员会通过在API中添加分页来帮助我们，但这一次我是独立完成的(而且我没有大声创建自己的后端)。</p><p id="6eab" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">为了展示当我们尝试遍历一个大型数据数组时会发生什么:</p><figure class="ku kv kw kx gt is gh gi paragraph-image"><div class="gh gi kt"><img src="../Images/dd500f3bc9b7a4513be026240a3ef69a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*dnVnEmCi4uyKu-s7HpbZ1w.png"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">when looping through a huge list of data</figcaption></figure><p id="4400" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在渲染庞大的列表时，一个好的做法是使用<strong class="jw iy">窗口/虚拟化</strong>。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><blockquote class="lj lk ll"><p id="7597" class="ju jv ks jw b jx jy jz ka kb kc kd ke lm kg kh ki ln kk kl km lo ko kp kq kr ij bi translated"><strong class="jw iy">T5【开窗】T6</strong></p></blockquote><p id="5723" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">只呈现DOM元素的过程称为窗口操作，DOM元素是在DOM上可见的列表的一部分。这有助于提高性能，因为React需要呈现更少的DOM元素。</p><p id="528d" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在我的例子中，我有一个23项的列表，但是如果我们检查呈现的元素数量，它比列表中的项目少。</p><figure class="ku kv kw kx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi lp"><img src="../Images/8ebaa96e6cc34c6cbed3ed9347524a71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GCyK5PUkmp2b9PjHwdKHLw.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">windowing helps render items which are visible</figcaption></figure><p id="7cdc" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在使用<em class="ks">开窗</em>之前，你首先要问的是<strong class="jw iy">是否需要</strong>？</p><p id="7c53" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我之所以强调<strong class="jw iy">必需</strong>，是因为首先，您添加了一个新的依赖项。其次，初始负载的性能得到了提升，但是您需要这样的性能吗？</p><p id="e24b" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">例如，如果您正在开发一个仪表板应用程序，其中您有多个<em class="ks">KPI</em>，许多<em class="ks">变更</em>和<em class="ks">计算</em>正在发生，这将是有意义的；根据需要需要减少<em class="ks">互动</em>时间。另一方面，如果数据较少，并且可以一次性加载，那么呈现列表会更有意义。这是因为react-window的初始加载时间可能更短，但react需要重新呈现列表，而第二个用例的初始加载时间可能会慢100毫秒，但会呈现整个列表。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><blockquote class="lj lk ll"><p id="4970" class="ju jv ks jw b jx jy jz ka kb kc kd ke lm kg kh ki ln kk kl km lo ko kp kq kr ij bi translated">反应窗口</p></blockquote><p id="ad9e" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们安装库:</p><pre class="ku kv kw kx gt lu lv lw lx aw ly bi"><span id="0b6d" class="lz ma ix lv b gy mb mc l md me">npm i react-window</span></pre><p id="6842" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">* <em class="ks">注:react-window是</em><a class="ae mf" href="https://www.npmjs.com/package/react-virtualized" rel="noopener ugc nofollow" target="_blank"><em class="ks">react-virtualized</em></a>的精简版</p><p id="72e6" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><a class="ae mf" href="https://react-window.now.sh/" rel="noopener ugc nofollow" target="_blank"> react-window </a>提供了四种类型的组件:FixedSizeList、VariableSizeList、FixedSizeGrid和VariableSizeGrid。对于我的例子，我将使用FixedSizeList，VariableSizeList。</p><p id="d694" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们看看一些基本的道具，你可以通过:</p><ul class=""><li id="aa5c" class="mg mh ix jw b jx jy kb kc kf mi kj mj kn mk kr ml mm mn mo bi translated"><strong class="jw iy">高度&amp;宽度</strong>:设置列表容器的大小</li><li id="9065" class="mg mh ix jw b jx mp kb mq kf mr kj ms kn mt kr ml mm mn mo bi translated"><strong class="jw iy"> itemData </strong>:你要渲染的数据</li><li id="4e80" class="mg mh ix jw b jx mp kb mq kf mr kj ms kn mt kr ml mm mn mo bi translated"><strong class="jw iy"> itemCount </strong>:数据数组上的长度</li><li id="f3a1" class="mg mh ix jw b jx mp kb mq kf mr kj ms kn mt kr ml mm mn mo bi translated"><strong class="jw iy"> className </strong>:用于任何定制样式</li><li id="ba5f" class="mg mh ix jw b jx mp kb mq kf mr kj ms kn mt kr ml mm mn mo bi translated"><strong class="jw iy"> itemSize </strong>:唯一的区别是在VariableSizeList中，itemSize可以变化，我们通过一个回调来计算大小(返回类型是一个数字)。</li><li id="6533" class="mg mh ix jw b jx mp kb mq kf mr kj ms kn mt kr ml mm mn mo bi translated"><strong class="jw iy">子</strong>:两个<em class="ks"> FixedSizeList，VariableSizeList </em>都使用渲染道具，并传递所需道具。正如你在下面的例子中看到的，<strong class="jw iy"> <em class="ks">行</em> </strong> <em class="ks"> </em>使用道具来呈现列表项。道具包括项目<em class="ks">索引</em>，<em class="ks">样式</em>包含要渲染的项目的尺寸和坐标。如果定义了<strong class="jw iy">项目数据</strong>，则<em class="ks">数据</em>属性包含数据列表。</li></ul><figure class="ku kv kw kx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi mu"><img src="../Images/407a9cbfcb73397c8d19a26e2cb796a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:648/format:webp/1*gO7q5FE3BG7skvi5NbwEUQ.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">props accessible in the child component</figcaption></figure><p id="6578" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们看看应用组件:</p><figure class="ku kv kw kx gt is"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="494c" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">输出:</p><figure class="ku kv kw kx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi mx"><img src="../Images/a92f263364c9375e96e8137a1ea095a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xWMCpMlQrpkEGzIuLjpZ5A.png"/></div></div></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="e683" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我希望这有助于您理解不同的库如何帮助提高性能。</p><p id="7aed" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">你可以在这里找到git repo<a class="ae mf" href="https://github.com/devAbhimanyu/react-window" rel="noopener ugc nofollow" target="_blank"/>。</p></div></div>    
</body>
</html>