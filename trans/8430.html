<html>
<head>
<title>Covariance and Correlation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">协方差和相关性</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/covariance-and-correlation-5874f6fe9668?source=collection_archive---------12-----------------------#2021-01-11">https://medium.datadriveninvestor.com/covariance-and-correlation-5874f6fe9668?source=collection_archive---------12-----------------------#2021-01-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><h1 id="56ee" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">介绍</h1><p id="488e" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在本帖中，我们将讨论关于<strong class="kn ir">协方差</strong>和<strong class="kn ir">相关性。</strong>这在进行特征选择时起着重要的作用。</p><p id="d4a8" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir">协方差</strong>，顾名思义就是两个变量放在一起时方差的度量。当我们有一个变量时，我们称之为方差，但是在有两个变量的情况下，我们指定它为<strong class="kn ir">协方差</strong>来测量这两个变量如何一起变化。<strong class="kn ir">在进行数据分析时，协方差</strong>被认为是一个非常重要的概念。我们将在随后的章节中更详细地讨论这一点。我们还将讨论<strong class="kn ir">协方差</strong>的一些限制，以及我们如何使用<strong class="kn ir">相关性来减轻它。</strong>定义两组数据之间的关联强度。</p><p id="2451" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">一、<strong class="kn ir">当两个值一起增加时，相关性</strong>为正。</p><p id="84cb" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">二。<strong class="kn ir">相关性</strong>当一个值减少而另一个值增加时为负。</p><p id="58e5" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">我们还将进入下面<strong class="kn ir">相关性</strong>的详细概念</p><ol class=""><li id="6354" class="lo lp iq kn b ko lj ks lk kw lq la lr le ls li lt lu lv lw bi translated"><strong class="kn ir">皮尔逊相关系数。</strong></li><li id="f063" class="lo lp iq kn b ko lx ks ly kw lz la ma le mb li lt lu lv lw bi translated"><strong class="kn ir">斯皮尔曼等级相关系数</strong></li></ol><h1 id="21dc" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">协方差</h1><p id="274d" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">让我们试着用一个例子来理解<strong class="kn ir">协方差</strong>。让我们考虑一个城镇中个人的年龄和工资。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mc"><img src="../Images/0c38ba5d0d7ac721f157423e8c39c899.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P5VuugxN7m_gOnt-mrXZzw.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><strong class="bd jp">Covariance Example : Image by Author</strong></figcaption></figure><p id="5b79" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">所以，如果你注意到上面的表格，你会发现年龄和薪水之间存在正相关关系。随着<strong class="kn ir">年龄</strong>增加<strong class="kn ir">工资</strong>也增加。</p><p id="a9e8" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">因此，协方差的公式如下所示:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/ecbc9d73ad408c7a4a2e5febb370fac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/0*KvGMY6sLVips-Asg.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><strong class="bd jp">Covariance Formula : Image by Author</strong></figcaption></figure><p id="0fdd" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">xi在哪里……n 是个人年龄，<strong class="kn ir">是个人年龄。n </strong>是个人工资。x，y分别是年龄和价格的平均值。</p><p id="b9ae" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">如果你试着仔细看看协方差的等式，你会明白它与我们在<strong class="kn ir">方差、</strong>方差的情况下所做的非常相似，唯一的区别是在<strong class="kn ir">方差、</strong>方差的情况下，我们使用一个变量，而在<strong class="kn ir">协方差</strong>中，我们使用两个变量。</p><h1 id="665d" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">差异</h1><p id="ef56" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">让我们推导出<strong class="kn ir">方差</strong>方程，以便更清楚地理解这个概念:</p><p id="c0fb" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">如果你用上面的等式，而不是用2个变量，让我们用一个变量来推导等式:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/c131912051af50b371ff8279667dfb0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/0*FHkZeoXCJKjTdx5K.png"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/4bb2c175877b692a65d66c7d949ee123.png" data-original-src="https://miro.medium.com/v2/resize:fit:406/format:webp/0*_vZgXq8bZpVjCJhS.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><strong class="bd jp">Variance Formula: Image by Author</strong></figcaption></figure><p id="b6ab" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">因此，上面的方程看起来类似于<strong class="kn ir">协方差方程。</strong>我们可以将等式改写如下:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/9aa3eb8ce375522f02a4639f26da4610.png" data-original-src="https://miro.medium.com/v2/resize:fit:548/format:webp/0*cb-5ZD24rZVmHBxt.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><strong class="bd jp">Covariance Equation : Image by Author</strong></figcaption></figure><h1 id="1495" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">正负协方差</h1><p id="aedc" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">使用上面提到的<strong class="kn ir">协方差</strong>的等式，我们可以发现协方差是正还是负。</p><p id="aa07" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">假设随着年龄(X)的增加，工资(Y)也增加，我们有一个正的协方差。</p><p id="00eb" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在另一种情况下，假设随着年龄(X)的增加，工资(Y)减少，那么我们有一个负的协方差。</p><p id="82eb" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">让我们画一张图来更好地理解这种关系。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/8506cc307d92fb48484e648912c8c1f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/0*F9RWDxkccG5cwXSL.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><strong class="bd jp">Example — Positive Covariance : Image by Author</strong></figcaption></figure><h1 id="a9e4" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">正协方差</h1><p id="11d7" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">1.从上图中，如果你观察蓝点，那么<strong class="kn ir"> x </strong>和<strong class="kn ir"> y </strong>坐标都大于它们各自的平均值。所以如果你把这些值放到协方差方程中</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/dc6cf87debf3808d0d4d703a46c5a9a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/0*I0gZN-TpBHnvzvFm.png"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/9e97a5931d680b3bcadb09d04be0c373.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/format:webp/0*j4pJsiK-PdhLT2QF.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><strong class="bd jp">Positive Covariance : Image by Author</strong></figcaption></figure><p id="935e" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">所以，这基本上意味着，如果随机值<strong class="kn ir"> X </strong>增加，同时<strong class="kn ir"> Y </strong>也增加，那么我们就有一个正的<strong class="kn ir">协方差。</strong></p><h1 id="a522" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">负协方差</h1><p id="e624" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">2.现在假设我们有一个场景，其中随机变量<strong class="kn ir"> X </strong>增加，但是<strong class="kn ir"> Y </strong>的值减少。在这种情况下，我们将有一个负的<strong class="kn ir">协方差。</strong></p><p id="0cdc" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">您可以在下图中看到，<strong class="kn ir"> X </strong>的值高于平均值，然而<strong class="kn ir"> Y </strong>的值低于平均值，这意味着随着<strong class="kn ir"> X、</strong>的增加，<strong class="kn ir"> Y </strong>的值已经减少。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/bff439f707674175676554d10b530282.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/0*QY80dciZMozApjYp.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><strong class="bd jp">Example — Negative Covariance : Image by Author</strong></figcaption></figure><p id="b9f0" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">将它放入等式中，我们将得到一个负值的协方差。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/d1889ef65ec017d052abad46f1165e1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/0*TI70-DlcRSaAvQA5.png"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/10d73a252eeaf098693ad52d0fd00707.png" data-original-src="https://miro.medium.com/v2/resize:fit:406/format:webp/0*6VeY2LUNrL6I0wtt.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><strong class="bd jp">Negative Covariance : Image by Author</strong></figcaption></figure><p id="4b59" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">从上面的例子中我们发现了关于负的和正的协方差。但是在这里我们应该注意到一些事情，那就是<strong class="kn ir">协方差</strong>没有指定那里的积极或消极的值。</p><p id="26e5" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">为了减轻这一限制，我们使用另一个矩阵，即<strong class="kn ir">皮尔逊相关系数。</strong></p><p id="c24e" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir">协方差</strong>的关键在于，它有助于我们理解和量化数据集中两个变量之间的关系。因此，在我们的数据集中，如果某一列的值在增加，同时另一列的值也在增加，那么我们就有了<strong class="kn ir">正协方差</strong>。在另一种情况下，如果数据集中的一列值在增加，而另一列在减少，那么我们就会得到<strong class="kn ir">负协方差。</strong></p><h1 id="d5b0" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">相互关系</h1><p id="de1e" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">既然我们已经了解了<strong class="kn ir">协方差的概念，</strong>让我们了解如何使用<strong class="kn ir">皮尔逊相关系数来减轻它的局限性。</strong></p><h1 id="5c2e" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">I .皮尔逊相关系数</h1><p id="aa47" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">皮尔逊相关系数基本上显示了两组数据之间的<strong class="kn ir">线性关系</strong>，以及我们是否可以使用折线图来表示两组数据。</p><p id="b4b6" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">皮尔逊相关系数的公式为:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi my"><img src="../Images/a9b8c96ff69f0b72190f60aedfd00b8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:918/format:webp/0*TroWY6Kw-MYxlkjJ.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><strong class="bd jp">Pearson Correlation Coefficient : Image by Author</strong></figcaption></figure><p id="b7d5" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">其中<strong class="kn ir"> σx，σy </strong>是<strong class="kn ir"> x和</strong>y的标准偏差</p><p id="79a7" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">正如上面在<strong class="kn ir">协方差</strong>部分所讨论的，如果我们试图找到两个变量的<strong class="kn ir">协方差</strong>，并且假设其中一个变量相对于另一个变量增加，那么我们得到一个正协方差。因此，我们由此理解的是<strong class="kn ir">协方差</strong>为我们提供了关系的<strong class="kn ir">方向，也就是它是向正方向移动还是向负方向移动。</strong></p><p id="d738" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">现在，在皮尔逊相关系数为<strong class="kn ir">的情况下，我们有一个额外的优势。有了<strong class="kn ir"> X </strong>和<strong class="kn ir"> Y (σx，σy) </strong>的方差，就能告诉我们X和Y之间相关性的<strong class="kn ir">强度</strong></strong></p><p id="78e6" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">它还会告诉我们<strong class="kn ir"> X </strong>和<strong class="kn ir"> Y. </strong>之间关系的<strong class="kn ir">方向</strong></p><p id="a500" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">所以<strong class="kn ir">协方差</strong>和<strong class="kn ir">皮尔逊相关系数</strong>的基本区别是，在<strong class="kn ir">协方差的情况下，</strong>我们无法知道<strong class="kn ir"> X和Y </strong>或关系方向<strong class="kn ir">之间的正相关或负相关的<strong class="kn ir">强度</strong>有多大。</strong></p><p id="0abf" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">但是在<strong class="kn ir">皮尔逊相关系数</strong>的情况下，我们能够这样做，因为我们将<strong class="kn ir">协方差</strong>除以<strong class="kn ir"> X和y的<strong class="kn ir">方差</strong>。</strong></p><h2 id="2279" class="mz jo iq bd jp na nb dn jt nc nd dp jx kw ne nf kb la ng nh kf le ni nj kj nk bi translated">皮尔逊相关系数范围</h2><p id="5e6e" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">相关系数的取值范围总是在<strong class="kn ir"> -1到1之间。</strong></p><p id="0948" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">让我们通过几个相关系数在-1到1之间变化的例子来理解这个概念。</p><ol class=""><li id="1fb2" class="lo lp iq kn b ko lj ks lk kw lq la lr le ls li lt lu lv lw bi translated">假设我们有一个场景，其中<strong class="kn ir"> X </strong>增加，同时<strong class="kn ir"> Y </strong>也增加，并且值位于一条直线上，如下所示。在这种情况下，<strong class="kn ir">皮尔逊相关系数</strong>的值将总是<strong class="kn ir"> 1。</strong></li></ol><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/6ee41eb689f4b1db5e5e4d9fdcf19a75.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/0*2w9kzszWessLTenv.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><strong class="bd jp">Pearson Correlation Coefficient = 1 : Image by Author</strong></figcaption></figure><p id="2027" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">2.假设我们有一个场景，其中<strong class="kn ir"> X </strong>增加<strong class="kn ir"> Y </strong>减少，并且值位于一条直线上，如下所示。在这种情况下，<strong class="kn ir">皮尔逊相关系数</strong>的值将总是负的<strong class="kn ir"> 1。</strong></p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/996f201d484a4767161adbbd2f52ab45.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/0*Ww6OzVXF145FBi6m.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><strong class="bd jp">Pearson Correlation Coefficient = -1 : Image by Author</strong></figcaption></figure><p id="b475" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">3.让我们考虑这样一种情况，我们在<strong class="kn ir"> X和y内没有任何一种关系</strong>点分散在各处。在这种情况下，<strong class="kn ir">皮尔逊相关系数</strong>的值将始终为<strong class="kn ir"> 0。</strong></p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/f5f7094e80318a4a26e6e053f8b546e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/0*Z-a8LkOuY26v5DBQ.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><strong class="bd jp">Pearson Correlation Coefficient = 0: Image by Author</strong></figcaption></figure><p id="107c" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">4.在下面的场景中，<strong class="kn ir"> X和Y </strong>值负相关，因为<strong class="kn ir"> X </strong>值增加，<strong class="kn ir"> Y </strong>值减少，但是所有点不在一条直线上。这意味着<strong class="kn ir">皮尔逊相关系数</strong>的值大于等于<strong class="kn ir"> -1并且</strong>小于等于<strong class="kn ir"> 0。</strong></p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/1c9d407a5e94781a2d4d633b841666c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/0*EfKilkPd--TN6Vch.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><strong class="bd jp">-1 ≤ Pearson Correlation Coefficient ≤ 0 : Image by Author</strong></figcaption></figure><p id="be97" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">5.在下面的场景中，<strong class="kn ir"> X和Y </strong>值正相关，随着<strong class="kn ir"> X </strong>值的增加，<strong class="kn ir"> Y </strong>值也增加，但是所有点不在一条直线上。这意味着<strong class="kn ir">皮尔逊相关系数</strong>的值大于等于<strong class="kn ir"> 0，而</strong>小于等于<strong class="kn ir"> 1。</strong></p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/9323b71cacfc27e6595e6aca4bd77dee.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/0*teEvEx8maXN_jJsw.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><strong class="bd jp">0≤ Pearson Correlation Coefficient ≤1 : Image by Author</strong></figcaption></figure><p id="d61a" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">既然我们已经讨论了我们可能拥有的不同场景和可能的值，让我们实际了解为什么要使用<strong class="kn ir">皮尔逊相关系数</strong>以及可以在哪里使用。</p><h1 id="ad82" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">相关系数的重要性</h1><p id="a7c3" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kn ir"> i .使用皮尔逊相关系数的特征选择</strong></p><p id="e0dd" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir">相关系数</strong>基本用于<strong class="kn ir">特征选择的情况。</strong>让我们看一个例子，看看它如何用于<strong class="kn ir">特征选择。</strong></p><p id="3cbd" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">让我们考虑两个变量，<strong class="kn ir"> X，y。</strong></p><p id="f53e" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir"> X </strong>是独立特征，<strong class="kn ir"> Y是数据集的</strong>结果变量/标签。假设我们发现<strong class="kn ir"> X和Y </strong>之间的相关性为1，这意味着当<strong class="kn ir"> X </strong>增加时，<strong class="kn ir"> Y </strong>也增加。</p><p id="d85d" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">我们也知道相关值是1，这意味着<strong class="kn ir"> X </strong>和<strong class="kn ir"> Y </strong>是相同的。因此，我们不能放弃一个功能，并对其应用机器学习算法。</p><p id="ef90" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">既然我们已经讨论了涉及<strong class="kn ir">皮尔逊相关系数</strong>的概念和不同场景，以及它对于<strong class="kn ir">特征选择</strong>的重要性，那么让我们继续讨论<strong class="kn ir">斯皮尔曼的等级相关系数</strong>以及它所针对的皮尔逊相关系数的局限性。</p><div class="nm nn gp gr no np"><a href="https://www.datadriveninvestor.com/2020/11/19/how-machine-learning-and-artificial-intelligence-changing-the-face-of-ecommerce/" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd ir gy z fp nu fr fs nv fu fw ip bi translated">机器学习和人工智能如何改变电子商务的面貌？|数据驱动…</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">电子商务开发公司，现在，整合先进的客户体验到一个新的水平…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od mm np"/></div></div></a></div><h1 id="0eb6" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">二。斯皮尔曼等级相关系数</h1><p id="07cb" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">假设我们有正相关的<strong class="kn ir"> X和Y </strong>值，并且随着<strong class="kn ir"> X </strong>值的增加，<strong class="kn ir"> Y </strong>值也增加，但是它们之间的关系是<strong class="kn ir">非线性的。</strong></p><p id="1639" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">下图显示的图表更好地说明了这一点:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/1f4a38a647f53598a0d2fcc7d09bcad1.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/0*shCRPuI0ZhPIwnW-.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><a class="ae of" href="https://en.wikipedia.org/wiki/Spearman%27s_rank_correlation_coefficient" rel="noopener ugc nofollow" target="_blank"><strong class="bd jp">Spearman’s Rank Correlation Coefficient</strong></a></figcaption></figure><p id="67c5" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在上图中，<strong class="kn ir"> X和Y </strong>正相关，但是如果我们对其应用<strong class="kn ir">皮尔逊相关</strong>，则值为<strong class="kn ir"> 0.88 </strong>并且<strong class="kn ir">斯皮尔曼相关</strong>给出的结果为<strong class="kn ir"> 1。</strong></p><p id="02b9" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">因此，当涉及到两个属性之间的非线性关系时，<strong class="kn ir">斯皮尔曼相关性</strong>比<strong class="kn ir">皮尔森相关性</strong>更有优势。</p><h2 id="58af" class="mz jo iq bd jp na nb dn jt nc nd dp jx kw ne nf kb la ng nh kf le ni nj kj nk bi translated">斯皮尔曼等级相关系数背后的概念</h2><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi og"><img src="../Images/a74eecc98560ae3c4699eb71c487f83e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/0*G7HiSWBaQEPk7zl7.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><strong class="bd jp">Formula- Spearman Rank Correlation Coefficient : Image by Author</strong></figcaption></figure><p id="b5fb" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">我们也可以将等式写成如下:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/cbe234d9a86017c5ca2ebf93c4bdbe15.png" data-original-src="https://miro.medium.com/v2/resize:fit:484/format:webp/0*IA3chMnv4I9LWT5d.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><strong class="bd jp">Alternate formula : Image by Author</strong></figcaption></figure><p id="fc07" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">这里，</p><ol class=""><li id="8784" class="lo lp iq kn b ko lj ks lk kw lq la lr le ls li lt lu lv lw bi translated"><strong class="kn ir"> ρ </strong>表示<strong class="kn ir">皮尔逊相关系数，</strong>应用于此处X和Y 的<strong class="kn ir">秩。</strong></li><li id="7dcb" class="lo lp iq kn b ko lx ks ly kw lz la ma le mb li lt lu lv lw bi translated"><strong class="kn ir"> cov(rgx，rgy) </strong>表示的<strong class="kn ir">协方差<strong class="kn ir"> X和Y的秩</strong></strong></li><li id="203a" class="lo lp iq kn b ko lx ks ly kw lz la ma le mb li lt lu lv lw bi translated"><strong class="kn ir"> σrgx，σrgy </strong>是<strong class="kn ir"> X和y的秩的标准差</strong></li></ol><h2 id="ab5b" class="mz jo iq bd jp na nb dn jt nc nd dp jx kw ne nf kb la ng nh kf le ni nj kj nk bi translated">使用Spearman等级相关系数查找相关性时的场景</h2><p id="369a" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在使用<strong class="kn ir"> Spearman等级相关系数</strong>方法寻找两个属性之间的相关性时，我们会遇到两种情况。</p><p id="9e15" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir">情况1 </strong>:当所有的等级都是不同的整数时，即等级中没有平局，我们可以使用下面的公式计算相关性:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/5276ea2832980333bc1710d79a875619.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*9DZgktFQrzlaX9WIx0PDfg.png"/></div></figure><p id="612b" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">其中，<strong class="kn ir"><em class="oj">di = rg(Xi)—rg(Yi)</em></strong>为<strong class="kn ir"> X与Y </strong>的秩之差，<strong class="kn ir"> n，</strong>为观测数。</p><p id="366e" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">这听起来有点抽象和复杂，但是相信我这不是。我们将举一个例子来更好地理解这个概念。</p><p id="5fb7" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir">示例–当排名中没有平局时</strong></p><p id="99b0" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">上面的公式是一种<strong class="kn ir">皮尔逊相关，</strong>唯一的区别是它应用于X和y的<strong class="kn ir">等级。</strong></p><p id="2e4e" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">让我们用下面的例子来理解等级。我们从维基百科中找到了这个例子。你也可以随意去那里看看。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi ok"><img src="../Images/359805fbdd2642b0b347b4aefb250d9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1bfYxIxgR8kXWxFYfA_hNA.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><strong class="bd jp">When there are no tie in the Ranks : Image by Author</strong></figcaption></figure><p id="21df" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">要应用<strong class="kn ir"> Spearman Rank </strong>公式，我们需要遵循以下步骤:</p><ol class=""><li id="f8b1" class="lo lp iq kn b ko lj ks lk kw lq la lr le ls li lt lu lv lw bi translated">对第一列的数据进行排序。</li><li id="2011" class="lo lp iq kn b ko lx ks ly kw lz la ma le mb li lt lu lv lw bi translated">创建一个单独的列<strong class="kn ir"> xi </strong>，为第一列的排序值分配等级—<strong class="kn ir">等级(xi) </strong>。</li><li id="371c" class="lo lp iq kn b ko lx ks ly kw lz la ma le mb li lt lu lv lw bi translated">类似地，创建一个单独的列<strong class="kn ir"> yi </strong>，并将等级分配给第二列的排序值- <strong class="kn ir"> Rank(yi) </strong></li><li id="b0a7" class="lo lp iq kn b ko lx ks ly kw lz la ma le mb li lt lu lv lw bi translated">现在，为两个等级列之间的差异创建一个列— <strong class="kn ir"> di </strong></li><li id="33d6" class="lo lp iq kn b ko lx ks ly kw lz la ma le mb li lt lu lv lw bi translated">最后，为两个等级列之间的差值的平方创建一个列。</li></ol><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi ol"><img src="../Images/62248a651bc298ed6e683214ce5e2f11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*enakL8dXUSSW5jmxtjmO_Q.png"/></div></div></figure><p id="4e30" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">正如你在上面看到的，队伍中没有平局。所以我们可以用下面的公式来找出相关性。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi om"><img src="../Images/d42e91600c66a8ce6aa92fa698b252f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:324/format:webp/0*SU6Pf2GPbZh6kYUD.png"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi on"><img src="../Images/a000bfe6d47116484a452050ac44ef2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:282/format:webp/0*MPOPa9dPXCDY18oV.png"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/1690359f70b84907ae1970716082e39a.png" data-original-src="https://miro.medium.com/v2/resize:fit:594/format:webp/1*QHP2bzP00KvTdBOeyz6BpQ.png"/></div></figure><h2 id="5537" class="mz jo iq bd jp na nb dn jt nc nd dp jx kw ne nf kb la ng nh kf le ni nj kj nk bi translated"><strong class="ak">从结果得出的结论</strong></h2><p id="5371" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">从上面的结果我们可以说，智商和每周看电视的时间是负相关的。由于这个值接近于零，我们可以说智商和每周看电视的时间(T21)之间的相关性非常低。结果的负值表明，每周看电视时间越长的人，智商越低。</p><p id="b757" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir">情况二</strong>:队伍中有平局时。让我们举个例子来更好地理解这一点:</p><p id="5b4b" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">假设我们有以下记录，如下表所示:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi op"><img src="../Images/d33f4475570b606ea442ea647fec74df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3ToBp2tHaHsAkz0IKrB-Lw.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><strong class="bd jp">When there are tie in the ranks : Image by Author</strong></figcaption></figure><p id="c172" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">现在，要找到Spearman相关性，我们需要遵循以下步骤:</p><p id="da51" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir"> 1 </strong>。对第一列的数据进行排序。</p><p id="068e" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir"> 2 </strong>。创建一个单独的列<strong class="kn ir"> xi </strong>，为第一列的排序值分配等级—<strong class="kn ir">等级(xi) </strong>。我们可以按照<strong class="kn ir"> X和y的值的升序或降序开始排序。</strong></p><p id="4c38" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir"> 3 </strong>。现在，如果第一列中的值具有相同的值，则取2个相同值的位置/索引值，并除以具有相同值的记录的计数。</p><p id="a414" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">《出埃及记》，列<strong class="kn ir"> X </strong>中有2个位置，具有相同的值30。假设那两个30的位置分别是1号和2号。</p><p id="f253" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">秩将是(1+2)/2，等于1.5。因此，我们将为30的两个等级值分配1.5。对于<strong class="kn ir"> Y </strong>中的值，也将遵循这种方法。</p><p id="c791" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir"> 4 </strong>。那么对于下一个元素，等级将是它的实际位置/索引值。如果它有并列排名，那么我们将再次从第三步开始。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi oq"><img src="../Images/cd15ffff369e903cfedaa02a368e65a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PvvFoXGpMG2zP_00yGLlyA.png"/></div></div></figure><p id="6091" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">我们将使用下面的公式来计算相关系数。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi or"><img src="../Images/5616ad3363d58b4568e05312359e1276.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/0*ObaQUstVTKCioBXl.png"/></div></figure><p id="293f" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在上面的等式中，</p><p id="d0b7" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">1.<strong class="kn ir"> m </strong>表示特定数字重复出现的次数。</p><p id="0bde" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">举例。，30在列<strong class="kn ir"> X </strong>中重复两次，因此(m3 — m)将是(23–2)= 6</p><p id="2d5e" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">类似地，23在列<strong class="kn ir"> X </strong>中重复两次，所以(m3-m)将是(23–2)= 6</p><p id="fd00" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">我们将重复这个过程，重复的次数与相同的数字一样多。</p><p id="c364" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">2.<strong class="kn ir"> N </strong>表示记录的数量。</p><p id="d9de" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">让我们通过将这些值代入上述公式来解决上述问题:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi os"><img src="../Images/2b04b31a991ce32f2db343c1dea74627.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/0*uPjhyFo53v8Up6X4.png"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/74dbd03fa8a54eac7f2ee185d3f033d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:466/format:webp/0*gDJfPua_2R2r2V3O.png"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/814c38074467e80336d36f022018e033.png" data-original-src="https://miro.medium.com/v2/resize:fit:550/format:webp/0*dv0xALroOsUSWSnV.png"/></div></figure><h2 id="84de" class="mz jo iq bd jp na nb dn jt nc nd dp jx kw ne nf kb la ng nh kf le ni nj kj nk bi translated"><strong class="ak">从结果得出的结论</strong></h2><p id="93c9" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">从上面的结果我们可以说属性<strong class="kn ir"> X </strong>和<strong class="kn ir"> Y </strong>都是负相关的。并且当值接近于<strong class="kn ir">零时，</strong>我们可以说<strong class="kn ir"> X </strong>和<strong class="kn ir"> Y </strong>之间的相关性非常低。结果的负值表明，对于那些具有较高Y值的人来说，X值较低。</p><p id="6f1f" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir">访问专家视图— </strong> <a class="ae of" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank"> <strong class="kn ir">订阅DDI英特尔</strong> </a></p></div></div>    
</body>
</html>