<html>
<head>
<title>3 Missing Data Types and the suggestion to handle it</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">3种缺失的数据类型及处理建议</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/3-missing-data-types-and-the-suggestion-to-handle-it-75eb10bfdf3b?source=collection_archive---------4-----------------------#2021-01-31">https://medium.datadriveninvestor.com/3-missing-data-types-and-the-suggestion-to-handle-it-75eb10bfdf3b?source=collection_archive---------4-----------------------#2021-01-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1abc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">知道关于丢失的数据应该知道什么</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b80bb6f0c43949751ebb0a8b66096093.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZB4D044TVAsOxIHa"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@lunarts?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Volodymyr Hryshchenko</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c7d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在数据清理和探索过程中，我相信每个人都会同意经常会遇到缺失数据。此外，我通常会从人们那里得到“我应该如何处理丢失的数据？”。对于这个问题，让我们定义缺失数据和缺失数据分类。</p><h1 id="a9e7" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak">缺失数据</strong></h1><p id="21d2" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在统计学中，缺失数据是指变量或观测值中不存在数据值的情况。它不同于“无”或“无”或其他任何类别，表明该数据属于某个类别。丢失的数据只是丢失，没有价值。</p><p id="7792" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">缺失数据可以根据缺失原因进行分类，它们是:</p><ol class=""><li id="8090" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated"><strong class="lb iu">完全随机地失踪(MCAR)。</strong>这是导致任何特定数据项丢失的事件相互独立的地方。与任何可观察的项目或其他变量无关。它随机发生，没有任何模式。MCAR的伟大之处在于，分析总是不带偏见的，但很少有MCAR的案例。</li><li id="55d2" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><strong class="lb iu">随意失踪(MAR)。</strong>这是指缺失数据不是随机的，但缺失数据可能与其他变量或观察值有关。比如有一个问题“你生病了吗？如果是，请说明你的症状”。如果我对这个问题回答是，那么症状的数据就会出现；因此，如果我说不，那么症状的数据将会丢失，因为我们没有填写这些数据。这就是为什么缺失数据被归类为随机缺失<strong class="lb iu">的原因，因为它与其他变量相关。</strong></li><li id="4fc1" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><strong class="lb iu">不随意遗漏(MNAR)。</strong>这里缺失的数据既不是马尔也不是MCAR。原因可能是受一些假设值的影响(年轻人出于安全原因往往不填写电话号码)或间接受其他变量值的影响(主管不太可能填写薪水列，这里缺少的值与职业值有关)。MNAR的缺失与缺失的内容特别相关，MNAR数据案例通常很难解决。它需要领域知识和对数据的深入理解，以获得一个无偏的参数。</li></ol><p id="8e7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我经常问，“你会怎么处理丢失的数据？”对于数据科学新手来说，大多数时候，他们的答案是“删除数据”虽然这样做没有错，但这取决于丢失数据的原因。</p><p id="acea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<strong class="lb iu"> MNAR </strong>条件下删除缺失数据可能导致偏差，而在<strong class="lb iu"> MCAR </strong>条件下删除缺失数据将是安全的。毕竟真的要看病情。</p><p id="caec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，如何处理丢失的数据呢？移除还是插补？让我们看看我们能做的一些方法。</p><h1 id="feaa" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak">删除</strong></h1><h2 id="4f72" class="ng lw it bd lx nh ni dn mb nj nk dp mf li nl nm mh lm nn no mj lq np nq ml nr bi translated">1.列表式删除(完整案例分析)</h2><p id="c6c8" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">到目前为止，这是最简单的方法，许多人都使用它。您需要做的是<strong class="lb iu">删除包含丢失数据</strong>的行。</p><p id="4b65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果有足够大的样本，其中功率不是问题，并且满足MCAR假设，则列表式删除是安全的；然而，当没有大样本或者MCAR的假设不满足时。列表式删除不是最佳策略。在这种情况下，你也会引入偏见。</p><h2 id="d9dd" class="ng lw it bd lx nh ni dn mb nj nk dp mf li nl nm mh lm nn no mj lq np nq ml nr bi translated"><strong class="ak"> 2。丢弃变量</strong></h2><p id="f407" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果变量中缺少太多数据，删除变量是另一个可行的选择；然而，我认为保留数据比丢弃数据好得多。为什么？因为你还是要看看我们处理的是什么样的缺失数据。取决于我上面解释的分类；如果分类正确，缺失数据本身就是数据。</p><p id="ef86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我看来，插补是比删除数据好得多的方法。</p><h1 id="3195" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak">插补</strong></h1><h2 id="561c" class="ng lw it bd lx nh ni dn mb nj nk dp mf li nl nm mh lm nn no mj lq np nq ml nr bi translated"><strong class="ak"> 1。经典方式:均值、中值或众数</strong></h2><p id="3291" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这是填充缺失数据的基本统计方法；基本上，您使用变量的平均值、中值或众数来填充缺失的数据<strong class="lb iu">。它填充数据，假设丢失的数据将跟随变量最频繁的数据。</strong></p><p id="0233" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有一种方法，您可以根据另一个变量填充缺失的变量，例如，在下表中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/59c47ec72cb5efd2a49c9d376b042d58.png" data-original-src="https://miro.medium.com/v2/resize:fit:364/format:webp/1*BCMTkqSrErX34GL_WwczVA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Image created by Author</figcaption></figure><p id="44db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">年龄变量中有缺失的数据，我们想填充它。我们可以用<strong class="lb iu">年龄代表男性</strong>，而不是年龄的平均值。</p><p id="5f2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种方法的缺点是，当我们自己获取数据时，我们会减少变量内的方差。</p><h2 id="6ebd" class="ng lw it bd lx nh ni dn mb nj nk dp mf li nl nm mh lm nn no mj lq np nq ml nr bi translated"><strong class="ak"> 2。经典方式:零或定值</strong></h2><p id="63c4" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">填充缺失值的另一种方法是用0或某个常数填充它。它适用于分类变量，但遗憾的是，如果你将它用于数值变量，就会引入很多偏差。</p><h2 id="d395" class="ng lw it bd lx nh ni dn mb nj nk dp mf li nl nm mh lm nn no mj lq np nq ml nr bi translated">3.基于机器学习的K-NN</h2><p id="bb54" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">基于机器学习，有许多方法可以估算缺失值，但我将只讨论K-NN。K-NN或<em class="nt"> k-nearest-neighbors </em>是一种用于简单分类的算法，通过使用<strong class="lb iu">特征相似度</strong>来预测任何新数据点的值。预测来自新数据点与训练数据的接近程度。</p><p id="872a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">K-NN方法需要选择最近邻的数量和距离度量。我们将K设置为整数，并基于变量设置适当的距离度量。</p><p id="7398" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">距离度量，例如:<br/> 1。<strong class="lb iu">连续数据</strong>:常用的有欧几里德、曼哈顿、余弦<br/> 2。<strong class="lb iu">分类数据</strong>:汉明距离</p><h2 id="128c" class="ng lw it bd lx nh ni dn mb nj nk dp mf li nl nm mh lm nn no mj lq np nq ml nr bi translated">4.<strong class="ak">小鼠(通过链式方程进行多变量插补)</strong></h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/2f55f2974e258dab91cf3b356cf83bf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_xc--BpekwW5_5UZ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><a class="ae ky" href="http://www.stefvanbuuren.nl/publications/mice%20in%20r%20-%20draft.pdf" rel="noopener ugc nofollow" target="_blank">MICE Imputation method</a></figcaption></figure><p id="39b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种插补的工作原理是使用多重插补(MIs)概念多次填充缺失数据。多重插补优于单一插补，因为它能更好地衡量缺失值的不确定性。关于算法的更多信息，你可以查看R <a class="ae ky" href="https://www.jstatsoft.org/article/view/v045i03/v45i03.pdf" rel="noopener ugc nofollow" target="_blank">的研究论文</a></p><p id="eeb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过一个数据集例子来测试这个方法。如果您没有<code class="fe nv nw nx ny b">impyute</code>模块，您应该先安装它。</p><pre class="kj kk kl km gt nz ny oa ob aw oc bi"><span id="9cb6" class="ng lw it ny b gy od oe l of og">pip install impyute</span><span id="9a77" class="ng lw it ny b gy oh oe l of og">from impyute.imputation.cs import mice<br/>import seaborn as sns</span><span id="931f" class="ng lw it ny b gy oh oe l of og">mpg = sns.load_dataset('mpg')<br/>mpg.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/08320fd4dd99698e926a2942df41789a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dv5YYbxecKKXT549VaAZpA.png"/></div></div></figure><p id="e4e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我们拥有的mpg数据集；如果我们进一步检查，“马力”变量包含缺失的数据。</p><pre class="kj kk kl km gt nz ny oa ob aw oc bi"><span id="891b" class="ng lw it ny b gy od oe l of og">mpg[mpg['horsepower'].isna()]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/336963302f20d5c139dfd423ede3445c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bUrWeklKY9i_-YFKs16qzQ.png"/></div></div></figure><p id="fb6d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们可能希望通过使用马力和重量信息来填充缺失的数据，因为它们是相关的。</p><pre class="kj kk kl km gt nz ny oa ob aw oc bi"><span id="953d" class="ng lw it ny b gy od oe l of og"># start the MICE training<br/>imputed_training=mice(mpg[['horsepower', 'weight']].values)</span><span id="4019" class="ng lw it ny b gy oh oe l of og">mpg['horsepower'] = imputed_training[:, 0]</span></pre><p id="bd25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成后，您可以再次检查缺失的数据，它肯定会由MICE填充。</p></div><div class="ab cl ok ol hx om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="im in io ip iq"><h1 id="a41f" class="lv lw it bd lx ly or ma mb mc os me mf jz ot ka mh kc ou kd mj kf ov kg ml mm bi translated"><strong class="ak">结论</strong></h1><p id="35d9" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">有三种缺失数据:</p><ol class=""><li id="6291" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated"><strong class="lb iu">完全随机缺失(MCAR)，</strong></li><li id="bac4" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><strong class="lb iu">随机缺失(三月)，</strong></li><li id="e0c5" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><strong class="lb iu">非随机缺失(MNAR)，</strong></li></ol><p id="1d3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你如何填充缺失数据取决于缺失数据的分类和你想要的权衡。</p><p id="fe6c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">希望有帮助！</p></div><div class="ab cl ok ol hx om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="im in io ip iq"><h1 id="4e10" class="lv lw it bd lx ly or ma mb mc os me mf jz ot ka mh kc ou kd mj kf ov kg ml mm bi translated">如果您喜欢我的内容，并希望获得更多关于数据或数据科学家日常生活的深入知识，请考虑在此订阅我的<a class="ae ky" href="https://cornellius.substack.com/welcome" rel="noopener ugc nofollow" target="_blank">简讯。</a></h1><blockquote class="ow"><p id="33d4" class="ox oy it bd oz pa pb pc pd pe pf lu dk translated">如果您没有订阅为中等会员，请考虑通过<a class="ae ky" href="https://cornelliusyudhawijaya.medium.com/membership" rel="noopener">我的推荐</a>订阅。</p></blockquote></div></div>    
</body>
</html>