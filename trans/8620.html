<html>
<head>
<title>Time Series Analysis : Must to Learn to Become Data Scientist</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">时间序列分析:必须学会成为数据科学家</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/time-series-analysis-c22fc9da8b63?source=collection_archive---------1-----------------------#2021-01-16">https://medium.datadriveninvestor.com/time-series-analysis-c22fc9da8b63?source=collection_archive---------1-----------------------#2021-01-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7f03" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">任何数据科学家都需要学习的另一点</h2></div><p id="a8dc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi le translated">ime系列是可以适用于任何与事务相关的问题陈述的例子之一。因此，时间序列分析是一个时髦的词，必须学习和挑战，以理解解决。总结时间序列问题已经成为ML工程师或数据科学家的主要任务。著名的用例有现金流分析&amp;预测、股票市场、天气和电力需求预测等。简而言之，只要我们能发现季节性或随机变化，我们就可以肯定地把它作为时间序列分析来得出结论。在这里，我将通过四种技术来处理时间序列数据。第五，增加预测模型，区分不同的预测方法。这完全是关于问题陈述和所用方法的适当性。</p><blockquote class="ln"><p id="2531" class="lo lp it bd lq lr ls lt lu lv lw ld dk translated">时间序列:对特定变量按时间顺序排列的观察结果</p></blockquote><figure class="ly lz ma mb mc md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi lx"><img src="../Images/57710032b23d9885d19284062876ac78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aR0b6eNIaQc_UmnD6T1G-g.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Example of Data Set</figcaption></figure><h1 id="e3ff" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">介绍</h1><p id="2a93" class="pw-post-body-paragraph ki kj it kk b kl ng ju kn ko nh jx kq kr ni kt ku kv nj kx ky kz nk lb lc ld im bi translated">在这里，我将举一个价格变化的例子来分析，然后预测未来的价格变化。理解很简单，学习给定的数据找到模式，并在此基础上，做出未来的预测。</p><blockquote class="nl nm nn"><p id="beaf" class="ki kj no kk b kl km ju kn ko kp jx kq np ks kt ku nq kw kx ky nr la lb lc ld im bi translated">简而言之，时间序列意味着按照日期组织的数据集序列。例如，每日交易和使用情况可以按时间进行分析，即每小时、每天、每周、每月。</p></blockquote><p id="418f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">时间序列数据在数据和时间上被索引。现有的预测方法有ARIMA、指数平滑、分解、时间序列回归等。我们可以分别深入研究这些方法，因为一个博客不适合那些最常用和最受欢迎的方法。在预测方法中，ARIMA模型和指数平滑模型被认为是预测时间序列最常用的选择。</p><p id="f103" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有了目前为止的所有了解，我希望你能预测并关联这一点，以解决各自行业中的问题。</p><p id="640e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了进行正确的分析和预测，通常，我们需要准备数据，包括:转换、寻找缺失值、离群值、可视化等。这将有助于直接分析数据质量。在这里，我将以石油价格数据集为例进行更好的理解。</p><blockquote class="nl nm nn"><p id="1cd2" class="ki kj no kk b kl km ju kn ko kp jx kq np ks kt ku nq kw kx ky nr la lb lc ld im bi translated">使用案例:预测广泛的行业，如商品价格(石油)，股票价格，电力需求，天气状况等。</p></blockquote><p id="5f8e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">时间序列的组成部分有:趋势、周期、季节变化和不规则波动。</p><h1 id="4cd9" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated"><strong class="ak">数据可视化</strong></h1><p id="e5e4" class="pw-post-body-paragraph ki kj it kk b kl ng ju kn ko nh jx kq kr ni kt ku kv nj kx ky kz nk lb lc ld im bi translated">可视化是最有吸引力的初始分析技术之一。在我看来，它应该是每个分析的一部分，作为理解数据的第一步。事实上，这将有助于在时间序列数据集方面为我们提供离散和清晰的数据模式。如果使用正确的可视化技术，可以很容易地判断趋势和模式。</p><h2 id="848f" class="ns mp it bd mq nt nu dn mu nv nw dp my kr nx ny na kv nz oa nc kz ob oc ne od bi translated">数据概述</h2><p id="9709" class="pw-post-body-paragraph ki kj it kk b kl ng ju kn ko nh jx kq kr ni kt ku kv nj kx ky kz nk lb lc ld im bi translated">作为pythonic式的，我只是加载数据并对其进行描述，以便对数据有初步的了解:</p><figure class="of og oh oi gt md gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/17e0b034d9266b83421e5c0e40208eb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*oSfWZG9aWNhRnPh1qn_gHA.png"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Simplest dataset for Understanding</figcaption></figure><p id="74cc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该数据具有一些季节性趋势/模式，这在时间序列数据中很常见。很明显，任何物品的价格在这段时间内都在上涨，我们应该会在数据中发现上涨的趋势。我在应该看得见的地方举了油的例子。如果没有上升趋势，那么我会说数据是不真实的。而且，可视化将有助于通过把你的数据放在图表上给你这个样子。更复杂的数据集可能需要更深入的分析，并更改可视化的时间范围。</p><p id="dad7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">毫无疑问，我们可以观察到数据中的一些起伏。如果再深入一点，搞清楚时间范围，就会意识到应该是经济衰退、突发状况或者一些全球性问题的时间段。数据的可视化能让你得出结论，并发现正在发生的其他情况的深度，这难道不是很有用吗？</p><figure class="of og oh oi gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi oj"><img src="../Images/5957ac02e8e8d41d04d382a8fb5db554.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BF8hMi3vUdS6FrqS"/></div></div></figure><figure class="of og oh oi gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi ok"><img src="../Images/803ce797811ea2dd364329b7a02c59f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*b_Y4sw0gHfo36v-I"/></div></div></figure><h2 id="ae1f" class="ns mp it bd mq nt nu dn mu nv nw dp my kr nx ny na kv nz oa nc kz ob oc ne od bi translated">对方法的基本理解</h2><h2 id="91cf" class="ns mp it bd mq nt nu dn mu nv nw dp my kr nx ny na kv nz oa nc kz ob oc ne od bi translated"><strong class="ak">指数平滑</strong></h2><p id="14b4" class="pw-post-body-paragraph ki kj it kk b kl ng ju kn ko nh jx kq kr ni kt ku kv nj kx ky kz nk lb lc ld im bi translated">指数平滑是一种单变量数据的时间序列预测方法。当趋势/季节因素随时间变化时，这是最有效的。这与下面描述的分解沉积方法相反。这类似于预测是过去观测值的加权和，但是模型明确地对过去的观测值使用指数递减的权重。</p><p id="ceb3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">指数平滑有多种类型:单指数平滑、双指数平滑和三指数平滑。此外，还有多种平滑技术，如</p><h2 id="9374" class="ns mp it bd mq nt nu dn mu nv nw dp my kr nx ny na kv nz oa nc kz ob oc ne od bi translated"><strong class="ak"> ARIMA </strong></h2><p id="8ec6" class="pw-post-body-paragraph ki kj it kk b kl ng ju kn ko nh jx kq kr ni kt ku kv nj kx ky kz nk lb lc ld im bi translated">ARIMA是时间序列预测最常用的方法之一。它代表自回归综合移动平均线。它高度依赖于数据中的<em class="no">自相关</em>模式。ARIMA使用的三个参数与分解方法相同:季节性、趋势和数据中的噪声。</p><blockquote class="nl nm nn"><p id="b33d" class="ki kj no kk b kl km ju kn ko kp jx kq np ks kt ku nq kw kx ky nr la lb lc ld im bi translated">由于误差序列中的移动平均，模型被定义为移动平均(MA)。</p></blockquote><p id="bff5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">p(季节性):模型中包含的滞后观测值的数量，也称为滞后阶数。</p><p id="f9a6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">d(噪声):原始观测值有差异的次数，也称为差异度。</p><p id="98ef" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">q(趋势):均线窗口的大小，也叫均线的顺序<strong class="kk iu">。</strong></p><figure class="of og oh oi gt md gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/94787ccf6f741e73615f1a6b20892d65.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/0*qGwcntNVTc5dfF8e"/></div></figure><h2 id="7307" class="ns mp it bd mq nt nu dn mu nv nw dp my kr nx ny na kv nz oa nc kz ob oc ne od bi translated"><strong class="ak">分解方法</strong></h2><p id="b501" class="pw-post-body-paragraph ki kj it kk b kl ng ju kn ko nh jx kq kr ni kt ku kv nj kx ky kz nk lb lc ld im bi translated">这种方法用于根据没有特定趋势和季节影响的数据进行预测。它可以被称为<em class="no">直观</em>方法，在描述参数不随时间变化时非常有用。为了理解，让我们使用分解方法来实现数据的可视化。它允许我们将时间序列数据分解为三个主要部分:趋势、季节性和噪声。</p><blockquote class="nl nm nn"><p id="99d8" class="ki kj no kk b kl km ju kn ko kp jx kq np ks kt ku nq kw kx ky nr la lb lc ld im bi translated">在我的例子中，使用了python中statsmodels库的季节性分解函数</p></blockquote><figure class="of og oh oi gt md gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/f9939cfde221b61a8b51324ae6945074.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*_ibway5qmdoGzFQdwKJ3Qg.png"/></div></figure><p id="65aa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">根据分解，看起来趋势是向上移动。在缓慢增长之后，它以很快的速度增长并达到最高值。</p><p id="b5e9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了稳定数据和去除趋势，我们应用了一种原始的方法，该方法在于回归由STL分解给出的趋势。</p><figure class="of og oh oi gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi om"><img src="../Images/2f2d7375a5fe6e4a9395bfc8fe9f2e39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cTB_X_hUvcuOkpWP"/></div></div></figure><p id="7fcc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">回归的r平方系数不是很好，即0.511。与此同时，残差也呈现出方差。这似乎不是一个好的模型，而且这个模型中缺少了一些东西。</p><h2 id="1fb6" class="ns mp it bd mq nt nu dn mu nv nw dp my kr nx ny na kv nz oa nc kz ob oc ne od bi translated">脸书的FBprophet </h2><p id="721e" class="pw-post-body-paragraph ki kj it kk b kl ng ju kn ko nh jx kq kr ni kt ku kv nj kx ky kz nk lb lc ld im bi translated">脸书发布了“Prophet”，它利用基于贝叶斯的曲线拟合方法来预测时间序列数据。Prophet很酷的一点是，它不需要太多预测时间序列数据的先验知识或经验，因为它会自动发现数据背后的季节性趋势，并提供一组“易于理解”的参数。</p><blockquote class="nl nm nn"><p id="c310" class="ki kj no kk b kl km ju kn ko kp jx kq np ks kt ku nq kw kx ky nr la lb lc ld im bi translated">Fbprophet是一个加法回归模型，针对非线性时间序列预测，由脸书开发[Sean J和Benjamin，2017]。Fbprophet通过将给定的时间序列分解成三个不同的部分来运行，这三个部分被称为“趋势”、“季节性”和“假日”，并且包括如下式所示的误差项，</p></blockquote><p id="df49" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">y(t) = g(t) + s(t) + h(t) +ε t</p><p id="b991" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">其中g(t)是趋势，s(t)是周期性变化，h(t)是季节性效应，ε是参数假设。结果是一个模型，是稳健的短期时间序列和观察点的随机性。</p><figure class="of og oh oi gt md gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/28e15ad5557f141e6141cc2b102f16e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*ZhES5VXHQ6lc6z6IKVJxkQ.png"/></div></figure><p id="66e9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">上图说明了未来12个月的预测。根据图表，看起来它很好地代表了数据，并且在所有应用的方法中具有最好的准确性。</p><figure class="of og oh oi gt md gh gi paragraph-image"><div class="gh gi on"><img src="../Images/253037a039b8df1d1afca5f8c5b0704f.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*EgkYikjmH5n0oesS-GjSbg.png"/></div></figure></div><div class="ab cl oo op hx oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="im in io ip iq"><p id="8b18" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">分解模型有助于理解时间序列的各个组成部分。正如我们所看到的，在1999年之前的几年中，这一趋势显示出非常缓慢的增长，然后价格开始呈现出急剧上升的趋势。此外，季节性因素清楚地表明数据具有季节性模式。这种方法有助于我们理解时间序列数据中的趋势和季节性。</p><p id="e112" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">总结:对于本例中的石油数据，FBprophet模型给出了模型与数据的更好拟合。从FB propfet模型中可以看到一些不规则的数据点，这些数据点超出了上下置信范围。这些异常数据点很可能是由于各种不可预测的情况导致的数据的不规则波动。FB Prohet将是最优选的，其次是分解方法，因为数据具有显著的不规则性和季节性成分。通过分解可以去除不规则成分，结合趋势和季节成分可以做出更好的预测。</p><h2 id="ff6f" class="ns mp it bd mq nt nu dn mu nv nw dp my kr nx ny na kv nz oa nc kz ob oc ne od bi translated"><strong class="ak">结论</strong></h2><p id="d7da" class="pw-post-body-paragraph ki kj it kk b kl ng ju kn ko nh jx kq kr ni kt ku kv nj kx ky kz nk lb lc ld im bi translated">首要目标应该是理解、分析和可视化数据流。其次，数据可以表示为时间序列数据。其他目标应该是应用这些数据来生成预测模型。这里，我们理解了4种方法，任何方法都可以应用于时间序列数据。我们必须根据给定的数据集来判断哪种方法有效。最后，首要目标应该是分析每种方法的预测和性能，并提出最佳方法。借助可视化和MSE(均方误差)方法来评估模型及其预测，有办法找到最佳方法。</p><p id="fca8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这不像只有时间序列特定模型可以用于时间序列数据。如果你看到，数据看起来很适合应用回归模型和RNN。这取决于问题陈述和应用效果更好的方法。</p><p id="3b92" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">总的来说，所有方法都能够预测和确定给定数据的移动趋势。目标应该始终是理解数据和改进预测。神经网络模型可以应用于数据，以比较预测，并与现有的时间序列预测方法一起改进结果。希望对编码同样有帮助。<strong class="kk iu">快乐学习编码！</strong></p></div></div>    
</body>
</html>