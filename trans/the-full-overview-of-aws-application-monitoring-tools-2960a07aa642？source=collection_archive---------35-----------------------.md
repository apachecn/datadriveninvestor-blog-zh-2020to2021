# AWS 应用程序监控工具的完整概述

> 原文：<https://medium.datadriveninvestor.com/the-full-overview-of-aws-application-monitoring-tools-2960a07aa642?source=collection_archive---------35----------------------->

将他们的[应用程序部署在云](https://jelvix.com/blog/cloud-service-models)上、使用第三方数据存储、依赖供应商计算能力的团队必须理解监控的重要性。由于在大多数基础设施中，团队按使用付费，AWS 应用程序监控有助于控制开支。

不仅如此，还有[安全问题](https://jelvix.com/blog/database-security)要讨论。您将信息委托给第三方基础设施，您必须确保安全算法已经以正确的方式集成。

# 为什么在 AWS 中需要监控？

![](img/c9f93d38ac6e354e47598e0a0a31a8f5.png)

毫无疑问，Amazon Web Services 被誉为最安全、最可用的基础设施之一。然而，选择错误的技术组合、错误的定制或者在前端站点上遇到问题总是有风险的。AWS 可能是久经考验的，但它也非常复杂。

**监控让您确保:**

*   用户可以全天候访问您的软件；
*   即使很小的停机时间和安全问题也会被记录下来；
*   性能和成本被跟踪，可以及时编辑；
*   你对如何改变技术堆栈或开发/测试方法有分析和见解。

由于 AWS 提供了许多特性和附加组件，在没有专业工具的情况下使用它们可能会令人困惑。使用智能仪器，您还可以改善工作流程。

# 在 AWS 中监视什么？

AWS 监控服务跨越许多方面和领域，这取决于项目和您所在行业的复杂程度。然而，在任何情况下都必须控制几个通用指标。

## CPU 利用率

用于控制 [EC2 引擎](https://aws.amazon.com/ec2/)的工具执行一个关于 CPU 消耗量、AWS 信用数量和每个实例价值的报告。团队可以跟踪他们的 CPU 消耗、成本，并停止使用过多资源的实例。

![](img/5e22b963ced7762c1e7e797356736423.png)

## 网络利用率

监控使用的网络使团队能够保持一致的性能并节省成本。您可以为每个 [EC2 实例](https://aws.amazon.com/ru/ec2/instance-types/)设置限制，允许它们越过特定的阈值。您可以跟踪一个实例在给定时间段内需要多少网络以及它的执行速度。效率和速度都是非常重要的指标。

## 磁盘性能

Amazon AWS 提供几种不同范围、性能和价格的磁盘卷。主要区别在于 [SSD 和基于 HDD 的](https://www.pcmag.com/news/ssd-vs-hdd-whats-the-difference)卷。SDD 容积优先考虑渗漏和小重量，并且对于小操作工作良好。HDD 磁盘用于长时间处理大型操作。

AWS 磁盘的性能受工作负载、实例和 I/O 配置的影响。对于每个实例，您可以设置磁盘卷消耗的阈值，并调整卷分布的速度。

## 磁盘读/写

![](img/06885121472ad406908f7683aa1bcad4.png)

您可以确认所有使用的 EBS 卷上的操作状态。Amazon 支持对读写操作的监控。您可以手动计算平均 I/O，如[官方文档](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/viewing_metrics_with_cloudwatch.html)中所述，或者安装第三方工具。

## 内存利用率

官方 AWS 工具允许跟踪每个实例的内存使用情况，获取所有收集的指标和日志的更新。您可以看到您的团队在 AWS 上存储的文档数量及其位置，还可以跟踪当前内存负载的成本。

# 自动气象站监控软件的类型

官方和第三方工具对 AWS 监控采取不同的方法。有些提供了易于解释的见解，而有些则需要额外的手动计算。这基本上是自动气象站监测的两种主要类型。

## 自动化监控

自动监控工具是默认启用的工具，无论开发人员是否使用它们。你不必“记住”跟踪这些仪器，它们会在检测到异常情况时通知你。

**自动气象站监测的主要优势:**

**您可以跟踪您的**软件性能、数据消耗、CPU 统计等。，而不积极参与监控过程。一旦阈值被突破，AWS 就会发送通知；

**无需执行额外的计算**。一些 AWS 的度量标准需要定制(您需要根据实例数量、月份等来划分值。).自动化工具提供了现成的更新；

**简单定制**。自动化工具很大程度上是由基础设施本身建立的。您可以根据自己的需要配置它们，但即使使用默认设置，它们也很好用。

总的来说，团队绝对应该投资于[自动化 AWS 工具](https://aws.amazon.com/ru/blogs/infrastructure-and-automation/category/infrastructure-automation/)。当你忙于其他优先事项时，他们会让你了解情况——你不必担心忘记监控活动。如果您没有自动化 AWS 仪器，您将面临人为失误。

![](img/39f7967c1a793c4bb94c8844762e9fb8.png)

## 人工监控

显然，自动地和默认地测量复杂的指标更加困难。有些工具需要用户主动参与和定制。手动监控通常更便宜、更精确，并且提供更深入的见解。

**人工监控的优势:**

*   在你的控制下:用户有很多配置选项；
*   精确:你可以指定你想要什么样的见解，以及如何让它们被传递；
*   更便宜:手动工具(尤其是第三方工具)比自动化解决方案成本更低。

然而，有一个巨大的缺点——您可能会忘记使用或配置手动工具。团队最终会跳过关键的安全威胁或可用性问题。

# 自动 AWS 性能监控工具

对于许多团队来说，接近 AWS 监控时的第一直觉是寻找第三方平台和仪器。诚然，AWS 的默认工具往往要么过于简单，要么过于复杂。然而，在我们看来，你不能忽视官方的 AWS 监控工具——它们为其他集成奠定了基础。

让我们来看看至关重要的 AWS 自动化监控工具——在我们看来，这些工具不容忽视。

## 系统状态检查

这是监控 AWS 软件最简单的[方式](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/monitoring-system-instance-status-check.html)。目的是确保所有实例都能顺利工作，并且可供最终用户使用。这些问题会被自动检测出来，并传达给 AWS 官方团队。

虽然你可以等待官方团队来解决这个问题，但有些问题在你这边很容易解决。用户可以替换一个实例，改变它的配置，或者一起重启它——这是处理状态错误的一种简单而有效的方法。

## 实例状态检查

这个 [AWS 指标](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/monitoring-system-instance-status-check.html)与前一个相似；然而，它没有查看整个系统，而是探索了一个实例。这是一个更深入的分析，因为在一般分析过程中，某些问题可能无法检测出来。

在这里，大多数问题都可以在用户端解决——系统会为你提供指导。任务通常很简单，如编辑设置或确保某些操作系统配置。

此指标检测损坏的存储、内存问题、错误的硬件或网络设置、内核问题等。

## 亚马逊云手表警报

这个工具允许开发人员自动运行一个特定的指标，或者相互比较几个方面。您可以查看不同月份的 CPU 消耗，或者，例如，请求关于负模式的报告。AWS 也可以检测你是否比平时有更多的内存问题。

[Amazon CloudWatch](https://aws.amazon.com/cloudwatch/) 警报提供关于功能状态的高级见解，并在给定时间段内进行比较。这是一个有用的工具，可以用来了解软件状态随着时间的推移发展了多少。

![](img/54b99fe3818a492fac09c086d24c2c30.png)

## 亚马逊云观察活动

如果你的团队更喜欢自动化的监控方法而不是手动的，你可以使用[事件](https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/WhatIsCloudWatchEvents.html)来对一个特定的系统变化做出响应。新的状态被视为一个事件，因此团队的工作是规划一个响应。您只需做一次，AWS 就会定期执行该操作。我们喜欢编写非常具体的条件和规则的可能性，因为系统故障通常取决于上下文。

## 亚马逊云观察日志

这个[工具](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html)允许用户在一个地方管理他们所有的日志和统计数据。所有应用程序、技术和监控服务以及系统的数据都存储在这里。您可以设置关键模式、过滤器、分析标准和条件。就像在 CloudWatch 事件中一样，团队可以设置条件、计算、制作仪表板和定义约束。

## 云监控代理

如果您想要收集关于您的跨不同操作系统的实例的深入技术见解，我们建议使用 [CloudWatchAgent](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/install-CloudWatch-Agent-on-EC2-Instance.html) 。这是一个软件，它分析你的云和混合服务，按照指定的标准运行它们，并报告结果。所有的跟踪和分析都是以预先确定的频率自动完成的。

## AWS 管理包

![](img/62418f4fc14dc0f40a17fbaf02d54df8.png)

[管理包](https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/AWSManagementPack.html)是一个工具，它汇总了所有使用的 AWS 资源和服务的性能更新。管理包通常与 CloudWatch 合作来获取关于系统状态的信息。它负责向团队发出警报，并将信息汇总到一份报告中。

# AWS 云监控工具

显然，默认工具并不能涵盖 AWS 高度复杂功能的所有方面。某些方面需要定制的仪表板和分析。AWS 提供了一系列工具，开发人员需要编写脚本来接收统计数据。

官方自动化工具和人工工具的主要区别在于信息的精确程度。手动工具允许按地区、时间、音量、详细的过滤器来划分事件，并设置更多复杂的条件。

## 亚马逊 EC2 仪表板

![](img/0779ce9d27f596c94d180c0618e21dbe.png)

[Amazon EC2 Dashboard](https://status.aws.amazon.com/) 允许深入统计实例的性能。您可以按州、卷、状态和位置过滤它们。详细的导航菜单使得处理多个实例更加容易。有经验的云开发人员知道，一旦基础设施增长，使用纯粹的自动化方法不会让您深入了解事情的实际工作方式。

![](img/9a0dd6471d8e85d54f03674404231a5b.png)

## CloudWatch 的手动功能

[CloudWatch](https://aws.amazon.com/cloudwatch/) 是 AWS 的主要监控资源，因此该仪器很自然地被分为自动和手动两类。除了默认的实时功能，Cloudwatch 还有一系列更精确的监控设置。

您可以为指标搜索设置复杂的过滤器和标准，创建通知和警报，创建 AWS 更新报告，以及更改整个 Cloudwatch 功能的配置。Cloudwatch 的手动功能负责帮助开发者设置自动动作的条件。

# 如何规划 AWS 监控？

仅使用官方 AWS 工具，您就已经可以对 AWS 的使用有一个大致的了解。通过与 AWS 的大量合作，我们了解到监控的成功并不完全取决于仪器。还有一个方面没有得到应有的重视，那就是规划。

如果你知道你在寻找什么，以及你将如何解释结果，即使几个指标也可以在你的成本效益和性能上产生很大的差异。相反，即使是深入的报告对一个没有线索的团队也没有用。这对于像[医疗](https://jelvix.com/blog/cloud-computing-in-healthcare)这样的高风险行业的 24/7 基础设施尤为重要。

**在投资 AWS 监控之前，您应该分析的方面:**

**目标**:你需要知道你想要用指标解决什么问题。我们的目标通常是比较(查看给定时期的不同结果)、文档(寻找我们的文档需要的事实)和成本管理。这些是我们选择和定制度量标准的主要优先事项。

**资源**:你需要马上考虑 AWS 规划的预算。正如我们提到的，使用默认工具可能会走得很远。然而，大型基础设施和创新系统通常需要更多。

**频率**:我们建议尽早创建 AWS 监控日历。这对于手动工具尤其重要。安排专门检查警报、仪表板和设置的时间。

**工具**:列出所有工具的明确清单，包括它们的专业版和基础版、成本、功能、企业计划的可用性等。我们喜欢制作电子表格，并直接比较所有仪器。

负责人:监控从来都不是最重要的任务。如果没有负责任的团队成员，你不太可能建立连续的实践。

危机:如果关键问题确实出现了，对于不知道如何表现的团队来说，查看度量标准没有太大的好处。在早期创建一个应急计划，在那里你定义哪些结果是不可接受的，提出一个逐步的算法，拿出一个预算，等等。

有效的 AWS 监控计划应该详细描述所有这些方面。最重要的是，所有参与 AWS 开发的团队成员都应该熟悉这些指标。即使那些不直接处理分析的人也应该每月至少几次回到这些客观值。

![](img/6ed4c5f847eec8ed3a5b3a9527abd9d0.png)

# 使用第三方 AWS 监控工具

大多数团队不局限于只使用默认 AWS 基础设施的仪器。CloudWatch 是多功能的，但是当你的产品扩展时，你会发现默认定制缺乏深度。因此，我们对我们最喜欢的 AWS 监测仪器做了一个简单的回顾。

## 格拉夫纳

![](img/f19a0ea7ceba80283992c616ff5ef6b4.png)

这是一款开源软件，用于可视化统计、分析、创建警报和协作仪表板。该工具可以很容易地与 CloudWatch 集成，并且与复杂的 AWS 报告不同， [Grafana](https://grafana.com/) 中的概述易于阅读和共享。

对于开发团队来说，这是与产品负责人交流的好方法。用 Grafаna 创建的仪表盘无需太多技术专业知识也能理解。这个因素确实让云开发更加透明。

## 普罗米修斯

![](img/bb17d50c26f87b5e9d460e8f3b17cc86.png)

和 Grafana 一样， [Prometheus](https://prometheus.io/) 是一款开源工具，可以和 CloudWatch 集成。它监控数据库性能，报告事件，并在出错时提醒团队。我们喜欢这项服务，因为它可以为指标分配标签，指定查询方法，并实时对分析进行排序。该工具支持本地和云存储，这是一个强大的安全优势。

## 波阵面

![](img/afd002c0398c3eeef6df123830f12605.png)

[Wavefront](https://www.wavefront.com/) 是一个面向云的分析工具，可以根据 AWC 指标创建图表、表格和仪表板。与 CloudWatch 一起，它可以处理高工作负载，同时报告多个查询，并实时组织最终洞察。

该工具为技术堆栈管理提供了一个直观的界面:您可以在整个系统上运行指标，或者选择特定的技术。我们通常运行预测和异常检测来确保系统正确运行。

## 扎比克斯

![](img/12dee79b9a2392503b7c80c253594eb2.png)

[Zabbix](https://www.zabbix.com/) 提供了一系列与 CloudWatch、Dashboard、Events 和其他 AWS 云管理工具的集成。这是市场上最受欢迎的监控解决方案之一，主要得益于其出色的定制。我们喜欢 Zabbix 集成的多功能性:像删除终止的实例或执行元数据检查这样的功能在其他分析工具中并不常见。

## 度量地

![](img/8f912b5d832af265cb8e2167b4cd6da3.png)

[Metricly](https://www.metricly.com/) 还提供了许多与 AWS 的定制集成。我们喜欢 Metricly 设置中丰富的指标过滤器和标准。

例如，团队可以将度量标准描述为基线，以便用过去的行为进行分析。“相关”设置允许快速比较指标。您可以按单元划分检查和结果，检测缺失数据，设置最小和最大阈值，以及执行许多其他操作。

# 结论

AWS 基础设施提供了关于系统性能、统计数据和功能的大量信息。如果设置正确，自动化工具将让您了解 CPU 消耗、网络使用、实例问题、更新和许多其他重要方面。你不需要一直记着监控——配置一次，它会持续工作。

我们使用第三方工具来可视化来自 AWS 的数据，与团队成员、产品所有者和利益相关者共享，并维护全面的文档。再加上详细的计划，这种组合技术可以帮助我们预防任何问题。

如果您有一个想要监控的云托管系统，或者计划构建一个基于云的软件，请立即联系我们的开发人员。我们将提出一个计划，建立一个可持续的系统，并设置必要的工具攻击。我们的[云开发团队](https://jelvix.com/expertise/digital-transformation)聚集了云开发和迁移方面的专家。

*最初发表于*[*https://jelvix.com*](https://jelvix.com/blog/aws-monitoring)*。*