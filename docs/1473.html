<html>
<head>
<title>Time-Series Animation in Matplotlib</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Matplotlib中的时序动画</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/time-series-animation-in-matplotlib-de023655a197?source=collection_archive---------0-----------------------#2020-03-19">https://medium.datadriveninvestor.com/time-series-animation-in-matplotlib-de023655a197?source=collection_archive---------0-----------------------#2020-03-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d4ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用Matplotlib库制作时序数据的动画。</p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="d913" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ks"> TL DR: </em> <a class="ae kt" href="https://github.com/David-Woroniuk/Medium-Articles/blob/master/Time_Series_Animation_in_Matplotlib.ipynb" rel="noopener ugc nofollow" target="_blank"> <em class="ks"> GitHub代码</em> </a> <em class="ks">。</em></p><p id="bd0d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">动画是展示金融产品、气候变化、季节性销售模式和社交媒体趋势等时间序列数据的一种有趣方式，因为我们可以观察数据如何随着时间的推移而演变。</p><p id="11b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本文将提供一个如何动画时序数据的演练，演示Henry Hub(美国)和TTF(荷兰)的价格趋同。</p><div class="ku kv gp gr kw kx"><a href="https://www.datadriveninvestor.com/2019/02/07/8-skills-you-need-to-become-a-data-scientist/" rel="noopener  ugc nofollow" target="_blank"><div class="ky ab fo"><div class="kz ab la cl cj lb"><h2 class="bd ir gy z fp lc fr fs ld fu fw ip bi translated">成为数据科学家所需的8项技能|数据驱动型投资者</h2><div class="le l"><h3 class="bd b gy z fp lc fr fs ld fu fw dk translated">数字吓不倒你？没有什么比一张漂亮的excel表更令人满意的了？你会说几种语言…</h3></div><div class="lf l"><p class="bd b dl z fp lc fr fs ld fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="lg l"><div class="lh l li lj lk lg ll lm kx"/></div></div></a></div></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="5616" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，让我们继续安装所需的软件包:</p><figure class="ln lo lp lq gt lr"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="9dc4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在已经导入了Quandl包，它允许访问由<a class="ae kt" href="https://www.quandl.com" rel="noopener ugc nofollow" target="_blank">Quandl.com</a>提供的数据集。我们可以导入更多的包来处理数据并开发动画:</p><figure class="ln lo lp lq gt lr"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="ec65" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们将定义我们希望使用的采样周期。对于这个项目，我选择了712天的样本:</p><figure class="ln lo lp lq gt lr"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="4066" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在需要从Quandl收集数据。值得注意的是，Henry Hub价格以美元/MMBTu表示，而TTF价格以€/MWh表示。因此，我们必须转换要用相同单位表示的数据:</p><figure class="ln lo lp lq gt lr"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="4ea6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们有了数据，让我们生成一个快速静态图来可视化数据集:</p><figure class="ln lo lp lq gt lr"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="34f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">很好，我们绘制了一个包含我们的数据系列的静态图表:</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi lu"><img src="../Images/7e7d437e42689576961af0b0c9e68558.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CAvmnYtvVSlKxOC8Wm9NCg.png"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk">Static chart of Henry Hub vs TTF data downloaded from Quandl.</figcaption></figure></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="98e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们来看动画。首先，我们需要为动态图表设置轴:</p><figure class="ln lo lp lq gt lr"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="bcef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们定义一个函数<code class="fe me mf mg mh b">animate</code>，它需要输入参数<code class="fe me mf mg mh b">i</code>。可以多次调用该函数来构建动画。</p><figure class="ln lo lp lq gt lr"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="8f72" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以调用<code class="fe me mf mg mh b">matplotlib.animation.FuncAnimation</code>函数，提供一个图形的输入参数，我们刚刚定义的动画函数，以及帧，它指定动画函数应该被调用多少次。Interval提供帧之间的延迟，以毫秒为单位。</p><p id="d825" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我在Google Colab工作时，我选择将动画作者定义为<code class="fe me mf mg mh b">[‘ffmpeg’]</code>，然而，许多IPython shells与ImageMagick配合得很好。</p><figure class="ln lo lp lq gt lr"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="df40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">瞧啊。我们现在有一个保存在root_dir中的时间序列动画！</p><figure class="ln lo lp lq gt lr"><div class="bz fp l di"><div class="mi lt l"/></div></figure></div></div>    
</body>
</html>