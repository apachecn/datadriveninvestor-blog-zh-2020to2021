<html>
<head>
<title>How To Know When To Buy Stocks Using Bollinger Bands For Trading In Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何知道什么时候用Python中的布林线交易买股票</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/how-to-implement-bollinger-bands-in-python-1106b90da8d1?source=collection_archive---------3-----------------------#2020-12-17">https://medium.datadriveninvestor.com/how-to-implement-bollinger-bands-in-python-1106b90da8d1?source=collection_archive---------3-----------------------#2020-12-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9ae8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">利用熊猫和Plotly来实施一个美丽的布林线策略。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a626edad2218b50f5468596291df393d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vk0nNfSDJ2csIkjRiTmCLA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by Author</figcaption></figure><p id="6c7b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你花时间看你的股票，寻找机会或异常吗？你愿意平静下来，忘掉这件事，只是在事情发生时得到通知吗？</p><p id="69e4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我不知道你怎么想，但我想平静下来。我浪费了很多时间看我的曲线，统计，预测，这让我浪费了宝贵的时间。</p><p id="6d73" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">所以我决定做一个通知机器人，告诉我什么时候该买什么时候该卖</p><div class="lr ls gp gr lt lu"><a href="https://danielcarlander.medium.com/the-most-profitable-investment-in-2020-3a97be030d29" rel="noopener follow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd ir gy z fp lz fr fs ma fu fw ip bi translated">2020年最安全最赚钱的投资</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">为什么全球指数基金是最有效的投资方式。</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">danielcarlander.medium.com</p></div></div><div class="md l"><div class="me l mf mg mh md mi kp lu"/></div></div></a></div><p id="6093" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本文中，我们将研究如何实现该策略，在以后的文章中，我们将研究如何设置电报机器人和托管完整的脚本。</p><h1 id="871b" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">战略编码</h1><p id="9e11" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">首先，我们需要选择一个指标。我选择了布林线策略，因为它对我来说很直观。基本上，它告诉你曲线何时便宜，因此，何时是买入的好时机，因为股票可能会上涨。</p><p id="ffd4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">第二件要做的事是获取我们实施这一战略所需的财务数据。为此，我们将使用<strong class="kx ir"> yfinance </strong>，这是python的雅虎财务库。因为它很简单:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="2e45" class="nl mk iq nh b gy nm nn l no np">import yfinance as yf</span><span id="a19c" class="nl mk iq nh b gy nq nn l no np">equity = yf.Ticker("AAPL")<br/>df = equity.history(period='1y')</span></pre><p id="839d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这就是我们所知道的:一个数据框架将会是一个符号的历史数据。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/5c672069ca14b75b50727272db17da02.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*hacS3p4FoEQxsUgCXYF6_Q.png"/></div></figure><p id="19fe" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以画出它来感受数据。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/05662979e67748c45058ceedc76ff384.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sFfdWrxEtonOKvVZ6IkIgA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by Author</figcaption></figure><p id="3f1a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们现在应该分析曲线。我们要做的第一件事是计算<strong class="kx ir">滚动平均值</strong>。</p><p id="810e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是平滑曲线和了解趋势的一种方式。为此，我们只需使用熊猫函数滚动，然后计算平均值:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="ed68" class="nl mk iq nh b gy nm nn l no np">sma = df.rolling(window=20).mean()</span></pre><p id="b92a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们放大一个图来看。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/e7ea759fba6e01792d38e8cf1e3b3f4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mz4R4DOKh4Exwr3tHUh74Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by Author</figcaption></figure><p id="9f03" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如你所见，它平滑了曲线，因此给了我们趋势信息。</p><p id="72e6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为何止步于中庸？让我们计算一下<strong class="kx ir">标准偏差。那是什么？它只是给了我们更多关于我们之前计算的平均值的信息:它不是[5，5]的平均值和[0，10]的平均值。嗯，是的，这是一样的，但这并不意味着相同。在第一种情况下，标准偏差为零，而在第二种情况下，为5。</strong></p><p id="2b97" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了实现这一点，Pandas再次用一行简单的代码帮助我们:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="030f" class="nl mk iq nh b gy nm nn l no np">rstd = df.rolling(window=20).std()</span></pre><p id="a6ec" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">计算标准差有助于我们计算过去二十天的波动性。这就是布林理论的由来:</p><p id="a486" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">他定义了一个上界和一个下界，它由移动平均值加上/减去两倍的标准差组成。让我们用python来看看:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="b7f2" class="nl mk iq nh b gy nm nn l no np">upper_band = sma + 2 * rstd<br/>lower_band = sma - 2 * rstd</span></pre><p id="f92c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，如果过去20天波动很大，波段之间的空间会更大，如果市场变化不大，空间会更小。如果我们画出这些带，看起来像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/1d1b6d856d08a8baf78cc6c355f6a6e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JXk7yCGO5C7uEZw3q2qf-Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by Author</figcaption></figure><h2 id="5cf0" class="nl mk iq bd ml nt nu dn mp nv nw dp mt le nx ny mv li nz oa mx lm ob oc mz od bi translated">规则</h2><p id="d3b1" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">这个策略表明，当曲线的实际值超过上限时，这是卖出指标，因为曲线离滚动平均线很远。同样的，如果股票的实际价值低于较低的波段，这是一个买入信号，因为股票很便宜。</p><p id="94a3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们实现它，看看结果。</p><p id="a454" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，我们创建一个包含价格和波段的数据框架:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="26c6" class="nl mk iq nh b gy nm nn l no np">bb = df.join(upper_band).join(lower_band)</span></pre><p id="e746" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，我们可以计算买方和卖方的日期:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="2dd5" class="nl mk iq nh b gy nm nn l no np">buyers = bb[bb['Close'] &lt;= bb['lower']]<br/>sellers = bb[bb['Close'] &gt;= bb['upper']]</span></pre><p id="dec2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在我们有了两个带有买入和卖出指标的数据框架。让我们画出它们:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/cb5e1af1573ca1ff198fe3e95f5691f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9QmXcEvuvbDYMIBLUxiYow.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by Author</figcaption></figure><p id="bac4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如你所见，该策略建议在下跌趋势中买入，并建议在大跌前卖出。伙计，如果我在三月份就知道这件事。</p><p id="04e1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这就是你要的:买家，卖家，乐队，只用几行代码。</p><p id="1e37" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">就我个人而言，我只是用这个指标作为买入信号，因为我相信我买的东西，并以长期眼光投资。你可以点击这里查看<a class="ae oe" href="https://danielcarlander.medium.com/how-to-set-up-an-automated-trading-strategy-67ad9f8c0a5f" rel="noopener">，了解如何使用这个策略来建立一个交易警报的自动通知系统。</a></p><div class="lr ls gp gr lt lu"><a href="https://danielcarlander.medium.com/how-to-set-up-an-automated-trading-strategy-67ad9f8c0a5f" rel="noopener follow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd ir gy z fp lz fr fs ma fu fw ip bi translated">如何建立自动交易策略</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">使用布林线策略、电报机器人和Wayscript接收投资最佳时机的通知…</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">danielcarlander.medium.com</p></div></div><div class="md l"><div class="of l mf mg mh md mi kp lu"/></div></div></a></div><p id="fc99" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以下是完整的代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="og oh l"/></div></figure></div></div>    
</body>
</html>