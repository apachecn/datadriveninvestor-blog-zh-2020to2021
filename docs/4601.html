<html>
<head>
<title>Start Building Your Trading Strategies in 5 Minutes With Python and MetaTrader</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python和MetaTrader在5分钟内开始构建您的交易策略</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/build-your-trading-strategies-in-5-minutes-with-python-and-metatrader-3e9fd5c62956?source=collection_archive---------1-----------------------#2020-08-16">https://medium.datadriveninvestor.com/build-your-trading-strategies-in-5-minutes-with-python-and-metatrader-3e9fd5c62956?source=collection_archive---------1-----------------------#2020-08-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="65bd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">整合收集和分析金融市场数据的最快方法。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f51ef0541d428b75b37d6ea211c259bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JYXSleusyLIaz-vp"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@austindistel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Austin Distel</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c1b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我最近的一篇文章中，我展示了如何使用Plotly库创建图形。为此，我们从MetaTrader以“原始”的方式导入数据，无需自动化。今天，我们将学习如何自动化这一过程，并用几行代码绘制不同资产相关性的热图。</p><div class="lv lw gp gr lx ly"><a href="https://towardsdatascience.com/how-to-visualize-high-frequency-financial-data-using-plotly-and-r-97171ae84be1" rel="noopener follow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">如何使用Plotly和R可视化高频金融数据</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">在这篇文章中，我展示了如何使用Plotly包，以可视化的金融数据在高频率使用r。</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">towardsdatascience.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ks ly"/></div></div></a></div><p id="9950" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如何整合Python和MetaTrader？我遵循以下步骤:</p><ul class=""><li id="b3c2" class="mn mo it lb b lc ld lf lg li mp lm mq lq mr lu ms mt mu mv bi translated">在您的机器上安装了MetaTrader 5和Python 3.8之后</li><li id="acea" class="mn mo it lb b lc mw lf mx li my lm mz lq na lu ms mt mu mv bi translated">安装Python库:MetaTrader5、matplotlib和pandas</li><li id="502b" class="mn mo it lb b lc mw lf mx li my lm mz lq na lu ms mt mu mv bi translated">导入数据</li><li id="dd3f" class="mn mo it lb b lc mw lf mx li my lm mz lq na lu ms mt mu mv bi translated">绘制图表</li></ul><h1 id="7d61" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">安装库</h1><p id="7025" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">如果您的计算机上已经安装了Python，请打开终端并使用以下命令安装必要的库:</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="c7bf" class="od nc it nz b gy oe of l og oh">pip install MetaTrader5<br/>pip install pandas<br/>pip install matplotlib</span></pre><p id="8d9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请记住，您必须在您的计算机上安装了最新版本的MetaTrader，集成才能正常工作。</p><h1 id="fae5" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">收集数据</h1><p id="1826" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">我们到了有趣的部分。我们将开始开发我们的小型数据收集程序。</p><p id="fb0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一步是导入必要的库:</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="b7e4" class="od nc it nz b gy oe of l og oh">import MetaTrader5 as mt5<br/>import pandas as pd<br/>import matplotlib.pyplot as plt</span></pre><p id="31f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后，我们用代码初始化MetaTrader终端:</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="fb2c" class="od nc it nz b gy oe of l og oh">mt5.initialize()</span></pre><p id="6c07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在一个数组中定义我们想要分析的资产的符号。我是巴西人，我在巴西证券交易所交易。因此，本文中描述的资产在其他代理中不起作用。</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="ec2e" class="od nc it nz b gy oe of l og oh">symbols = ['GOAU4','WEGE3','VVAR3','PRIO3','MRFG3']<br/>data = pd.DataFrame()</span></pre><p id="1215" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于数组中的每个符号，我们收集定义每个条形的时间和数量的数据。然后，我们将每个请求的收盘价输入数据框架:</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="aee7" class="od nc it nz b gy oe of l og oh">for i in symbols:<br/>    rates = mt5.copy_rates_from_pos(i, mt5.TIMEFRAME_D1, 0, 1000)<br/>    data[i] = [y['close'] for y in rates]</span></pre><p id="0285" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在将关闭与MetaTrader的通信，因为我们已经有了用于分析的数据。</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="f310" class="od nc it nz b gy oe of l og oh">mt5.shutdown()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/0734fabf632e2fd41f4fa515e8ba9005.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*ApwlJnyVk5pysewoVxK__A.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Image by author — Close prices from stocks</figcaption></figure><h1 id="af6a" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">计算回报</h1><p id="2a02" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">计算回报相当容易。只需调用dataframe的pct_change()方法，就可以开始了。</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="79af" class="od nc it nz b gy oe of l og oh">retornos = data.pct_change()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/a955f02de04f7407c61f383b09bcdb5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*ejqnh2aP2BA5MBNAbnoAkA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Image by author — Stock Daily Returns</figcaption></figure><h1 id="7897" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">相关计算</h1><p id="090c" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">像返回一样，相关性也可以通过调用dataframe的corr()方法来轻松计算。</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="c9d2" class="od nc it nz b gy oe of l og oh">corr = data.corr()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/0a2f0b0122e8ef2dd430a3890cb818a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*VQKvzpr7bkbMl3fo_GYh-Q.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Image by Author — Stocks Correlation</figcaption></figure><h1 id="b55d" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">绘制热图</h1><p id="d39b" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">为了构建热图，我们将使用matplotlib库。所以:</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="e985" class="od nc it nz b gy oe of l og oh">plt.figure(figsize=(10,10))<br/>plt.imshow(corr, cmap = 'RdYlGn', interpolation='none', aspect='auto')<br/>plt.colorbar()<br/>plt.xticks(range(len(corr)), corr.columns, rotation = 'vertical')<br/>plt.yticks(range(len(corr)), corr.columns)<br/>plt.suptitle('MAPA de CALOR - ATIVOS', fontsize = 15, fontweight = 'bold')<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/01a56c1b57a01911fc0c10090b930ac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HjVLtSSaBXY0g7rGKplSWA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Image by Author — HeatMap Stocks Correlations</figcaption></figure><h1 id="3941" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">结论</h1><p id="3d79" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">在这篇文章中，我们看到了如何连接Python和MetaTrader 5，如何导入我们想要分析的资产的数据，以及如何创建这些资产回报相关性的热图。</p><div class="lv lw gp gr lx ly"><a href="https://www.datadriveninvestor.com/2020/07/07/introduction-to-time-series-forecasting-of-stock-prices-with-python/" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">用Python |数据驱动投资者进行股票价格时间序列预测简介</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">在这个简单的教程中，我们将看看如何将时间序列模型应用于股票价格。更具体地说，一个…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="mh l"><div class="om l mj mk ml mh mm ks ly"/></div></div></a></div><p id="7063" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读，下次见！如果你有问题，请告诉我。干杯！</p><p id="1a61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">进入专家视角— </strong> <a class="ae ky" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">订阅DDI英特尔</strong> </a></p></div></div>    
</body>
</html>