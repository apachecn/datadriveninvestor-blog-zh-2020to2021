<html>
<head>
<title>How to Make your Philips Hue Lights React to Air Pollution</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何让你的飞利浦色调灯对空气污染做出反应</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/how-to-change-philips-hue-lights-color-depending-on-air-pollution-c92f0af0754e?source=collection_archive---------9-----------------------#2020-09-11">https://medium.datadriveninvestor.com/how-to-change-philips-hue-lights-color-depending-on-air-pollution-c92f0af0754e?source=collection_archive---------9-----------------------#2020-09-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/eb59ef078b84bf9f3c14efcdd6c78a38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8UcfdsvJNhtG7vanYzezww.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">A photo I took from Dolores Park on Sep 9, 12 pm</figcaption></figure><blockquote class="kf kg kh"><p id="7357" class="ki kj kk kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">注意:我不是空气质量专家，我只是使用了来自<a class="ae lh" href="https://www.epa.gov/" rel="noopener ugc nofollow" target="_blank"> EPA </a>的共享知识，根据他们的颜色代码创建了一个脚本。</p></blockquote><p id="227e" class="pw-post-body-paragraph ki kj it kl b km kn ko kp kq kr ks kt li kv kw kx lj kz la lb lk ld le lf lg im bi ll translated"><span class="l lm ln lo bm lp lq lr ls lt di"> W </span>随着<a class="ae lh" href="https://www.nytimes.com/2020/09/09/climate/nyt-climate-newsletter-california-wildfires.html" rel="noopener ugc nofollow" target="_blank">湾区火灾的加剧</a>和空气污染的加剧，根据美国环保署的规定，当空气质量达到非良好(0-50空气质量指数)<a class="ae lh" href="https://www.epa.gov/indoor-air-quality-iaq/wildfires-and-indoor-air-quality-iaq" rel="noopener ugc nofollow" target="_blank">时，我们被要求避免开窗并打开空气净化器。</a></p><figure class="lv lw lx ly gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lu"><img src="../Images/d06457ed9da3d81ac73adfe082db791b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bi9U8gvZ_MJDO_Tc99OD1g.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">The color coding from <a class="ae lh" href="https://www.epa.gov/sites/production/files/2016-04/documents/2012_aqi_factsheet.pdf" rel="noopener ugc nofollow" target="_blank">EPA website</a></figcaption></figure><p id="7970" class="pw-post-body-paragraph ki kj it kl b km kn ko kp kq kr ks kt li kv kw kx lj kz la lb lk ld le lf lg im bi translated">由于空调在旧金山并不常见，而且热浪达到+100华氏度(37摄氏度)，很难一直关着窗户，每次我想看看打开窗户是否安全时，检查污染水平都很麻烦。</p><p id="53c9" class="pw-post-body-paragraph ki kj it kl b km kn ko kp kq kr ks kt li kv kw kx lj kz la lb lk ld le lf lg im bi translated">我根本不是一个开发人员，但是当我在避难所期间自学如何编码时，我决定试着把一些东西放在一起。我抬起头来:</p><ol class=""><li id="c06d" class="lz ma it kl b km kn kq kr li mb lj mc lk md lg me mf mg mh bi translated">空气质量传感器的开放API因为我没有传感器；</li><li id="74f7" class="lz ma it kl b km mi kq mj li mk lj ml lk mm lg me mf mg mh bi translated">一种通过代码与我的飞利浦色调连接的方式，并代表空气质量的EPA颜色编码。我通过使用IFTTT Webhooks和PurpleAir API找到了解决方案，我将在这里进行描述。</li></ol><p id="4882" class="pw-post-body-paragraph ki kj it kl b km kn ko kp kq kr ks kt li kv kw kx lj kz la lb lk ld le lf lg im bi translated">要完成这项工作，您需要:</p><ul class=""><li id="a36e" class="lz ma it kl b km kn kq kr li mb lj mc lk md lg mn mf mg mh bi translated">至少一个<a class="ae lh" href="https://www.philips-hue.com/" rel="noopener ugc nofollow" target="_blank">飞利浦色相灯</a>；</li><li id="2ce2" class="lz ma it kl b km mi kq mj li mk lj ml lk mm lg mn mf mg mh bi translated">我不是开发人员，但是你需要一些知识来安装Python和一些库。</li></ul><h1 id="bae5" class="mo mp it bd mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl bi translated">设置IFTTT Webhook</h1><p id="d263" class="pw-post-body-paragraph ki kj it kl b km nm ko kp kq nn ks kt li no kw kx lj np la lb lk nq le lf lg im bi translated">首先，确保你有一个<a class="ae lh" href="https://ifttt.com/" rel="noopener ugc nofollow" target="_blank"> IFTTT账户</a>，并将其与你的<a class="ae lh" href="https://ifttt.com/hue" rel="noopener ugc nofollow" target="_blank">飞利浦Hue账户</a>相连接。</p><blockquote class="kf kg kh"><p id="5794" class="ki kj kk kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">注意:我注意到IFTTT现在限制了运行的小程序的数量，所以你可能需要删除一些来实现这个功能。</p></blockquote><figure class="lv lw lx ly gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nr"><img src="../Images/e516499fd28536deca01fdea6b8bbdee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QGBYqk6Ek75AcQVGdShT8w.png"/></div></div></figure><ul class=""><li id="6db9" class="lz ma it kl b km kn kq kr li mb lj mc lk md lg mn mf mg mh bi translated">点击<a class="ae lh" href="https://ifttt.com/create/" rel="noopener ugc nofollow" target="_blank">创建</a>，开始一个新的程序；</li><li id="956a" class="lz ma it kl b km mi kq mj li mk lj ml lk mm lg mn mf mg mh bi translated">点击" If this "并选择" Webhooks "添加一个事件名称，并添加一个名为" red "的事件；</li></ul><figure class="lv lw lx ly gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ns"><img src="../Images/93cc37f19cb7befaf98a4b490e5b63e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wZYm-JPS4-97aDcLey0XXg.png"/></div></div></figure><ul class=""><li id="22f4" class="lz ma it kl b km kn kq kr li mb lj mc lk md lg mn mf mg mh bi translated">为您想要在飞利浦色调灯上显示的颜色添加十六进制值，并显示您想要更改的灯。在我的情况下，我只改变了客厅，这是靠近主窗口的灯；</li></ul><figure class="lv lw lx ly gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nt"><img src="../Images/4fea7325272400e71f43c616fd0f46d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XTYXCfv8SPX4vlrajImnag.png"/></div></div></figure><ul class=""><li id="259e" class="lz ma it kl b km kn kq kr li mb lj mc lk md lg mn mf mg mh bi translated">对所有想要表现的颜色重复此过程。就我而言，我有:绿色(好)、黄色(中等)、橙色(对敏感人群不健康)和红色(不健康+)；</li><li id="c27a" class="lz ma it kl b km mi kq mj li mk lj ml lk mm lg mn mf mg mh bi translated">你创建的每个webhook都有一个URL，我们很快就会用到它们；</li></ul><p id="b8d5" class="pw-post-body-paragraph ki kj it kl b km kn ko kp kq kr ks kt li kv kw kx lj kz la lb lk ld le lf lg im bi translated">好了，这部分做完了。您可以通过访问webhook URL来检查它是否工作，并观察它的灯光颜色变化。</p><div class="nu nv gp gr nw nx"><a href="https://www.datadriveninvestor.com/2020/05/12/speeding-up-the-digitalization-of-the-tech-banking-cloud-and-ai-as-the-pandemic-winners/" rel="noopener  ugc nofollow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd iu gy z fp oc fr fs od fu fw is bi translated">加速科技银行的数字化:云和人工智能成为疫情赢家|数据驱动的投资者</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">疫情新型冠状病毒的经济效应正在把斗争推向每个国家的主要产业…</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol jz nx"/></div></div></a></div><h1 id="eab8" class="mo mp it bd mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl bi translated">利用紫色空气获取传感器数据</h1><p id="1cf4" class="pw-post-body-paragraph ki kj it kl b km nm ko kp kq nn ks kt li no kw kx lj np la lb lk nq le lf lg im bi translated">紫色空气是一家销售空气质量传感器的公司，并在他们的网站上分享他们的数据，所以由于我没有传感器，我使用他们的数据来通知我的灯状态。</p><figure class="lv lw lx ly gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi om"><img src="../Images/c86de44e37a06a7b02bfffd62acc0c14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gxipCYZpMXBor9ecGr7BWg.png"/></div></div></figure><ul class=""><li id="9c4c" class="lz ma it kl b km kn kq kr li mb lj mc lk md lg mn mf mg mh bi translated"><a class="ae lh" href="https://www.purpleair.com/map" rel="noopener ugc nofollow" target="_blank">进入紫色数据图</a>，取消“外部传感器”标记，选择离您最近的传感器；</li><li id="2b76" class="lz ma it kl b km mi kq mj li mk lj ml lk mm lg mn mf mg mh bi translated">点击“获取此小部件”,您将看到如下所示的HTML代码:</li></ul><pre class="lv lw lx ly gt on oo op oq aw or bi"><span id="1317" class="os mp it oo b gy ot ou l ov ow">&lt;div id='PurpleAirWidget_60019_module_AQI_conversion_C0_average_10_layer_standard'&gt;</span></pre><ul class=""><li id="c838" class="lz ma it kl b km kn kq kr li mb lj mc lk md lg mn mf mg mh bi translated">显示的第一行(如下)将为您提供传感器ID，在本例中为“60019”。</li></ul><figure class="lv lw lx ly gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ox"><img src="../Images/4313a14507daceda1003b5e4d7e28611.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GDrwBeXpRITk447dQ9v4rQ.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">This red light means I cannot open the windows now 😢</figcaption></figure><h1 id="c00c" class="mo mp it bd mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl bi translated">让一切都与Python协同工作</h1><ul class=""><li id="8af1" class="lz ma it kl b km nm kq nn li oy lj oz lk pa lg mn mf mg mh bi translated"><a class="ae lh" href="https://github.com/ReagentX/purple_air_api" rel="noopener ugc nofollow" target="_blank">克隆GitHub </a>的紫色空气API</li><li id="d93c" class="lz ma it kl b km mi kq mj li mk lj ml lk mm lg mn mf mg mh bi translated">将下面的脚本复制到他们的脚本文件夹中——由于我不是开发人员，我的朋友<a class="pb pc ep" href="https://medium.com/u/a9cf8b3432bf?source=post_page-----c92f0af0754e--------------------------------" rel="noopener" target="_blank">蒂亚戈·罗梅罗·加西亚</a>在这里帮助了我；</li><li id="783d" class="lz ma it kl b km mi kq mj li mk lj ml lk mm lg mn mf mg mh bi translated">确保您将“60019”替换为您想要的紫色空气传感器；</li><li id="06ed" class="lz ma it kl b km mi kq mj li mk lj ml lk mm lg mn mf mg mh bi translated">用你的webhook链接替换webUrl变量，每种颜色一个；</li><li id="4e27" class="lz ma it kl b km mi kq mj li mk lj ml lk mm lg mn mf mg mh bi translated">🎉就这样，现在就运行它！</li></ul><figure class="lv lw lx ly gt ju"><div class="bz fp l di"><div class="pd pe l"/></div></figure><blockquote class="kf kg kh"><p id="d877" class="ki kj kk kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">注意:这个脚本每16分钟运行一次，所以从技术上来说你必须保持它运行来更新你的灯光颜色。你可以让它在网络服务中运行，但请记住，Purple Air对请求有一个限制，尽管他们没有说明限制是什么。</p></blockquote></div><div class="ab cl pf pg hx ph" role="separator"><span class="pi bw bk pj pk pl"/><span class="pi bw bk pj pk pl"/><span class="pi bw bk pj pk"/></div><div class="im in io ip iq"><p id="f27e" class="pw-post-body-paragraph ki kj it kl b km kn ko kp kq kr ks kt li kv kw kx lj kz la lb lk ld le lf lg im bi translated">📺让我们建立联系吧！我每周二下午5点在Instagram主持关于产品和UX的讲座<br/>👉在Instagram上关注<a class="ae lh" href="http://www.instagram.com/cells.and.pixels" rel="noopener ugc nofollow" target="_blank">细胞和像素</a>并在所有<a class="ae lh" href="http://www.cellsandpixels.com/" rel="noopener ugc nofollow" target="_blank">播客平台上收听</a></p><p id="815c" class="pw-post-body-paragraph ki kj it kl b km kn ko kp kq kr ks kt li kv kw kx lj kz la lb lk ld le lf lg im bi translated"><strong class="kl iu">访问专家视图— </strong> <a class="ae lh" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu">订阅DDI英特尔</strong> </a></p></div></div>    
</body>
</html>