<html>
<head>
<title>Scraping FinViz: The Ultimate Stock Screener with Python!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python开发的终极股票筛选工具！</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/scraping-live-stock-fundamental-ratios-news-and-more-with-python-a716329e0493?source=collection_archive---------2-----------------------#2020-08-17">https://medium.datadriveninvestor.com/scraping-live-stock-fundamental-ratios-news-and-more-with-python-a716329e0493?source=collection_archive---------2-----------------------#2020-08-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f2ae" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在几秒钟内获得实时基本比率、新闻和内幕交易数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/819002bef4999d4195f28d24d820f489.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WRb9NvvrrD5f0g3w39T0tQ.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@morningbrew?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Morning Brew</a> on <a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="7eb9" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">FinViz:终极股票筛选者</h2><p id="4df0" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">获取最新信息对任何投资策略都至关重要，无论是日内交易、波动交易还是简单的长期持有。然而，现在似乎缺乏这方面的资源。大多数API提供了一个非常有限的免费版本，支持非常少的请求，类似于财务建模准备</p><p id="579f" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated"><em class="mt">介绍fin viz——终极股票筛选者</em></p><p id="311d" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated"><a class="ae ky" href="https://finviz.com/" rel="noopener ugc nofollow" target="_blank"> FinViz </a>提供交互式图表、基本面比率、顶级分析师推荐、新闻和内幕交易，全部免费！只需点击一个按钮，您就可以获得做出明智的证券买卖决策所需的大部分(如果不是全部)信息。但是，如果您想存储这些数据以便进一步分析或与其他股票进行比较，该怎么办呢？</p><p id="f1bb" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">我们可以简单地使用Python来抓取和存储熊猫数据帧中的所有数据。对于本文，我们将重点关注基本比率、新闻和内幕交易部分。</p><h2 id="6cce" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">使用Python抓取FinViz</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Setup</figcaption></figure><p id="1425" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">首先，我们必须导入剩余的抓取程序所需的依赖项。熊猫将被用来把网站HTML转换成易读的数据框架。NumPy将用于清理数据帧，bs4/urllib将允许我们访问网站以检索数据。</p><div class="mw mx gp gr my mz"><a href="https://www.datadriveninvestor.com/2020/07/07/introduction-to-time-series-forecasting-of-stock-prices-with-python/" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd iu gy z fp ne fr fs nf fu fw is bi translated">用Python |数据驱动投资者进行股票价格时间序列预测简介</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">在这个简单的教程中，我们将看看如何将时间序列模型应用于股票价格。更具体地说，一个…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="ni l"><div class="nj l nk nl nm ni nn ks mz"/></div></div></a></div><p id="d873" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">FinViz使得URL在代码中实现起来很简单(只需在http://finviz.com/quote.ashx?t=的<a class="ae ky" href="https://finviz.com/quote.ashx?t=aapl" rel="noopener ugc nofollow" target="_blank">之后添加股票代码)。但是，它们会阻止没有用户代理头的请求(这些请求模拟了一个典型的浏览器)。我们可以将这个头作为参数添加到urllib的Request方法中。最后，我们可以打开URL并将HTML存储在一个变量中。</a></p><p id="db7c" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">现在我们可以访问HTML代码了，我们可以使用漂亮的Pandas.read_html()方法快速创建Pandas数据帧。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Creating DataFrames from the HTML</figcaption></figure><p id="85c5" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">我们可以为不同的数据表创建三个独立的函数，因此我们可以根据自己的喜好调用其中的任何一个。为了抑制潜在的错误，我们可以在这三个函数中包含一个try/except块。</p><p id="f279" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">由于Pandas.read_html()返回一个数据帧列表，我们可以通过在属性字典中包含表的类名并只调用第一个索引来缩小到我们特别需要的数据帧。你可以打开开发者工具，查看网站源代码，找到HTML中标签的类名。你可以在这里阅读更多关于Chrome开发工具的信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/1d46a1a008e639ab7065e96a78233a5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-7_dxQs0gyEyp5bnVw7Y_A.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Finding the class name for an HTML tag in Chrome Developer Tools</figcaption></figure><p id="d433" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">在这个场景中，我们想要抓取的每个表都包含一个不同的类名，因此我们可以轻松地专门调用它们。特别是对于新闻专栏，我们可以通过找到所有的“a”标记并检索它们的“href”参数值来检索新闻文章的链接。</p><p id="7645" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">最后，我们可以清理得到的数据帧，通过切换列、更改列名和设置索引来使它们提供更多信息。</p><p id="b899" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">现在，您应该能够打印任何函数，并在几秒钟内检索所需的数据，如下图GIF所示！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/677d6f7cbbfb54afc584437d7ad5827a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*EnFTBRdXga32bGt83dG_bw.gif"/></div></div></figure><p id="424e" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">如果你想要这篇文章的完整代码，你可以访问<a class="ae ky" href="https://gist.github.com/shashankvemuri/b791e316efa18c8707fb912f69760b09" rel="noopener ugc nofollow" target="_blank">GitHub Gist</a>。我希望这个刮刀将证明对你将来的努力有用。非常感谢您的阅读！</p><p id="d6f8" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated"><em class="mt">免责声明:本文材料纯属教育性质，不应作为专业投资建议。自行决定投资。</em></p></div><div class="ab cl nq nr hx ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="im in io ip iq"><p id="5fdd" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">如果你喜欢这篇文章，可以看看下面我写的其他一些Python for Finance文章！</p><div class="mw mx gp gr my mz"><a href="https://towardsdatascience.com/parse-thousands-of-stock-recommendations-in-minutes-with-python-6e3e562f156d" rel="noopener follow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd iu gy z fp ne fr fs nf fu fw is bi translated">使用Python在几分钟内解析数千份股票推荐！</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">了解如何在不到3分钟的时间内解析顶级分析师的数千条建议！</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">towardsdatascience.com</p></div></div><div class="ni l"><div class="nx l nk nl nm ni nn ks mz"/></div></div></a></div><div class="mw mx gp gr my mz"><a href="https://towardsdatascience.com/making-a-stock-screener-with-python-4f591b198261" rel="noopener follow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd iu gy z fp ne fr fs nf fu fw is bi translated">用Python制作股票筛选程序！</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">学习如何用Python制作一个基于Mark Minervini的趋势模板的强大的股票筛选工具。</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">towardsdatascience.com</p></div></div><div class="ni l"><div class="ny l nk nl nm ni nn ks mz"/></div></div></a></div><div class="mw mx gp gr my mz"><a href="https://towardsdatascience.com/creating-a-finance-web-app-in-3-minutes-8273d56a39f8" rel="noopener follow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd iu gy z fp ne fr fs nf fu fw is bi translated">在3分钟内创建一个财务Web应用程序！</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">了解如何使用Python中的Streamlit创建技术分析应用程序！</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">towardsdatascience.com</p></div></div><div class="ni l"><div class="nz l nk nl nm ni nn ks mz"/></div></div></a></div><p id="7cd4" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated"><strong class="lx iu">访问专家视图— </strong> <a class="ae ky" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank"> <strong class="lx iu">订阅DDI英特尔</strong> </a></p></div></div>    
</body>
</html>