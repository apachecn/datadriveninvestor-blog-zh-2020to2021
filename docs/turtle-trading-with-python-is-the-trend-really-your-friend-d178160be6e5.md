# 用 Python 做海龟交易——趋势真的是你的朋友吗？

> 原文：<https://medium.datadriveninvestor.com/turtle-trading-with-python-is-the-trend-really-your-friend-d178160be6e5?source=collection_archive---------2----------------------->

![](img/a365ccdf3e9e070117900a11ebd0b680.png)

*TL DR:*[Github 代码 ](https://github.com/David-Woroniuk/Medium-Articles/blob/master/Turtle_Trading_with_Python%E2%80%94_Is_the_trend_really_your_friend%3F.ipynb)

# 那么什么是海龟交易呢？

1983 年，传奇交易者理查德·丹尼斯把最初的 5000 美元变成了 1 亿多美元，他和生意伙伴威廉·埃克哈特打赌，任何人都可以被教会交易，或者“成长”，就像他在新加坡观察到的小海龟一样。

就这样，“海龟交易”诞生了，海龟们，或者说学生们，有了一系列的规则，形成了一个完整的交易系统，包括交易市场，仓位大小，进场，出场和止损。

# 海龟交易的主要组成部分

这个实验的目的是提供一个完全机械的方法，可能不是 100%的成功，但是会提供消除情绪和判断的规则，让交易者只知道规则，别无其他。

市场——买什么或卖什么:第一个决定是买什么和卖什么，或者说，在什么市场交易。

**仓位大小——买多少或卖多少:**决定买多少或卖多少是最基本的，但经常被大多数交易者忽略。

**进场——何时买入或卖出:**何时买入或卖出的决策称为进场决策。

**出场——何时退出赢仓:**过早退出赢仓是交易趋势跟踪系统时最常见的错误之一。

**止损——何时退出亏损的头寸:**减少亏损最重要的是在你进入一个头寸之前，预先确定你将‘止损’的点*。*

根据理查德·丹尼斯的说法，这些规则非常简单，但在实践中却很难应用:

“我总是说，你可以在报纸上公布我的交易规则，但没有人会遵守。关键是一致性和纪律性。几乎任何人都可以列出一个规则清单，这个清单有我们教给我们的人的 80%好。他们做不到的是给他们信心，让他们即使在情况变糟时也能坚持这些规则。”——杰克·d·施瓦格的《市场奇才》。

# Python 中的海龟交易

让我们从导入所需的包开始——Yahoo！金融，同时导入库 Numpy、Pandas、Matplotlib 和 Datetime:

让我们使用 Datetime 来生成一个函数数据集。小心，我们必须使用日期时间参数。isoformat()将它转换成一个可以被 Yahoo！金融:

我们现在可以使用 Pandas Datareader 为指定的样本导入标准普尔 500 (^GSPC)数据:

现在，我们需要生成一些触发器，在这些触发器下启动“买入订单”或“卖出订单”的操作:

我们可以调用动作数据帧的“触发器”列来检查何时建议采取动作。然而，这种算法不适应净空头头寸——如果库存为 0，我们就不能卖出指数。现在，我们可以定义一个决策函数:

当我们执行这个函数时，没有输出。这是因为我们必须将参数传递给决策函数:

既然我们已经将参数传递给了' trade '函数，那么代码试图执行的每个操作都将被打印出来，同时还有相应的结果。在我们可视化算法的输出之前，我们可以定义一个名为 Index_Returns 的函数，它提供整个采样周期的简单指数返回。

第一个调整后的收盘值和最后一个调整后的收盘值被传递给函数，生成一个基准来衡量算法的性能:

我们可以将基准性能添加到图表标题中，并可视化算法在样本上的性能:

总的来说，这种算法在样本上仍然产生正回报，但是，它的表现大大低于基准。这可能是由于使用了低频数据，但更有可能的是参数需要调整。

请继续关注我们继续编码其他交易算法！