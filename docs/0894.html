<html>
<head>
<title>How Alibaba Improves Developer Experience on K8s</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">阿里巴巴如何改善K8s上的开发者体验</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/how-alibaba-improves-developer-experience-on-k8s-35c687a02275?source=collection_archive---------6-----------------------#2020-02-21">https://medium.datadriveninvestor.com/how-alibaba-improves-developer-experience-on-k8s-35c687a02275?source=collection_archive---------6-----------------------#2020-02-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ccc0c64b6baf39f8c0dcc5b479095516.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PyrIG_q6Pjub0-3I.png"/></div></div></figure><p id="ac9c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如今，<a class="ae kw" href="https://www.alibabacloud.com/product/kubernetesk8s_595874?spm=a2c41.14019725.0.0" rel="noopener ugc nofollow" target="_blank">阿里巴巴在云规模运行Kubernetes </a>(缩写k8s)。阿里巴巴不仅在云上管理10，000个k8s集群，还运行10，000个节点规模的集群，以支持电子商务业务运营。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/39aa1bacd6fc4bea9f59fdb9c7f08173.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YK7pssqC-DNqrXH0.png"/></div></div></figure><p id="01f4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们的集装箱化之旅始于2013年。在Docker诞生之前，有一个叫做T4的东西，这是一个基于lxc的容器引擎，由阿里巴巴开发，用于部署位于裸机上的应用程序。2017年，类似于k8s的容器编排引擎适马被开发为统一层，以管理平均利用率为40%的内部机器池。2018年，适马被重新制作并迁移到k8s兼容。我们的工程师编写定制控制器和调度算法，并向用户公开声明式API。到2019年底，阿里巴巴的大多数应用程序都在k8s上运行，数十个框架建立在k8s生态系统之上。2019年的双11活动不仅是商业上的成功，也是k8s可以在这样的规模上支持基础设施的技术证明。</p><div class="lc ld gp gr le lf"><a href="https://www.datadriveninvestor.com/2018/09/22/infographic-journey-to-the-clouds/" rel="noopener  ugc nofollow" target="_blank"><div class="lg ab fo"><div class="lh ab li cl cj lj"><h2 class="bd ir gy z fp lk fr fs ll fu fw ip bi translated">信息图:云之旅</h2><div class="lm l"><h3 class="bd b gy z fp lk fr fs ll fu fw dk translated">聪明的企业领导者了解利用云的价值。随着数据存储需求的增长，他们已经…</h3></div><div class="ln l"><p class="bd b dl z fp lk fr fs ll fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="lo l"><div class="lp l lq lr ls lo lt jw lf"/></div></div></a></div><p id="7107" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们解决了k8s中的可扩展性和稳定性问题之后，我们面临着另一个巨大的挑战——k8s API对于开发人员来说太复杂太难学了。为什么？我来澄清三大原因:</p><p id="ad04" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，k8s资源模型不是以应用为中心的。k8s中没有“应用程序”的概念，只是松散耦合的底层资源。部署应用程序需要编写基础设施资源，如Pod或网络或存储，它们是松散耦合的，因为没有中心点。对于开发者来说，他们不想指定这么低级的细节；他们希望指定高级应用程序规范，例如具有自动伸缩、监控、VPC等功能的无状态服务组件。我们需要提供高级应用规范和以应用为中心的资源模型，以弥合部署应用和配置基础架构之间的差距。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/7636655386d2b2532ad39dd92805310d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9xSGhiLcc8c4hca3.png"/></div></div></figure><p id="9b25" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">其次，k8s API中没有关注点分离。从上图我们可以看出，k8s将所有属于不同角色的字段封装在一个API中。例如，开发人员将只指定容器映像、端口和健康检查；操作员负责指定副本大小、滚动更新策略、卷访问模式等。k8s API没毛病。K8s旨在公开基础设施功能，并用于构建其他平台。因此，它需要包含一切，并提供一体化的API。但是我们发现一体化API并不适合终端用户应用。在k8s API之上，我们需要分离开发人员和操作人员的角色和关注点。</p><p id="7ed3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第三，k8s上没有可移植的应用抽象。K8s定义了消耗基础设施资源的标准方式。但是如上所述，部署应用程序需要入口、监控等。我们需要标准化这些应用程序操作接口，并拥有跨平台的可移植应用程序抽象。</p><p id="a962" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这可以归结为我今天要介绍的一个新东西，叫做开放应用模型(OAM)。它是一个标准规范，定义了模块化、可扩展、可移植的应用模型，用于构建和交付云原生应用。让我们深入了解一下OAM，看看它是如何解决上述问题的。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/96b15949cf41aaa75f5e1987f4bd28e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gNvLV0j3Y6KSvUun.png"/></div></div></figure><p id="ce9d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从上图我们可以看到，开发者定义了<em class="lu">组件</em>来描述服务单元。然后，操作员定义操作<em class="lu">特性</em>并将其附加到<em class="lu">应用配置</em>中的<em class="lu">组件</em>上，这就是最终的OAM交付。底层基础设施资源将由OAM平台呈现。OAM隐藏了底层细节，如基础架构是云还是物联网，并从以应用程序为中心的角度标准化了部署模式。</p><p id="94a2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">OAM将包含一组工作负载/特征/范围类型的核心定义为应用交付平台的基石。它们是构建部署管道的最小功能集。一个名为Rudr的开源实现已经实现了核心规范。</p><p id="5d08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，Rudr提供了让用户扩展其功能的机制。例如，Rudr core提供服务器工作负载来运行容器中的应用程序并管理应用程序的生命周期。我可以添加更多的工作负载，比如运行无服务器功能的FaaS，或者定义CronJob风格的HPA策略的CronHPA。OAM以标准的声明方式在单个平台中管理这些功能及其关系。</p><p id="4b8e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">到目前为止，我们已经讨论了OAM的动机和架构细节。值得注意的是，OAM项目是厂商中立的，并且是社区驱动的。该规范和实现得到了包括阿里巴巴、微软、Upbound在内的开放社区的支持。它欢迎更多的人参与进来，共同构建应用交付的未来。您可以:</p><p id="742d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">促成回购:</p><ul class=""><li id="af87" class="lv lw iq ka b kb kc kf kg kj lx kn ly kr lz kv ma mb mc md bi translated"><a class="ae kw" href="https://github.com/oam-dev/speck8s_595874?spm=a2c41.14019725.0.0" rel="noopener ugc nofollow" target="_blank">https://github.com/oam-dev/spec</a></li><li id="48b7" class="lv lw iq ka b kb me kf mf kj mg kn mh kr mi kv ma mb mc md bi translated"><a class="ae kw" href="https://github.com/oam-dev/rudrk8s_595874?spm=a2c41.14019725.0.0" rel="noopener ugc nofollow" target="_blank">https://github.com/oam-dev/rudr</a></li></ul><p id="96af" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">加入邮件列表:<a class="ae kw" href="https://groups.google.com/forum/k8s_595874?spm=a2c41.14019725.0.0#!forum/oam-dev" rel="noopener ugc nofollow" target="_blank">https://groups.google.com/forum/#!forum/oam-dev</a></p><p id="5e41" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">加入社区电话:<a class="ae kw" href="https://calendar.google.com/calendark8s_595874?spm=a2c41.14019725.0.0&amp;cid=dDk5YThyNGIwOWJyYTJxajNlbWI0a2FvdGtAZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ" rel="noopener ugc nofollow" target="_blank">每两周一次，太平洋标准时间周二上午10:30</a></p><p id="d3f8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">【阿里巴巴云原生应用团队邓</p><p id="7831" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lu">这是洪超·邓在2020年开发者周上的一次演讲的摘录。</em></p><h1 id="ee64" class="mj mk iq bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">原始来源:</h1><div class="lc ld gp gr le lf"><a href="https://www.alibabacloud.com/blog/how-alibaba-improves-developer-experience-on-k8s_595874?spm=a2c41.14019725.0.0" rel="noopener  ugc nofollow" target="_blank"><div class="lg ab fo"><div class="lh ab li cl cj lj"><h2 class="bd ir gy z fp lk fr fs ll fu fw ip bi translated">阿里巴巴如何改善K8s上的开发者体验</h2><div class="lm l"><h3 class="bd b gy z fp lk fr fs ll fu fw dk translated">阿里巴巴开发者2020年2月21日14阿里巴巴云原生应用团队邓</h3></div><div class="ln l"><p class="bd b dl z fp lk fr fs ll fu fw dk translated">www.alibabacloud.com</p></div></div><div class="lo l"><div class="nh l lq lr ls lo lt jw lf"/></div></div></a></div><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure></div></div>    
</body>
</html>