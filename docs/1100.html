<html>
<head>
<title>How to make the Package in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python制作包</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/how-to-make-the-package-in-python-a82292aeb775?source=collection_archive---------7-----------------------#2020-03-02">https://medium.datadriveninvestor.com/how-to-make-the-package-in-python-a82292aeb775?source=collection_archive---------7-----------------------#2020-03-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/22118b349baf3f933e97952a20120875.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N-SCDev9SUTpD2_X0aHJKw.jpeg"/></div></div></figure><p id="3f05" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本文中，我们将看到如何在GitHub和PiPy上制作包并公开它。包是模块的集合，模块是函数和类的集合。如果不广泛使用库，构建今天的软件是不可能的。库极大地减少了团队将工作投入生产所需的时间和精力。通过利用开源社区，工程师和科学家可以将他们独特的贡献推向更多的受众，并有效地提高他们代码的质量。各种规模的公司都使用这些库来将他们的工作置于现有功能之上，从而使产品开发更加高效和集中。</p><h2 id="a107" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">步骤1:-创建包框架</h2><p id="2d66" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated"><strong class="ka ir">挑名字</strong></p><p id="26f7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Python模块/包名称通常应遵循以下约束:</p><ul class=""><li id="9e2d" class="lu lv iq ka b kb kc kf kg kj lw kn lx kr ly kv lz ma mb mc bi translated">全部小写</li><li id="683d" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated">在PyPI上是独一无二的，即使你不想公开你的包(你可能想以后私下指定它为依赖)</li><li id="7771" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated">下划线分隔或根本没有单词分隔符(不要使用连字符)</li></ul><p id="01b4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们决定将我们的代码转换成一个名为<code class="fe mi mj mk ml b"><strong class="ka ir">ankitpackage</strong></code>的模块。</p><p id="1b4e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mi mj mk ml b"><strong class="ka ir">ankitpackage</strong></code>的初始目录结构应该如下所示:</p><pre class="mm mn mo mp gt mq ml mr ms aw mt bi"><span id="ae5f" class="kw kx iq ml b gy mu mv l mw mx"><strong class="ml ir">ankitpackage</strong><br/>├── <strong class="ml ir">ankitpackage</strong><br/> └── __init__.py<br/>├── setup.py</span></pre><p id="b956" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">顶层目录是我们回购的根目录，如<code class="fe mi mj mk ml b">ankitpackage.git</code>。子目录也称为，是实际的Python模块。</p><h2 id="9132" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">步骤2:-填写描述细节</h2><p id="bd95" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">主设置配置文件<code class="fe mi mj mk ml b">setup.py</code>应该包含一个对<code class="fe mi mj mk ml b">setuptools.setup()</code>的调用，如下所示:</p><pre class="mm mn mo mp gt mq ml mr ms aw mt bi"><span id="9140" class="kw kx iq ml b gy mu mv l mw mx">from setuptools import setup<br/><br/>setup(name='<!-- -->ankitpackage<!-- -->',<br/>      version='0.1',<br/>      description='First python package',<br/>      url='http://github.com/storborg/funniest',<br/>      author='Ankit',<br/>      author_email='ankit@example.com',<br/>      license='MIT',<br/>      packages=['<!-- -->ankitpackage<!-- -->'],<br/>      zip_safe=False)</span></pre><h2 id="c611" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">步骤3:添加附加文件</h2><p id="3531" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">额外的文件应该总是添加到内部的<code class="fe mi mj mk ml b">ankitpackage</code>目录中。</p><p id="71dd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如，让我们将我们的一个函数移动到一个新的<code class="fe mi mj mk ml b">utilities.py</code>子模块中，这样我们的目录层次结构如下所示:</p><pre class="mm mn mo mp gt mq ml mr ms aw mt bi"><span id="2957" class="kw kx iq ml b gy mu mv l mw mx"><strong class="ml ir">ankitpackage</strong><br/>├── <strong class="ml ir">ankitpackage</strong><br/> └── __init__.py<br/> └── utilities.py<br/>├── setup.py</span></pre><p id="d4a5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<code class="fe mi mj mk ml b">utilities.py</code>中:</p><pre class="mm mn mo mp gt mq ml mr ms aw mt bi"><span id="1b4c" class="kw kx iq ml b gy mu mv l mw mx">def joke():<br/>    return ('That is my first package!')</span></pre></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><h1 id="a75a" class="nf kx iq bd ky ng nh ni lb nj nk nl le nm nn no lh np nq nr lk ns nt nu ln nv bi translated"><strong class="ak">本地导入</strong></h1><p id="4eb8" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">现在，我们可以通过运行以下命令在本地安装该软件包(供我们的系统使用):</p><pre class="mm mn mo mp gt mq ml mr ms aw mt bi"><span id="5c60" class="kw kx iq ml b gy mu mv l mw mx">$ pip3 install .</span></pre><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nw"><img src="../Images/8aaf0c7d212ca4a53b3e27ad34b21af7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*reQ3TVrfnfZ2tfv7TxPOMA.png"/></div></div></figure><p id="b407" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在安装后，我们可以在系统的任何地方使用它。</p><pre class="mm mn mo mp gt mq ml mr ms aw mt bi"><span id="1cb6" class="kw kx iq ml b gy mu mv l mw mx">&gt;&gt;&gt; from ankitpackage import utilities</span><span id="6407" class="kw kx iq ml b gy nx mv l mw mx">&gt;&gt;&gt; print (utilities.joke())</span></pre><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/cadbbcccc9a6ae0c40bd78aee8b281d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*LkDfxx2aFLpvR8W4JxMF6Q.png"/></div></figure></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><h1 id="18d4" class="nf kx iq bd ky ng nh ni lb nj nk nl le nm nn no lh np nq nr lk ns nt nu ln nv bi translated">在GitHub上发布</h1><h2 id="5130" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">开源代码库</h2><p id="eb2a" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">GitHub，Inc .是一家总部位于美国的全球性公司，使用Git为软件开发版本控制提供托管服务。</p><div class="nz oa gp gr ob oc"><a href="https://www.datadriveninvestor.com/2019/02/21/best-coding-languages-to-learn-in-2019/" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ir gy z fp oh fr fs oi fu fw ip bi translated">2019年最值得学习的编码语言|数据驱动的投资者</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">在我读大学的那几年，我跳过了很多次夜游去学习Java，希望有一天它能帮助我在…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq jw oc"/></div></div></a></div><h2 id="d0d3" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">忽略文件(。gitignore等)</h2><p id="41dd" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated"><strong class="ka ir">。gitignore file </strong>是一个文本<strong class="ka ir">文件</strong>，它告诉Git忽略项目中的哪些<strong class="ka ir">文件</strong>或文件夹。一个当地人。<strong class="ka ir"> gitignore文件</strong>通常放在一个项目的根目录下。您还可以创建一个全局的。<strong class="ka ir"> gitignore文件</strong>和该<strong class="ka ir">文件</strong>中的任何条目都将在您的所有Git存储库中被忽略。因此，我们的目录层次结构如下所示:</p><pre class="mm mn mo mp gt mq ml mr ms aw mt bi"><span id="4f26" class="kw kx iq ml b gy mu mv l mw mx"><strong class="ml ir">ankitpackage</strong><br/>├── <strong class="ml ir">ankitpackage</strong><br/> └── __init__.py<br/> └── utilities.py<br/>├── setup.py<br/>├── .gitignore</span></pre><p id="011f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<code class="fe mi mj mk ml b">.gitignore</code>中:</p><pre class="mm mn mo mp gt mq ml mr ms aw mt bi"><span id="154c" class="kw kx iq ml b gy mu mv l mw mx"># Compiled python modules.<br/>*.pyc</span><span id="7450" class="kw kx iq ml b gy nx mv l mw mx"># Setuptools distribution folder.<br/>/dist/</span><span id="7c84" class="kw kx iq ml b gy nx mv l mw mx"># Python egg metadata, regenerated from source files by setuptools.<br/>/*.egg-info</span></pre><p id="ee5f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，通过以下命令在GitHub上推送您的包。</p><pre class="mm mn mo mp gt mq ml mr ms aw mt bi"><span id="809b" class="kw kx iq ml b gy mu mv l mw mx">$ git init<br/>$ git add .<br/>$ git commit -m "first commit"<br/>$ git remote add origin <a class="ae or" href="https://github.com/rajputankit22/ankitpackage.git" rel="noopener ugc nofollow" target="_blank">https://github.com/rajputankit22/ankitpackage.git</a><br/>git push -u origin master</span></pre><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi os"><img src="../Images/0b2d0a58f98e8ac622c1e5c2c33a8bfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_q74sxZNjzJ54pbGB10mvA.png"/></div></div></figure><h2 id="ea83" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">从GitHub安装我们的Python库</h2><p id="cac6" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">我们的库托管在GitHub上，我们只需使用<code class="fe mi mj mk ml b">pip3 install git+</code>，后跟GitHub repo上提供的URL(可通过点击GitHub网站上的<em class="ot">克隆或下载</em>按钮获得):</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ou"><img src="../Images/ae005bc2ffca10564bd5291950f8c382.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3rNA2_A0-Ibw2pRxqGxVxw.png"/></div></div></figure><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ov"><img src="../Images/6ca32b713017114fabd4455542eb9107.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Mq0aa3AtB-HgGoNKcxilQ.png"/></div></div></figure></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><h1 id="3ac9" class="nf kx iq bd ky ng nh ni lb nj nk nl le nm nn no lh np nq nr lk ns nt nu ln nv bi translated">在PiPy上发布</h1><p id="6495" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated"><code class="fe mi mj mk ml b">setup.py</code>脚本也是我们在PyPI上注册包名和上传源代码的主要入口点。</p><p id="d600" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">到<code class="fe mi mj mk ml b">register</code>包(这将保留名称，上传包元数据，并创建pypi.python.org网页):</p><pre class="mm mn mo mp gt mq ml mr ms aw mt bi"><span id="96f9" class="kw kx iq ml b gy mu mv l mw mx">$ python3 setup.py register</span></pre><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ow"><img src="../Images/2305051119ed99f439e1efb2dcf77f02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zB_lZxe0JiCF4GUtZrMX0Q.png"/></div></div></figure><p id="cf31" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您以前没有在PyPI上发布过东西，您需要按照这里提供的步骤创建一个帐户。</p><p id="6234" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先使用以下内容创建一个源分布:</p><pre class="mm mn mo mp gt mq ml mr ms aw mt bi"><span id="5db1" class="kw kx iq ml b gy mu mv l mw mx">$ python3 setup.py sdist</span></pre><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ox"><img src="../Images/c4875152a4c74343c6f8d27658df8db7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yJcP_IO67-QCG_wqOdsxqg.png"/></div></div></figure><p id="b531" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将在我们的顶级目录中创建<code class="fe mi mj mk ml b">dist/ankitpackage-0.1.tar.gz</code>。如果您愿意，可以将该文件复制到另一台主机上，尝试解压缩并安装它，以验证它是否适合您。</p><p id="f25d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，该文件可以通过以下方式上传到PyPI:</p><pre class="mm mn mo mp gt mq ml mr ms aw mt bi"><span id="019e" class="kw kx iq ml b gy mu mv l mw mx">$ python3 setup.py sdist upload</span></pre><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oy"><img src="../Images/c0587d681c3eb7f196ca761f9c273fff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J7dO2rBqyAvFrH4iD2ZYaQ.png"/></div></div></figure><h2 id="caa1" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">从PiPy安装软件包</h2><p id="f82c" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">此时，该套餐的其他消费者可以安装带有<code class="fe mi mj mk ml b">pip</code>的套餐:</p><pre class="mm mn mo mp gt mq ml mr ms aw mt bi"><span id="c1f4" class="kw kx iq ml b gy mu mv l mw mx">$ pip3 install <!-- -->ankitpackage</span></pre><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oz"><img src="../Images/866ed9ae243bfffdeb04095f8729d733.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SPYgxXoVIBgxK9ZqLKxjKg.png"/></div></div></figure><p id="1e70" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本文描述了如何用python创建包，以及如何为其他开发者和我们的同事推送GitHub和pipy。</p><p id="9712" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="ot">欢迎在评论区提出任何问题或疑问，或者你可以在脸书上ping我。</em> </strong></p><figure class="mm mn mo mp gt jr"><div class="bz fp l di"><div class="pa pb l"/></div></figure></div></div>    
</body>
</html>