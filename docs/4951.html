<html>
<head>
<title>Customization with NG2-Charts — an easy way to visualize data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用NG2图表定制—一种简单的数据可视化方法</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/customization-with-ng2-charts-an-easy-way-to-visualize-data-4c458148c47d?source=collection_archive---------3-----------------------#2020-08-31">https://medium.datadriveninvestor.com/customization-with-ng2-charts-an-easy-way-to-visualize-data-4c458148c47d?source=collection_archive---------3-----------------------#2020-08-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/54420c0048e6f047db2573401c793a48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*zGHC-NkPGYkFPlphFivD9g.png"/></div></figure><p id="7330" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Chart.js是开源生态系统中使用最多的可视化库之一。它不仅能很好地与普通javascript一起工作，而且还提供了对最流行的框架(如React、Angular和Vue)的扩展。如果你想更深入地了解你能通过chart.js <a class="ae ks" href="https://github.com/chartjs/awesome" rel="noopener ugc nofollow" target="_blank">实现什么，点击这里</a>。今天我们将讨论chart.js中的“options”参数提供的可定制性级别。</p><p id="b8d2" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">虽然我们可以在angular中直接使用chart.js，但建议我们通过chart.js社区提供的插件即NG2图表来使用。这个库使我们能够在angular中利用来自本机typescript代码的chart.js。</p><p id="414a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">要设置ng2图表，您可以访问<a class="ae ks" href="https://valor-software.com/ng2-charts/" rel="noopener ugc nofollow" target="_blank">这里</a>:</p><p id="9923" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在让我们进入有趣的部分:</p><p id="e3a6" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在使用ng2图表的angular中，选项参数声明如下:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="aba4" class="lc ld iq ky b gy le lf l lg lh">pieChartOptions: ChartOptions = {<br/> responsive: true,<br/> legend: { position: "top" },<br/> plugins: {<br/>  datalabels: {<br/>   formatter: (value, ctx) =&gt; {<br/>    const label = ctx.chart.data.labels[ctx.dataIndex];<br/>    return label;<br/>   },<br/>  },<br/> },<br/>};</span></pre><div class="li lj gp gr lk ll"><a href="https://www.datadriveninvestor.com/2020/07/30/why-is-real-time-data-processing-so-challenging/" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab fo"><div class="ln ab lo cl cj lp"><h2 class="bd ir gy z fp lq fr fs lr fu fw ip bi translated">为什么实时数据处理如此具有挑战性？数据驱动的投资者</h2><div class="ls l"><h3 class="bd b gy z fp lq fr fs lr fu fw dk translated">实时数据分析就是要缩小数据收集、分析和行动之间的差距。与……</h3></div><div class="lt l"><p class="bd b dl z fp lq fr fs lr fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="lu l"><div class="lv l lw lx ly lu lz js ll"/></div></div></a></div><p id="8399" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">当前代码允许在代表标签的部分显示标签。</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi ma"><img src="../Images/e33efef8b62ee59a3674bcd8a5bdfbab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f6XpkkdvWzExIq3fjbcSZg.png"/></div></div></figure><p id="d26b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">假设您希望更改标签各部分的百分比，如下所示:</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/6f9b4c45bd621773783626b30c6d0fd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*3CKY7SdcTjmU4GNXUo2JNw.png"/></div></figure><p id="a429" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">为此，我们将对数据标签中插件部分的格式化函数进行更改:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="c709" class="lc ld iq ky b gy le lf l lg lh">ChartOptions: ChartOptions = {<br/> responsive: true,<br/> tooltips: {<br/>  enabled: true,<br/>  callbacks: {<br/>   label: function (tooltipItem, data) {<br/>    let label = data.labels[tooltipItem.index];<br/>    let count = data<br/>                .datasets[tooltipItem.datasetIndex]<br/>                .data[tooltipItem.index];</span><span id="5b9b" class="lc ld iq ky b gy mg lf l lg lh">    return label + "Reads Count : " + count;<br/>   },<br/>  },<br/> },<br/> plugins: {<br/>  datalabels: {<br/>   color: "white",<br/>   formatter: (value, ctx) =&gt; {<br/>    var perc = ((value * 100) / totalCount).toFixed(0) + "%";<br/>    return perc;<br/>   },<br/>  },<br/> },<br/>};</span></pre><p id="fe43" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在让我们考虑你想要创建一个条形图或折线图并且想要x轴和y轴标签显示它们是什么样子的:</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/ac67c2130c7e98afa884ae39c468c165.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*X3b9b_VCtAVA4wHHQ5c3Tg.png"/></div></figure><p id="cad3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">为此，您需要在两个轴上添加scaleLabel关键点，如下所示:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="76df" class="lc ld iq ky b gy le lf l lg lh">ChartOptions: any = {<br/> responsive: true,<br/> scales: {<br/>  yAxes: [<br/>   {<br/>    display: true,<br/>    scaleLabel: {<br/>     display: true,<br/>     labelString: "Number of Reads",<br/>    },<br/>   },<br/>  ],<br/>  xAxes: [<br/>   {<br/>    scaleLabel: {<br/>     display: true,<br/>     labelString: "Date",<br/>    },<br/>   },<br/>  ],<br/> },<br/>};</span></pre><p id="e4b8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在，假设您想在中添加线性时间序列数据，该数据显示所有数据点，但不是下面的所有标签，但您可以在悬停数据点时查看该数据点。不仅如此，随着越来越多的数据点的增加，标签也会随之调整。下面的图表单位设置为周，因此它只显示周末的标签。</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/691b1f2458f2bf205814871c2febf19b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*x7MWhhBkVFha1Jk-f8OBZA.gif"/></div></figure><p id="417d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">为此，您可以将数据添加为日期对象，图表选项将相应地对数据进行预处理</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="2b18" class="lc ld iq ky b gy le lf l lg lh">ChartOptions: any = {<br/> responsive: true,<br/> showLine: true,</span><span id="6076" class="lc ld iq ky b gy mg lf l lg lh">scales: {<br/>  xAxes: [<br/>   {<br/>    barPercentage: 0.9,<br/>    categoryPercentage: 0.55,<br/>    type: "time",<br/>    distribution: "linear",<br/>    time: {<br/>     unit: "week",<br/>    },<br/>    scaleLabel: {<br/>     display: true,<br/>     labelString: "Date",<br/>    },<br/>   },<br/>  ],<br/>  yAxes: [<br/>   {<br/>    scaleLabel: {<br/>     display: true,<br/>     labelString: "Number of Reads",<br/>    },<br/>   },<br/>  ],<br/> },<br/>};</span></pre><p id="d671" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">需要注意的是，x轴上的类型应该是时间，并且应该给出适当的时间单位，如日、周和月等。</p><p id="1f7d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这只是冰山一角，chart.js为其用户提供了广泛的可定制性。它还提供设置最小和最大数据级别步长、网格线隐藏等等。你可以在这里  <em class="mj">查看详细的样品和文档<a class="ae ks" href="https://www.chartjs.org/samples/latest/" rel="noopener ugc nofollow" target="_blank"> <em class="mj">。</em></a></em></p><p id="3feb" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">访问专家视图— </strong> <a class="ae ks" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir">订阅DDI英特尔</strong> </a></p></div></div>    
</body>
</html>