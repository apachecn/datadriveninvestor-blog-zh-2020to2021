<html>
<head>
<title>Introduction to Ansible</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ansible简介</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/introduction-to-ansible-785420f4921a?source=collection_archive---------3-----------------------#2020-07-10">https://medium.datadriveninvestor.com/introduction-to-ansible-785420f4921a?source=collection_archive---------3-----------------------#2020-07-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9ebf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">“敏捷和开发运维是为了利用、集成、互动和创新”</em></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/c6221847d2e9aa9e6ea1ef4da821c486.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TCxNJ3RDDEALq6tTMrH5-w.png"/></div></div></figure><p id="789e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">既然您已经来到这里学习ansible，我将假设您已经掌握了Linux的工作知识。<br/>所以我们滚吧！</p><p id="7c6d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">什么是Ansible？</strong> <br/>它是一个开源的自动化平台，或者可以描述为一种简单的自动化语言，可以用来在剧本中完美地描述It应用基础架构。Ansible可以轻松管理强大的自动化任务，并可以节省我们一些时间，它可以适应许多不同的工作流程和环境。</p><div class="ky kz gp gr la lb"><a href="https://www.datadriveninvestor.com/2020/05/12/private-equity-investors-need-to-keep-up-with-data-analytics/" rel="noopener  ugc nofollow" target="_blank"><div class="lc ab fo"><div class="ld ab le cl cj lf"><h2 class="bd ir gy z fp lg fr fs lh fu fw ip bi translated">私募股权投资者需要跟上数据分析|数据驱动的投资者</h2><div class="li l"><h3 class="bd b gy z fp lg fr fs lh fu fw dk translated">如果你有一把钥匙，可以打开商业成就和职业成功的捷径，你会不会用它…</h3></div><div class="lj l"><p class="bd b dl z fp lg fr fs lh fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="lk l"><div class="ll l lm ln lo lk lp kw lb"/></div></div></a></div><p id="d2d0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Ansible是<strong class="jp ir">简单的</strong> : <br/>剧本提供了人类可读的自动化。编写可行的行动手册不需要特殊的编码技能。因此，任何感到害怕并有疑问的人，无论我们是否需要成为一名优秀的程序员，答案都是否定的。任何人都可以编写可行的剧本。它让ansible快速提高工作效率。</p><p id="9b08" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Ansible是<strong class="jp ir">强大的</strong> : <br/> Ansible可以很容易地用于部署应用，用于工作流自动化和网络自动化。它可以轻松地执行整个应用程序生命周期。另外，ansible是使用无代理架构构建的。Anisble使用的网络协议是SSH。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lq"><img src="../Images/e29579a8dce437b270029988cc1c770b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UUmPMe5-ykKTdxGe4zRz4A.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk"><a class="ae lv" href="http://www.ansible.com" rel="noopener ugc nofollow" target="_blank">www.ansible.com</a></figcaption></figure><p id="9d38" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在谈一谈可行的体系结构，它涉及两种类型的机器，一种是控制节点，另一种是被管理节点。或者可以理解为主从概念。<br/>控制节点或主节点可能在管理员的笔记本电脑中，所有从节点或受管节点都在主机文件中键入，存在于我们从外部源安装的ansible包的清单文档中。<br/>现在，行动手册中提到的所有任务都在清单中提到的所有主机上执行。<br/>剧本用扩展名—”表示。yaml和剧本是包含一个或多个剧本的文件。<br/>现在，什么是戏？一出戏包含一系列要在主持人身上完成的任务。<br/>每个任务都包含一系列模块，它是一段代码。它是我们工具箱中的一个工具。Ansible有数百个有用的模块，可以执行各种各样的任务，如调用API、安装软件，从而减少了人工工作。<br/>其架构中另一个重要的东西是<em class="kl">插件。可以将它们添加到ansible中，以扩展和适应新的用户和平台。</em></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/2360ded013dfba986802d84340f1f336.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*Qy11R5z0zmeDTB4NmEystg.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk"><a class="ae lv" href="http://www.javatpoint.com" rel="noopener ugc nofollow" target="_blank"><strong class="bd lx">Javatpoint</strong></a></figcaption></figure><p id="b280" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">ansi ble的用例:</strong></p><ol class=""><li id="2ea8" class="ly lz iq jp b jq jr ju jv jy ma kc mb kg mc kk md me mf mg bi translated">交付:没有简单的自动化平台，就不能简单地创建CI/CD管道。可翻译的剧本使我们的应用程序得到正确部署。</li><li id="8399" class="ly lz iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated">安全性:为了将站点范围的安全性与自动化流程集成，我们可以在Ansible中定义安全性。它是所部署的一切不可或缺的一部分。</li><li id="ede8" class="ly lz iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated">供应:应用程序必须部署在系统上，ansible tower可以帮助执行供应系统的过程，无论我们是使用kickstart文件还是从模板创建虚拟机或云实例。</li><li id="1d48" class="ly lz iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated">应用程序部署:一旦应用程序用ansible定义，并用ansible tower管理，团队就可以有效地管理从开发到生产的整个应用程序生命周期。</li></ol><p id="e83b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在转到安装部分:</p><p id="ab45" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Ansible需要安装在控制器节点上。安装起来很简单。托管节点不需要安装ansible。ansible的先决条件是Python2。检查它是否已安装，如果已安装，它的当前版本是什么:</p><pre class="kn ko kp kq gt mm mn mo mp aw mq bi"><span id="6410" class="mr ms iq mn b gy mt mu l mv mw">[root@mtmintsrv001 ~]# yum list installed python<br/>Loaded plugins: langpacks, product-id, search-disabled-repos, subscription-<br/> : manager<br/>Installed Packages<br/>python.x86_64 2.7.5–76.el7 <a class="ae lv" href="http://twitter.com/anaconda" rel="noopener ugc nofollow" target="_blank">@anaconda</a>/7.6</span><span id="c4d4" class="mr ms iq mn b gy mx mu l mv mw">[root@aotasrvapp ~]# yum install -y ansible</span><span id="fd53" class="mr ms iq mn b gy mx mu l mv mw">The above command is used to install ansible package.</span><span id="eb28" class="mr ms iq mn b gy mx mu l mv mw">[root@aotasrvapp ~]# vim /home/ansible/inventories/hosts.ini</span><span id="0fb4" class="mr ms iq mn b gy mx mu l mv mw">aotasrvapp  ansible_user=root ansible_host=10.164.48.129 #ansible_connection=local</span><span id="00cf" class="mr ms iq mn b gy mx mu l mv mw">## Group for application servers<br/>[appservers]<br/>aotasrvapp</span></pre><p id="e313" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">可行的控制节点需要通过网络联系被管理的主机。它可以通过使用SSH连接来实现。</p><pre class="kn ko kp kq gt mm mn mo mp aw mq bi"><span id="cfb4" class="mr ms iq mn b gy mt mu l mv mw">[root@aotasrvapp ~]# ssh-keygen<br/>Generating public/private rsa key pair.<br/>Enter file in which to save the key (/root/.ssh/id_rsa):<br/>/root/.ssh/id_rsa already exists.<br/>Overwrite (y/n)? y<br/>Enter passphrase (empty for no passphrase):<br/>Enter same passphrase again:<br/>Your identification has been saved in /root/.ssh/id_rsa.<br/>Your public key has been saved in /root/.ssh/id_rsa.pub.<br/>The key fingerprint is:<br/>SHA256:iQT6NKTvrlaClXOnx7XY24p5TF+qNaHKVrjuakOTsGc root@aotasrvapp<br/>The key’s randomart image is:<br/>+ — -[RSA 2048] — — +<br/>| o |<br/>| + . |<br/>| o.o . |<br/>| =+.o…. |<br/>| o =o=.=S..  |<br/>|. o.E = =. .. |<br/>| *.o =.+oo |<br/>| ..o.o++.+. |<br/>| ..oo*B.oo |<br/>+ — — [SHA256] — — -+</span><span id="934f" class="mr ms iq mn b gy mx mu l mv mw">[root@aotasrvapp ~]# ssh-copy-id 10.164.48.129<br/>/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: “/root/.ssh/id_rsa.pub”<br/>/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed<br/>/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed — if you are prompted now it is to install the new keys<br/>root@10.164.48.129’s password:</span><span id="dcb6" class="mr ms iq mn b gy mx mu l mv mw">Number of key(s) added: 1</span><span id="e9c4" class="mr ms iq mn b gy mx mu l mv mw">Now try logging into the machine, with: “ssh ‘10.164.48.129’”<br/>and check to make sure that only the key(s) you wanted were added.</span></pre><p id="9ba8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上面的步骤用于创建一个ssh密钥，然后将其复制到我们想要运行ansible playbook的所有控制节点上。</p><p id="ff5f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，直到这一部分，我们已经涵盖了一些基本的理论部分，以及安装。在下一部分，我们将继续讨论这个问题的一些更实际的方面。</p><p id="88e6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="kl">保持学习！</em>T3】</strong></p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><p id="2e21" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">访问专家视图— </strong> <a class="ae lv" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">订阅DDI英特尔</strong> </a></p></div></div>    
</body>
</html>