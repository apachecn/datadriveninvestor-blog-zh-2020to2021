<html>
<head>
<title>Introduction to Hierarchical queries</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分层查询简介</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/introduction-for-hierarchical-queries-cbb8d04677cb?source=collection_archive---------6-----------------------#2020-02-09">https://medium.datadriveninvestor.com/introduction-for-hierarchical-queries-cbb8d04677cb?source=collection_archive---------6-----------------------#2020-02-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="7cac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kl translated">我们在生活中看到的大多数场景都与等级制度有关。诸如</p><ul class=""><li id="245a" class="ku kv iq jp b jq jr ju jv jy kw kc kx kg ky kk kz la lb lc bi translated">组织层次结构</li><li id="563c" class="ku kv iq jp b jq ld ju le jy lf kc lg kg lh kk kz la lb lc bi translated">产品层次结构</li><li id="ba5b" class="ku kv iq jp b jq ld ju le jy lf kc lg kg lh kk kz la lb lc bi translated">类层次</li></ul><p id="d90b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">层次数据模型</strong>用于对具有层次结构的数据进行建模。在分层数据模型中，数据被组织成一个<strong class="jp ir">树状结构</strong>。这种数据模型的主要特点是它包括与相同实体类型有关系的实体。例如，如果我们采用下面两个存储组织中雇员数据的表，manged _ by表包括两个雇员实体之间的关系。如果我们分析managed_by表的结构，我们可以看到“ReportsTo”列(关系列)表示两个雇员实体之间的关系。EmpNo列(子元素)中表示的雇员向reports列(父元素)中表示的雇员报告。</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi li"><img src="../Images/582c01f69b1f42ba37556cd0fff6d479.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*74ldT66_2YcklEcq"/></div></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk">Photo by <a class="ae ly" href="https://unsplash.com/@clintadair?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Clint Adair</a> on <a class="ae ly" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="db0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">分层查询是一种特殊类型的SQL查询，用于操作分层数据。在本文中，我将使用oracle数据库和下面的两个表来介绍分层查询。</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/b1012fea5c16f3345d87017f7d20f036.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*jH8f_1SkLSAEFzY24K10tg.png"/></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk"><a class="ae ly" href="https://en.wikipedia.org/wiki/Hierarchical_database_model" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Hierarchical_database_model</a></figcaption></figure><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/44932bf2ed6ff2bcbca1dbeb9bdbbdb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*sxKj5lg6ITIZ2H9kIzPpmg.png"/></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk">managed_by</figcaption></figure><p id="f1f3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Oracle有三个主要关键字用于分层查询。他们是</p><ul class=""><li id="b36e" class="ku kv iq jp b jq jr ju jv jy kw kc kx kg ky kk kz la lb lc bi translated"><strong class="jp ir">通过</strong>连接</li><li id="4e49" class="ku kv iq jp b jq ld ju le jy lf kc lg kg lh kk kz la lb lc bi translated"><strong class="jp ir">从</strong>开始</li><li id="4412" class="ku kv iq jp b jq ld ju le jy lf kc lg kg lh kk kz la lb lc bi translated"><strong class="jp ir">按</strong>排列兄弟姐妹</li></ul><h1 id="d4f7" class="mb mc iq bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">连接方式</h1><p id="8b40" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">Connected by关键字用于指定父实例和子实例之间的关系。如果我们以组织层级为例，connected by可以用来指定员工和经理之间的关系。</p><figure class="lj lk ll lm gt ln"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="9002" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Connected by关键字不能用于查询具有循环关系的数据。如果使用它，将会出现以下错误。</p><p id="7d83" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">"<strong class="jp ir"> ORA-01436:通过用户数据中的循环连接</strong>"</p><p id="5a42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了减少这种错误，我们可以使用NOCYCLE关键字作为连接条件。</p><figure class="lj lk ll lm gt ln"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="6e7c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">从</strong>开始</p><p id="e76c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在大多数层次结构中有一个根元素是很常见的。根元素的特殊之处在于它没有父元素。不同的人用不同的方法来表示根元素，如。</p><ul class=""><li id="82d8" class="ku kv iq jp b jq jr ju jv jy kw kc kx kg ky kk kz la lb lc bi translated">向根元素的关系列添加特殊字符串。</li><li id="ec1c" class="ku kv iq jp b jq ld ju le jy lf kc lg kg lh kk kz la lb lc bi translated">保持根元素的关系列为空。</li></ul><div class="ng nh gp gr ni nj"><a href="https://www.datadriveninvestor.com/2019/02/07/8-skills-you-need-to-become-a-data-scientist/" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">成为数据科学家所需的8项技能|数据驱动型投资者</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">数字吓不倒你？没有什么比一张漂亮的excel表更令人满意的了？你会说几种语言…</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx ls nj"/></div></div></a></div><p id="ccec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">START WITH关键字用于指定层次结构的根行。在上面的示例中，根节点是Director。</p><figure class="lj lk ll lm gt ln"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="e9a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">按</strong>排列兄弟姐妹</p><p id="d3a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ORDER SIBLINGS BY keyword用于指定查询结果的排序方式。</p><figure class="lj lk ll lm gt ln"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="0640" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">参考资料:</p><ul class=""><li id="19fb" class="ku kv iq jp b jq jr ju jv jy kw kc kx kg ky kk kz la lb lc bi translated"><a class="ae ly" href="https://docs.oracle.com/cd/B19306_01/server.102/b14200/queries003.htm" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/CD/b 19306 _ 01/server . 102/b 14200/queries 003 . htm</a></li><li id="3166" class="ku kv iq jp b jq ld ju le jy lf kc lg kg lh kk kz la lb lc bi translated">https://en.wikipedia.org/wiki/Hierarchical_database_model<a class="ae ly" href="https://en.wikipedia.org/wiki/Hierarchical_database_model" rel="noopener ugc nofollow" target="_blank"/></li></ul><figure class="lj lk ll lm gt ln"><div class="bz fp l di"><div class="ny nf l"/></div></figure></div></div>    
</body>
</html>