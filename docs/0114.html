<html>
<head>
<title>Checklist For Testing BigData Systems</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">测试大数据系统的清单</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/checklist-of-testing-bigdata-systems-8f41257591de?source=collection_archive---------5-----------------------#2020-01-10">https://medium.datadriveninvestor.com/checklist-of-testing-bigdata-systems-8f41257591de?source=collection_archive---------5-----------------------#2020-01-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/436f5a9761479314520f67f82d40ada0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*EA_LOtG_XfbEG9GVl7Qh_g.png"/></div></figure><p id="bf54" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi ks translated"><span class="l kt ku kv bm kw kx ky kz la di"> B </span> <a class="ae lb" href="https://en.wikipedia.org/wiki/Big_data" rel="noopener ugc nofollow" target="_blank"> ig Data </a>一直是软件行业的流行语，主要是因为产生了大量无法用传统计算方法处理的数据。大数据有一个3 Vs ie的特点。容量(数据量)、速度(数据进出的速度)、多样性(数据类型和来源的范围)。</p><p id="9bec" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">话虽如此，测试大数据系统带来了全新的复杂性，它需要很多技能。没有结构化的策略来测试此类系统，因为您的脚本、检查和验证将取决于业务逻辑，但是在测试大数据系统时需要注意某些方法或清单。这篇文章将主要围绕这样的清单和策略。</p><p id="1037" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">注意——本文将<strong class="jw ir"> <em class="lc">而不是</em> </strong>介绍方法和实现。</p><p id="90ca" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在进入清单之前，让我们快速讨论一下任何处理大数据的应用程序的组件</p><ul class=""><li id="fcf6" class="ld le iq jw b jx jy kb kc kf lf kj lg kn lh kr li lj lk ll bi translated"><em class="lc">数据摄取</em>，是将数据(即大量数据)注入大数据系统的层。这些数据可以是结构化、半结构化或非结构化的，存储可以是Hadoop、MongoDB或任何其他存储。它也被称为预处理阶段，在这个阶段测试非常关键，如果我们在这个阶段出错，整个管道都会受到不正确分析的影响。</li><li id="841d" class="ld le iq jw b jx lm kb ln kf lo kj lp kn lq kr li lj lk ll bi translated"><em class="lc">数据处理</em>顾名思义，在这一层发生摄取数据的处理。基于业务规则的数据聚合等处理，最终形成将通过map-reduce作业处理的键值对。</li><li id="89cb" class="ld le iq jw b jx lm kb ln kf lo kj lp kn lq kr li lj lk ll bi translated"><em class="lc">数据可视化，一旦根据业务规则处理数据，处理后的数据将直接ETL到数据仓库，或者一些系统将目标源作为一个不确定的步骤，数据通过该步骤加载到数据仓库，以便通过业务智能和分析提取有意义的信息。</em></li></ul><figure class="ls lt lu lv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lr"><img src="../Images/6a1b2c4247cf09581b4f46a588cde1bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TCghQO7Fw4zcwrJ6_rFCmg.jpeg"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk"><strong class="bd me">Big Data pipeline</strong></figcaption></figure><figure class="ls lt lu lv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi mf"><img src="../Images/076f1abdc1dba726a1055328463c905f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FhnRQtIhjHJOsWmj.png"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk"><strong class="bd me">Map-Reduce Data flow</strong></figcaption></figure></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><p id="e786" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi ks translated">让我们开始讨论这份清单</p><ul class=""><li id="f698" class="ld le iq jw b jx jy kb kc kf lf kj lg kn lh kr li lj lk ll bi translated">设置<strong class="jw ir"> <em class="lc">测试环境</em> </strong>非常关键，要确保测试环境有足够的空间来处理和存储基于被测应用的大量数据，还应该为每个组件设置一个分布式集群。</li><li id="7cd7" class="ld le iq jw b jx lm kb ln kf lo kj lp kn lq kr li lj lk ll bi translated">准备<strong class="jw ir"> <em class="lc">测试数据</em> </strong>正反两面以涵盖所有业务场景，最初尝试在验证时使用小样本数据(以KBs为单位),这将使事情变得简单一些，例如对照源数据验证所摄取数据的正确性，或者通过比较输出文件和输入文件来验证对所摄取数据实施的正确业务规则和数据聚合是否正确。</li><li id="756f" class="ld le iq jw b jx lm kb ln kf lo kj lp kn lq kr li lj lk ll bi translated">在数据流的每个阶段定制<strong class="jw ir"> <em class="lc">警报和日志</em> </strong>是至关重要的，尤其是在运行大量测试数据的执行时，这将有助于调试和捕捉系统错误。</li><li id="2c08" class="ld le iq jw b jx lm kb ln kf lo kj lp kn lq kr li lj lk ll bi translated">大数据系统的<strong class="jw ir"> <em class="lc">性能</em> <em class="lc">测试</em> </strong>非常重要，因此它涉及到建立负载测试脚本和分析指标等活动。</li><li id="12d9" class="ld le iq jw b jx lm kb ln kf lo kj lp kn lq kr li lj lk ll bi translated">检查<strong class="jw ir"> <em class="lc">指标</em> </strong>如吞吐量、错误率和将数据接收到数据存储所用的时间如插入率、队列可以处理的消息和map-reduce针对HDFS数据独立执行的作业。</li><li id="e58a" class="ld le iq jw b jx lm kb ln kf lo kj lp kn lq kr li lj lk ll bi translated">由于系统由不同组件组成，因此对每个组件单独进行负载测试至关重要。</li><li id="162c" class="ld le iq jw b jx lm kb ln kf lo kj lp kn lq kr li lj lk ll bi translated">在执行<strong class="jw ir"> <em class="lc">负载测试</em> </strong>时，考虑<strong class="jw ir"> <em class="lc">因素</em> </strong>如应用程序日志将增长多少，如何缓存行缓存和键缓存，超时如查询超时和连接超时，消息队列等。</li><li id="9ea4" class="ld le iq jw b jx lm kb ln kf lo kj lp kn lq kr li lj lk ll bi translated">在<strong class="jw ir"> <em class="lc">数据摄取</em> </strong>过程中，数据是从不同格式的多个来源生成的，如RDBMS、社交媒体、日志等，因此准备所有可能的数据格式将是关键。并验证数据是按照定义的模式接收的。可以使用QuerySurge，Datameer，Talend之类的工具。</li><li id="abf6" class="ld le iq jw b jx lm kb ln kf lo kj lp kn lq kr li lj lk ll bi translated">确保数据的正确性，如源数据与摄取数据的比较，并将数据加载到正确的HDFS位置。使用自定义脚本、警报和日志来调试大量数据的接收和正确性。摄取中常用的一些工具和库有— <em class="lc"> Kafka、Zookeeper、Sqoop、Flume、Storm、Amazon Kinesis。</em></li><li id="be08" class="ld le iq jw b jx lm kb ln kf lo kj lp kn lq kr li lj lk ll bi translated">在<strong class="jw ir"> <em class="lc">数据处理</em> </strong>过程中，通过<strong class="jw ir"><em class="lc">map-reduce jobs</em></strong>确保摄取的数据按照业务逻辑正确处理。因此，使用<a class="ae lb" href="http://mlwiki.org/index.php/MapReduce/MRUnit" rel="noopener ugc nofollow" target="_blank"> MRUnit </a>准备单元测试是一个好主意，可以验证生成的键-值对的正确性，以及map-reduce作业执行后业务逻辑的正确应用。</li><li id="c96c" class="ld le iq jw b jx lm kb ln kf lo kj lp kn lq kr li lj lk ll bi translated">确保为每个map-reduce作业实施正确的<strong class="jw ir"> <em class="lc">日志记录和异常处理</em> </strong>，并验证是否对数据实施了数据聚合或分离规则。处理层中使用的一些常用工具有— Hadoop (Map-Reduce)、Cascading、Oozie、Hive、Pig。</li><li id="71db" class="ld le iq jw b jx lm kb ln kf lo kj lp kn lq kr li lj lk ll bi translated">一旦数据被处理，它将ETL到<strong class="jw ir"> <em class="lc">目标HDFS或数据仓库</em> </strong>。因此，在目标系统中测试ETL时，加载到目标系统中的数据的正确性和完整性应该明确地在检查表中。</li><li id="66ff" class="ld le iq jw b jx lm kb ln kf lo kj lp kn lq kr li lj lk ll bi translated">验证是否对目标系统中的数据正确应用了所有转换规则，并通过将目标数据与HDFS文件系统数据进行比较来检查数据是否损坏。</li><li id="2c14" class="ld le iq jw b jx lm kb ln kf lo kj lp kn lq kr li lj lk ll bi translated"><strong class="jw ir"> <em class="lc">异常和错误</em> </strong>应该用适当的信息正确记录，这样调试和修复就容易了，如果在用大量测试数据测试时做得正确，你会感谢自己。</li><li id="7fa4" class="ld le iq jw b jx lm kb ln kf lo kj lp kn lq kr li lj lk ll bi translated">不要错过从数据摄取到数据可视化开始的<strong class="jw ir"> <em class="lc">集成测试</em> </strong>，即测试系统整体。</li><li id="7f48" class="ld le iq jw b jx lm kb ln kf lo kj lp kn lq kr li lj lk ll bi translated"><strong class="jw ir"> <em class="lc">混乱测试</em></strong><em class="lc"/>测试这样的大系统在执行过程中发生的任何混乱变得非常关键，比如验证数据端到端的无缝处理，如果任何节点死亡或失败。</li><li id="50aa" class="ld le iq jw b jx lm kb ln kf lo kj lp kn lq kr li lj lk ll bi translated">系统应该通过<strong class="jw ir"> <em class="lc">恢复机制</em> </strong>恢复，就像切换到其他数据节点处理数据一样。</li></ul><p id="a9e5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">希望上面的清单能为测试涉及大数据的系统增加价值。</p></div></div>    
</body>
</html>