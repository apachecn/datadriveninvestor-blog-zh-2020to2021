<html>
<head>
<title>Turtle Trading with Python— Is the trend really your friend?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python做海龟交易——趋势真的是你的朋友吗？</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/turtle-trading-with-python-is-the-trend-really-your-friend-d178160be6e5?source=collection_archive---------2-----------------------#2020-02-27">https://medium.datadriveninvestor.com/turtle-trading-with-python-is-the-trend-really-your-friend-d178160be6e5?source=collection_archive---------2-----------------------#2020-02-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a365ccdf3e9e070117900a11ebd0b680.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JSFxdrwmhbuPadJL49cuHQ.jpeg"/></div></div></figure><p id="dffa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kw">TL DR:</em><a class="ae kx" href="https://github.com/David-Woroniuk/Medium-Articles/blob/master/Turtle_Trading_with_Python%E2%80%94_Is_the_trend_really_your_friend%3F.ipynb" rel="noopener ugc nofollow" target="_blank">T3】Github代码T5】</a></p><h1 id="cdb0" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">那么什么是海龟交易呢？</h1><p id="02f6" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv ij bi translated">1983年，传奇交易者理查德·丹尼斯把最初的5000美元变成了1亿多美元，他和生意伙伴威廉·埃克哈特打赌，任何人都可以被教会交易，或者“成长”，就像他在新加坡观察到的小海龟一样。</p><p id="f61e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就这样，“海龟交易”诞生了，海龟们，或者说学生们，有了一系列的规则，形成了一个完整的交易系统，包括交易市场，仓位大小，进场，出场和止损。</p><h1 id="51c0" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">海龟交易的主要组成部分</h1><p id="bf38" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv ij bi translated">这个实验的目的是提供一个完全机械的方法，可能不是100%的成功，但是会提供消除情绪和判断的规则，让交易者只知道规则，别无其他。</p><p id="b322" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">市场——买什么或卖什么:第一个决定是买什么和卖什么，或者说，在什么市场交易。</p><p id="29ee" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">仓位大小——买多少或卖多少:</strong>决定买多少或卖多少是最基本的，但经常被大多数交易者忽略。</p><p id="0e82" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">进场——何时买入或卖出:</strong>何时买入或卖出的决策称为进场决策。</p><p id="9574" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">出场——何时退出赢仓:</strong>过早退出赢仓是交易趋势跟踪系统时最常见的错误之一。</p><p id="58ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">止损——何时退出亏损的头寸:</strong>减少亏损最重要的是在你进入一个头寸之前，预先确定你将‘止损’的点<em class="kw">。</em></p><p id="e417" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">根据理查德·丹尼斯的说法，这些规则非常简单，但在实践中却很难应用:</p><p id="7c1b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">“我总是说，你可以在报纸上公布我的交易规则，但没有人会遵守。关键是一致性和纪律性。几乎任何人都可以列出一个规则清单，这个清单有我们教给我们的人的80%好。他们做不到的是给他们信心，让他们即使在情况变糟时也能坚持这些规则。”——杰克·d·施瓦格的《市场奇才》。</p><h1 id="3a46" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">Python中的海龟交易</h1><p id="2d4c" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv ij bi translated">让我们从导入所需的包开始——Yahoo！金融，同时导入库Numpy、Pandas、Matplotlib和Datetime:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="6790" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们使用Datetime来生成一个函数数据集。小心，我们必须使用日期时间参数。isoformat()将它转换成一个可以被Yahoo！金融:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="b00c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们现在可以使用Pandas Datareader为指定的样本导入标准普尔500 (^GSPC)数据:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="7ebb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，我们需要生成一些触发器，在这些触发器下启动“买入订单”或“卖出订单”的操作:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="9722" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以调用动作数据帧的“触发器”列来检查何时建议采取动作。然而，这种算法不适应净空头头寸——如果库存为0，我们就不能卖出指数。现在，我们可以定义一个决策函数:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="a218" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我们执行这个函数时，没有输出。这是因为我们必须将参数传递给决策函数:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="d34a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">既然我们已经将参数传递给了' trade '函数，那么代码试图执行的每个操作都将被打印出来，同时还有相应的结果。在我们可视化算法的输出之前，我们可以定义一个名为Index_Returns的函数，它提供整个采样周期的简单指数返回。</p><p id="476d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第一个调整后的收盘值和最后一个调整后的收盘值被传递给函数，生成一个基准来衡量算法的性能:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="2667" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以将基准性能添加到图表标题中，并可视化算法在样本上的性能:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="e868" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">总的来说，这种算法在样本上仍然产生正回报，但是，它的表现大大低于基准。这可能是由于使用了低频数据，但更有可能的是参数需要调整。</p><p id="2a7a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请继续关注我们继续编码其他交易算法！</p></div></div>    
</body>
</html>