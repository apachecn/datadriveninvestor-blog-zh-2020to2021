<html>
<head>
<title>Developing the Sonic Roll-a-Ball VR Game</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">开发声波滚球虚拟现实游戏</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/developing-the-sonic-roll-a-ball-vr-game-e5de84364239?source=collection_archive---------31-----------------------#2020-12-28">https://medium.datadriveninvestor.com/developing-the-sonic-roll-a-ball-vr-game-e5de84364239?source=collection_archive---------31-----------------------#2020-12-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/cf46360d161fe6fa3ba55f50c45f7d05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*sSbjVPlvb5BzalOh.gif"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">The original Sonic the Hedgehog video game.</figcaption></figure><p id="2d30" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们都可能听说过深蓝色的刺猬，它有以音速奔跑的能力(我知道，相当疯狂)。这家伙叫索尼克，是世嘉创作的日本电子游戏系列《刺猬索尼克》中的一个角色。游戏很简单，你控制索尼克的部分动作，并在最短的时间内收集尽可能多的戒指。这个角色和概念是成功的，通过电视连续剧改编、短片动画、粉丝艺术和电影，它的知名度增加了。上面也有fangames，所以为了更多地了解虚拟现实(VR)，一种由计算机生成的3D环境，允许用户与模拟现实进行交互，我复制了一个。</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">A video demo of Sonic Roll-A-Ball</figcaption></figure><p id="b986" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">体验很简单，玩家必须通过虚拟环境的障碍课程，如溜冰鞋，岩石，灌木丛和平台来收集所有的戒指。一旦收集到所有20枚戒指，他们就赢得了游戏。</p><h1 id="aebf" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">游戏的组成部分</h1><p id="aefe" class="pw-post-body-paragraph jy jz iq ka b kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv ij bi translated">创建这个游戏的两个主要部分是使用Unity VR游戏引擎和编写C#代码脚本，以使游戏机制正常运行。</p><h2 id="e122" class="mf ld iq bd le mg mh dn li mi mj dp lm kj mk ml lq kn mm mn lu kr mo mp ly mq bi translated">虚拟景观和障碍</h2><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mr"><img src="../Images/869f5ac4581a6214ee525e65ac24199d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*st9PSuZSnWssE8KzuZZDgw.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">The virtual landscape</figcaption></figure><p id="c1a9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">游戏环境是低聚的，有分散的灯光、石头、溜冰鞋和灌木丛。我从一个平面开始，创建了三个三维立方体对象，并缩放到墙壁中。为了应用数字背景和地板颜色图案，我将颜色图案的图像拖到材质的基本贴图上，并将材质放在3D对象上。</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mw"><img src="../Images/5d103878ea51a78d9e84cd3451c1b155.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3XCU7yNHdPMC2AtMEDDhDA.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">An inspector view of the mesh collider component applied to a rock mesh</figcaption></figure><p id="d59f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于障碍物，我从免费的在线3D模型数据库中导入了网格下载，这是一组相连的形状。然后，我给它们都添加了一个网格碰撞组件，以确保玩家稍后可以与障碍物碰撞，否则，它会直接穿过物体。一旦障碍物被缩放并放置在平面上，我就给它们涂上颜色。</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mx"><img src="../Images/384d959ef96932127e567ee550462f0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CWHkr_leN5eZ_V5x6-mF2A.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">Floating light bulbs indicate the directional lights placed.</figcaption></figure><p id="d24a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，为了完成这个环境，我必须确保用户在运行游戏时能真正看到他们周围的东西，所以我在游戏地图周围放置了浮动的方向灯。</p><h2 id="26ef" class="mf ld iq bd le mg mh dn li mi mj dp lm kj mk ml lq kn mm mn lu kr mo mp ly mq bi translated">扮演声音角色</h2><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi my"><img src="../Images/c49e90d46c567212df55a059a43e8d58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q1lKMxXD8ZyXTutb84yszA.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">Sonic ball player</figcaption></figure><p id="65b7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我创建了一个刚体球体作为滚动球的声音角色，并在其上附着了一种深蓝色的材料(刚体是指物体的运动遵循Unity的物理系统)。角色必须能够根据输入移动(现在是键盘箭头)并与周围环境碰撞。在游戏中构建玩家是最困难的部分之一，因为要做到这一点，我必须为Unity编写一个C#脚本来理解我到底想要玩家做什么。</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mz"><img src="../Images/a501c59c4e0dd2f8299120d4c1dd82fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gU0QEHkIpHGCrTKlsLw62w.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">An OnMove function declaration</figcaption></figure><p id="a452" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我向Unity导入了一个输入包，然后在球体上附加了一个播放器输入组件。这里，void意味着代码不需要返回任何值，InputValue和movementValue让Unity知道被引用的值的类型，在本例中:用户输入键盘箭头在地图上移动玩家。变量movementX和movementY是当按下箭头键时施加给玩家的力。</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div class="gh gi na"><img src="../Images/6a2b394cfc9f82235dc0f8aaa6c5c99b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*3ygMSUk-RycvrazXD3Ot8g.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">Listed variables used</figcaption></figure><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nb"><img src="../Images/24f8515ed509a6308a8cd27bc8d559fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5WjgQ2x2GBvtEh0ih5ma5Q.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">Applying force to the player object (Sonic)</figcaption></figure><p id="3f63" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后使用rb.AddForce将力施加到刚体玩家对象，以允许它在物理系统下移动。我还制作了一个速度变量，并将其乘以运动，以便我在Unity inspector中编辑音速有多快。</p><h2 id="db7e" class="mf ld iq bd le mg mh dn li mi mj dp lm kj mk ml lq kn mm mn lu kr mo mp ly mq bi translated">创建主摄像机</h2><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nc"><img src="../Images/40b945639fb3333430b22ba16332482f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WeInAIsbWkmnbusj1PH7uw.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">The main camera facing the player</figcaption></figure><p id="e8e5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">放置摄像头是一项简单的任务，它默认带有新创建的Unity项目，所以我所要做的就是通过检查器定位它，以确保用户可以很好地查看播放器环境。然而，我需要使摄像机保持在一个高度，并与玩家保持一定的距离。</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nd"><img src="../Images/4d8a67103d07288a00670fe03a93c1bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*29q8Vx4TJ9AIJLyxU7Q5iQ.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">A part of the CameraController script</figcaption></figure><p id="69b3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为此，我必须创建一个CameraController脚本，并通过查找两者之间的差异，从start函数中计算出相机位置和玩家游戏对象位置的偏移量。通过在LateUpdate下向玩家变换位置添加偏移量，我可以确保相机对象根据玩家游戏对象的移动向前或向后移动。然后将玩家刚体对象附加到Unity inspector中的CameraController脚本，以便它可以引用玩家游戏对象。</p><h2 id="2335" class="mf ld iq bd le mg mh dn li mi mj dp lm kj mk ml lq kn mm mn lu kr mo mp ly mq bi translated"><strong class="ak">创建有组织的环</strong></h2><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi ne"><img src="../Images/c6d175f0b0700d9d419392f9a2598cff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bj8P8n_PFLH2layEC7sLNA.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">The rings</figcaption></figure><p id="1bf2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">环是简单旋转的小立方体游戏对象，其上应用了环图像基础贴图材质。棘手的部分是让它们旋转并突出来。我还把所有的环都做成一个预制体，以保持它们的组织性和连贯性。</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nf"><img src="../Images/0fc4fe6826237ae48d8d2a968a0a9372.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fVrB5FcpQa6bfBU9q1twJA.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">A part of the Rotator script</figcaption></figure><p id="fef3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了旋转圆环，我创建了一个旋转脚本并使用了一个变换。旋转函数引用变换旋转组件。将deltaTime附加到Time还可以确保运动顺利进行，因为它是一个浮点数，表示自前一帧更新以来的秒数差异。</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/5c72b3353122f4e689233ebebe89b01f.png" data-original-src="https://miro.medium.com/v2/resize:fit:590/format:webp/1*-SPLXY56Rone11ynr1akHg.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">All hierarchy objects in blue are prefabs</figcaption></figure><p id="76ab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，为了在地图周围放置多个环，我将它制作成一个预设，并将原始环复制到19个其他环中(预设是一个游戏对象家庭的蓝图)。这意味着如果我对一个预设的戒指做了改动，它会更新该预设下所有其他戒指的改动。</p><div class="nh ni gp gr nj nk"><a href="https://www.datadriveninvestor.com/2020/12/16/technology-addiction-is-it-real/" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd ir gy z fp np fr fs nq fu fw ip bi translated">技术成瘾-是真的吗？数据驱动的投资者</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">通知铃声响起。你很想检查一下。你拿起手机检查了一下。“哇...再来一个喜欢的…</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny js nk"/></div></div></a></div><h2 id="e46f" class="mf ld iq bd le mg mh dn li mi mj dp lm kj mk ml lq kn mm mn lu kr mo mp ly mq bi translated">碰撞和使戒指具有收藏价值</h2><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nz"><img src="../Images/6309ad61378b73f77bd2d6fcb94ff603.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xSTUUPzBfMIZU_LzPIFK0g.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">Sonic and a collectible ring</figcaption></figure><p id="848a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">作为游戏的一部分，索尼克必须收集戒指，我需要确保他不会去收集墙壁或地平面。我使用了Unity的内置标记系统，并标记了原始戒指的预设(拾取)，这也将这一更改应用到预设中的所有其他戒指。</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/0878845037269c4545efc21333f59967.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*dXrs5i84XMHPhGwpcIxzEg.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">Code for deactivating an object if Sonic collides with a ring (PickUp)</figcaption></figure><p id="999c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在脚本中，我使用了一个条件语句，所以一个游戏对象只有在被标记为“拾取”并与玩家游戏对象冲突时才会被停用。</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi ob"><img src="../Images/3e2756565c7d84cbcb6409713ec2a49c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AkIyCcpfUwnyBerjmelPcg.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">Notice that under the box collider component, “Is Trigger” is checked. The script rotator script is also attached to the collectible ring.</figcaption></figure><p id="58c7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我还必须调整环形预设组件，使它成为一个触发器，这样对象就可以重叠它，当玩家游戏对象与它碰撞时，它就会消失。此外，我添加了一个刚体组件到拾取环预设，并使其运动(一个对象，不会对Unity物理力作出反应，但可以通过变换进行动画和移动)。这些戒指现在可以收藏了！但是如果用户没有获得一些分数，收集它们就没有意义。</p><h2 id="9d43" class="mf ld iq bd le mg mh dn li mi mj dp lm kj mk ml lq kn mm mn lu kr mo mp ly mq bi translated">显示乐谱和文本</h2><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/1d733791e4783857e60b0a2f1ae88ce1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*mcsvtYgpt9hv9IEriR0xgQ.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">Storing the count of collected rings in the PlayerController script</figcaption></figure><p id="6bc0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在创建了一个私有count变量并在PlayerController脚本中将计数设置为0之后，我添加了上面显示的几行代码，以便随着玩家碰撞更多的环而增加计数。然后，我在层次结构中添加了一个Canvas用户界面和TextMeshPro(Canvas所必需的),它允许我向用户显示收集到的环数。</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi od"><img src="../Images/6ce5434ab7a1550f3d0c66306c86a293.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yHRWkR-_a5XaOn3lt1rdbA.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">Displaying the count of collected rings in the PlayerController script</figcaption></figure><p id="83cd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">上面的代码指示Unity显示文本“戒指:”以及玩家收集的戒指数量。然后我在Canvas下添加了另一个TextMeshPro，显示“恭喜！你赢了！”当玩家收集到所有20枚戒指时！</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi oe"><img src="../Images/c5c439af23e8b5bb2a40d614e5a7a741.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uxkPrlFH6IEm3M74_rHcJA.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">End-of-game display</figcaption></figure><h1 id="f128" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">改变现状</h1><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi of"><img src="../Images/9ff3176b3f6fadacff3379c6b22dd2f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Pbq5olg_uciRYRwY8FG0g.png"/></div></div></figure><p id="22b9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是我的第一个虚拟现实游戏，我不得不说，Unity在开始的时候看起来非常复杂，但我不能断定开发一个虚拟现实游戏是困难的，因为我甚至没有尝试过。下次我可能会尝试第一人称虚拟现实，我可能会切换它，让玩家保持静止，但他们可以通过主摄像头移动他们的视角。增强现实游戏也在雷达上！很多关于虚拟和增强现实的东西对我来说仍然很陌生，所以我会改变现在的情况，继续动手项目，学习这个行业的技能。</p></div><div class="ab cl og oh hu oi" role="separator"><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol"/></div><div class="ij ik il im in"><p id="71fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢阅读！欢迎任何反馈、掌声或评论。如果你觉得内容很有趣，请在Medium上关注我！请随时通过电子邮件(<a class="ae on" href="mailto:Jolie837837@gmail.com" rel="noopener ugc nofollow" target="_blank">Jolie837837@gmail.com</a>)和<a class="ae on" href="http://linkedin.com/in/jolie-li-7bb5b21b6" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>与我联系！</p><p id="8638" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">访问专家视图— </strong> <a class="ae on" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">订阅DDI英特尔</strong> </a></p></div></div>    
</body>
</html>