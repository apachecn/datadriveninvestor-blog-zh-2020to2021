<html>
<head>
<title>The best library to plot well logs with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python绘制测井曲线的最佳库</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/the-best-library-to-plot-well-logs-with-python-70e9445f77f9?source=collection_archive---------0-----------------------#2020-07-24">https://medium.datadriveninvestor.com/the-best-library-to-plot-well-logs-with-python-70e9445f77f9?source=collection_archive---------0-----------------------#2020-07-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7b23f40d48c091392e779e227978e522.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lMQTGMBCQpFE7bbd"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@worksite?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">WORKSITE Ltd.</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6315" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于一个从未听说过“测井”这个术语的人来说，它是一种工具，告诉你当你在地球上越钻越深时会遇到什么。</p><p id="bb0c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是石油公司特别感兴趣的，因为他们的工作是寻找钻探和生产的前景，所以他们需要使用特殊的数据来减少钻井的不确定性和风险。</p><p id="51b0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些公司有专门的软件来分析这些数据，并根据这些数据做出决策。问题是这个软件并不是所有人都能接触到的，而且要拿到许可证也是相当昂贵的。</p><p id="b318" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这就是Python派上用场的时候，因为您可以使用几个库来操作来自开源数据集的日志数据，并为教育目的甚至实验目的进行有用的可视化。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/fa366cc96d34fe3c3cabadbdbf7fb7e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dGRtDk98w-5coNnd"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@hishahadat?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Shahadat Rahman</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="02c6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我将向您展示如何使用Lasio、Welly和PetroPy库在Python中绘制油井数据。完成这个工作流程后，您将对这些库的使用有更深入的了解。</p><p id="d80c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Jupyter笔记本可以在我的G <a class="ae kc" href="https://github.com/arturoruizs/wells.git" rel="noopener ugc nofollow" target="_blank"> itHub </a>页面找到。</p></div><div class="ab cl lg lh hu li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ij ik il im in"><h1 id="24ac" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated"><strong class="ak">拉西奥</strong></h1><p id="c7c1" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">首先，我们将使用Lasio，一个由<a class="ae kc" href="https://www.cwls.org/products/#products-las" rel="noopener ugc nofollow" target="_blank">加拿大测井学会</a>出版的库。油井数据是从2020年的堪萨斯地质调查局<a class="ae kc" href="http://www.kgs.ku.edu/PRS/Scans/Log_Summary/index.html" rel="noopener ugc nofollow" target="_blank">公开数据集</a>中获得的。</p><div class="mq mr gp gr ms mt"><a href="https://www.datadriveninvestor.com/2020/07/07/introduction-to-time-series-forecasting-of-stock-prices-with-python/" rel="noopener  ugc nofollow" target="_blank"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd ir gy z fp my fr fs mz fu fw ip bi translated">用Python |数据驱动投资者进行股票价格时间序列预测简介</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">在这个简单的教程中，我们将看看如何将时间序列模型应用于股票价格。更具体地说，一个…</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="nc l"><div class="nd l ne nf ng nc nh jw mt"/></div></div></a></div><p id="aa2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如何使用Lasio处理井数据的过程基于Ryan A. Mardani在Medium上发表的这篇伟大的文章。我鼓励你去看看。</p><p id="dc2a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们导入一些用于数据争论的基本库，包括Lasio。</p><pre class="lc ld le lf gt ni nj nk nl aw nm bi"><span id="5f84" class="nn lo iq nj b gy no np l nq nr">import pandas as pd<br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/>import lasio</span></pre><p id="7b4a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们加载油井数据并使用Pandas来处理它</p><pre class="lc ld le lf gt ni nj nk nl aw nm bi"><span id="c4be" class="nn lo iq nj b gy no np l nq nr">las = lasio.read('sample.las')<br/>df = las.df()<br/>df.tail()</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ns"><img src="../Images/384f9f710c1887b5e7f311f283fb9ad2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3PiC5EZNIJUvbG9nre37cw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Raw dataframe. Image by author</figcaption></figure><p id="d44c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将只关心这个数据框的一些列。</p><p id="b26e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些列是伽马射线和自然电位。此外，我们将删除NaN行。</p><pre class="lc ld le lf gt ni nj nk nl aw nm bi"><span id="db2c" class="nn lo iq nj b gy no np l nq nr">selected_columns = ['GR','SP']<br/>df_shorter = df[selected_columns]</span><span id="3f1f" class="nn lo iq nj b gy nt np l nq nr">df_clean = df_shorter.dropna(subset=['GR', 'SP'],axis=0, how='any')</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/e999b694e893c7b2145c3a2abe1cbdf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*n0CauZoI5PRlO2Jv5AwWiQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Shorter dataframe. Image by author</figcaption></figure><p id="ec04" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了准确地描述数据，我们应该首先对其进行规范化。有了for循环，我们可以更快地完成这项任务:</p><pre class="lc ld le lf gt ni nj nk nl aw nm bi"><span id="d147" class="nn lo iq nj b gy no np l nq nr">df_normal = df_clean.copy()</span><span id="f6a1" class="nn lo iq nj b gy nt np l nq nr">for column in df_clean.describe().columns:</span><span id="40dc" class="nn lo iq nj b gy nt np l nq nr">df_normal = df_clean[(df_clean[column] &gt;    df_clean.describe([column]['min']) &amp; (df_clean[column] &lt;= df_clean.describe()[column]['max'])]</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/cc5ac6d49bbbcb4be06714fc8412c54e.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*kTMTZvFSuabqVorlgOCuyQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Cleaned data. Image by author</figcaption></figure><div class="lc ld le lf gt ab cb"><figure class="nw jr nx ny nz oa ob paragraph-image"><img src="../Images/37f0cf8acf72b4dabc5635fd3d5f132c.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*drVl0iTZjCrT6D8wUkkT2w.png"/></figure><figure class="nw jr nx ny nz oa ob paragraph-image"><img src="../Images/397d92973b96e35ff27418c320bb5e07.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*lXr64d46N5IM0SN450ZPew.png"/><figcaption class="jy jz gj gh gi ka kb bd b be z dk oc di od oe">Comparing pre-cleaned data (left) and cleaned data (right). Image by author</figcaption></figure></div><p id="0bbc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们可以使用Matplotlib绘制GR和SP日志:</p><pre class="lc ld le lf gt ni nj nk nl aw nm bi"><span id="f1f0" class="nn lo iq nj b gy no np l nq nr">def plotter():</span><span id="4e49" class="nn lo iq nj b gy nt np l nq nr"> f, ax = plt.subplots(nrows=1, ncols=2, figsize=(12,8))<br/> logs = ['GR','SP']<br/> colors = ['green','blue']</span><span id="6e75" class="nn lo iq nj b gy nt np l nq nr"> for i,log,color in zip(range(2),logs,colors):<br/>   ax[i].plot(df_normal[log], df_normal.DEPTH, color=color)<br/>   ax[i].invert_yaxis()<br/>   ax[i].set_xlabel(log)<br/>   ax[i].set_ylabel("Depth(ft)")<br/>   ax[i].grid()<br/>plotter()</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi of"><img src="../Images/078d3290be2c33f82fdfe3114631048e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*7lqECf8eT9qW6kUJVtzisw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">GR and SP logs plotted with Lasio and Matplotlib</figcaption></figure><p id="ab8c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个过程并不困难，但绝对是缓慢的。让我们看看韦利会发生什么。</p></div><div class="ab cl lg lh hu li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ij ik il im in"><h1 id="25bb" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">活力</h1><p id="a3e6" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">这个库是由<a class="ae kc" href="https://github.com/agile-geoscience/welly" rel="noopener ugc nofollow" target="_blank">敏捷地球科学</a>创建的，绘制测井曲线的速度快得惊人。看看这个:</p><pre class="lc ld le lf gt ni nj nk nl aw nm bi"><span id="e812" class="nn lo iq nj b gy no np l nq nr">from welly import Well<br/>well = Well.from_las('sample.las')<br/>well</span></pre><p id="e3c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们刚刚从库中导入了一个类，输出是一个如下所示的well对象:</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi og"><img src="../Images/ef9d9ac5520ea79334bec829409f2aa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iLCE9u8pBIn-nQAlpid7KQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Well object created with Welly. Image by author</figcaption></figure><p id="2c37" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，通过一行简单的代码，我们可以绘制Welly在我们的数据中识别的所有日志:</p><pre class="lc ld le lf gt ni nj nk nl aw nm bi"><span id="2db4" class="nn lo iq nj b gy no np l nq nr">well.plot()</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oh"><img src="../Images/c41848c2f19f4b5ba5227a668d0b68b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ks7rDya7TWDhV18pEP7q4Q.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Well logs plot created with Welly. Image by author</figcaption></figure><p id="044d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是非常快速，容易和准确的。</p><p id="379b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在是使用<strong class="kf ir"> PetroPy </strong>的时候了。</p></div><div class="ab cl lg lh hu li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ij ik il im in"><h1 id="8856" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">彼得皮</h1><p id="6597" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">这个库是托德·海特曼创建的，你可以在这里查看文档<a class="ae kc" href="https://toddheitmann.github.io/PetroPy/" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="dd77" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用PetroPy，我们可以使用ptr简单地加载我们的日志。这将产生一个CurvesItem，但是如果任何曲线丢失，它将弹出一个ValueError，因为ptr。LogViewer使用XML模板。</p><p id="6d76" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们尝试使用库附带的一个样本数据集。我们必须使用ptr.log_data:</p><pre class="lc ld le lf gt ni nj nk nl aw nm bi"><span id="c43b" class="nn lo iq nj b gy no np l nq nr">import petropy as ptr</span><span id="9100" class="nn lo iq nj b gy nt np l nq nr">log_sample = ptr.log_data('WFMP')<br/>viewer_sample = ptr.LogViewer(log_sample,top = 6950, height = 100)</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oi"><img src="../Images/eff5ba7a0a2dbdeed7fd8f054aa7c69e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2OvDkCss-6tRsAeAvHWZJA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Plot produced by PetroPy. Image by author.</figcaption></figure><p id="99de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如你所见，图像质量相当好。这个库产生视觉上吸引人的图形。</p></div><div class="ab cl lg lh hu li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ij ik il im in"><h1 id="071b" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">最后的想法</h1><p id="b2cc" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">用于执行这项任务的库各有优缺点。</p><p id="6853" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在Welly的例子中，它非常容易使用，并且只用一行代码就能生成一个图。我认为这是获得油井数据快速绘图的最佳方法。另一个优点是它的文档非常丰富。</p><p id="da48" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Lasio做得很好，但对某些人来说，这个过程可能很乏味，但有了Matplotlib的功能，你可以按你想要的任何方式编辑你的绘图。</p><p id="551d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你想制作一个吸引人和流畅的情节，我会推荐PetroPy，但是XML模板的问题对我来说是一个很大的缺点。</p><p id="409c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这三个库对于任何想要从井数据中制作快速可视化或漂亮绘图的人来说都是惊人的资源，我鼓励您开始使用它们并构建集成更多开源工具的令人敬畏的项目。</p><p id="31e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">访问专家视图— </strong> <a class="ae kc" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅DDI英特尔</strong> </a></p></div></div>    
</body>
</html>