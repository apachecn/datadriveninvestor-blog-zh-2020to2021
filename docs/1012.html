<html>
<head>
<title>Using Pandas ‘shift’ function</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用熊猫的“轮班”功能</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/using-pandas-shift-function-764df8c5dfcf?source=collection_archive---------0-----------------------#2020-02-27">https://medium.datadriveninvestor.com/using-pandas-shift-function-764df8c5dfcf?source=collection_archive---------0-----------------------#2020-02-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/></div><div class="ab cl jq jr hx js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="im in io ip iq"><p id="51a0" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">你对熊猫转移功能了解多少？不到一周前，我发现了如何使用它。以前，我从来不需要推动我的数据帧的值，除非我在处理时间序列。在这种情况下，时间序列模型负责计算指定的滞后。然而，在pandas中，您可以通过使用pandas.DataFrame.shift获得类似的结果。</p><p id="8d04" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">参数</strong></p><p id="9fa8" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">该函数最多可以有4个参数。</p><p id="ae22" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">默认情况下,“周期”等于1表示要移动的周期数。它可以是积极的，也可以是消极的。负数会将数值上移。</p><p id="6d86" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">‘freq’是保留原始数据；这意味着指数不仅仅是转移数据。</p><p id="e4a5" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">有一个“轴”参数来告诉移动的方向。可能的值为0或“索引，1”或“列”。</p><div class="kv kw gp gr kx ky"><a href="https://www.datadriveninvestor.com/2019/02/21/best-coding-languages-to-learn-in-2019/" rel="noopener  ugc nofollow" target="_blank"><div class="kz ab fo"><div class="la ab lb cl cj lc"><h2 class="bd iu gy z fp ld fr fs le fu fw is bi translated">2019年最值得学习的编码语言|数据驱动的投资者</h2><div class="lf l"><h3 class="bd b gy z fp ld fr fs le fu fw dk translated">在我读大学的那几年，我跳过了很多次夜游去学习Java，希望有一天它能帮助我在…</h3></div><div class="lg l"><p class="bd b dl z fp ld fr fs le fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="lh l"><div class="li l lj lk ll lh lm ln ky"/></div></div></a></div><p id="669e" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">最后但同样重要的是，“fill_value”可用于因移位而引入的缺失值。通过移动数据，我们将丢失第一个或最后一个索引的一些值，这取决于“周期”值。我们可以决定用我们选择的值来填充这些“NA”。</p><p id="b2bc" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">例句</strong></p><ul class=""><li id="55b4" class="lo lp it jz b ka kb ke kf ki lq km lr kq ls ku lt lu lv lw bi translated">让我们首先创建一个简单的数据框架来展示shift函数的使用和输出。</li></ul><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/959ae3f462dbd18fcc6582acc54a69cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:926/format:webp/1*AzfYbUk3MlJwLoQfD7ldkg.png"/></div><figcaption class="me mf gj gh gi mg mh bd b be z dk">A simple dataframe with random numbers</figcaption></figure><ul class=""><li id="348f" class="lo lp it jz b ka kb ke kf ki lq km lr kq ls ku lt lu lv lw bi translated">移位1个周期的结果是什么？</li></ul><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/51bdf98925831808f1d8e7a8d2845a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*dhNwRf7gEKTJNgnEuG0BSA.png"/></div></figure><p id="2a1a" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如前所述，周期的值指示如何移动数据。在第一种情况下，输出导致所有列移位。最初在索引0中的值转移到索引1，依此类推。此外，我们只能移动一列。结果可以保存在新列中以供将来使用。注意，我们丢失了最后一个值，第一个值是NaN。</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/79192d1cf09e42c3fc2da0fc7369048e.png" data-original-src="https://miro.medium.com/v2/resize:fit:394/format:webp/1*NBv3Y4canMqPZsKfiMDTKQ.png"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk">Output of a negative period value.</figcaption></figure><ul class=""><li id="7113" class="lo lp it jz b ka kb ke kf ki lq km lr kq ls ku lt lu lv lw bi translated">应用“轴”会如何改变结果？</li></ul><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/1b5e0aa223ed8160f3799216bb506606.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/1*kDlyzkbJKVTnlYTA0orSVw.png"/></div></figure><p id="f997" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">默认情况下,“轴”设置为索引值。第二行代码返回了与前面相同的输出。但是，如果我们想将dataframe的值转移到下一列，我们必须将“columns”作为“axis”的值传递。</p><ul class=""><li id="e540" class="lo lp it jz b ka kb ke kf ki lq km lr kq ls ku lt lu lv lw bi translated">怎么去掉‘南’？</li></ul><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/32b58d78a28727c779fcf16e5c960ecf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*LNnwPrKtg1nlyGfF-deONg.png"/></div><figcaption class="me mf gj gh gi mg mh bd b be z dk">Filling NAs by the value you want to</figcaption></figure><p id="b9fd" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">“fill_value”参数很重要，因为它有助于我们删除NAs，并且根据项目，我们将用最佳值替换所有的NaN。有些模型不接受空值，在这种情况下，我们将不得不丢弃NAs或者用适当的值来替换它们。请注意，给定的值将替换我们原本应该拥有的所有NAN。</p></div><div class="ab cl jq jr hx js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="im in io ip iq"><p id="33bf" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">移位函数可能非常有用，并且比对值进行切片更容易。该函数的一个用例可以是线性回归，其中因变量的先前值构成模型中的一个特征。</p><p id="58f2" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果您有任何问题或想要其他功能的替代品，请随时联系我。</p><figure class="ly lz ma mb gt mc"><div class="bz fp l di"><div class="mq mr l"/></div></figure></div></div>    
</body>
</html>