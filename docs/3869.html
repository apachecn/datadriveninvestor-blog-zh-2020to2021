<html>
<head>
<title>Deploy Deep Learning Models in AWS using AWS Lambda + AWS API gateway + AWS Elastic File System. (Part — 3)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用AWS Lambda+AWS API gateway+AWS Elastic文件系统在AWS中部署深度学习模型。(第三部分)</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/deployment-of-deep-learning-models-in-aws-using-aws-lambda-aws-api-gateway-aws-elastic-file-c423139fa858?source=collection_archive---------8-----------------------#2020-07-12">https://medium.datadriveninvestor.com/deployment-of-deep-learning-models-in-aws-using-aws-lambda-aws-api-gateway-aws-elastic-file-c423139fa858?source=collection_archive---------8-----------------------#2020-07-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="eff0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">大家好，</p><p id="3e3d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这3篇文章系列中，我们将了解如何部署深度学习模型，该模型在AWS中执行图像分类，并向世界公开其API，因此其他人可以与您的API进行交互。</p><p id="f1e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">前往岗位1: </strong> <a class="ae kl" href="https://medium.com/@balakrishnakumar.v/deployment-of-deep-learning-models-in-aws-using-aws-lambda-aws-api-gateway-aws-elastic-file-a48fdeb2c140" rel="noopener"> <strong class="jp ir">链接</strong> </a></p><p id="2994" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">转到帖子2: </strong> <a class="ae kl" href="https://medium.com/@balakrishnakumar.v/deployment-of-deep-learning-models-in-aws-using-aws-lambda-aws-api-gateway-aws-elastic-file-2b7102b3ff39?source=friends_link&amp;sk=43669dd5d884823cc95d0281a3d4d2b2" rel="noopener"> <strong class="jp ir">链接</strong> </a></p><p id="706d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">转到岗位3:你正是在那里，你应该在的地方。</strong></p></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><h1 id="104a" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">AWS API网关(第3部分)</h1><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/0d5f0f38f454b17521506591e82a35bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/format:webp/0*1gHkTk1vEi7xvi6N.png"/></div></figure><p id="81f6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们的第一篇和第二篇文章中，我们解决了AWS Lambda的限制，即为什么它不能处理大小为250 MB的未压缩部署包，因此我们附加了EFS，它就像AWS的Google Drive，您可以在那里水平扩展并加载您的部署包。</p><p id="945a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第二篇文章中，我们使用AWS Lambda层和AWS EFS向AWS Lambda中添加了部署包(轻型和重型)。</p><p id="1cbe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这第三篇文章中，我们将最终使用API Gateway部署我们的图像识别模型，并向外界公开它。</p><p id="84ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们开始吧。</p><ol class=""><li id="19cd" class="lz ma iq jp b jq jr ju jv jy mb kc mc kg md kk me mf mg mh bi translated">导航到AWS API网关控制台并单击Create API，然后构建一个REST API并填充必填字段。</li></ol><p id="f774" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将API的名称和端点类型命名为Regional。</p><p id="f0cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有三种类型的终端可用:区域终端(仅部署在当前区域)、边缘优化终端(部署在世界各地的边缘位置)、私有终端(部署在您当地的VPC)</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mi"><img src="../Images/66ec2b47baafd3fe85c015612a10320e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UWR7YZ7vvukJ8k9nGnPZcg.png"/></div></div></figure><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mn"><img src="../Images/dcb3d36365621d761c67371199646acb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ombFkMxM3DiO-vwBEy0EXw.png"/></div></div></figure><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mi"><img src="../Images/2f653225be6df45420c594d7dffd64ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LoUvIqGaE17Vz_HdSRdQdQ.png"/></div></div></figure><p id="3762" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.现在让我们根据表述性状态转移API <a class="ae kl" href="https://en.wikipedia.org/wiki/Representational_state_transfer" rel="noopener ugc nofollow" target="_blank"> REST </a>的定义，创建一个资源和一个方法。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mo"><img src="../Images/df2479283ef7ee4cef9f2d377b2cca31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A5k2MnIfG86LXqctSPHQDg.png"/></div></div></figure><p id="5e0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.在操作下，单击创建资源并添加资源名称，然后单击创建资源。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mi"><img src="../Images/5e1a2e44f2990bfe28b7e0a2ac09de34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kic1zY8DuobG2_TIy8-TOg.png"/></div></div></figure><p id="e289" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.现在，在Resource created下，我们将创建一个新方法→ <strong class="jp ir"> POST (HTTP VERBS) </strong>，因为我们正在从用户那里获取一个图像<strong class="jp ir">。</strong>选择集成类型为<strong class="jp ir">“Lambda函数”，</strong>选中<strong class="jp ir">使用Lambda代理集成，</strong>因为我们希望所有输入映射都在Lambda中完成(映射规则、输入内容类型等)，而<strong class="jp ir"> </strong>选择我们在上一篇文章中创建的Lambda函数并保存它。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mi"><img src="../Images/89b8f079e858a5f3728c294ab0cc12d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x9pMPUd5CjkHXXPtCSS8DQ.png"/></div></div></figure><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mp"><img src="../Images/e8a6d9f703eb9fcc9ef37c40b4f41a06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IQHuKMuaWYG90mqK0pomUA.png"/></div></div></figure><p id="5514" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它将提示一个窗口，要求为lambda函数添加适当的权限。点击确定即可。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mq"><img src="../Images/67145bc5f78fcfb3f416e16982a73ccc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UgZkPmozmv9p3X_KVggpbw.png"/></div></div></figure><p id="94b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在lambda功能控制台，我们可以看到，它自动添加了一个触发点，因此我们的AWS Lambda可以由API Gateway触发。另请检查permissions选项卡，其中添加了基于资源的策略。</p><p id="0056" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">5.最后，在设置选项卡中，添加<strong class="jp ir">二进制媒体类型:*/*，</strong>一个<strong class="jp ir"> </strong>通配符，以便它接受任何输入格式并保存更改。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mr"><img src="../Images/b1cdcfc20504b3186fd3555a06bc1f1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1D-c_EDP45g7S_ZOTC5cIw.png"/></div></div></figure><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/3e50286227f769799ec4b067adf80f76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*XKn_hz70WdQg98TjoQXE6Q.png"/></div></figure><p id="9af3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">6.现在我们部署我们的API，因此在API操作下，单击Deploy API。</p><p id="936a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以便我们可以获得一个调用URL并传递我们的请求。</p><p id="8ea0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">7.选择阶段名称v1/dev/prod/test，然后单击deploy。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mt"><img src="../Images/d071a4c9137e31a6c783a4be56fa5d3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qNbU0gl8G-pKT0sB7dWhMw.png"/></div></div></figure><p id="b222" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">8.现在我们有了一个invoke URL，在BASH中我们通过CURL调用这个URL来进行API调用。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mi"><img src="../Images/25507a26e25cf8338b9a74fe7b0bae67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0JS9bHvUZHoJouhXvNkJeg.png"/></div></div></figure><p id="d6b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们检查我们的功能代码。这里我们打印出<strong class="jp ir">事件</strong>。</p><p id="e487" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">AWS Lambda集成了其他AWS服务来调用函数。您可以配置触发器来调用函数以响应资源生命周期事件，响应传入的HTTP请求。</p><p id="ff3c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">与Lambda <strong class="jp ir">集成的每个服务将数据</strong>作为<strong class="jp ir">事件</strong>发送到<strong class="jp ir"> JSON </strong>中的函数。对于每种事件类型，事件文档的结构是不同的，并且包含关于触发该功能的资源或请求的数据。Lambda运行时将事件转换为对象，并将其传递给函数。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mu"><img src="../Images/37dbd041b7686dc1150033d909b0bbfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aOy09aAx9UgKZCa8yezPiQ.png"/></div></div></figure><p id="9290" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">9.现在我们通过Bash控制台调用这个URL，</p><p id="90f3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">命令:<strong class="jp ir">curl-request POST-H " Content-Type:image/jpg "--upload-file " Xray . jpg "</strong><a class="ae kl" href="https://3biakdh1fg.execute-api.ap-south-1.amazonaws.com/v1/xray" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">https://3 biakdh1 fg . execute-API . AP-south-1 . Amazon AWS . com/v1/Xray</strong></a></p><p id="8399" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在上面的命令中，我们传递一个POST请求，我们将内容类型指定为image/jpg(也有各种其他可用的内容类型)，然后我们上传文件，我的桌面上有一个图像“xray.jpg ”,后面是<strong class="jp ir">invoke _ URL/method(https://…/Xray)。</strong></p><p id="4f35" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们得到默认输出“Hello from Lambda”，这表示我们的流程运行时没有任何错误。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mi"><img src="../Images/43b2850265a887176253c288578cab05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*45SPUPixvjXLbvPNR6dY0g.png"/></div></div></figure><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mi"><img src="../Images/d4fe4c2d3e84b6b72e00511dcae9c5ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0bmjOjdADrqDY5O7soVsIg.png"/></div></div></figure><p id="1cd4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">10.现在让我们通过调用lambda函数的cloudwatch日志中的API来监控我们得到的响应。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mi"><img src="../Images/792e1c37a239ee25f4d7d40f579a61b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Y1q5vvGTQf7VF3W65O1Lw.png"/></div></div></figure><p id="06a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">11.根据调用时间选择最近的日志。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mi"><img src="../Images/2bee72c498eec3a8f818e778cdf5368c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e45eiGoZrqhs2w2h-dxVmQ.png"/></div></div></figure><p id="8be2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">12.这里的事件是我们输入的JSON格式，其中包含了我们可以使用的所有必要参数。</p><p id="64b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们随调用URL一起发送的输入图像位于JSON的<strong class="jp ir">“body</strong>部分，但是输入图像是<strong class="jp ir">base64编码的，</strong>因此为了重新构建，我们需要执行base64解码。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mi"><img src="../Images/a1bb0ba9ce13a2da3c301f112bbe0059.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*50bPjG5KEM3XuKHrSrbPGQ.png"/></div></div></figure><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mi"><img src="../Images/a1bb0ba9ce13a2da3c301f112bbe0059.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*50bPjG5KEM3XuKHrSrbPGQ.png"/></div></div></figure><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/99e196717367a434d2f7eef5851e87e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*AHbyJxQjSiWNrD7l2YpTmg.png"/></div></figure><p id="ffd7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">13.现在，我们在lambda_function中编写python代码来解码这个base64编码的图像，并将其存储在我们的EFS驱动器中。</p><p id="d307" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">15.这里我们可以看到图像被解码并存储在目录<strong class="jp ir"> "/efs/demo/workplace "下。</strong>现在使用这个image，我们可以使用深度学习模型执行一些图像处理，并传递输出。所以让我们修改我们的代码。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mw"><img src="../Images/de89a928bd02730b80e61635f7ab1949.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y9Cf6_BA3do3Gbm8uIZY_g.png"/></div></div></figure><p id="e212" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">16.很好，现在我已经添加了一些基于深度学习的代码，用于处理输入图像并在给定的胸部X射线中找到疾病，现在我们的模型将提供发现的分类标签。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mi"><img src="../Images/3201056247f092715a217ed1ec18b31e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r6Y9bvhJzPUG-e8pxTexEA.png"/></div></div></figure><p id="1160" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">17.现在让我们用更新后的代码调用我们的API端点，看看我们是否能得到疾病标签的类别。</p><p id="8b92" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如我们所料，我们可以看到我们的模型预测的输出标签，在我们的情况下，它是<strong class="jp ir">心脏肥大。</strong></p><p id="aac6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们刚刚在无服务器模式下完成了深度学习模型的运行。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mx"><img src="../Images/838c0565fa1aa26ebab7a5d73a8fe05e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lx5xu_0pq3tpMSyBojm4Ig.png"/></div></div></figure><p id="7e84" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们不仅仅局限于只发送回输出类，我们可以做很多事情。</p><p id="b98b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">太好了，我们终于到了三篇文章系列的结尾，我们遇到了AWS罩下的许多服务来实现它，这只是开始，有大量的定制可用。</p><h1 id="3357" class="kt ku iq bd kv kw my ky kz la mz lc ld le na lg lh li nb lk ll lm nc lo lp lq bi translated"><strong class="ak">局限性</strong>:</h1><p id="ed05" class="pw-post-body-paragraph jn jo iq jp b jq nd js jt ju ne jw jx jy nf ka kb kc ng ke kf kg nh ki kj kk ij bi translated">现在，我们看到了如何在这个完整的系列中进行深度学习模型的端到端部署，了解每个服务内部存在的限制是很好的。</p><p id="1481" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于AWS Lambda :最大执行时间为15分钟，最大可用RAM为3 GB，如果您有100个Lambda函数，最大并发数为1000。(也就是说，并发性是指在任何给定时间你的函数所服务的请求的数量。当您的函数被调用时，Lambda会分配它的一个实例来处理事件。当功能代码完成运行时，它可以处理另一个请求。如果在处理请求时再次调用该函数，则会分配另一个实例，这将增加函数的并发性。)</p><p id="78c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在撰写本文时，它们是硬限制。</p><p id="7836" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于<strong class="jp ir"> API网关(REST API) </strong>:最大超时只有29s(硬限制)。因此，当用请求调用invoke URL时，您需要在29秒内发回响应，否则，连接将被终止，并发回超时错误。</p><p id="2aac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，如果你的程序是CPU受限的或者I/O受限的，那么就利用python中的多线程/多处理模块，因为在Lambda下，最多分配2个CPU的内存。</p><p id="7b3c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">否则，执行异步操作，在我们的例子中，您可以从用户那里获取图像，一旦成功，您可以向他们发送回响应，一旦处理完成，您可以配置通过<strong class="jp ir"> AWS SES将输出安全地发送到客户端。</strong></p></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><p id="8d1f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最佳实践是检查AWS API网关的定价:<a class="ae kl" href="https://aws.amazon.com/api-gateway/pricing/" rel="noopener ugc nofollow" target="_blank">https://aws.amazon.com/api-gateway/pricing/</a></p><p id="11d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将发布与机器和深度学习相关的文章，以及它们与AWS服务的交集。</p><p id="560c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在那之前，下次见。</p><p id="80fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">文章作者:</strong></p><p id="5785" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> BALAKRISHNAKUMAR V </strong></p></div></div>    
</body>
</html>