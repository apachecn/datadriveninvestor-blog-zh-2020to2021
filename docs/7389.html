<html>
<head>
<title>createSlice in Redux Toolkit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Redux工具包中创建切片</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/createslice-in-redux-toolkit-c5e5441b75d9?source=collection_archive---------0-----------------------#2020-12-07">https://medium.datadriveninvestor.com/createslice-in-redux-toolkit-c5e5441b75d9?source=collection_archive---------0-----------------------#2020-12-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/3700e0bf2a13116d1b01c8030bddce0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bvNYg3CEqcgKJ_dA-folfA.png"/></div></div></figure><div class=""/><p id="253c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是<a class="ae kw" href="https://medium.com/datadriveninvestor/redux-toolkit-eb07f753649" rel="noopener">我之前的故事</a>的延续。</p><p id="4aa5" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们拿一块巧克力片蛋糕，这块蛋糕包括蛋糕、糖霜和巧克力片。如果我们把整个蛋糕想象成redux商店。传统的设计是把减速器、常量、动作放在不同的文件里，或者放在蛋糕片里，蛋糕、糖霜和巧克力片分开供应。</p><p id="8727" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在Redux-Toolkit中，<strong class="ka jc"> <em class="kx"> createSlice </em> </strong>方法帮助我们创建redux-store的一个切片，它在一个文件中包含了reducer和actions。把巧克力蛋糕切成它想要的样子。</p></div><div class="ab cl ky kz hu la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ij ik il im in"><blockquote class="lf lg lh"><p id="377a" class="jy jz kx ka b kb kc kd ke kf kg kh ki li kk kl km lj ko kp kq lk ks kt ku kv ij bi translated">我们开始吧</p></blockquote><p id="fc90" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一个基本的<strong class="ka jc"> <em class="kx"> createSlice </em> </strong>方法如下:</p><ul class=""><li id="64f2" class="ll lm jb ka b kb kc kf kg kj ln kn lo kr lp kv lq lr ls lt bi translated">名称:引用的切片的名称</li><li id="ed7d" class="ll lm jb ka b kb lu kf lv kj lw kn lx kr ly kv lq lr ls lt bi translated">初始状态:减速器的初始状态</li><li id="158c" class="ll lm jb ka b kb lu kf lv kj lw kn lx kr ly kv lq lr ls lt bi translated">reducers:包含变更reducer状态的所有操作</li></ul><p id="ce3c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们将<a class="ae kw" href="https://github.com/devAbhimanyu/Redux-toolkit/tree/createReducer" rel="noopener ugc nofollow" target="_blank"> <em class="kx">回购</em> </a>更新为一个片。我将保留计数器的特性命名，并将文件从counter.js重命名为counterSlice.js。</p><div class="ip iq gp gr ir lz"><a href="https://www.datadriveninvestor.com/2020/10/23/how-i-became-an-independent-researcher-of-the-tangled-net-of-economic-development-funding/" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd jc gy z fp me fr fs mf fu fw ja bi translated">我是如何成为经济发展资金纠结网的独立研究员|数据…</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">我很少发现自己处于一种看似独立的自由形式的身体抑郁状态，这种状态使人…</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn ix lz"/></div></div></a></div><p id="64c6" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kx">*注意:我也已将App comp更新为功能组件。</em></p><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/7c1d5fec3f3764667be4b226547c2582.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/format:webp/1*M2RRmz8Bv91HE0KxDeQVLA.png"/></div></figure><p id="9c5f" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我们需要从redux-toolkit库中导入<em class="kx"> createSlice </em>方法。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="0ec8" class="my mz jb mu b gy na nb l nc nd">import { createSlice } from "@reduxjs/toolkit";</span></pre><p id="04f7" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在是创建切片的时候了:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="d57e" class="my mz jb mu b gy na nb l nc nd">const <em class="kx">counter</em> = createSlice({<br/> name: "counter",<br/> initialState: {<br/>  value: 0<br/> },<br/> reducers: {<br/>  increment: state =&gt; {<br/>   state.value = state.value + 1;<br/>  },<br/>  decrement: state =&gt; {<br/>   state.value = state.value - 1;<br/>  }<br/> }<br/>});</span></pre><p id="c053" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kx">计数器</em>保存创建减速器所需的所有值。现在我们需要导出动作和缩减器。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="109b" class="my mz jb mu b gy na nb l nc nd">export const { increment, decrement } = counter.actions;</span><span id="f3fb" class="my mz jb mu b gy ne nb l nc nd">export default counter.reducer;</span></pre><p id="2315" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最终输出:</p><figure class="mp mq mr ms gt is"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="f222" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在是时候分派动作并查看计数器的工作了。因此，对于功能组件，您需要导入useDispatch和useSelector挂钩。我们要导入的第二件事是上面导出的动作。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="2552" class="my mz jb mu b gy na nb l nc nd">import { useDispatch,useSelector } from "react-redux";<br/>import { increment, decrement } from "counterSlice";</span></pre><p id="55e1" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">useSelector方法向我们返回redux-store对象，并且可以被析构以获得所需的值。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="0255" class="my mz jb mu b gy na nb l nc nd">const {value} = useSelector(state=&gt;state)</span></pre><p id="0525" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另一方面，必须调用useDispatch挂钩来设置调度程序:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="147b" class="my mz jb mu b gy na nb l nc nd">const dispatch = useDispatch();<br/>//dispatching an action<br/>dispatch(action())</span></pre><p id="664b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们集成这两个钩子来创建我们的计数器应用程序。</p><figure class="mp mq mr ms gt is"><div class="bz fp l di"><div class="nf ng l"/></div></figure></div><div class="ab cl ky kz hu la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ij ik il im in"><p id="01e4" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这样，我们的切片就被创建和消费了。你可以在这里找到上面例子<a class="ae kw" href="https://github.com/devAbhimanyu/Redux-toolkit/tree/createSlice" rel="noopener ugc nofollow" target="_blank">的回购。我还在repo中添加了一个todo list应用程序，所以也请检查一下。</a></p><p id="44a3" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你也可以查看一下<a class="ae kw" href="https://abhimanyuchauhan-61309.medium.com/createasyncthunk-in-redux-toolkit-4d8d2f0412d3" rel="noopener">createasncthunk</a>，它建立在上面提到的同一个待办事项列表应用上。</p><p id="8464" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">进入专家视角— </strong> <a class="ae kw" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank"> <strong class="ka jc">订阅DDI英特尔</strong> </a></p></div></div>    
</body>
</html>