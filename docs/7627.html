<html>
<head>
<title>Pandas Data Frame 101: Creating Data Frame &amp; Loading Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫数据框101:创建数据框和加载数据</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/pandas-data-frame-101-part-1-627b9405d14f?source=collection_archive---------7-----------------------#2020-12-16">https://medium.datadriveninvestor.com/pandas-data-frame-101-part-1-627b9405d14f?source=collection_archive---------7-----------------------#2020-12-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/8fcd58f7e835a709e88001f4c35af011.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p9t3NH9qhxZ1X38fl3F3rQ.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">(<a class="ae kf" href="https://www.open.edu/openlearn/science-maths-technology/computing-and-ict/introduction-data-and-information/content-section-0?active-tab=description-tab" rel="noopener ugc nofollow" target="_blank">Image Source</a>)</figcaption></figure><p id="d287" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">什么是熊猫数据框？</strong></p><p id="ecdc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">描述数据框的最简单方式是将其视为包含行和列的电子表格或表格。列由列名标记，行有一个索引列。然而，数据帧对于大量数据是非常有效的。它使得对数据应用函数非常有效，无论是在编码还是运行时。它可能是最常用的熊猫数据对象。</p><p id="174c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们将进口熊猫作为pd:</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="9736" class="ln lo it lj b gy lp lq l lr ls">import pandas as pd</span></pre><p id="9bbc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">创建数据框对象:</strong></p><p id="ae96" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有几种创建数据框的方法。让我们从使用字典开始。我们可以用字典的形式定义我们的数据，其中每一列都用字典中的一个条目来表示。键是列名，值包含数据项的列表。让我们看看下面的例子。我们有一本包含我们数据的字典。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="a0f2" class="ln lo it lj b gy lp lq l lr ls">data = {‘Name’:[‘John’, ‘Mike’, ‘Samantha’], ‘Score’:[6,3,9], ‘Outcome’:[‘Pass’, ’Fail’, ’Pass’]}</span></pre><p id="7d7c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们可以用一行代码将其转换为熊猫数据框:</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="7f1f" class="ln lo it lj b gy lp lq l lr ls">scores = pd.DataFrame(data)</span></pre><p id="c732" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以通过打印来查看数据框的内容。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="de5e" class="ln lo it lj b gy lp lq l lr ls">print(scores)</span></pre><p id="1ae7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">输出如下所示:</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="0537" class="ln lo it lj b gy lp lq l lr ls">Name  Score Outcome<br/>0      John      6    Pass<br/>1      Mike      3    Fail<br/>2  Samantha      9    Pass</span></pre><p id="e03a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在前面的示例中，我们使用字典来创建数据框。现在，我们将了解如何从字典列表中创建数据框。对于这样一个列表，考虑每一项，它是一个字典，代表每一行，键保存列的名称，值保存该行的值。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="2b33" class="ln lo it lj b gy lp lq l lr ls"># Make list of dictionaries<br/>data = [{‘Name’: ‘John’, ‘Score’: 6, ‘Outcome’:’Pass’ },<br/> {‘Name’: ‘Mike’, ‘Score’: 3, ‘Outcome’:’Fail’ },<br/> {‘Name’: ‘Samantha’, ‘Score’: 9, ‘Outcome’:’Pass’ },<br/> ]</span><span id="4952" class="ln lo it lj b gy lt lq l lr ls"># Create DataFrame from the list<br/>scores = pd.DataFrame(data=data)<br/>print(scores)</span></pre><p id="2659" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将讨论的从提供的数据创建数据框的最后一种方法是从列表列表中创建。这里，您有一个包含列名的列表和另一个列表，每个项目列表包含数据框中每一行的数据。重要的是，项目保持与包含列名的列表相同的顺序。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="d05d" class="ln lo it lj b gy lp lq l lr ls"># Create a list of lists<br/>data = [[‘John’, 6, ‘Pass’],<br/> [‘Mike’, 3, ‘Fail’],<br/> [‘Samantha’,9, ‘Pass’]]</span><span id="1c10" class="ln lo it lj b gy lt lq l lr ls"># Define the column names<br/>columns = [‘Name’, ‘Score’, ‘Outcome’]</span><span id="efff" class="ln lo it lj b gy lt lq l lr ls"># Create a DataFrame with the data and column names<br/>scores = pd.DataFrame(data=data, columns=columns)<br/>print(scores)</span></pre><p id="8f7c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">从文件中加载数据:</strong></p><p id="89f6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">pandas最大的优点之一是易于实现。在从文件中的数据创建数据框的情况下，pandas会为您完成所有繁重的工作。假设您在一个名为scores.csv的csv文件中保存了所有学生的分数，以下是将它加载到数据框中的方法:</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="1a9b" class="ln lo it lj b gy lp lq l lr ls"># Read the data<br/>scores = pd.read_csv(‘scores.csv’)</span></pre><p id="1ba8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一种常见的文件格式是Excel电子表格。你可能知道，一个Excel文件可能包含许多电子表格，我们可以指定数据应该从哪个电子表格加载。例如，假设我们有一个scores.xlsx文件，其中有一个代表学期考试的电子表格，我们对期中考试的表格特别感兴趣。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="55a0" class="ln lo it lj b gy lp lq l lr ls">scores = pd.read_excel(‘scores.xlsx’, sheet_name= ‘midterm’, na_values = ‘None’)</span></pre><p id="03d9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">na_values告诉代码用“None”替换任何空字段。您可以在没有它的情况下运行代码，但是应用它会告诉代码如何处理空字段并减少出错的机会。</p><div class="lu lv gp gr lw lx"><a href="https://www.datadriveninvestor.com/2020/12/07/name-matching-techniques-with-python/" rel="noopener  ugc nofollow" target="_blank"><div class="ly ab fo"><div class="lz ab ma cl cj mb"><h2 class="bd iu gy z fp mc fr fs md fu fw is bi translated">使用Python |数据驱动投资者的名称匹配技术</h2><div class="me l"><h3 class="bd b gy z fp mc fr fs md fu fw dk translated">我们确实面临很多情况，我们必须匹配一个有很多变体的单词。这可能是因为错别字…</h3></div><div class="mf l"><p class="bd b dl z fp mc fr fs md fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="mg l"><div class="mh l mi mj mk mg ml jz lx"/></div></div></a></div><p id="eb63" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，如果您必须将所有工作表中的数据加载到数据框中，会怎么样呢？为此，我们创建一个Excel文件对象，即文件中所有工作表的列表，从列表中的每个工作表加载数据，并将其附加到列表列表中，每个条目/列表代表每个工作表。然后，将所有列表连接成一个数据帧。我知道我没有很好地描述它，但当我们一步一步地做这件事时，它会变得有意义。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="ba38" class="ln lo it lj b gy lp lq l lr ls"># Create pd.ExcelFile() object</span><span id="454c" class="ln lo it lj b gy lt lq l lr ls">xls = pd.ExcelFile(‘scores.xlsx’)</span><span id="04cd" class="ln lo it lj b gy lt lq l lr ls"># Extract sheet names and store in exchanges</span><span id="bf61" class="ln lo it lj b gy lt lq l lr ls">exams = xls.sheet_names</span><span id="c870" class="ln lo it lj b gy lt lq l lr ls"># Create an empty list: exam_sheets<br/>exam_sheets=[]</span><span id="425b" class="ln lo it lj b gy lt lq l lr ls"># Now we iterate over the list containing names of the sheets (exams), loading data into a Data Frame and then appending that to exam_sheets</span><span id="2f56" class="ln lo it lj b gy lt lq l lr ls">for exam in exams:<br/>    #load data into a Data Frame<br/>    exam_sheet = pd.read_excel(xls, sheetname=exam, na_values=’n/a’)</span><span id="53e4" class="ln lo it lj b gy lt lq l lr ls">    #Add a column containing name of the sheet<br/>    exam_sheet[‘Exam’] = exam</span><span id="ab7c" class="ln lo it lj b gy lt lq l lr ls">    #append the Data Frame to the list<br/>    exam_sheets.append(exam_sheet)</span><span id="b308" class="ln lo it lj b gy lt lq l lr ls"># Concatenate the listings: listing_data<br/>scores = pd.concat(exam_sheets)</span></pre><p id="710a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就对了。这是一个基本的教程，展示了如何创建数据框和填充数据。在第2部分中，我们将讨论数据过滤。</p><p id="b093" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">进入专家视图— </strong> <a class="ae kf" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iu">订阅DDI英特尔</strong> </a></p></div></div>    
</body>
</html>