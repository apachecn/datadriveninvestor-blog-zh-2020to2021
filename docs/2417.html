<html>
<head>
<title>Test-Driven Development: A Very Short Introduction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">测试驱动开发:非常简短的介绍</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/test-driven-development-a-very-short-introduction-1edfb86e0d02?source=collection_archive---------8-----------------------#2020-04-29">https://medium.datadriveninvestor.com/test-driven-development-a-very-short-introduction-1edfb86e0d02?source=collection_archive---------8-----------------------#2020-04-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="714a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">TDD不是关于测试的</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a4af971449512c0f40af29f9e3fdb7f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aw0TrAwQUm8jn1lc"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@dtravisphd?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">David Travis</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b1a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">测试驱动开发(也称为TDD)是我们接近设计的方式。这与测试无关。它是迫使我们在编写代码之前考虑实现和代码需要做什么的方法。</p><blockquote class="ls"><p id="f042" class="lt lu iq bd lv lw lx ly lz ma mb lr dk translated">任何傻瓜都能写出计算机能理解的代码。优秀的程序员编写人类能够理解的代码。— <em class="mc">马丁·福勒</em></p></blockquote><p id="bd97" class="pw-post-body-paragraph kw kx iq ky b kz md jr lb lc me ju le lf mf lh li lj mg ll lm ln mh lp lq lr ij bi translated">当我第一次读到TDD的时候，我非常惊讶。我们应该在实现之前编写测试用例。此外，他们应该测试行为，而不是执行原子操作。所有的测试用例都会自动运行并生成报告。我做过TDD，我相信它。</p><h1 id="6057" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">TDD的历史</h1><h2 id="f307" class="na mj iq bd mk nb nc dn mo nd ne dp ms lf nf ng mu lj nh ni mw ln nj nk my nl bi translated">以前</h2><p id="b76b" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">公元前12000年:这位德高望重的人拿着一块生肉，向他的穴居同伴描述了生火的过程，设定了他们的期望，并为他自己的任务开出了处方。他后来拿在手里的那块烧焦的肉被广泛认为是第一个通过测试的案例。</p><div class="nr ns gp gr nt nu"><a href="https://www.datadriveninvestor.com/2020/02/26/surviving-in-a-digital-age-of-instability/" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd ir gy z fp nz fr fs oa fu fw ip bi translated">在不稳定的数字时代生存|数据驱动的投资者</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">如果你是一名计算机科学家，你可能已经注意到新的框架不断出现。编程…</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="od l"><div class="oe l of og oh od oi kp nu"/></div></div></a></div><p id="851f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">1959年到1963年:水星太空计划的程序员在编写穿孔卡片时使用了一种TDD形式。</p><h2 id="0307" class="na mj iq bd mk nb nc dn mo nd ne dp ms lf nf ng mu lj nh ni mw ln nj nk my nl bi translated">经典TDD</h2><p id="cfcc" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">一般来说，TDD的现代重新发现归功于Kent Beck，他也是极限编程的创始人。正是通过极限编程和敏捷软件开发运动，TDD开始在软件开发社区中被广泛接受。</p><blockquote class="ls"><p id="d145" class="lt lu iq bd lv lw lx ly lz ma mb lr dk translated">TDD最初的描述是在一本关于编程的古书里。</p></blockquote><p id="8f59" class="pw-post-body-paragraph kw kx iq ky b kz md jr lb lc me ju le lf mf lh li lj mg ll lm ln mh lp lq lr ij bi translated">据说Kent Beck重新发现了TDD，因为TDD的原型可以追溯到20世纪60年代计算的早期。</p><ul class=""><li id="89b8" class="oj ok iq ky b kz la lc ld lf ol lj om ln on lr oo op oq or bi translated">1994年:KentBeck在1994年编写了SUnit测试框架的第一个版本。</li><li id="ce82" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated">1995年10月:1995年10月，在奥斯汀的OopsLa，肯特为沃德坎宁安演示TDD。</li></ul><h2 id="ada9" class="na mj iq bd mk nb nc dn mo nd ne dp ms lf nf ng mu lj nh ni mw ln nj nk my nl bi translated">在...之后</h2><p id="5f02" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">有很多关于TDD的书籍和文章出版。</p><ul class=""><li id="6c9f" class="oj ok iq ky b kz la lc ld lf ol lj om ln on lr oo op oq or bi translated">1999–07–08:重构:改进现有代码的设计。</li><li id="346a" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated">1999-12:第一个TDD tutorial⁵.</li><li id="4385" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated">2000年8月16日:由ObjectMentor发起的JUnit.org网站。</li><li id="90d4" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated">2006年:丹·诺斯的博客文章:介绍BDD⁶.</li><li id="418f" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated">2007–07:IEEE软件测试驱动开发特刊。</li></ul><p id="39be" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">而一切都还在继续，直到现在。</p><h1 id="8f47" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">我们为什么要关心TDD？</h1><p id="833c" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">Kent Beck在他的book⁴.中指出测试驱动开发的目标是“T0”但事实上，如果您可能已经面临了至少一个(如果不是更多的话)以下的痛苦、问题或不成功交付的原因，那么您应该关心TDD。</p><ul class=""><li id="0f15" class="oj ok iq ky b kz la lc ld lf ol lj om ln on lr oo op oq or bi translated">您的大多数测试都是手动的。</li><li id="0064" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated">维护成本太高。</li><li id="8418" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated">上市时间太长。</li><li id="5a19" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated">文档永远不是最新的。</li></ul><p id="34e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请记住，TDD不会神奇地解决所有这些问题。相反，它让我们走上了解决问题的道路。</p><h1 id="0ccf" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">TDD有什么规律？</h1><p id="c440" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">TDD有三个法则:红色、绿色和重构。遵循它们，直到你在TDD中获得足够的经验，或者直到你有足够的信心打破它们。</p><h2 id="e083" class="na mj iq bd mk nb nc dn mo nd ne dp ms lf nf ng mu lj nh ni mw ln nj nk my nl bi translated">法则1:不允许你写任何产品代码，除非是为了通过失败的单元测试</h2><p id="651b" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">这条规则确保了产品代码只作为实现特定行为的需要的结果而产生，由一个或多个单元测试来表示。这条规则增加了我们对实施的信心。</p><h2 id="6e12" class="na mj iq bd mk nb nc dn mo nd ne dp ms lf nf ng mu lj nh ni mw ln nj nk my nl bi translated">法则2:不允许你写任何超过足以失败的单元测试；编译失败就是失败</h2><p id="9118" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">从编写一个失败的单元测试开始。我们不想事先编写所有的测试，因为有时实现会“暗示”一个我们以前没有预想到的测试。</p><h2 id="e05c" class="na mj iq bd mk nb nc dn mo nd ne dp ms lf nf ng mu lj nh ni mw ln nj nk my nl bi translated">法则3:除了足以通过一个失败的单元测试之外，你不允许写更多的产品代码</h2><p id="05b1" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">一旦我们通过了测试，我们就不再写任何产品代码，直到我们有一个失败的测试。原因见上述规则。</p><p id="4f81" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些规则在下图中显示为TDD的周期。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pb"><img src="../Images/c8d8bc0873cf5bf16c4b3e4316204547.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nLlVeoQrJlSa4V21Eos6rg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">The 3 laws of TDD</figcaption></figure><h1 id="ec6a" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">在井字游戏中实现TDD的一个简单例子</h1><p id="881f" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated"><strong class="ky ir">井字游戏</strong></p><p id="81f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">小孩子最常玩井字游戏。游戏规则相当简单。这是一个纸笔游戏，由X和O两个玩家轮流在一个3x3的格子中标记空间。成功地在水平、垂直或对角线上放置三个标记的玩家赢得游戏。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pc"><img src="../Images/6bff78061cdc726d8d8fad59f0395b65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xGErRgooAjjb8cFZLJvNOQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">a simple tic-tac-toe board</figcaption></figure><h2 id="b685" class="na mj iq bd mk nb nc dn mo nd ne dp ms lf nf ng mu lj nh ni mw ln nj nk my nl bi translated"><strong class="ak">本例中的要求</strong></h2><p id="7e6e" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">我们定义了边界以及什么构成了一件作品的无效放置。我们可以将这个需求分成三个测试。</p><ul class=""><li id="6c94" class="oj ok iq ky b kz la lc ld lf ol lj om ln on lr oo op oq or bi translated">当一块被放置在x轴之外的任何地方时，就会抛出RuntimeException。</li><li id="6b27" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated">当一块被放置在y轴之外的任何地方时，就会抛出RuntimeException。</li><li id="0909" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated">当一块被放置在一个被占用的空间上时，就会抛出RuntimeException。</li></ul><h2 id="05a4" class="na mj iq bd mk nb nc dn mo nd ne dp ms lf nf ng mu lj nh ni mw ln nj nk my nl bi translated"><strong class="ak">为此需求写一个周期的TDD</strong></h2><p id="9801" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">第一步:写一个测试。我们定义当调用game.play(5，2)方法时，RuntimeException是预期的。</p><pre class="kg kh ki kj gt pd pa pe pf aw pg bi"><span id="0c0c" class="na mj iq pa b gy ph pi l pj pk">import org.junit.Before;<br/>import org.junit.Rule;<br/>import org.junit.Test;<br/>import org.junit.rules.ExpectedException;<br/><br/>public class TicTacToeSpec {<br/>  @Rule<br/>  public ExpectedException exception = ExpectedException.none();<br/>  private TicTacToe game;<br/>  <br/>  @Before<br/>  public final void before() {<br/>    game = new TicTacToe()<br/>  }<br/>  <br/>  @Test<br/>  public void whenXOutsideBoardThenRuntimeException() {<br/>    exception.expect(RuntimeException.class);<br/>    game.play(5, 2)<br/>  }<br/>}</span></pre><p id="b0af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">步骤2:运行所有测试。它应该会失败，因为play方法不存在。</p><p id="a6ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第三步:编写实现代码。我们要做的就是创建play方法，确保它在x参数小于1或大于3(棋盘为3x3)时抛出RuntimeException。</p><pre class="kg kh ki kj gt pd pa pe pf aw pg bi"><span id="ca31" class="na mj iq pa b gy ph pi l pj pk">public class TicTacToe {<br/>  public void play(int x, int y) {<br/>    if (x &lt; 1 || x &gt; 3) {<br/>      throw new RuntimeException("X is outside board");<br/>    }<br/>  }<br/>}</span></pre><p id="3cd1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如您所见，这段代码不包含任何其他内容，只是通过测试所需的最低要求。</p><p id="a81d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">步骤4:再次运行所有测试。它应该是成功的，因为与该测试相对应的代码已经完全实现。</p><p id="d632" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很简单，对吧？</p><h1 id="07e7" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">资源</h1><h2 id="5be8" class="na mj iq bd mk nb nc dn mo nd ne dp ms lf nf ng mu lj nh ni mw ln nj nk my nl bi translated">网</h2><p id="467f" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">[1]<a class="ae kv" href="http://shebanator.com/2007/08/21/a-brief-history-of-test-frameworks/" rel="noopener ugc nofollow" target="_blank">http://shebanator . com/2007/08/21/a-brief-history-of-test-frameworks/</a></p><p id="8ad0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[2]沃德坎宁安。<a class="ae kv" href="http://wiki.c2.com/?WardCunningham" rel="noopener ugc nofollow" target="_blank">http://wiki.c2.com/?WardCunningham</a></p><p id="f092" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">【http://wiki.c2.com/?ObjectMentor T2】</p><p id="5cf1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[6]http://dannorth.net/introducing-bdd<a class="ae kv" href="http://dannorth.net/introducing-bdd/" rel="noopener ugc nofollow" target="_blank"/></p><h2 id="09d2" class="na mj iq bd mk nb nc dn mo nd ne dp ms lf nf ng mu lj nh ni mw ln nj nk my nl bi translated"><strong class="ak">书籍</strong></h2><p id="efb9" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">[3]马丁福勒。<em class="pl">重构:改进现有代码的设计</em>。1999年6月中旬由爱迪生-韦斯利出版公司出版。</p><p id="aaf0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[4]肯特·贝克。<a class="ae kv" href="https://www.goodreads.com/book/show/387190.Test_Driven_Development" rel="noopener ugc nofollow" target="_blank"> <em class="pl">测试驱动开发:通过实例</em> </a> <em class="pl">。</em>由Addison-Wesley Professional于2002年出版。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pm pn l"/></div></figure></div></div>    
</body>
</html>