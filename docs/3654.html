<html>
<head>
<title>Coding Specifications | Elegant Java Functions (Part One)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编码规范|优雅的Java函数(第一部分)</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/coding-specifications-elegant-java-functions-part-one-dd6bcb01983b?source=collection_archive---------14-----------------------#2020-06-30">https://medium.datadriveninvestor.com/coding-specifications-elegant-java-functions-part-one-dd6bcb01983b?source=collection_archive---------14-----------------------#2020-06-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/1b9b8fa4e78a8abe93a8ab6db39c8570.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*kKwCnPA2mws5ls0r.jpeg"/></div></figure><p id="79a5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><em class="ks">由</em> <a class="ae kt" href="https://community.alibabacloud.com/users/5241164025409916" rel="noopener ugc nofollow" target="_blank"> <em class="ks"> Amap_tech团队</em> </a> <em class="ks">。</em></p><h1 id="329f" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">介绍</h1><p id="e190" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">随着软件项目代码的不断积累，系统维护成本也在上升。这个问题在所有软件团队中都很普遍。不断优化和提高代码质量是提高系统活力的一个很好的方法。此外，正如开发人员中流行的说法:多思考，无代码。所以我们在编程的时候需要多思考，努力提高自己的编码技能。这样，我们可以产生更优雅、更高质量、更高效的代码。</p><p id="6f62" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">本文将描述一组与Java函数相关的编码规则。我们希望能给Java程序员一些编码建议，帮助他们制作出具有前述亮点的代码。Amap数据收集部门将这些规则付诸实践，取得了很好的效果。</p><div class="lx ly gp gr lz ma"><a href="https://www.datadriveninvestor.com/2019/01/15/the-path-of-mobile-app-development-in-2019/" rel="noopener  ugc nofollow" target="_blank"><div class="mb ab fo"><div class="mc ab md cl cj me"><h2 class="bd ir gy z fp mf fr fs mg fu fw ip bi translated">2019年移动应用开发之路|数据驱动的投资者</h2><div class="mh l"><h3 class="bd b gy z fp mf fr fs mg fu fw dk translated">任何在移动应用程序开发行业工作的人，无论他们是专注于在伦敦开发iOS应用程序还是…</h3></div><div class="mi l"><p class="bd b dl z fp mf fr fs mg fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="mj l"><div class="mk l ml mm mn mj mo js ma"/></div></div></a></div><h1 id="8b11" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">使用通用工具功能</h1><h2 id="e794" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">案例1</h2><p id="7e09" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">以下代码片段显示了症状描述。</p><p id="d540" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">不完整代码</strong></p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="6d44" class="mp kv iq ng b gy nk nl l nm nn">thisName != null &amp;&amp; thisName.equals(name);</span></pre><p id="f018" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">更完整的代码</strong></p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="b97b" class="mp kv iq ng b gy nk nl l nm nn">(thisName == name) || (thisName != null &amp;&amp; thisName.equals(name));</span></pre><p id="d3a7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请参考以下推荐的解决方案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="3697" class="mp kv iq ng b gy nk nl l nm nn">Objects.equals(name, thisName);</span></pre><h2 id="6814" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">案例2</h2><p id="0ae5" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">以下代码片段显示了症状描述。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="541d" class="mp kv iq ng b gy nk nl l nm nn">!(list == null || list.isEmpty());</span></pre><p id="0ccb" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请参考以下推荐的解决方案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="9d8a" class="mp kv iq ng b gy nk nl l nm nn">import org.apache.commons.collections4.CollectionUtils;<br/>CollectionUtils.isNotEmpty(list);</span></pre><h2 id="0ace" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">利益</h2><ul class=""><li id="081b" class="no np iq jw b jx ls kb lt kf nq kj nr kn ns kr nt nu nv nw bi translated">函数式编程减少了业务代码的数量，直观地显示了逻辑。</li><li id="fde9" class="no np iq jw b jx nx kb ny kf nz kj oa kn ob kr nt nu nv nw bi translated">通用工具功能允许我们仔细考虑逻辑并减少出错的可能性。</li></ul><h1 id="8edf" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">拆分大型函数</h1><p id="363a" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">当一个函数的代码超过80行时，它就是一个大函数，因此需要拆分。</p><h2 id="3c11" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">情况1)每个代码块必须封装成一个函数</h2><p id="67dc" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">每个代码块都必须包含注释来解释其功能。如果代码块前面有注释行，它允许用函数替换代码，并根据注释命名函数。如果一个函数有一个描述性的名字，就很容易直接更新，而不必检查内部代码是如何实现的。</p><p id="9227" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">以下代码片段显示了症状描述。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="2e99" class="mp kv iq ng b gy nk nl l nm nn">// 每日生活函数<br/>public void liveDaily() {<br/>    // 吃饭<br/>    // 吃饭相关代码几十行</span><span id="8f4c" class="mp kv iq ng b gy oc nl l nm nn">    // 编码<br/>    // 编码相关代码几十行</span><span id="705c" class="mp kv iq ng b gy oc nl l nm nn">    // 睡觉<br/>    // 睡觉相关代码几十行<br/>}</span></pre><p id="421b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请参考以下推荐的解决方案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="a1c2" class="mp kv iq ng b gy nk nl l nm nn">// 每日生活函数<br/>public void liveDaily() {<br/>    // 吃饭<br/>    eat();</span><span id="c3c2" class="mp kv iq ng b gy oc nl l nm nn">    // 编码<br/>    code();</span><span id="30e1" class="mp kv iq ng b gy oc nl l nm nn">    // 睡觉<br/>    sleep();<br/>}</span><span id="770f" class="mp kv iq ng b gy oc nl l nm nn">// 吃饭函数<br/>private void eat() {<br/>    // 吃饭相关代码<br/>}</span><span id="734c" class="mp kv iq ng b gy oc nl l nm nn">// 编码函数<br/>private void code() {<br/>    // 编码相关代码<br/>}</span><span id="463e" class="mp kv iq ng b gy oc nl l nm nn">// 睡觉函数<br/>private void sleep() {<br/>    // 睡觉相关代码<br/>}</span></pre><h2 id="addd" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">情况2)每个循环体必须封装成一个函数</h2><p id="dec6" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">以下代码片段显示了症状描述。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="f8ba" class="mp kv iq ng b gy nk nl l nm nn">// 生活函数<br/>public void live() {<br/>    while (isAlive) {<br/>        // 吃饭<br/>        eat();</span><span id="f879" class="mp kv iq ng b gy oc nl l nm nn">        // 编码<br/>        code();</span><span id="554a" class="mp kv iq ng b gy oc nl l nm nn">        // 睡觉<br/>        sleep();<br/>    }<br/>}</span></pre><p id="0bc0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请参考以下推荐的解决方案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="2b56" class="mp kv iq ng b gy nk nl l nm nn">// 生活函数<br/>public void live() {<br/>    while (isAlive) {<br/>        // 每日生活<br/>        liveDaily();<br/>    }<br/>}</span><span id="c640" class="mp kv iq ng b gy oc nl l nm nn">// 每日生活函数<br/>private void liveDaily() {<br/>    // 吃饭<br/>    eat();</span><span id="1ccc" class="mp kv iq ng b gy oc nl l nm nn">    // 编码<br/>    code();</span><span id="d7d3" class="mp kv iq ng b gy oc nl l nm nn">    // 睡觉<br/>    sleep();<br/>}</span></pre><h2 id="9c82" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">情况3)每个条件体必须封装为一个函数</h2><p id="59ec" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">以下代码片段显示了症状描述。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="9b5b" class="mp kv iq ng b gy nk nl l nm nn">// 外出函数<br/>public void goOut() {<br/>    // 判断是否周末<br/>    // 判断是否周末: 是周末则游玩<br/>    if (isWeekday()) {<br/>        // 游玩代码几十行<br/>    }<br/>    // 判断是否周末: 非周末则工作<br/>    else {<br/>        // 工作代码几十行<br/>    }<br/>}</span></pre><p id="49dd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请参考以下推荐的解决方案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="5797" class="mp kv iq ng b gy nk nl l nm nn">// 外出函数<br/>public void goOut() {<br/>    // 判断是否周末<br/>    // 判断是否周末: 是周末则游玩<br/>    if (isWeekday()) {<br/>        play();<br/>    }<br/>    // 判断是否周末: 非周末则工作<br/>    else {<br/>        work();<br/>    }<br/>}</span><span id="ce1f" class="mp kv iq ng b gy oc nl l nm nn">// 游玩函数<br/>private void play() {<br/>    // 游玩代码几十行<br/>}</span><span id="be94" class="mp kv iq ng b gy oc nl l nm nn">// 工作函数<br/>private void work() {<br/>    // 工作代码几十行<br/>}</span></pre><h2 id="9b93" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">利益</h2><ul class=""><li id="9e7d" class="no np iq jw b jx ls kb lt kf nq kj nr kn ns kr nt nu nv nw bi translated">功能越短，功能越简单，生命周期越长。</li><li id="6be4" class="no np iq jw b jx nx kb ny kf nz kj oa kn ob kr nt nu nv nw bi translated">一个函数越长，就越难理解和维护。在这种情况下，维护人员会尽可能不修改它。</li><li id="8301" class="no np iq jw b jx nx kb ny kf nz kj oa kn ob kr nt nu nv nw bi translated">长函数通常包含难以定位的重复代码。</li></ul><h1 id="a0e7" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">在同一函数中保持代码块级别一致</h1><h2 id="ee42" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">案例1</h2><p id="ecf3" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">以下代码片段显示了症状描述。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="2c4a" class="mp kv iq ng b gy nk nl l nm nn">// 每日生活函数<br/>public void liveDaily() {<br/>    // 吃饭<br/>    eat();</span><span id="dfd7" class="mp kv iq ng b gy oc nl l nm nn">    // 编码<br/>    code();</span><span id="c0fa" class="mp kv iq ng b gy oc nl l nm nn">    // 睡觉<br/>    // 睡觉相关代码几十行<br/>}</span></pre><p id="cc6c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如你所见，睡眠代码块和吃饭代码不是一个级别的，比较奇怪。如果你把写代码比作写一篇短文，那么吃饭和写代码就是一个段落的主要思想，而睡觉是一个详细的段落。对于LiveDaily功能，你只需要写出主要的流程，也就是段落的思路。</p><p id="b2a7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请参考以下推荐的解决方案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="f304" class="mp kv iq ng b gy nk nl l nm nn">public void liveDaily() {<br/>    // 吃饭<br/>    eat();</span><span id="c627" class="mp kv iq ng b gy oc nl l nm nn">    // 编码<br/>    code();</span><span id="5f4e" class="mp kv iq ng b gy oc nl l nm nn">    // 睡觉<br/>    sleep();<br/>}</span><span id="2336" class="mp kv iq ng b gy oc nl l nm nn">// 睡觉<br/>private void sleep() {<br/>    // 睡觉相关代码<br/>}</span></pre><h2 id="6b0d" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">利益</h2><ul class=""><li id="65fe" class="no np iq jw b jx ls kb lt kf nq kj nr kn ns kr nt nu nv nw bi translated">函数调用表明它们的目的，而函数实现表达式逻辑。为了便于理解，逻辑清楚地按层次排列。</li><li id="4bc2" class="no np iq jw b jx nx kb ny kf nz kj oa kn ob kr nt nu nv nw bi translated">函数中的代码块不必是分层的，因为这会使函数看起来头重脚轻。</li></ul><h1 id="8b12" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">将相同的功能代码封装为一个函数</h1><h2 id="3b60" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">情况1)将相同的代码封装为一个函数</h2><p id="4995" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">以下代码片段显示了症状描述。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="d10a" class="mp kv iq ng b gy nk nl l nm nn">// 禁用用户函数<br/>public void disableUser() {<br/>    // 禁用黑名单用户<br/>    List&lt;Long&gt; userIdList = queryBlackUser();<br/>    for (Long userId : userIdList) {<br/>        User userUpdate = new User();<br/>        userUpdate.setId(userId);<br/>        userUpdate.setEnable(Boolean.FALSE);<br/>        userDAO.update(userUpdate);<br/>    }</span><span id="a98d" class="mp kv iq ng b gy oc nl l nm nn">    // 禁用过期用户<br/>    userIdList = queryExpiredUser();<br/>    for (Long userId : userIdList) {<br/>        User userUpdate = new User();<br/>        userUpdate.setId(userId);<br/>        userUpdate.setEnable(Boolean.FALSE);<br/>        userDAO.update(userUpdate);<br/>    }<br/>}</span></pre><p id="77d0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请参考以下推荐的解决方案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="cade" class="mp kv iq ng b gy nk nl l nm nn">// 禁用用户函数<br/>public void disableUser() {<br/>    // 禁用黑名单用户<br/>    List&lt;Long&gt; userIdList = queryBlackUser();<br/>    for (Long userId : userIdList) {<br/>        disableUser(userId);<br/>    }</span><span id="88f4" class="mp kv iq ng b gy oc nl l nm nn">    // 禁用过期用户<br/>    userIdList = queryExpiredUser();<br/>    for (Long userId : userIdList) {<br/>        disableUser(userId);<br/>    }<br/>}</span><span id="2723" class="mp kv iq ng b gy oc nl l nm nn">// 禁用用户函数<br/>private void disableUser(Long userId) {<br/>    User userUpdate = new User();<br/>    userUpdate.setId(userId);<br/>    userUpdate.setEnable(Boolean.FALSE);<br/>    userDAO.update(userUpdate);<br/>}</span></pre><h2 id="8823" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">情况2)将类似的代码封装成一个函数</h2><p id="3a6c" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">将相似的代码封装成一个函数，不同之处由函数参数控制。</p><p id="e440" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">以下代码片段显示了症状描述。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="438d" class="mp kv iq ng b gy nk nl l nm nn">// 通过工单函数<br/>public void adoptOrder(Long orderId) {<br/>    Order orderUpdate = new Order();<br/>    orderUpdate.setId(orderId);<br/>    orderUpdate.setStatus(OrderStatus.ADOPTED);<br/>    orderUpdate.setAuditTime(new Date());<br/>    orderDAO.update(orderUpdate);<br/>}</span><span id="ee02" class="mp kv iq ng b gy oc nl l nm nn">// 驳回工单函数<br/>public void rejectOrder(Long orderId) {<br/>    Order orderUpdate = new Order();<br/>    orderUpdate.setId(orderId);<br/>    orderUpdate.setStatus(OrderStatus.REJECTED);<br/>    orderUpdate.setAuditTime(new Date());<br/>    orderDAO.update(orderUpdate);<br/>}</span></pre><p id="e628" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请参考以下推荐的解决方案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="517c" class="mp kv iq ng b gy nk nl l nm nn">// 通过工单函数<br/>public void adoptOrder(Long orderId) {<br/>    auditOrder(orderId, OrderStatus.ADOPTED);<br/>}</span><span id="6522" class="mp kv iq ng b gy oc nl l nm nn">// 驳回工单函数<br/>public void rejectOrder(Long orderId) {<br/>    auditOrder(orderId, OrderStatus.REJECTED);<br/>}</span><span id="70c2" class="mp kv iq ng b gy oc nl l nm nn">// 审核工单函数<br/>private void auditOrder(Long orderId, OrderStatus orderStatus) {<br/>    Order orderUpdate = new Order();<br/>    orderUpdate.setId(orderId);<br/>    orderUpdate.setStatus(orderStatus);<br/>    orderUpdate.setAuditTime(new Date());<br/>    orderDAO.update(orderUpdate);<br/>}</span></pre><h2 id="df24" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">利益</h2><ul class=""><li id="1555" class="no np iq jw b jx ls kb lt kf nq kj nr kn ns kr nt nu nv nw bi translated">封装常用函数，减少代码行数，提高代码质量。</li><li id="ee36" class="no np iq jw b jx nx kb ny kf nz kj oa kn ob kr nt nu nv nw bi translated">封装常用功能以细化业务代码，使其更易于理解和维护。</li></ul><h2 id="7cde" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">封装获取参数值的函数</h2><h2 id="ed5d" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">案例1</h2><p id="23c2" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">以下代码片段显示了症状描述。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="0b8a" class="mp kv iq ng b gy nk nl l nm nn">// 是否通过函数<br/>public boolean isPassed(Long userId) {<br/>    // 获取通过阈值<br/>    double thisPassThreshold = PASS_THRESHOLD;<br/>    if (Objects.nonNull(passThreshold)) {<br/>        thisPassThreshold = passThreshold;<br/>    }</span><span id="bbe5" class="mp kv iq ng b gy oc nl l nm nn">    // 获取通过率<br/>    double passRate = getPassRate(userId);</span><span id="5512" class="mp kv iq ng b gy oc nl l nm nn">    // 判读是否通过<br/>    return passRate &gt;= thisPassThreshold;<br/>}</span></pre><p id="240e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请参考以下推荐的解决方案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="7654" class="mp kv iq ng b gy nk nl l nm nn">// 是否通过函数<br/>public boolean isPassed(Long userId) {<br/>    // 获取通过阈值<br/>    double thisPassThreshold = getPassThreshold();</span><span id="a5c5" class="mp kv iq ng b gy oc nl l nm nn">    // 获取通过率<br/>    double passRate = getPassRate(userId);</span><span id="1129" class="mp kv iq ng b gy oc nl l nm nn">    // 判读是否通过<br/>    return passRate &gt;= thisPassThreshold;<br/>}</span><span id="b268" class="mp kv iq ng b gy oc nl l nm nn">// 获取通过阈值函数<br/>private double getPassThreshold() {<br/>    if (Objects.nonNull(passThreshold)) {<br/>        return passThreshold;<br/>    }<br/>    return PASS_THRESHOLD;<br/>}</span></pre><h2 id="bbaf" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">利益</h2><ul class=""><li id="99c4" class="no np iq jw b jx ls kb lt kf nq kj nr kn ns kr nt nu nv nw bi translated">参数值独立地从业务功能中获得，阐明了业务逻辑。</li><li id="927c" class="no np iq jw b jx nx kb ny kf nz kj oa kn ob kr nt nu nv nw bi translated">封装的GET参数值函数是一个独立的函数，可以在代码中重用。</li></ul><h1 id="f835" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">通过基于参数的API封装相同的逻辑</h1><h2 id="ca12" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">案例1</h2><p id="d25d" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">以下代码片段显示了症状描述。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="edc3" class="mp kv iq ng b gy nk nl l nm nn">// 发送审核员结算数据函数<br/>public void sendAuditorSettleData() {<br/>    List&lt;WorkerSettleData&gt; settleDataList = auditTaskDAO.statAuditorSettleData();<br/>    for (WorkerSettleData settleData : settleDataList) {<br/>        WorkerPushData pushData = new WorkerPushData();<br/>        pushData.setId(settleData.getWorkerId());<br/>        pushData.setType(WorkerPushDataType.AUDITOR);<br/>        pushData.setData(settleData);<br/>        pushService.push(pushData);<br/>    }<br/>}</span><span id="cc81" class="mp kv iq ng b gy oc nl l nm nn">// 发送验收员结算数据函数<br/>public void sendCheckerSettleData() {<br/>    List&lt;WorkerSettleData&gt; settleDataList = auditTaskDAO.statCheckerSettleData();<br/>    for (WorkerSettleData settleData : settleDataList) {<br/>        WorkerPushData pushData = new WorkerPushData();<br/>        pushData.setId(settleData.getWorkerId());<br/>        pushData.setType(WorkerPushDataType.CHECKER);<br/>        pushData.setData(settleData);<br/>        pushService.push(pushData);<br/>    }</span></pre><p id="7e97" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请参考以下推荐的解决方案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="2226" class="mp kv iq ng b gy nk nl l nm nn">// 发送审核员结算数据函数<br/>public void sendAuditorSettleData() {<br/>    sendWorkerSettleData(WorkerPushDataType.AUDITOR, () -&gt; auditTaskDAO.statAuditorSettleData());<br/>}</span><span id="0202" class="mp kv iq ng b gy oc nl l nm nn">// 发送验收员结算数据函数<br/>public void sendCheckerSettleData() {<br/>    sendWorkerSettleData(WorkerPushDataType.CHECKER, () -&gt; auditTaskDAO.statCheckerSettleData());<br/>}</span><span id="f37c" class="mp kv iq ng b gy oc nl l nm nn">// 发送作业员结算数据函数<br/>public void sendWorkerSettleData(WorkerPushDataType dataType, WorkerSettleDataProvider dataProvider) {<br/>    List&lt;WorkerSettleData&gt; settleDataList = dataProvider.statWorkerSettleData();<br/>    for (WorkerSettleData settleData : settleDataList) {<br/>        WorkerPushData pushData = new WorkerPushData();<br/>        pushData.setId(settleData.getWorkerId());<br/>        pushData.setType(dataType);<br/>        pushData.setData(settleData);<br/>        pushService.push(pushData);<br/>    }<br/>}</span><span id="6f46" class="mp kv iq ng b gy oc nl l nm nn">// 作业员结算数据提供者接口<br/>private interface WorkerSettleDataProvider {<br/>    // 统计作业员结算数据<br/>    public List&lt;WorkerSettleData&gt; statWorkerSettleData();<br/>}</span></pre><h2 id="8279" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">利益</h2><ul class=""><li id="1b14" class="no np iq jw b jx ls kb lt kf nq kj nr kn ns kr nt nu nv nw bi translated">从各种业务功能中提取核心逻辑，明确业务代码，更易于维护。</li><li id="57e6" class="no np iq jw b jx nx kb ny kf nz kj oa kn ob kr nt nu nv nw bi translated">避免重复编写相同的代码。功能越复杂，好处越大。</li></ul><h1 id="2540" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">减少功能代码级别的数量</h1><p id="912c" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">为了实现优雅的功能，我们建议将代码级别的数量保持在1到4之间。过多的缩进使得函数难以阅读。</p><h2 id="5e97" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">情况1)使用return提前检索一个函数</h2><p id="437b" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">以下代码片段显示了症状描述。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="261f" class="mp kv iq ng b gy nk nl l nm nn">// 获取用户余额函数<br/>public Double getUserBalance(Long userId) {<br/>    User user = getUser(userId);<br/>    if (Objects.nonNull(user)) {<br/>        UserAccount account = user.getAccount();<br/>        if (Objects.nonNull(account)) {<br/>            return account.getBalance();<br/>        }<br/>    }<br/>    return null;<br/>}</span></pre><p id="73f9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请参考以下推荐的解决方案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="1a98" class="mp kv iq ng b gy nk nl l nm nn">// 获取用户余额函数<br/>public Double getUserBalance(Long userId) {<br/>    // 获取用户信息<br/>    User user = getUser(userId);<br/>    if (Objects.isNull(user)) {<br/>        return null;<br/>    }</span><span id="cc26" class="mp kv iq ng b gy oc nl l nm nn">    // 获取用户账户<br/>    UserAccount account = user.getAccount();<br/>    if (Objects.isNull(account)) {<br/>        return null;<br/>    }</span><span id="02b4" class="mp kv iq ng b gy oc nl l nm nn">    // 返回账户余额<br/>    return account.getBalance();<br/>}</span></pre><h2 id="1ce3" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">情况2)使用continue提前终止循环</h2><p id="3376" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">以下代码片段显示了症状描述。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="850d" class="mp kv iq ng b gy nk nl l nm nn">// 获取合计余额函数<br/>public double getTotalBalance(List&lt;User&gt; userList) {<br/>    // 初始合计余额<br/>    double totalBalance = 0.0D;</span><span id="2550" class="mp kv iq ng b gy oc nl l nm nn">    // 依次累加余额<br/>    for (User user : userList) {<br/>        // 获取用户账户<br/>        UserAccount account = user.getAccount();<br/>        if (Objects.nonNull(account)) {<br/>            // 累加用户余额<br/>            Double balance = account.getBalance();<br/>            if (Objects.nonNull(balance)) {<br/>                totalBalance += balance;<br/>            }<br/>        }<br/>    }</span><span id="7ad0" class="mp kv iq ng b gy oc nl l nm nn">    // 返回合计余额<br/>    return totalBalance;<br/>}</span></pre><p id="c54d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请参考以下推荐的解决方案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="6b5e" class="mp kv iq ng b gy nk nl l nm nn">// 获取合计余额函数<br/>public double getTotalBalance(List&lt;User&gt; userList) {<br/>    // 初始合计余额<br/>    double totalBalance = 0.0D;</span><span id="5821" class="mp kv iq ng b gy oc nl l nm nn">    // 依次累加余额<br/>    for (User user : userList) {<br/>        // 获取用户账户<br/>        UserAccount account = user.getAccount();<br/>        if (Objects.isNull(account)) {<br/>            continue;<br/>        }</span><span id="b00c" class="mp kv iq ng b gy oc nl l nm nn">        // 累加用户余额<br/>        Double balance = account.getBalance();<br/>        if (Objects.nonNull(balance)) {<br/>            totalBalance += balance;<br/>        }<br/>    }</span><span id="9abe" class="mp kv iq ng b gy oc nl l nm nn">    // 返回合计余额<br/>    return totalBalance;<br/>}</span></pre><p id="67cb" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">注释</strong></p><p id="4d31" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">其他方法:</strong>在循环体中，调用例1中的getUserBalance函数，获取用户余额，然后计算累计余额。</p><p id="d5fa" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在循环体中，我们建议只使用continue一次。如果您想多次使用continue，我们建议您将循环体封装为一个函数。</p><h2 id="cbc5" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">情况3)使用条件表达式函数来减少级别的数量</h2><p id="820c" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">有关更多信息，请参见下一节中的“案例2:将复杂的条件表达式封装为函数”。</p><h2 id="129d" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">利益</h2><ul class=""><li id="7e00" class="no np iq jw b jx ls kb lt kf nq kj nr kn ns kr nt nu nv nw bi translated">减少代码级别数和代码缩进量。</li><li id="ab5b" class="no np iq jw b jx nx kb ny kf nz kj oa kn ob kr nt nu nv nw bi translated">模块划分清晰，便于阅读和维护。</li></ul><h1 id="a593" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">封装条件表达式函数</h1><h2 id="7103" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">情况1)将简单条件表达式封装为函数</h2><p id="856d" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">以下代码片段显示了症状描述。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="cbb5" class="mp kv iq ng b gy nk nl l nm nn">// 获取门票价格函数<br/>public double getTicketPrice(Date currDate) {<br/>    if (Objects.nonNull(currDate) &amp;&amp; currDate.after(DISCOUNT_BEGIN_DATE)<br/>        &amp;&amp; currDate.before(DISCOUNT_END_DATE)) {<br/>        return TICKET_PRICE * DISCOUNT_RATE;<br/>    }<br/>    return TICKET_PRICE;<br/>}</span></pre><p id="af4f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请参考以下推荐的解决方案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="83c7" class="mp kv iq ng b gy nk nl l nm nn">// 获取门票价格函数<br/>public double getTicketPrice(Date currDate) {<br/>    if (isDiscountDate(currDate)) {<br/>        return TICKET_PRICE * DISCOUNT_RATE;<br/>    }<br/>    return TICKET_PRICE;<br/>}</span><span id="ee10" class="mp kv iq ng b gy oc nl l nm nn">// 是否折扣日期函数<br/>private static boolean isDiscountDate(Date currDate) {<br/>    return Objects.nonNull(currDate) &amp;&amp; <br/>currDate.after(DISCOUNT_BEGIN_DATE)<br/>        &amp;&amp; currDate.before(DISCOUNT_END_DATE);<br/>}</span></pre><h2 id="ce3a" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">情况2)将复杂条件表达式封装为函数</h2><p id="e6a6" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">以下代码片段显示了症状描述。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="4784" class="mp kv iq ng b gy nk nl l nm nn">// 获取土豪用户列表<br/>public List&lt;User&gt; getRichUserList(List&lt;User&gt; userList) {<br/>    // 初始土豪用户列表<br/>    List&lt;User&gt; richUserList = new ArrayList&lt;&gt;();</span><span id="c034" class="mp kv iq ng b gy oc nl l nm nn">    // 依次查找土豪用户<br/>    for (User user : userList) {<br/>        // 获取用户账户<br/>        UserAccount account = user.getAccount();<br/>        if (Objects.nonNull(account)) {<br/>            // 判断用户余额<br/>            Double balance = account.getBalance();<br/>            if (Objects.nonNull(balance) &amp;&amp; balance.compareTo(RICH_THRESHOLD) &gt;= 0) {<br/>                // 添加土豪用户<br/>                richUserList.add(user);<br/>            }<br/>        }<br/>    }</span><span id="b6fc" class="mp kv iq ng b gy oc nl l nm nn">    // 返回土豪用户列表<br/>    return richUserList;<br/>}</span></pre><p id="fbe0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请参考以下推荐的解决方案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="40d8" class="mp kv iq ng b gy nk nl l nm nn">// 获取土豪用户列表<br/>public List&lt;User&gt; getRichUserList(List&lt;User&gt; userList) {<br/>    // 初始土豪用户列表<br/>    List&lt;User&gt; richUserList = new ArrayList&lt;&gt;();</span><span id="e0f9" class="mp kv iq ng b gy oc nl l nm nn">    // 依次查找土豪用户<br/>    for (User user : userList) {<br/>        // 判断土豪用户<br/>        if (isRichUser(user)) {<br/>            // 添加土豪用户<br/>            richUserList.add(user);<br/>        }<br/>    }</span><span id="56c6" class="mp kv iq ng b gy oc nl l nm nn">    // 返回土豪用户列表<br/>    return richUserList;<br/>}</span><span id="4e8d" class="mp kv iq ng b gy oc nl l nm nn">// 是否土豪用户<br/>private boolean isRichUser(User user) {<br/>    // 获取用户账户<br/>    UserAccount account = user.getAccount();<br/>    if (Objects.isNull(account)) {<br/>        return false;<br/>    }</span><span id="465c" class="mp kv iq ng b gy oc nl l nm nn">    // 获取用户余额<br/>    Double balance = account.getBalance();<br/>    if (Objects.isNull(balance)) {<br/>        return false;<br/>    }</span><span id="937d" class="mp kv iq ng b gy oc nl l nm nn">    // 比较用户余额<br/>    return balance.compareTo(RICH_THRESHOLD) &gt;= 0;<br/>}</span></pre><p id="e178" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">也可以通过使用流编程来过滤前面的代码。</p><h2 id="bc67" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">利益</h2><ul class=""><li id="fafb" class="no np iq jw b jx ls kb lt kf nq kj nr kn ns kr nt nu nv nw bi translated">条件表达式独立于业务函数，阐明业务逻辑。</li><li id="a8b2" class="no np iq jw b jx nx kb ny kf nz kj oa kn ob kr nt nu nv nw bi translated">封装的条件表达式是一个独立的函数，可以在代码中重用。</li></ul><h1 id="9ee7" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">避免不必要的空指针判断</h1><p id="a210" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">本节仅适用于您熟悉的内部项目代码。它演示了如何避免不必要的空指针判断。对于第三方中间件和系统API，空指针判断是确保代码健壮性的必要条件。</p><h2 id="103e" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">情况1)调用一个函数来确保参数不为空，以避免不必要的空指针判断</h2><p id="a40b" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">以下代码片段显示了症状描述。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="cd5f" class="mp kv iq ng b gy nk nl l nm nn">// 创建用户信息<br/>User user = new User();<br/>... // 赋值用户相关信息<br/>createUser(user);</span><span id="8b72" class="mp kv iq ng b gy oc nl l nm nn">// 创建用户函数<br/>private void createUser(User user){<br/>    // 判断用户为空<br/>    if(Objects.isNull(user)) {<br/>        return;<br/>    }</span><span id="cd00" class="mp kv iq ng b gy oc nl l nm nn">    // 创建用户信息<br/>    userDAO.insert(user);<br/>    userRedis.save(user);<br/>}</span></pre><p id="2887" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请参考以下推荐的解决方案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="7e92" class="mp kv iq ng b gy nk nl l nm nn">// 创建用户信息<br/>User user = new User();<br/>... // 赋值用户相关信息<br/>createUser(user);</span><span id="ad6e" class="mp kv iq ng b gy oc nl l nm nn">// 创建用户函数<br/>private void createUser(User user){<br/>    // 创建用户信息<br/>    userDAO.insert(user);<br/>    userRedis.save(user);<br/>}</span></pre><h2 id="c1b4" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">情况2)被调用的函数确保响应不为空，以避免不必要的空指针判断</h2><p id="514f" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">以下代码片段显示了症状描述。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="3e4c" class="mp kv iq ng b gy nk nl l nm nn">// 保存用户函数<br/>public void saveUser(Long id, String name) {<br/>    // 构建用户信息<br/>    User user = buildUser(id, name);<br/>    if (Objects.isNull(user)) {<br/>        throw new BizRuntimeException("构建用户信息为空");<br/>    }</span><span id="3beb" class="mp kv iq ng b gy oc nl l nm nn">    // 保存用户信息<br/>    userDAO.insert(user);<br/>    userRedis.save(user);<br/>}</span><span id="7b6e" class="mp kv iq ng b gy oc nl l nm nn">// 构建用户函数<br/>private User buildUser(Long id, String name) {<br/>    User user = new User();<br/>    user.setId(id);<br/>    user.setName(name);<br/>    return user;<br/>}</span></pre><p id="933e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请参考以下推荐的解决方案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="bc2b" class="mp kv iq ng b gy nk nl l nm nn">// 保存用户函数<br/>public void saveUser(Long id, String name) {<br/>    // 构建用户信息<br/>    User user = buildUser(id, name);</span><span id="4b06" class="mp kv iq ng b gy oc nl l nm nn">    // 保存用户信息<br/>    userDAO.insert(user);<br/>    userRedis.save(user);<br/>}</span><span id="9f3e" class="mp kv iq ng b gy oc nl l nm nn">// 构建用户函数<br/>private User buildUser(Long id, String name) {<br/>    User user = new User();<br/>    user.setId(id);<br/>    user.setName(name);<br/>    return user;<br/>}</span></pre><h2 id="d3bc" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">情况3)值分配逻辑确保列表中的数据不为空，以避免不必要的空指针判断</h2><p id="b933" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">以下代码片段显示了症状描述。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="9199" class="mp kv iq ng b gy nk nl l nm nn">// 查询用户列表<br/>List&lt;UserDO&gt; userList = userDAO.queryAll();<br/>if (CollectionUtils.isEmpty(userList)) {<br/>    return;<br/>}</span><span id="7868" class="mp kv iq ng b gy oc nl l nm nn">// 转化用户列表<br/>List&lt;UserVO&gt; userVoList = new ArrayList&lt;&gt;(userList.size());<br/>for (UserDO user : userList) {<br/>    UserVO userVo = new UserVO();<br/>    userVo.setId(user.getId());<br/>    userVo.setName(user.getName());<br/>    userVoList.add(userVo);<br/>}</span><span id="256c" class="mp kv iq ng b gy oc nl l nm nn">// 依次处理用户<br/>for (UserVO userVo : userVoList) {<br/>    // 判断用户为空<br/>    if (Objects.isNull(userVo)) {<br/>        continue;<br/>    }</span><span id="66d9" class="mp kv iq ng b gy oc nl l nm nn">    // 处理相关逻辑<br/>    ...<br/>}</span></pre><p id="69b8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请参考以下推荐的解决方案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="1c1f" class="mp kv iq ng b gy nk nl l nm nn">// 查询用户列表<br/>List&lt;UserDO&gt; userList = userDAO.queryAll();<br/>if (CollectionUtils.isEmpty(userList)) {<br/>    return;<br/>}</span><span id="40a2" class="mp kv iq ng b gy oc nl l nm nn">// 转化用户列表<br/>List&lt;UserVO&gt; userVoList = new ArrayList&lt;&gt;(userList.size());<br/>for (UserDO user : userList) {<br/>    UserVO userVo = new UserVO();<br/>    userVo.setId(user.getId());<br/>    userVo.setName(user.getName());<br/>    userVoList.add(userVo);<br/>}</span><span id="bc66" class="mp kv iq ng b gy oc nl l nm nn">// 依次处理用户<br/>for (UserVO userVo : userVoList) {<br/>    // 处理相关逻辑<br/>    ...<br/>}</span></pre><h2 id="538a" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">情况4)MyBatis查询函数的返回列表和数据项不为空，所以不需要空指针判断</h2><p id="5d32" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">MyBatis是一个优秀的持久层框架，是项目中广泛使用的数据库中间件组件。通过分析MyBatis源代码，您可以确保查询函数返回的列表和数据项不为空，并且代码中不需要空指针判断。</p><p id="d193" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">以下代码片段显示了症状描述。</p><p id="3781" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这个发展思路不错，但是太保守了。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="6051" class="mp kv iq ng b gy nk nl l nm nn">// 查询用户函数<br/>public List&lt;UserVO&gt; queryUser(Long id, String name) {<br/>    // 查询用户列表<br/>    List&lt;UserDO&gt; userList = userDAO.query(id, name);<br/>    if (Objects.isNull(userList)) {<br/>        return Collections.emptyList();<br/>    }</span><span id="55dc" class="mp kv iq ng b gy oc nl l nm nn">    // 转化用户列表<br/>    List&lt;UserVO&gt; voList = new ArrayList&lt;&gt;(userList.size());<br/>    for (UserDO user : userList) {<br/>        // 判断对象为空<br/>        if (Objects.isNull(user)) {<br/>            continue;<br/>        }</span><span id="124c" class="mp kv iq ng b gy oc nl l nm nn">        // 添加用户信息<br/>        UserVO vo = new UserVO();<br/>        BeanUtils.copyProperties(user, vo);<br/>        voList.add(vo);<br/>    }</span><span id="2eac" class="mp kv iq ng b gy oc nl l nm nn">    // 返回用户列表<br/>    return voList;<br/>}</span></pre><p id="57cd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请参考以下推荐的解决方案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="f076" class="mp kv iq ng b gy nk nl l nm nn">// 查询用户函数<br/>public List&lt;UserVO&gt; queryUser(Long id, String name) {<br/>    // 查询用户列表<br/>    List&lt;UserDO&gt; userList = userDAO.query(id, name);</span><span id="563e" class="mp kv iq ng b gy oc nl l nm nn">    // 转化用户列表<br/>    List&lt;UserVO&gt; voList = new ArrayList&lt;&gt;(userList.size());<br/>    for (UserDO user : userList) {<br/>        UserVO vo = new UserVO();<br/>        BeanUtils.copyProperties(user, vo);<br/>        voList.add(vo);<br/>    }</span><span id="bacd" class="mp kv iq ng b gy oc nl l nm nn">    // 返回用户列表<br/>    return voList;<br/>}</span></pre><h2 id="38ed" class="mp kv iq bd kw mq mr dn la ms mt dp le kf mu mv li kj mw mx lm kn my mz lq na bi translated">利益</h2><ul class=""><li id="d722" class="no np iq jw b jx ls kb lt kf nq kj nr kn ns kr nt nu nv nw bi translated">避免不必要的空指针判断，精简业务代码处理逻辑，提高运行效率。</li><li id="30ce" class="no np iq jw b jx nx kb ny kf nz kj oa kn ob kr nt nu nv nw bi translated">这些不必要的空指针判断基本上都是死代码，永远不会执行。因此，删除它们将有助于代码维护。</li></ul><h1 id="4c61" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">原始来源:</h1><div class="lx ly gp gr lz ma"><a href="https://www.alibabacloud.com/blog/coding-specifications-%7C-elegant-java-functions-part-one_596181" rel="noopener  ugc nofollow" target="_blank"><div class="mb ab fo"><div class="mc ab md cl cj me"><h2 class="bd ir gy z fp mf fr fs mg fu fw ip bi translated">编码规范|优雅的Java函数(第一部分)</h2><div class="mh l"><h3 class="bd b gy z fp mf fr fs mg fu fw dk translated">阿里巴巴云2020年4月29日288随着软件项目代码日积月累，系统维护成本上升。这个…</h3></div><div class="mi l"><p class="bd b dl z fp mf fr fs mg fu fw dk translated">www.alibabacloud.com</p></div></div><div class="mj l"><div class="od l ml mm mn mj mo js ma"/></div></div></a></div><p id="4080" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">进入专家视角— </strong> <a class="ae kt" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir">订阅DDI英特尔</strong> </a></p></div></div>    
</body>
</html>