<html>
<head>
<title>Deserialization Flaws</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反序列化缺陷</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/deserialization-flaws-6f41af45953b?source=collection_archive---------3-----------------------#2020-07-05">https://medium.datadriveninvestor.com/deserialization-flaws-6f41af45953b?source=collection_archive---------3-----------------------#2020-07-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ed07" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">不安全的反序列化是现代web应用程序中最常见的漏洞之一，它允许攻击者通过序列化对象传输有效负载。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ca77c33b95de13fd564083dd60b36447.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SG3nM_c7kyivDtQa6JB9IQ.jpeg"/></div></div></figure><p id="87c1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">明确一点，反序列化漏洞不是代码级的bugs它们主要是由应用程序级序列化中的设计错误引起的。由于影响较小，这种类型的空中漏洞不太受安全研究人员的欢迎。避免反序列化漏洞的最佳方法是将您的应用程序嵌入到一个设计为不能提供与普通序列化应用程序相同性能的应用程序中，如电子邮件客户端。</p><p id="02b7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">不同的API框架有不同的序列化和反序列化过程，这些风险可以不同的方式处理。没有已知的漏洞，但是从XML到JSON的序列化格式的转换并不能解决所有的反序列化问题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/a90795dfb22f3a7f19958905c8934cff.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/1*nzm0mNQT7Aku8pVQW3uNMg.gif"/></div></figure><p id="f614" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">成功的反序列化攻击允许将未经授权的代码注入应用程序。如果允许攻击者的代码不安全地执行，几乎任何恶意意图都是可能的。</p><div class="lr ls gp gr lt lu"><a href="https://www.datadriveninvestor.com/2018/10/12/decentralization-diversification-and-antifragility/" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd iu gy z fp lz fr fs ma fu fw is bi translated">分散化、多样化和抗脆弱性|数据驱动的投资者</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">1997年，当被问及现代企业面临的最大挑战时，汤姆·彼得斯和罗伯特…</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="md l"><div class="me l mf mg mh md mi ks lu"/></div></div></a></div><p id="09d7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">不安全的反序列化是一个漏洞，不可信或未知的数据被用来执行拒绝服务(DDoS)攻击、执行代码或进一步滥用应用程序逻辑。相应的漏洞是一个被利用的盲目命令执行漏洞。不可信数据的反序列化可能会导致安全漏洞，并且可能被远程攻击者利用来使用JMS ObjectMessage在应用程序中执行任意代码。当不受信任的用户能够操纵对象并将其直接发送给PHP可疑的函数时，不安全的反序列化漏洞会导致应用程序中存在不安全的访问控制漏洞。不安全荒漠化的可能后果是损害访问控制、未经授权访问数据以及注入未经授权的代码。</p><p id="2582" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在过去，利用反序列化错误大多是手动的，但是今天的大多数开发人员认识到他们不能信任用户输入，倾向于信任在该过程中绑定的数据，这使得攻击者能够破坏该过程并执行一系列攻击。</p><p id="52cc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">不可信数据的反序列化可能导致成功利用漏洞，使得攻击者能够以causer的权限在受影响的设备上执行任意代码。攻击者可以通过向受影响系统上的某些侦听器发送恶意的序列化Java对象来利用此漏洞。该漏洞使得攻击者能够在没有case用户权限的设备和未经验证的远程攻击者上执行任意命令。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/507228b9f8499ad470338551eb1c4c07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Am1mnaPBHTQZUqNL9bYaIw.jpeg"/></div></div></figure><p id="4f62" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">XML曾经是攻击web应用程序的基础，但JSON (JavaScript Object Notation)是目前web应用程序中最流行、最安全的XML替代方案。随着新设计更频繁地使用JSON，需要将注意力集中在不安全的荒漠化上，将其作为一个紧迫的安全问题。如果得不到足够的保护，将来被利用的漏洞的数量正在增加。另一方面，在我们分析了JSON之后，公平地说，即使是JSON也没有那么安全。</p><p id="c2d5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Java运行时系统可以将序列化的流转换和反序列化为对象，而无需首先用预期的类型验证其内容。为了防止Java的反序列化漏洞，应用程序必须限制可以放弃的类的数量，并限制攻击者可以获得的数据量。</p><p id="18db" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">易受攻击的代码存在很长时间并不罕见，但直到现在我们才真正知道这些漏洞经常出现在大型、流行的应用程序中。随着越来越多的开发人员检测到漏洞，越来越多的安全工具支持它们，我相信会发现更多由不安全的荒漠化造成的漏洞。</p><h2 id="abe5" class="mk ml it bd mm mn mo dn mp mq mr dp ms ld mt mu mv lh mw mx my ll mz na nb nc bi translated">有用的来源</h2><p id="0bbe" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">YSOSERIAL是一个概念验证(POC)工具，用于生成利用不安全Java对象反序列化的有效负载。您可以在Apache 2.0许可下从GitHub资源库免费下载它。<a class="ae ni" href="https://github.com/frohoff/ysoserial" rel="noopener ugc nofollow" target="_blank">链接</a></p><p id="7406" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于pen测试人员和研究人员来说，Java-Deserialization-Cheat-Sheet是关于各种Java (JVM)序列化库中的反序列化漏洞的非常有用的资源。<a class="ae ni" href="https://github.com/GrrrDog/Java-Deserialization-Cheat-Sheet#exploits" rel="noopener ugc nofollow" target="_blank">链接</a></p><h2 id="acb8" class="mk ml it bd mm mn mo dn mp mq mr dp ms ld mt mu mv lh mw mx my ll mz na nb nc bi translated">引用的来源</h2><ul class=""><li id="305b" class="nj nk it kw b kx nd la ne ld nl lh nm ll nn lp no np nq nr bi translated">【http://varutra.com/blog/?p=1559 T4】</li><li id="7bcd" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated"><a class="ae ni" href="https://www.christian-schneider.net/JavaDeserializationSecurityFAQ.html" rel="noopener ugc nofollow" target="_blank">https://www . Christian-schneider . net/javadeserializationsecurityfaq . html</a></li><li id="2de5" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated"><a class="ae ni" href="https://thehackerish.com/insecure-deserialization-explained-with-examples/" rel="noopener ugc nofollow" target="_blank">https://the hackerish . com/secure-deserialization-explained-with-examples/</a></li><li id="28b2" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated"><a class="ae ni" href="https://blog.doyensec.com/2019/07/22/jackson-gadgets.html" rel="noopener ugc nofollow" target="_blank">https://blog.doyensec.com/2019/07/22/jackson-gadgets.html</a></li><li id="322f" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated"><a class="ae ni" href="https://dzone.com/articles/why-are-deserialization-vulnerabilities-so-popular" rel="noopener ugc nofollow" target="_blank">https://dzone . com/articles/why-are-deserialization-vulnerability-so-popular</a></li><li id="ee52" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated"><a class="ae ni" href="https://blog.gypsyengineer.com/en/security/safer-deserialization-in-spring-security-oauth.html" rel="noopener ugc nofollow" target="_blank">https://blog . gypsy engineer . com/en/security/safer-deserialization-in-spring-security-oauth . html</a></li><li id="b5f8" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated"><a class="ae ni" href="http://apfs.justlikeu.be/8snun/json-deserialization-vulnerability-c.html" rel="noopener ugc nofollow" target="_blank">http://apfs . just likeu . be/8 snun/JSON-反序列化-漏洞-c.html </a></li><li id="2bc2" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated"><a class="ae ni" href="https://www.tenable.com/blog/cve-2020-2883-oracle-weblogic-deserialization-vulnerability-exploited-in-the-wild" rel="noopener ugc nofollow" target="_blank">https://www . tenable . com/blog/CVE-2020-2883-Oracle-WebLogic-反序列化-漏洞利用-在野外</a></li></ul></div><div class="ab cl nx ny hx nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="im in io ip iq"><p id="9ad2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">访问专家视图— </strong> <a class="ae ni" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu">订阅DDI英特尔</strong> </a></p></div></div>    
</body>
</html>