<html>
<head>
<title>Implementing Drag and Drop in Vue</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Vue中实现拖放</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/implementing-drag-and-drop-in-vue-55bb30335ef0?source=collection_archive---------25-----------------------#2020-09-28">https://medium.datadriveninvestor.com/implementing-drag-and-drop-in-vue-55bb30335ef0?source=collection_archive---------25-----------------------#2020-09-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/254a4b8ccff30e892141607c83e85b46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*nd_-9VuzMTMslT3AOpELBw.jpeg"/></div></div></figure><p id="c564" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这篇文章中，我们将实现一些有趣的东西。我们将在Vuejs中实现拖放功能。我知道有很多库可以帮助你设置这个，但是理解它是如何工作的总是一个好主意。</p><p id="bf90" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">由于它是一个非常小的应用程序，我们不会使用Vue CLI，而是使用Vuejs脚本标签。这也为我们提供了CLI所能提供的所有功能。</p><h1 id="18b3" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">准备好使用Vue模板</h1><p id="ad2f" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">如果你在vue中构建web应用程序，我建议你下载Vue模板并用于你的项目。因为它们有好看的界面，而且很容易定制。他们可以节省你的大量时间，你需要花在为你的应用程序创建用户界面。检查来自WrapPixel的最佳vue模板。众所周知，WrapPixel 在Vue、Angular、React和Bootstrap框架中提供高质量的管理仪表板。</p><p id="a9d6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将从设置项目目录开始，我们将在桌面目录中创建一个文件夹，这是我们将设置应用程序的位置。</p><p id="b23e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">基本上我们只需要两个文件，一个<code class="fe ma mb mc md b">index.html</code>文件和一个<code class="fe ma mb mc md b">main.js</code>文件。我们所有的模板代码都将进入<code class="fe ma mb mc md b">index.html</code>文件，我们所有的Vuejs代码都将进入<code class="fe ma mb mc md b">main.js</code>文件。</p><h1 id="3d20" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">Vue拖放图像上传</h1><p id="95ee" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">为此，请打开您的终端并键入以下内容:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="d2cf" class="mm kx iq md b gy mn mo l mp mq">cd desktop &amp;&amp; mkdir vuedragndrop &amp;&amp; cd vuedragndrop<br/>touch index.html &amp;&amp; touch main.js<br/>code .</span></pre><p id="af08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个命令将在我们的目录中创建这个文件，并在VS代码中打开这个目录。</p><p id="3757" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将通过添加自定义html 5样板文件来修改我们的index.html文件，然后添加Vue脚本标记:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="b12c" class="mm kx iq md b gy mn mo l mp mq">&lt;!DOCTYPE html&gt;<br/>    &lt;html lang="en"&gt;<br/>    &lt;head&gt;<br/>        &lt;meta charset="UTF-8"&gt;<br/>        &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>        &lt;title&gt;Document&lt;/title&gt;<br/>        &lt;script src="https://cdn.jsdelivr.net/npm/vue"&gt;&lt;/script&gt;<br/>    &lt;/head&gt;<br/>    &lt;body&gt;<br/>        &lt;div id="app"&gt;<br/>            {{message}}<br/>        &lt;/div&gt;<br/>        &lt;script src="main.js"&gt;&lt;/script&gt;<br/>    &lt;/body&gt;<br/>    &lt;/html&gt;</span></pre><p id="c475" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们首先定义HTML 5样板文件，并在head标签中添加Vuejs脚本标签，这将在页面加载时立即初始化Vuejs。然后我们创建一个id为<code class="fe ma mb mc md b">app</code>的<code class="fe ma mb mc md b">div</code>，我们将在这里编写所有的Vuejs代码。你必须在实时服务器上运行你的应用程序。你可以使用NPM安装任何你选择的直播服务。</p><div class="mr ms gp gr mt mu"><a href="https://www.datadriveninvestor.com/2020/07/29/how-working-from-home-increased-my-productivity/" rel="noopener  ugc nofollow" target="_blank"><div class="mv ab fo"><div class="mw ab mx cl cj my"><h2 class="bd ir gy z fp mz fr fs na fu fw ip bi translated">在家工作如何提高我的工作效率|数据驱动型投资者</h2><div class="nb l"><h3 class="bd b gy z fp mz fr fs na fu fw dk translated">在家工作确实激发了我最大的潜能，让我更有效率。因为在家工作给了我…</h3></div><div class="nc l"><p class="bd b dl z fp mz fr fs na fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="nd l"><div class="ne l nf ng nh nd ni jw mu"/></div></div></a></div><p id="93d2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这样做之后，我们需要在我们的<code class="fe ma mb mc md b">main.js</code>文件中创建Vuejs实例:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="94a4" class="mm kx iq md b gy mn mo l mp mq">var app = new Vue({<br/>    el: '#app',<br/>    data: {<br/>        message: 'Hello Vue!'<br/>    }<br/>})</span></pre><p id="53d3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们使用<code class="fe ma mb mc md b">new Vue()</code>方法创建Vuejs的一个实例，并定义我们在<code class="fe ma mb mc md b">index.html</code>文件中引用的<code class="fe ma mb mc md b">message</code>数据属性。</p><p id="d0b9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将创建一个简单的用户界面来显示拖放点。在id为<code class="fe ma mb mc md b">app</code>的div中添加以下标记:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="42a1" class="mm kx iq md b gy mn mo l mp mq">&lt;div id="app"&gt;<br/>            &lt;div class="container"&gt;<br/>                &lt;h4&gt;Drag and Drop here&lt;/h4&gt;<br/>            &lt;/div&gt;<br/>            {{message}}<br/>        &lt;/div&gt;</span><span id="a6f6" class="mm kx iq md b gy nj mo l mp mq">And then add this styles in the head tag:</span><span id="5d32" class="mm kx iq md b gy nj mo l mp mq">     &lt;style&gt;<br/>            .container {<br/>                width: 350px;<br/>                height: 350px;<br/>                border: 2px dotted gray<br/>            }<br/>            .container h4 {<br/>                text-align: center;<br/>                font-family: sans-serif;<br/>            }<br/>        &lt;/style&gt;</span></pre><p id="695e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">完成此操作后，您将获得以下结果:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/18f2a0652f9ac78d254b7e59ffb2e803.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/0*e_8mbH3o_Cqg3i5x.jpg"/></div></figure><h1 id="d726" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">添加数据属性</h1><p id="b1bd" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">我们现在必须添加一个数据属性来保存已经放在盒子上的文件。要执行此操作，请将以下内容添加到Vue实例中数据属性:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="5ab1" class="mm kx iq md b gy mn mo l mp mq">files: [],</span></pre><p id="6f41" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">之后我们将添加一个<code class="fe ma mb mc md b">@drop</code>事件来选择我们的文件，还有一个<code class="fe ma mb mc md b">v-cloak</code>属性用来在应用程序加载前隐藏<code class="fe ma mb mc md b">{{tags}}</code>。</p><p id="4f61" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们的div应该看起来像这样:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="6769" class="mm kx iq md b gy mn mo l mp mq">&lt;div class="container" v-cloak @drop.prevent="addFile" @dragover.prevent&gt;<br/>    &lt;h4&gt;Drag and Drop here&lt;/h4&gt;<br/> &lt;/div&gt;</span></pre><p id="83ad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们需要在我们的Vue实例中定义<code class="fe ma mb mc md b">addFile</code>方法。为此，我们将在Vue实例中创建一个方法对象，它将保存我们所有的Vuejs方法:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="08e3" class="mm kx iq md b gy mn mo l mp mq">addFile(e) {<br/>      let files = e.dataTransfer.files;<br/>      [...files].forEach(file =&gt; {<br/>        this.files.push(file);<br/>        console.log(this.files)<br/>      });<br/>    }</span></pre><p id="0013" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这样做之后，打开你的控制台，试着在盒子里拖放一个文件。这样做会将文件详细信息记录在框内。</p><p id="90ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以做的是使用<code class="fe ma mb mc md b">&lt;li&gt;</code>标签在盒子里显示选中的图片。让我们通过修改代码来添加这个特性:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="835b" class="mm kx iq md b gy mn mo l mp mq">&lt;div class="container" v-cloak @drop.prevent="addFile" @dragover.prevent&gt;<br/>        &lt;h4&gt;Drag and Drop here&lt;/h4&gt;<br/>        &lt;li v-for="(file,id) in files" :key="id" class="list-group-item mb-3 border-top"&gt;<br/>        {{ file.name }} ({{ file.size }} kb)<br/>        &lt;button&gt;Remove&lt;/button&gt;<br/>     &lt;/div&gt;</span></pre><p id="456e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，如果您拖放一个文件，您将获得文件名和文件大小。</p><h1 id="9f03" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">从Vuejs拖放中移除图像</h1><p id="4c59" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">我们还可以添加一个方法，通过向remove按钮添加一个方法来从<code class="fe ma mb mc md b">files</code>数组中删除一个文件:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="6707" class="mm kx iq md b gy mn mo l mp mq">&lt;button @click="removeFile(file)"&gt;Remove&lt;/button&gt;</span></pre><p id="6745" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后在方法对象中创建<code class="fe ma mb mc md b">removeFile</code>方法:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="d504" class="mm kx iq md b gy mn mo l mp mq">removeFile(file) {<br/>      this.files = this.files.filter(f =&gt; {<br/>        return f != file;<br/>      });<br/>    },</span></pre><p id="2169" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这样，您现在可以从<code class="fe ma mb mc md b">files</code>数组中删除任何文件。</p><p id="aa08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们更进一步，创建一个Vuejs过滤器来格式化每个文件的侧面。创建一个过滤器对象并添加此方法:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="98d7" class="mm kx iq md b gy mn mo l mp mq">filters: {<br/>    kb(val) {<br/>      return Math.floor(val / 1024);<br/>    }<br/>  },</span></pre><p id="d49e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">基本上，这样做的目的是将文件的大小除以1024，得到实际大小。要使用Vuejs过滤器，您必须通过管道来使用它，方法如下:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="baa6" class="mm kx iq md b gy mn mo l mp mq">{{ file.name }} ({{ file.size | kb }} kb)</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/f0b35836fd5adcbda2ba29bab09bb1b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/0*bvC1w8VISiuUZidC.jpg"/></div></figure><h1 id="0884" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">用Bootstrap设计我们的Vue拖放</h1><p id="6572" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">为了让我们的用户界面看起来更好，我们可以在应用程序中添加引导CSS CDN和google字体。让我们将HTML标题修改为:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="5950" class="mm kx iq md b gy mn mo l mp mq">&lt;head&gt;<br/>    &lt;meta charset="UTF-8" /&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;<br/>    &lt;title&gt;Drag and Drop&lt;/title&gt;<br/>    &lt;link<br/>      href="https://fonts.googleapis.com/css2?family=Kumbh+Sans&amp;display=swap"<br/>      rel="stylesheet"<br/>    /&gt;<br/>    &lt;link<br/>      rel="stylesheet"<br/>      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"<br/>      integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"<br/>      crossorigin="anonymous"<br/>    /&gt;<br/>    &lt;script src="https://cdn.jsdelivr.net/npm/vue"&gt;&lt;/script&gt;<br/>    &lt;style&gt;<br/>      * {<br/>        font-family: "Kumbh Sans", sans-serif;<br/>      }<br/>      .wrapper {<br/>        width: 350px;<br/>        height: 350px;<br/>        border: 2px dotted gray;<br/>      }<br/>    &lt;/style&gt;<br/>  &lt;/head&gt;</span></pre><p id="f97c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">添加后，我们现在可以将标记修改为:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="0953" class="mm kx iq md b gy mn mo l mp mq">&lt;body&gt;<br/>        &lt;div id="app"&gt;<br/>          &lt;nav class="navbar navbar-light bg-info"&gt;<br/>            &lt;div class="container"&gt;<br/>              &lt;a class="navbar-brand" href="#"&gt;Vue Drag and Drop&lt;/a&gt;<br/>            &lt;/div&gt;<br/>          &lt;/nav&gt;<br/>          &lt;div class="container"&gt;<br/>            &lt;div class="row mt-4"&gt;<br/>              &lt;div class="col-md-6 offset-md-3"&gt;<br/>                &lt;div<br/>                  class="wrapper px-2"<br/>                  v-cloak<br/>                  @drop.prevent="addFile"<br/>                  @dragover.prevent<br/>                &gt;<br/>                  &lt;h4 class="mt-3 text-center"&gt;Drag and Drop here&lt;/h4&gt;<br/>                  &lt;ul class="list-group"&gt;<br/>                    &lt;li class="list-group-item" v-for="(file,id) in files"&gt;<br/>                      {{ file.name }} ({{ file.size | kb }} kb)<br/>                      &lt;button<br/>                        class="btn btn-danger btn-sm float-right"<br/>                        @click="removeFile(file)"<br/>                      &gt;<br/>                        x<br/>                      &lt;/button&gt;<br/>                    &lt;/li&gt;<br/>                  &lt;/ul&gt;<br/>                &lt;/div&gt;<br/>              &lt;/div&gt;<br/>            &lt;/div&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>        &lt;script src=" main.js"&gt;&lt;/script&gt;<br/>      &lt;/body&gt;</span></pre><p id="d84b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，您的应用程序应该如下所示:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/3c4ab13ccd77e4a111bea489a1645ad8.png" data-original-src="https://miro.medium.com/v2/resize:fit:926/format:webp/1*wqYM48g_ec68Kmx4RZ2lpA.jpeg"/></div></figure><h2 id="94c6" class="mm kx iq bd ky nn no dn lc np nq dp lg kj nr ns lk kn nt nu lo kr nv nw ls nx bi translated">访问专家视图— <a class="ae lz" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank">订阅DDI英特尔</a></h2></div></div>    
</body>
</html>