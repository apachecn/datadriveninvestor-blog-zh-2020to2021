<html>
<head>
<title>Process Management for Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python的流程管理</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/process-management-for-python-461ad5ce7dd0?source=collection_archive---------4-----------------------#2020-03-05">https://medium.datadriveninvestor.com/process-management-for-python-461ad5ce7dd0?source=collection_archive---------4-----------------------#2020-03-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/669ab753cb45dc55d6b928424b4dc791.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*6ndT0fmlmffb3jsZYszhyg.jpeg"/></div></div></figure><p id="adbe" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">大多数时候，你通过ssh登录到远程服务器。如果您启动一个shell脚本或命令并退出(中止远程连接)，该进程/命令将被终止。有时一项工作或一个命令需要很长时间。如果您不确定作业何时结束，最好让作业在后台运行。但是，如果您从系统中注销，该作业将被您的shell停止和终止。当进程出现SIGHUP时，您如何保持作业在后台运行？</p><p id="25f3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">下面给出了一些命令:</p><h1 id="9215" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">Nohup:-</h1><p id="79e5" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated"><strong class="kd iu"> Nohup </strong>，no hang-up的缩写，是<strong class="kd iu"> Linux </strong>系统中的一个命令，即使在退出shell或终端后，它也能保持进程运行。<strong class="kd iu"> Nohup </strong>阻止进程或作业接收SIGHUP(信号挂起)信号。这是在关闭或退出终端时发送给进程的信号。nohup 的一些基本命令如下。</p><p id="ffe8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可以使用以下命令检查<code class="fe mc md me mf b"><strong class="kd iu">nohup</strong></code>命令的版本。</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="ab1c" class="mo la it mf b gy mp mq l mr ms">$ nohup --version</span></pre><p id="6817" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为了使<a class="ae mt" href="https://linuxize.com/post/how-to-run-linux-commands-in-background/" rel="noopener ugc nofollow" target="_blank">在后台运行命令</a>，在命令末尾添加一个符号<code class="fe mc md me mf b">&amp;</code>:</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="7579" class="mo la it mf b gy mp mq l mr ms">$ nohup mycommand &amp;</span></pre><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mu"><img src="../Images/3ab1d3659b5c2bb506f8000c2f060de2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rzmYMn5Dy8SfM5wZegRCuA.png"/></div></div></figure><p id="d8bf" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你愿意，你可以通过键入<code class="fe mc md me mf b"><strong class="kd iu">fg</strong></code>返回到shell命令提示符</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="19f3" class="mo la it mf b gy mp mq l mr ms">$ fg</span></pre><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mv"><img src="../Images/fd6db3f20de57926e3333a52a59d46c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HHud_q04pAPzKxjryfohsA.png"/></div></div></figure><p id="403f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要在恢复shell时检查进程，使用如图所示的<code class="fe mc md me mf b">pgrep</code>命令</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="d468" class="mo la it mf b gy mp mq l mr ms">$ ps -ef | grep 'mycommand'</span></pre><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/516edfa880cce73e4b129efac23e0ea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*TLzjUzt614fPN6g_xpuy0w.png"/></div></figure><p id="c28d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你想停止或终止正在运行的进程，使用<code class="fe mc md me mf b">kill</code> a命令后跟进程ID，如下所示</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="5adf" class="mo la it mf b gy mp mq l mr ms">$ kill 12628</span></pre><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/3d84d586435928909b9f9c209598eee7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*MXeC9Ed_aYPGXYC-ITkP8w.png"/></div></figure><p id="e98b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可以通过以下方式执行该命令，将输出重定向到<strong class="kd iu"> output.txt </strong>文件。检查<strong class="kd iu"> output.txt </strong>的输出。</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="dd67" class="mo la it mf b gy mp mq l mr ms">$ nohup mycommand &gt; output.txt</span></pre><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/08117fce1333a257d09f168e5495800f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OhfMQ67kw6C58gxSqkxSkg.png"/></div></div></figure><p id="638f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要重定向到一个文件和标准错误和输出，使用如下所示的<code class="fe mc md me mf b">&gt; filename 2&gt;&amp;1 </code>属性</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="90e5" class="mo la it mf b gy mp mq l mr ms">$ nohup mycommand &gt; myoutput.txt &gt;2&amp;1</span></pre><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/900a8907937a7e1bf81a126156d342f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*opeqXkwt4S7bQCgu-1klDQ.png"/></div></div></figure><p id="9126" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">注意:-没有办法重新启动或重新加载任何命令。</p><h1 id="1d63" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">屏幕:-</h1><p id="ac2d" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">Screen或GNU Screen是一个终端多路复用器。换句话说，这意味着您可以启动一个屏幕会话，然后在该会话中打开任意数量的窗口(虚拟终端)。当窗口不可见时，在屏幕中运行的进程将继续运行，即使您断开连接。</p><p id="7453" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在Ubuntu上安装Linux屏幕</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="777a" class="mo la it mf b gy mp mq l mr ms">$ sudo apt install screen</span></pre><p id="e31c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在大多数Linux发行版上都预装了screen包。您可以通过键入以下命令来检查它是否安装在您的系统上:</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="7ac6" class="mo la it mf b gy mp mq l mr ms">$ screen --version</span></pre><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/035d75cb3c303e31375ee5efd0bfd543.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b4a_9kzBZNvlOiX-_CaKiA.png"/></div></div></figure><p id="c89a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要开始屏幕会话，只需在控制台中键入<code class="fe mc md me mf b">screen</code>:</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="d106" class="mo la it mf b gy mp mq l mr ms">$ screen</span></pre><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nb"><img src="../Images/44b2f8e4b7c7848141bd685e771c3d8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y_ykQQqGItdeIbXSNkvd2A.png"/></div></div></figure><p id="6498" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要结束屏幕会话，只需在屏幕会话控制台中键入<code class="fe mc md me mf b">exit</code>:</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="6043" class="mo la it mf b gy mp mq l mr ms">exit</span></pre><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nc"><img src="../Images/c35e472aabbe9fba2c8f2a4ea7950cb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JL_JnPRKSqfFYQyN_WD4iw.png"/></div></div></figure><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nd"><img src="../Images/8d0d6698c48927087062d440738761a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CranH65QiWQd8BkRuMD1oA.png"/></div></div></figure><p id="dfe4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要使用任何命令启动屏幕会话，只需在控制台中键入<code class="fe mc md me mf b">screen command</code>:</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="cae2" class="mo la it mf b gy mp mq l mr ms">$ screen mycommand</span></pre><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/e34b3a4e295332b02f9cc70fdddc5d85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*90pFM-4QoMFAoibnzKVwfg.png"/></div></div></figure><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nf"><img src="../Images/4b7919fdfd10a62d84a07e38a58f5dbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q6oShP30jvfUb4ZjsO4rsg.png"/></div></div></figure><p id="5c15" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">运行多个屏幕会话时，命名会话非常有用。要创建命名会话，请使用以下参数运行screen命令:</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="0e38" class="mo la it mf b gy mp mq l mr ms">$ screen -S 'session name detail' mycommand</span></pre><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/cedf6233c27acbabccfd3376f28273c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*53pBezHGndAJxBZEeSGU_A.png"/></div></figure><p id="f489" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可以通过键入以下命令随时从屏幕会话中分离:</p><p id="2a3b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe mc md me mf b">Ctrl+a</code> <code class="fe mc md me mf b">d</code></p><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/b5523e99cdebadfc2da4b5cc4fce1b33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nR9DR7vKboy3aSBg9_jblQ.png"/></div></div></figure><p id="1ca7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在屏幕会话中运行的程序将在您从会话中分离后继续运行。</p><p id="61cb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要查找会话ID，请使用以下命令列出当前运行的屏幕会话:</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="2344" class="mo la it mf b gy mp mq l mr ms">$ screen -ls</span></pre><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ni"><img src="../Images/ba8dd7119d20c1ed7ece816c8d006c49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GCMq4RvgeX6XQbyowkBbXA.png"/></div></div></figure><p id="b3af" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要恢复屏幕会话，请使用以下命令:</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="5120" class="mo la it mf b gy mp mq l mr ms">$ screen -r</span></pre><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nj"><img src="../Images/56567330cafa86d755a8740f74243f2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Olljk6uZjZ2s8r1SIG-MUA.png"/></div></div></figure><p id="f1ea" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您的机器上运行多个屏幕会话，您需要在<code class="fe mc md me mf b">r</code>开关后附加屏幕会话ID。</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="788e" class="mo la it mf b gy mp mq l mr ms">$ screen -r 15582</span></pre><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nj"><img src="../Images/56567330cafa86d755a8740f74243f2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Olljk6uZjZ2s8r1SIG-MUA.png"/></div></div></figure><p id="28c9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">以下是管理Linux屏幕窗口的一些最常见的命令:</p><ul class=""><li id="e2c6" class="nk nl it kd b ke kf ki kj km nm kq nn ku no ky np nq nr ns bi translated"><code class="fe mc md me mf b">Ctrl+a</code> <code class="fe mc md me mf b">c</code>新建一个窗口(带外壳)</li><li id="d423" class="nk nl it kd b ke nt ki nu km nv kq nw ku nx ky np nq nr ns bi translated"><code class="fe mc md me mf b">Ctrl+a</code> <code class="fe mc md me mf b">"</code>列出所有窗口</li><li id="ef27" class="nk nl it kd b ke nt ki nu km nv kq nw ku nx ky np nq nr ns bi translated"><code class="fe mc md me mf b">Ctrl+a</code> <code class="fe mc md me mf b">0</code>切换到窗口0(按数字)</li><li id="857a" class="nk nl it kd b ke nt ki nu km nv kq nw ku nx ky np nq nr ns bi translated"><code class="fe mc md me mf b">Ctrl+a</code> <code class="fe mc md me mf b">A</code>重命名当前窗口</li><li id="da79" class="nk nl it kd b ke nt ki nu km nv kq nw ku nx ky np nq nr ns bi translated"><code class="fe mc md me mf b">Ctrl+a</code> <code class="fe mc md me mf b">S</code>将当前区域水平分割成两个区域</li><li id="c5f9" class="nk nl it kd b ke nt ki nu km nv kq nw ku nx ky np nq nr ns bi translated"><code class="fe mc md me mf b">Ctrl+a</code> <code class="fe mc md me mf b">|</code>将当前区域垂直分割成两个区域</li><li id="fa44" class="nk nl it kd b ke nt ki nu km nv kq nw ku nx ky np nq nr ns bi translated"><code class="fe mc md me mf b">Ctrl+a</code> <code class="fe mc md me mf b">tab</code>将输入焦点切换到下一个区域</li><li id="c323" class="nk nl it kd b ke nt ki nu km nv kq nw ku nx ky np nq nr ns bi translated"><code class="fe mc md me mf b">Ctrl+a</code> <code class="fe mc md me mf b">Ctrl+a</code>在当前和上一个区域之间切换</li><li id="61ac" class="nk nl it kd b ke nt ki nu km nv kq nw ku nx ky np nq nr ns bi translated"><code class="fe mc md me mf b">Ctrl+a</code> <code class="fe mc md me mf b">Q</code>关闭除当前区域以外的所有区域</li><li id="2ffe" class="nk nl it kd b ke nt ki nu km nv kq nw ku nx ky np nq nr ns bi translated"><code class="fe mc md me mf b">Ctrl+a</code> <code class="fe mc md me mf b">X</code>关闭当前区域</li></ul><p id="4339" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这些命令在后台管理您的应用程序，而<code class="fe mc md me mf b">nohup</code>生成输出和错误文件，用于分析您的日志。有多种选择，如:<code class="fe mc md me mf b">Pm2</code>、<code class="fe mc md me mf b">tmux</code>等。</p><p id="e4cf" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">欢迎在评论区提出任何问题或疑问，或者你可以在脸书上ping我。 </p></div></div>    
</body>
</html>