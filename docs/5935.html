<html>
<head>
<title>Use Python to Value a Stock Automatically</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python对股票进行自动估值</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/use-python-to-value-a-stock-automatically-3b520422ab6?source=collection_archive---------0-----------------------#2020-10-06">https://medium.datadriveninvestor.com/use-python-to-value-a-stock-automatically-3b520422ab6?source=collection_archive---------0-----------------------#2020-10-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9973" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">苹果股票是否被高估？只需输入Ticker，让Python自动决定！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/39ef46e4f6f467da6d8f479051799c2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lgSGOmTF5WNBHPVp"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@adamaszczos?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Adam Nowakowski</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a6f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<a class="ae ky" href="https://medium.com/datadriveninvestor/how-to-calculate-intrinsic-value-of-a-stock-aapl-case-study-935fb062004b" rel="noopener">之前的一篇文章</a>中，我描述了如何<em class="lv">手动</em>从网上获取数据并计算苹果股票的内在价值，以及详细解释了贴现现金流模型<strong class="lb iu"/>。</p><div class="lw lx gp gr ly lz"><a href="https://medium.com/datadriveninvestor/how-to-calculate-intrinsic-value-of-a-stock-aapl-case-study-935fb062004b" rel="noopener follow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">如何计算股票的内在价值(AAPL案例研究)</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">获取公司数据和计算股票内在价值的逐步指南，包括网络应用程序</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">medium.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn ks lz"/></div></div></a></div><p id="0980" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文使用了与<strong class="lb iu">相同的模型</strong>，除了所有事情(从多个来源提取数据，执行计算)现在都是用Python 自动完成的<strong class="lb iu">。我将<em class="lv">而不是</em>解释模型</strong>背后的<strong class="lb iu">基本原理，或者<strong class="lb iu">在这里做出某些估计</strong>，因为它们已经在<a class="ae ky" href="https://medium.com/datadriveninvestor/how-to-calculate-intrinsic-value-of-a-stock-aapl-case-study-935fb062004b" rel="noopener">上一篇文章</a>中解释过了。<em class="lv">如需进一步阐述，请参考。</em></strong></p><p id="2c71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我还稍微改变了步骤的顺序，因为在进行估计和执行计算之前，首先以编程方式获取所需的所有相关数据是有意义的。</p><p id="8cfe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">免责声明:</strong> <em class="lv">我不是理财顾问，这篇文章也不代表任何形式的理财建议。使用这些计算方法进行的任何投资都会带来风险，所以在这样做之前，一定要记得做好尽职调查和研究。</em></p><h1 id="1d0c" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">第一步。导入软件包并注册财务建模准备API</h1><h2 id="14fa" class="ng mp it bd mq nh ni dn mu nj nk dp my li nl nm na lm nn no nc lq np nq ne nr bi translated">导入包以提取和显示数据</h2><p id="5494" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">首先，我们从<a class="ae ky" href="https://finviz.com/quote.ashx?t=aapl" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> Finviz </strong> </a>和<a class="ae ky" href="https://financialmodelingprep.com/developer/docs/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">金融建模准备API </strong> </a>导入解析数据所需的包。来自Finviz的数据是在一个<strong class="lb iu"> html表</strong>中，而来自金融建模准备API的数据是在<strong class="lb iu"> JSON </strong>格式中，两者我们都需要包来<strong class="lb iu">解析</strong>。</p><p id="d7eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">计算股票的内在价值需要这些数据。我们还使用<strong class="lb iu"> Matplotlib </strong>为以后的数据可视化做一些绘图。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="2275" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的最后一行中，给出了财务建模准备API的base_url，对于我们提出的任何数据请求(例如AAPL的现金流量表)，我们以查询的形式将它添加到base_url之后(稍后将详细介绍)。</p><h2 id="e8eb" class="ng mp it bd mq nh ni dn mu nj nk dp my li nl nm na lm nn no nc lq np nq ne nr bi translated">输入财务建模准备API密钥和报价器</h2><p id="1303" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">输入<strong class="lb iu">Financial modeling Prep API键</strong>和您感兴趣的股票的股票代码(在本例中，苹果股票的代码为“AAPL”)。</p><p id="6ce2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的<strong class="lb iu"> API键【演示】</strong>是一个演示键，只对<strong class="lb iu">【AAPL】</strong>获取数据有效。对于其他tickers，你需要在<a class="ae ky" href="https://financialmodelingprep.com/developer" rel="noopener ugc nofollow" target="_blank">https://financialmodelingprep.com/developer</a>注册一个账户，以免费获得API密钥(对于前250个请求，然而当你的免费请求用完时，你实际上可以注册另一个账户)。</p><p id="4ab0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注册后，请转到仪表板获取您的API密钥。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><h1 id="3430" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">第二步。从财务建模准备API获取财务报表</h1><p id="2ebe" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated"><strong class="lb iu">财务建模准备API </strong>为我们提供了从不同公司获取<strong class="lb iu">财务报表数据</strong>所需的一切，而无需手动浏览。返回的数据是以<strong class="lb iu"> JSON </strong>(下面的例子)的形式，我们可以使用<a class="ae ky" href="https://docs.python.org/3/library/json.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> json Python包</strong> </a>对其进行解析。点击<a class="ae ky" href="https://financialmodelingprep.com/api/v3/cash-flow-statement/AAPL?period=quarter&amp;limit=400&amp;apikey=2b6cef897a71d11434d94adf8c91c258" rel="noopener ugc nofollow" target="_blank">此链接</a>自行查看。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://financialmodelingprep.com/api/v3/cash-flow-statement/AAPL?period=quarter&amp;limit=400&amp;apikey=2b6cef897a71d11434d94adf8c91c258"><div class="gh gi nz"><img src="../Images/54363f35c36b40d8d525ac05f47a9cf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*iQ-5sitVjcPNjChJW79xjA.png"/></div></a><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Part of Cash Flow Statement of a Company Obtained from Financial Modelling Prep API</figcaption></figure><h2 id="83e3" class="ng mp it bd mq nh ni dn mu nj nk dp my li nl nm na lm nn no nc lq np nq ne nr bi translated">季度现金流量表(最近4个季度)</h2><p id="fc42" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">为什么我们在看季度现金流量表而不是年度现金流量表？</p><p id="e515" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<a class="ae ky" href="https://medium.com/datadriveninvestor/how-to-calculate-intrinsic-value-of-a-stock-aapl-case-study-935fb062004b" rel="noopener">上一篇文章</a>中，我们使用<strong class="lb iu">后十二个月(TTM) </strong>期间的自由现金流来预测未来现金流。不幸的是，根据Financial Modelling Prep的年度现金流量表数据，没有TTM数据，最近的数据是去年(2019年)的现金流。因此，公司最近的现金流(特别是2020年前两个季度)没有计入。</p><p id="881a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，对于TTM的数据，我们需要自己<strong class="lb iu">合计最近4个季度的现金流</strong>。在下面的代码中，我们将<strong class="lb iu">'现金流量表/' </strong>添加到财务建模准备API的base_url，以及<strong class="lb iu"> 'ticker' </strong>和参数<strong class="lb iu"> 'period=quarter' </strong>和<strong class="lb iu"> 'apikey=demo' </strong>。有关如何查询数据的更多详细信息，请参考<a class="ae ky" href="https://financialmodelingprep.com/developer/docs/#Company-Financial-Statements" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="5e5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将json数据解析到一个DataFrame中，并获得最近的4行(因此代码中有iloc[:4])。检查下面结果的日期，看它们是否确实是最近几个季度。自由现金流是下面数据框中的一列(虽然在截图中没有显示)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/613e6702f624dee86b1ae50f074478d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rpFYH_veM2jj-qYTOftZ8w.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Cash Flow Statement (most recent 4 quarters only)</figcaption></figure><h2 id="74af" class="ng mp it bd mq nh ni dn mu nj nk dp my li nl nm na lm nn no nc lq np nq ne nr bi translated">年度现金流量表</h2><p id="0c21" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">我们重复上述步骤，但<strong class="lb iu">省略了“期间=季度”</strong>以获得年度现金流量表数据。这一步<strong class="lb iu">是可选的</strong>，因为我们不需要任何东西来计算内在价值。我们获得这些数据是为了以后<strong class="lb iu">绘制出</strong>历年的现金流<strong class="lb iu">来检查现金流是否稳定且在增长</strong>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="9390" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">验证下面的输出，以查看这些日期确实是年度数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/bbe9fd3feb29349dc35a52fa7df6d10a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xg5iG6vQZwmu83jIiumO7A.png"/></div></div></figure><h2 id="c2cf" class="ng mp it bd mq nh ni dn mu nj nk dp my li nl nm na lm nn no nc lq np nq ne nr bi translated">现金流量表(年度+ TTM)</h2><p id="e546" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">现在我们<strong class="lb iu">汇总最近四个季度</strong>的数据，将该行重命名为‘TTM’并将其附加到年度现金流量表中，以<strong class="lb iu">合并</strong>年度数据和TTM数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="6934" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，在结果中，我们现在有一个包含TTM数据的行。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/f84170d486614976f9387c8b2f1088e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*frFdRvKyR6Hb9tQqqDiUcA.png"/></div></div></figure><h2 id="778d" class="ng mp it bd mq nh ni dn mu nj nk dp my li nl nm na lm nn no nc lq np nq ne nr bi translated">检查自由现金流的稳定性</h2><p id="eb5a" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">让我们从上面的数据框架中画出<strong class="lb iu">过去15年</strong>的自由现金流(因此代码中有iloc[-15:])。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="3111" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现金流相当稳定，而且还在增长，因此是可以预测的。请注意，一些异常是正常的。一个有趣的事实是，<strong class="lb iu"> TTM自由现金流高于去年</strong> (2019)的年度自由现金流。这是因为尽管有疫情的帮助，苹果公司还是设法在上一季度增加了收入。很可靠的公司，是吧？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/711ad3f50707875f79c97ec26a21dfdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xSP4dBVr0xrYucqgxeQLMw.png"/></div></div></figure><p id="c2a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还要注意的是，如果你的公司有<strong class="lb iu">不稳定且不规则的</strong>自由现金流，贴现现金流模型可能<strong class="lb iu">而不是</strong>是对其内在价值的一个很好的估计。</p><div class="lw lx gp gr ly lz"><a href="https://www.datadriveninvestor.com/2020/07/07/introduction-to-time-series-forecasting-of-stock-prices-with-python/" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">用Python |数据驱动投资者进行股票价格时间序列预测简介</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">在这个简单的教程中，我们将看看如何将时间序列模型应用于股票价格。更具体地说，一个…</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="mi l"><div class="oe l mk ml mm mi mn ks lz"/></div></div></a></div><h2 id="dce2" class="ng mp it bd mq nh ni dn mu nj nk dp my li nl nm na lm nn no nc lq np nq ne nr bi translated">资产负债表(季度)</h2><p id="9930" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">资产负债表显示了公司在某个<em class="lv">时刻</em>的财务健康状况(所有资产和负债)的<strong class="lb iu">快照(不像现金流量表那样在一段时间内汇总)。要获得一家公司的相关数据来计算内在价值，我们只需要最近一个季度</strong>的<strong class="lb iu">资产负债表。</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/e6f9ba4a072b43760c0447731d34a34e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0lgqLLBodefAjZneqxAB-Q.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">We only need the top row (most recent quarter data)</figcaption></figure><h2 id="a6ec" class="ng mp it bd mq nh ni dn mu nj nk dp my li nl nm na lm nn no nc lq np nq ne nr bi translated">自由现金流、总债务、现金和短期投资</h2><p id="964b" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">让我们从之前创建的<strong class="lb iu">现金流量表</strong>的<strong class="lb iu"> TTM </strong>行中提取<strong class="lb iu">自由现金流</strong>。我们还从<strong class="lb iu">资产负债表</strong>的顶行(最近一个季度)获得<strong class="lb iu">总债务和现金及短期投资</strong>。让我们也把它们打印出来检查一下。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/c58f12943f87ca462787015db4d00d7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yY9dPTwXGqbzS26zBNruIQ.png"/></div></div></figure><h1 id="18fc" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">第三步。从Finviz中提取和解析数据</h1><p id="47ac" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">接下来，你需要从<a class="ae ky" href="https://finviz.com/quote.ashx?t=aapl" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> Finviz </strong> </a>获取更多的数据。Finviz在其网站上以一个<strong class="lb iu"> html表格</strong>展示了所有的公司数据，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/5890d6cd9e33a8bb8d97c05fe31ddf13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BwOXm4XccSu6kEzZG8q88A.png"/></div></div></figure><p id="e8f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们需要使用Python中的<a class="ae ky" href="https://requests.readthedocs.io/en/master/user/quickstart/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> requests.get </strong> </a>方法和<a class="ae ky" href="https://pypi.org/project/beautifulsoup4/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">Beautiful Soup</strong></a>包来解析我们需要的任何数据。</p><h2 id="d36f" class="ng mp it bd mq nh ni dn mu nj nk dp my li nl nm na lm nn no nc lq np nq ne nr bi translated">价格、未来5年每股收益、贝塔系数、已发行股票数量</h2><p id="b16e" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">下面的代码显示了我如何从Finviz获取<strong class="lb iu">‘Price’</strong>(当前股价)、<strong class="lb iu">‘EPS next 5Y’</strong>(未来5年每股收益的预计增长)、<strong class="lb iu">‘Beta’</strong>(稍后将详细介绍)和<strong class="lb iu">‘Shs Outstand’</strong>(已发行股票数量)，并将它们存储到Python字典中，以便我以后可以提取这些数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="682a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python字典中的结果如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/946d6274bd09e3cf4e5293d62c7c93e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ra8Nyj47DNYJKHh_LnZrlg.png"/></div></div></figure><p id="df4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要了解更多关于如何从Finviz中提取数据的细节，请随意阅读下面我的文章。</p><div class="lw lx gp gr ly lz"><a href="https://towardsdatascience.com/get-up-to-date-financial-ratios-p-e-p-b-and-more-of-stocks-using-python-4b53dd82908f" rel="noopener follow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">使用Python获得股票的最新财务比率(市盈率、市净率等)</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">大多数API给出过时的年度/季度财务比率。下面是一个从FinViz获取实时数据的指南。</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">towardsdatascience.com</p></div></div><div class="mi l"><div class="oj l mk ml mm mi mn ks lz"/></div></div></a></div><h2 id="33c6" class="ng mp it bd mq nh ni dn mu nj nk dp my li nl nm na lm nn no nc lq np nq ne nr bi translated">根据Beta估计贴现率</h2><p id="6092" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">同样，在解释贴现现金流模型的前一篇文章中，我详细写了β是什么以及它如何显示股票的<strong class="lb iu">风险水平。如果你需要更多的细节，请随时回到<a class="ae ky" href="https://medium.com/datadriveninvestor/how-to-calculate-intrinsic-value-of-a-stock-aapl-case-study-935fb062004b" rel="noopener">的文章</a>。我还写道，对于T4贝塔系数</strong>更高的股票，我们要求风险溢价(即承担更高风险的更高回报)，因此贴现率<strong class="lb iu">更高</strong>。我写了下面的代码来估计基于股票Beta的折扣率。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="59d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以我们得到了8%的贴现率<strong class="lb iu"/>，因为贝塔系数是1.32。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/669b958974c401701aa1da77b65fcaec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wPkSNDQuKpMqlUQsN3YhBg.png"/></div></div></figure><h1 id="fae9" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">打印计算内在价值所需的所有数据</h1><p id="6058" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">为了清楚起见，让我们打印出目前为止从金融建模准备API和Finviz获得的所有数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="06c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">我们获得的所有数据</strong>如下所示，如果您将此与我之前的文章<a class="ae ky" href="https://medium.com/datadriveninvestor/how-to-calculate-intrinsic-value-of-a-stock-aapl-case-study-935fb062004b" rel="noopener"><strong class="lb iu"/></a>和<strong class="lb iu">手动抓取苹果</strong>的数据进行比较，您会发现它们是相同的。<em class="lv">(除了总债务略有差异，这可能是由于雅虎金融和金融建模准备的资产负债表中构成总债务的定义略有不同，这很好，我们将看到它不会对计算的内在价值产生太大影响。)</em></p><p id="950e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我之前的文章中，我也阐述了我是如何决定第6到10年和第11到20年的增长率的。<strong class="lb iu"> </strong>这里也是如此。这里我们假设苹果未来20年还能生存，这是相当合理的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/6a29ca5dcb8a7679895bdabf6624406a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uoStw_oBNGs4wpUfimC3cQ.png"/></div></div></figure><h1 id="0ed9" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">第四步。预测未来现金流并计算内在价值！</h1><p id="0be5" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">我们现在准备计算苹果股票的内在价值！我在下面写了一个<strong class="lb iu">函数</strong>来完成所有这些！</p><p id="bb06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码的第一部分(循环的<strong class="lb iu">)<strong class="lb iu">使用‘EPS Next 5Y’增长率预测公司未来5年的自由现金流</strong>。在接下来的两年中，我们有6到10年和11到20年的循环。我们只需要<strong class="lb iu">将之前的现金流乘以每一年的(1 +增长率)</strong>并循环。</strong></p><p id="3bb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于每一年的预计现金流，我们也<strong class="lb iu">除以(1 +贴现率)</strong>得到该年的贴现现金流。我们将所有预计的现金流存储到Python列表中，用于总结和绘制，以便以后可视化。</p><p id="bcd1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们将现金流量贴现列表中的所有贴现现金流加起来<strong class="lb iu">。总和()法，<strong class="lb iu">加上现金和短期投资</strong>和短期投资<strong class="lb iu">减去总负债</strong>。</strong></p><p id="6574" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们<strong class="lb iu">用</strong>除以<strong class="lb iu">发行在外的股票总数</strong>，我们就完成了！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/ec4807b06e5e1f2127a6e2ab5fad3e22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nTv4N2t_3y9LvWqJetmPGg.png"/></div></div></figure><p id="7b13" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看未来20年的预计现金流和贴现现金流的曲线图。当<strong class="lb iu">预计现金流一直在增长</strong>时，<strong class="lb iu"> <em class="lv">贴现</em>预计现金流</strong>在第5年后开始<strong class="lb iu">下降</strong>。这是因为当<strong class="lb iu">增长率随着时间降低</strong>时，<strong class="lb iu">贴现率不会</strong>并最终变得高于增长率。因此，即使苹果永远存在，贴现现金流最终会变成0，内在价值也不是无限的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/79181a4f3509f2e8c9952dd5d6fc25f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UMADatphWs8VeDN12STqCQ.png"/></div></div></figure><h1 id="ce2e" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">打印内在价值、当前股价、安全边际</h1><p id="0c9d" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">下面的代码输出<strong class="lb iu">内在价值</strong>、<strong class="lb iu">当前股价</strong>和<a class="ae ky" href="https://www.investopedia.com/terms/m/marginofsafety.asp" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">安全边际</strong> </a>。安全边际显示当前股价比其内在价格低多少%(越高，我们投资的股票越安全)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/6d61944cfba439035e23b98010af4896.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DsaIWrW9N09m16Yc_xlkdw.png"/></div></div></figure><p id="f8bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们获得了一个内在价值，类似于我们在<a class="ae ky" href="https://medium.com/datadriveninvestor/how-to-calculate-intrinsic-value-of-a-stock-aapl-case-study-935fb062004b" rel="noopener">上一篇文章</a>中计算的。我们也看到内在价值低于苹果现在的价格。一个<strong class="lb iu"> <em class="lv">负的</em>安全边际</strong>在下面苹果的例子中是指股价比内在价值 高出一定的百分比)。再次，请随意阅读我的<a class="ae ky" href="https://medium.com/datadriveninvestor/how-to-calculate-intrinsic-value-of-a-stock-aapl-case-study-935fb062004b" rel="noopener">前一篇文章</a>的最后一部分，了解我对此的看法。</p><p id="3ac5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们使用Python从多个来源提取数据，然后使用它们来执行计算，以找到股票的内在价值。只需更改股票代码，就可以对任何其他公司进行同样的计算！</p><p id="eaf2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇文章是有用的。如果您喜欢这篇文章，请随意查看下面的应用示例。</p><div class="lw lx gp gr ly lz"><a href="https://medium.com/datadriveninvestor/use-python-to-show-how-an-overvalued-stock-can-become-undervalued-72bc9d3d35a7" rel="noopener follow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">使用Python来展示一只被高估的股票是如何被低估的</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">你应该避免在盈利后购买有缺口的股票，因为它们“太贵”了吗？(PYPL案例研究)</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">medium.com</p></div></div><div class="mi l"><div class="oo l mk ml mm mi mn ks lz"/></div></div></a></div><p id="833b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请随意查看我下面的其他文章！</p><div class="lw lx gp gr ly lz"><a href="https://towardsdatascience.com/sentiment-analysis-of-stocks-from-financial-news-using-python-82ebdcefb638" rel="noopener follow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">基于Python的金融新闻股票情感分析</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">使用Python从FinViz网站的财经新闻标题中提取股票情绪</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">towardsdatascience.com</p></div></div><div class="mi l"><div class="op l mk ml mm mi mn ks lz"/></div></div></a></div><div class="lw lx gp gr ly lz"><a href="https://towardsdatascience.com/get-up-to-date-financial-ratios-p-e-p-b-and-more-of-stocks-using-python-4b53dd82908f" rel="noopener follow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">使用Python获得股票的最新财务比率(市盈率、市净率等)</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">大多数API给出过时的年度/季度财务比率。下面是一个从FinViz获取实时数据的指南。</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">towardsdatascience.com</p></div></div><div class="mi l"><div class="oj l mk ml mm mi mn ks lz"/></div></div></a></div><div class="lw lx gp gr ly lz"><a rel="noopener  ugc nofollow" target="_blank" href="/train-and-deploy-an-nlp-news-classifier-web-app-to-the-cloud-for-free-82655b6b32f4"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">免费培训和部署一个NLP新闻分类器Web应用程序到云</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">训练NLP模型、将其嵌入Python Flask Web应用程序并将其部署到云上的分步指南</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">medium.datadriveninvestor.com</p></div></div><div class="mi l"><div class="oq l mk ml mm mi mn ks lz"/></div></div></a></div><div class="lw lx gp gr ly lz"><a href="https://medium.com/datadriveninvestor/how-to-calculate-intrinsic-value-of-a-stock-aapl-case-study-935fb062004b" rel="noopener follow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">如何计算股票的内在价值(AAPL案例研究)</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">获取公司数据和计算股票内在价值的逐步指南，包括网络应用程序</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">medium.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn ks lz"/></div></div></a></div><h2 id="ab37" class="ng mp it bd mq nh ni dn mu nj nk dp my li nl nm na lm nn no nc lq np nq ne nr bi translated">访问专家视图— <a class="ae ky" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank">订阅DDI英特尔</a></h2></div></div>    
</body>
</html>