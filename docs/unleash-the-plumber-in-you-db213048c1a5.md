# 释放你内心的水管工

> 原文：<https://medium.datadriveninvestor.com/unleash-the-plumber-in-you-db213048c1a5?source=collection_archive---------11----------------------->

## 为价值的持续流动铺设管道

敏捷和开发运维的核心概念是互补的。一个是为了减少向客户交付高质量产品的时间，另一个是利用客户的反馈来增加这些相同产品的价值。有了合适的工具、技术和技巧，就可以铺设管道来支持价值向客户的持续流动和向提供商的反馈。持续集成和持续交付渠道已经成为当今在线市场的关键业务部分。

![](img/4c531bc9c569a0abe56a5d719cbb63d6.png)

现在是 2020 年，我们已经走过了这一年的一半。我已经发表了几篇关于业务敏捷性和将您的收入模式从付费拥有模式转变为付费使用模式的文章。

[](https://medium.com/@Arc_E_Tect/quantum-leap-into-the-business-of-cloud-services-138e2eae271e) [## 云服务业务的巨大飞跃

### 软件供应商在后新冠肺炎时代采用服务交付模式所面临的挑战

medium.com](https://medium.com/@Arc_E_Tect/quantum-leap-into-the-business-of-cloud-services-138e2eae271e) 

本文回顾了技术和软件工程，以及如何为成功开发云原生应用奠定基础。当然，我指的是持续集成、持续交付、CICD 和管道。

最近，我与一个产品团队密切合作，该团队一直在改进他们的软件工程实践，将它提升到成熟度等级。我一直和团队一起研究现代管道的一个关键概念:管道即代码。

我通常想指出的是，当讨论管道时，重要的是理解在 CICD 领域中有三种不同但密切相关的管道定义:

*   业务流程。
*   分娩过程。
*   管道实现。

请继续阅读关于这三个管道定义的更多内容。

# 管道系统

当我在指导团队及其经理时谈论管道时，我指的是交付过程。这是业务流程的自动化。它正在使用技术来实现它。为了防止团队更加精通 CICD 管道的概念，我从工程角度出发，将管道的概念作为代码来使用。

![](img/69de3ea163f0dda04dd46d5fe3fedac7.png)

我工作了很长时间的团队使用 Jenkins 2 作为他们的持续集成 CI 服务器。该团队已经考虑了一段时间，也使用 Jenkins 2 作为他们的持续交付，CD，服务器，以 AWS 云形式补充 Jenkins 2。

在 Jenkins 2 中，该工具背后的开发人员引入了一种特定于领域的语言 DSL，用于在代码中定义 CICD 管道。

像 Gitlab CI 这样的 Jenkins 2 替代方案也使用相同的原理，尽管它们有不同的实现方式。

Jenkins 2 的 DSL 使用 Groovy，这是一种结合 JSON 运行在 Java 虚拟机上的编程语言，这使得它非常灵活和强大。这意味着管道可以用声明格式编写脚本或定义。

[](https://www.jenkins.io/doc/book/pipeline/getting-started/) [## 管道入门

### Groovy 语法的相关组件将根据需要在本文档中介绍，因此虽然…

www.jenkins.io](https://www.jenkins.io/doc/book/pipeline/getting-started/) 

在这方面，Jenkins 1 和 2 的主要区别在于，在 Jenkins 1 中，您必须通过 Jenkins UI，通过指向和单击来定义 CICD 管道。管道本身是 CICD 服务器的一个组成部分。因此，当 Jenkins 服务器停止工作并且必须重新启动时，所有管道都必须重新创建。

当只使用 Jenkins 作为 CI 服务器时，这无疑是一个令人沮丧的原因。当您将它用作 CICD 服务器时，也就是说，从您将代码提交到源代码控制直到您准备好将功能部署到产品中，使用它来自动化整个过程，这是一个业务风险。没有管道，就没有价值流向客户。在这种情况下，CICD 服务器成为了一项关键业务服务。如果没有管道，您就无法对影响客户的 bug 进行紧急修复。这会阻止你的客户使用你的产品，因此你不能向他们收费。

在 Jenkins 2 中，点击式管道定义仍然是一种选择，但通常被认为是一种非常糟糕的做法。相反，在代码中定义管道，要么使用脚本方法，要么使用声明方法。这将允许您将管道置于源代码控制之下。并在您从 CICD 服务器的中断中恢复后从源代码控制中导入它。

# 管道版本控制

除了拥有更具弹性的产品交付流程，代码中定义的管道的一个重要好处是，它允许您将管道视为产品不可分割的一部分。这是保留构建脚本(Ant 脚本、Maven POM、Gradle 脚本等)后合乎逻辑的下一步。)作为代码的一部分。您的构建脚本定义了如何从其来源创建产品，管道定义了遵循什么过程来保证质量。

![](img/b187ec8e008a1ce09694e73b623053de.png)

随着您的产品随着时间的推移而发展，变得更加功能丰富、更加复杂、更加通用，您从源代码构建产品的方式也将随之发展。因此，让构建脚本与源代码保持同步是合乎逻辑的。

按照同样的思路，随着您的产品变得更加功能丰富、更加复杂、更加通用，您需要验证和保证其质量的方式也将随着时间的推移而发展。因此，让您的交付过程与您的产品保持同步是合乎逻辑的。

请记住，构建脚本和管道是您的产品交付工作的两个非常不同的人工制品。将管道视为产品人工制品的一部分。这将确保产品能够以一致的方式构建和交付。所有这些都基于产品的来源。

# 定义的管道

*   业务流程，
*   交付流程和
*   管道实现。

## 技术

实现管道意味着定义一系列工具和技术，当它们被触发时，将执行一系列步骤，从源代码中创建一个可以使用的产品。所采取的步骤顺序是完全自动化的，并且它们的执行是一致的，因此是可预测的。

![](img/fdbb6541ff36fbadc33bbb9147dd5e3e.png)

当然，使用什么工具并不重要，尽管有些工具比其他工具更合适。管道通常由 Jenkins、Gitlab CI 或 TeamCity 等 CI 服务器或 Azure Devops 等平台来协调。他们集成了用于构建管理的 Gradle 或 Maven 等产品、作为质量关口的 SonarQube 以及用于源代码管理的 Github 或 Gitlab 等 git 库。

## 该过程

交付过程比技术有趣得多。我坚信过程的力量。这并不意味着我喜欢繁文缛节和官僚作风。***Je détest ces deux 我非常讨厌他们，所以我使用法语，这样我就可以发自内心地说:“不要原谅我的法语！”。***

![](img/115e59e94b252c155c338ec7817e2de5.png)

交付过程是将产品交付到用户手中所遵循的过程。它是软件(代码)开发、单元测试、(静态)代码分析、文档生成、软件部署等。它是一个具体的步骤序列，将前面提到的工具和技术链概念化。

## 生意

这是我最喜欢管道的地方，业务流程。虽然我不是指“业务”,而是指概念交付过程。它是关于确定要处理的特性。事实上，软件需要开发和质量保证的所有方面。产品交付背后的概念，同时考虑风险。

![](img/4869c37b5de29e776e6dfa865165a857.png)

我喜欢这个过程是因为它会随着时间的推移而演变。当你不行动的时候，它会变得越来越呆滞。它需要积极的培育。必须培养。需要测量才能明白哪里需要瘦身。

我喜欢管道背后的业务的另一个重要方面是，它是如此二元的事实:在制品耗费资源(时间和金钱)，一旦产品交付，它就产生资源(时间和金钱)。因此，只有当吞吐量提高时，优化才是受益者。

![](img/ea08bf1484e01f0e55079338563cfc9c.png)

Clapp up to 50 times, to share that you like the story.

在旅途中读完了吗？看看这部持续的纯小说。

[](https://medium.com/series/the-fingers-907f5360b9d0) [## 手指

### 手指

Fingersmedium.com](https://medium.com/series/the-fingers-907f5360b9d0) 

@电弧检测

# 放弃

文本非常明确地传达了我个人的观点、经验和实践。与我以前或现在的客户、顾客或雇主的观点、经历和实践的任何相似之处纯属巧合。因此，这篇文章是我自己的，我是它的唯一作者，也是它的唯一版权持有者。

# 信用

特别感谢我可爱的妻子奥尔凯，以及我的朋友 T2·西丝，她花时间和精力来审阅我的文章。我相信他们的反馈极大地提高了文章的质量。

## 图像制作者名单

【https://bit.ly/UnleashThePlumber_cover
[https://bit.ly/PipelineWorkers](https://bit.ly/PipelineWorkers)
[https://bit.ly/PipelineIncline](https://bit.ly/PipelineIncline)
[https://bit.ly/PlumberWithTool](https://bit.ly/PlumberWithTool)
[https://bit.ly/PipelineWelders](https://bit.ly/PipelineWelders)
[https://bit.ly/PipelineInDitch](https://bit.ly/PipelineInDitch)