<html>
<head>
<title>A primer to Ethereum token development using Java and web3j</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Java和web3j开发以太坊令牌的初级读本</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/a-primer-to-ethereum-token-development-using-java-and-web3j-52b24cc6c403?source=collection_archive---------3-----------------------#2020-04-06">https://medium.datadriveninvestor.com/a-primer-to-ethereum-token-development-using-java-and-web3j-52b24cc6c403?source=collection_archive---------3-----------------------#2020-04-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3b83c2e1c3e533483355c6cb6fca1201.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fD8V8jmgByUuZeBKobaGvw.jpeg"/></div></div></figure><p id="226d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我最近写了一篇关于使用Android 开始<a class="ae kw" href="https://medium.com/datadriveninvestor/an-introduction-to-ethereum-development-on-android-using-web3j-and-infura-763940719997" rel="noopener">以太坊开发的文章，其中我演示了如何在Android中设置web3j以及如何传输以太。在文章发表后，我收到了一个请求，要求我写一篇关于使用web3j与定制ERC20令牌进行交互的文章，这导致了本文的创作。尽情享受吧！</a></p><p id="0dff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为此，我们将使用我创建的名为JavaToken的基本ERC20智能契约，您可以在这里找到<a class="ae kw" href="https://github.com/nschapeler/EthereumJ-Smart-Contract/blob/master/Truffle/contracts/JavaToken.sol" rel="noopener ugc nofollow" target="_blank"/>。出于演示目的，我们将使用它和它所在的存储库，所以请随意克隆它并跟随它！我们将要部署和运行的网络将是一个使用Truffle的本地Ganache Testnet。</p><h1 id="e53a" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">步骤0.9:生成智能契约java包装器</h1><p id="37e7" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">第0.9步是为我们的智能契约获取一个java包装器。这是第0.9步，因为从技术上来说<em class="ma">如果你的合同已经部署，这不是强制性的，但它会使以后与合同交互时事情变得容易得多。首先使用solidity编译器编译你的solidity契约。如果您使用的是Truffle，那么只需在JavaToken存储库的Truffle目录中运行以下命令就可以做到这一点:</em></p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="0d09" class="mk ky iq mg b gy ml mm l mn mo">truffle compile</span></pre><p id="eb25" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，安装web3j命令行界面。</p><p id="dba0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Mac/Linux:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="ee2a" class="mk ky iq mg b gy ml mm l mn mo">curl -L get.web3j.io | sh</span></pre><p id="0760" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">窗口:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="aa65" class="mk ky iq mg b gy ml mm l mn mo">Set-ExecutionPolicy Bypass -Scope Process -Force; iex ((New-Object System.Net.WebClient).DownloadString('https://raw.githubusercontent.com/web3j/web3j-installer/master/installer.ps1'))</span></pre><p id="1b8e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们已经安装了所有这些，只需运行</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="4742" class="mk ky iq mg b gy ml mm l mn mo">web3j truffle generate Truffle/build/contracts/JavaToken.json -o src -p com.javaToken</span></pre><p id="c806" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从JavaToken目录中。这将为JavaToken智能契约生成一个包装器，使它在以太坊中的交互更加容易。</p><h1 id="19d3" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">步骤1:部署您的合同</h1><p id="7d1d" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">为了部署我们的令牌，我们设置了一些凭证，并简单地用它们调用deploy()方法。</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="68aa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就对了，你刚刚部署了一个全新的以太坊令牌！</p><p id="1c80" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">或者，如果您的合同已经部署，并且您只是想与它进行交互，您可以简单地使用以下命令加载它:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mp mq l"/></div></figure><h1 id="fcae" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">第二步:保持平衡</h1><p id="0acb" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">合同被配置为向其部署者提供全部初始供应。让我们检查一下我们是否真的得到了一切。如果我们有步骤0.9中的包装器，这就像:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="58b5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">否则，事情会更复杂一些:首先，我们需要在事务中手动输入我们希望在合同中调用的函数的详细信息，在这种情况下，它的名称是balanceOf，我们提供的参数是一个地址，我们希望该函数返回一个uint256。然后，我们对这些数据进行编码，并将其与我们希望发送给呼叫方(我们的地址)的合同一起放入交易中。最后，我们将十六进制结果解码成一个大整数。</p><p id="0d35" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们有100，000个爪哇人。让我们送一些给朋友吧！</p><h1 id="884d" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">步骤3:转移一些令牌</h1><p id="75ab" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">同样，有包装器和没有包装器之间的区别相当明显:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="c95e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这次没有包装有点不同，因为我们需要实际证明该交易来自我们的帐户，因为我们通过传输令牌而不是像以前那样只读取数据来改变区块链的状态。我们以同样的方式创建一个函数对象。虽然智能合约函数返回一个布尔值，但我们并不在这里指定它，因为我们不需要它，因为我们通过交易收据检查交易是否成功，所以我们将返回指定为一个空列表。接下来，我们创建一个事务管理器。这种区别很重要，因为said manager将我们的凭证作为参数，这意味着通过它发送的事务属于我们(与上面的balanceOf调用不同)。最后，我们发送交易，并通过检查收据来验证交易是否成功。</p><h1 id="b83b" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">结论</h1><p id="7d08" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">仅此而已！您刚刚学习了如何使用web3j部署自己的ERC20令牌。恭喜你！这一切的代码可以在<a class="ae kw" href="https://github.com/nschapeler/JavaToken" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="4d39" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢您的关注！</p><p id="ac3e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">尼古拉斯</p><p id="4b2f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ma">如果你喜欢这个，请为这个故事鼓掌，让更多的人看到它！</em></p><p id="26a4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ma">如果你喜欢这个，请给我买杯咖啡:)</em></p><p id="64ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以太坊:0x 190d 71 ba 3738 f 43 DC 6075 f 5561 e 58 AC 9d 4 e 3 DFC 2</p><p id="9420" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">比特币:1 brucwzs 2 vnrkfmbfs 14 zqerw 74 a1 h1 ke</p><p id="91f8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">lite coin:lbnfojftfvcj 7 gfaautwqhithjcj 3m 8y 3v</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mr mq l"/></div></figure></div></div>    
</body>
</html>