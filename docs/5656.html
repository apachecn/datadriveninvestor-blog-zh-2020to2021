<html>
<head>
<title>Redux Toolkit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Redux工具包</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/redux-toolkit-eb07f753649?source=collection_archive---------0-----------------------#2020-09-27">https://medium.datadriveninvestor.com/redux-toolkit-eb07f753649?source=collection_archive---------0-----------------------#2020-09-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div class="gh gi io"><img src="../Images/ff785fe370dd5471b4bcd2fdddd20424.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*QMh-twIrmI2NGc4E_xfVaw.png"/></div></figure><div class=""/><div class=""><h2 id="b5b5" class="pw-subtitle-paragraph ju iw ix bd b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl dk translated">更简单的(功能性)状态管理</h2></div><p id="2452" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">所以我是因为我的一个新项目才知道这个的，这个团队想在投入这个项目之前做实际的研究。他们不想继续使用旧的技术，他们想找点乐子。</p><p id="6697" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">所以当我被问及是否做过React/Toolkit时，我说是的，以为他们指的是Redux dev toolkit，但我错了。</p><p id="6f60" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><strong class="ko iy">旁注</strong> <em class="li">这是一个三部分系列的第一部分，在这个系列中，我将带您了解该工具包从初级到高级的特性。</em></p></div><div class="ab cl lj lk hu ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="ij ik il im in"><blockquote class="lq lr ls"><p id="330c" class="km kn li ko b kp kq jy kr ks kt kb ku lt kw kx ky lu la lb lc lv le lf lg lh ij bi translated"><strong class="ko iy"> <em class="ix">那么什么是Redux-toolkit呢？</em> </strong></p></blockquote><p id="8332" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><a class="ae lw" href="https://redux-toolkit.js.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ko iy">-Redux-toolkit</strong></a>是实现<em class="li"> Redux </em>的一种新方式，一种更具功能性的方式。它更干净，你写更少的代码行，我们得到相同的Redux状态管理，我们开始喜欢和信任。最好的部分是它已经内置了<em class="li"> redux-thunk </em>。另外，他们使用<em class="li"> immerJs </em>来处理所有的不变性，所以我们需要考虑的是需要做什么。</p><p id="f575" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">我将创建一个计数器应用程序，以实现工具包的基础。</p><p id="d34b" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><em class="li">*注意:我将使用我自己的</em><a class="ae lw" href="https://medium.com/datadriveninvestor/react-boilerplate-adc97f608251" rel="noopener">react-boilerplate</a><em class="li">与</em><a class="ae lw" href="https://rebassjs.org/getting-started" rel="noopener ugc nofollow" target="_blank"><em class="li">Rebass</em></a><em class="li">库进行造型</em></p></div><div class="ab cl lj lk hu ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="ij ik il im in"><blockquote class="lq lr ls"><p id="304c" class="km kn li ko b kp kq jy kr ks kt kb ku lt kw kx ky lu la lb lc lv le lf lg lh ij bi translated"><strong class="ko iy"> <em class="ix">让我们开始</em> </strong></p></blockquote><p id="cd93" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">首先，让我们添加工具箱、Rebass和react-redux:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="6582" class="mg mh ix mc b gy mi mj l mk ml">npm i --save @reduxjs/toolkit react-redux rebass </span></pre><p id="3434" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">现在在tradition redux中，我们用来创建一个<em class="li">存储</em>文件夹来保存所有的reducers、动作和常量(动作类型)文件。这里每个减速器被认为是一个<em class="li">特征</em>，所以<em class="li">存储</em>文件夹被重命名为<strong class="ko iy"> <em class="li">特征</em></strong>/<strong class="ko iy">/<em class="li">特征</em> </strong>。</p><div class="ip iq gp gr ir mm"><a href="https://www.datadriveninvestor.com/2020/07/07/introduction-to-time-series-forecasting-of-stock-prices-with-python/" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd iy gy z fp mr fr fs ms fu fw iw bi translated">用Python |数据驱动投资者进行股票价格时间序列预测简介</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">在这个简单的教程中，我们将看看如何将时间序列模型应用于股票价格。更具体地说，一个…</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="mv l"><div class="mw l mx my mz mv na it mm"/></div></div></a></div><p id="ff8a" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">所以我创建了<strong class="ko iy"><em class="li">features/counter/counter . js</em></strong>文件，在这里我将实现工具包。</p><p id="6824" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">要实现一个缩减器，我们需要三样东西:</p><ul class=""><li id="0400" class="nb nc ix ko b kp kq ks kt kv nd kz ne ld nf lh ng nh ni nj bi translated">初态</li><li id="d853" class="nb nc ix ko b kp nk ks nl kv nm kz nn ld no lh ng nh ni nj bi translated">行动</li><li id="de88" class="nb nc ix ko b kp nk ks nl kv nm kz nn ld no lh ng nh ni nj bi translated">减速器本身</li></ul><p id="1f26" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">redux-toolkit为我们提供了一些函数，有点像钩子，来创建我们的动作和reducer。</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="50bc" class="mg mh ix mc b gy mi mj l mk ml">import { createAction, createReducer } from "@reduxjs/toolkit";</span></pre><p id="16ff" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">让我们定义我们的初始状态和减速器:</p><p id="5ebd" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><em class="li">*注意:我将比较传统实现和工具箱实现</em></p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="dc74" class="mg mh ix mc b gy mi mj l mk ml">//tradtional reducer<br/>const initialState = 0;<br/><br/>function counter(initialState, action) {<br/>switch (action.type) {<br/> case 'INCREMENT':<br/>  return state + 1<br/> case 'DECREMENT':<br/>  return state - 1<br/> default:<br/>  return state<br/>}}</span><span id="e641" class="mg mh ix mc b gy np mj l mk ml">//toolkit reducer</span><span id="d877" class="mg mh ix mc b gy np mj l mk ml">const initialState = {value: 0};</span><span id="3783" class="mg mh ix mc b gy np mj l mk ml">const reducer = <strong class="mc iy">createReducer</strong>(initialState, {<br/>"INCREMENT": state =&gt; {<br/>  state.value = state.value + 1;<br/>},<br/>"DECREMENT": state =&gt; {<br/>  state.value = state.value - 1;<br/>}<br/>});</span></pre><p id="0d2c" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">我们的初始值将被设为0。在我们的reducer中需要两个动作，即递增和递减计数器值。</p><p id="db18" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><strong class="ko iy"> <em class="li"> createReducer </em> </strong>函数接受两个参数，第一个是初始状态，第二个是<em class="li">动作类型</em>。</p><p id="3a17" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在传统的redux实现中，我们会为动作类型创建一个单独的文件结构，但是在<em class="li"> redux-toolkit </em>中，它是在一个地方定义的。这极大地提高了代码的可维护性，因为所有东西都在一个地方，而且是结构化的。</p><blockquote class="lq lr ls"><p id="ec2d" class="km kn li ko b kp kq jy kr ks kt kb ku lt kw kx ky lu la lb lc lv le lf lg lh ij bi translated"><strong class="ko iy"> <em class="ix">让我们再进一步</em> </strong></p></blockquote><p id="0738" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在上面的例子中，我们使用了<strong class="ko iy"> createReducer </strong>方法来定义缩减器，但是让我们分开我们的操作。</p><p id="8926" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><strong class="ko iy"> createAction </strong>方法，正如它所说的那样，它用一个动作类型创建动作，并更新减速器状态。</p><p id="bb29" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">使用createReducer时，使用builder函数将操作映射到Reducer。</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="0462" class="mg mh ix mc b gy mi mj l mk ml">const increment = createAction("counter/increment");<br/>const decrement = createAction("counter/decrement");</span><span id="e81a" class="mg mh ix mc b gy np mj l mk ml">const reducer = createReducer(initialState, (builder) =&gt; {<br/> builder.addCase(increment, (state, action) =&gt; {<br/>  state.value = state.value + 1;<br/> });<br/> builder.addCase(decrement, (state, action) =&gt; {<br/>  state.value = state.value - 1;<br/> });<br/>});</span></pre><p id="d1e1" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">通过使用useDispatch钩子或mapDispatchToProps，可以导出和调度这些操作。</p><figure class="lx ly lz ma gt is"><div class="bz fp l di"><div class="nq nr l"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk">createReducer and createAction in action</figcaption></figure></div><div class="ab cl lj lk hu ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="ij ik il im in"><p id="167b" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">要查看完整的示例，您可以在这里查看git repo<a class="ae lw" href="https://github.com/devAbhimanyu/Redux-toolkit/tree/createReducer" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="dece" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><a class="ae lw" href="https://abhimanyuchauhan-61309.medium.com/createslice-in-redux-toolkit-c5e5441b75d9" rel="noopener">关于在Redux Toolkit中创建切片的第2部分</a>。</p><h2 id="238a" class="mg mh ix bd nw nx ny dn nz oa ob dp oc kv od oe of kz og oh oi ld oj ok ol om bi translated">获得专家观点— <a class="ae lw" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank">订阅DDI英特尔</a></h2></div></div>    
</body>
</html>