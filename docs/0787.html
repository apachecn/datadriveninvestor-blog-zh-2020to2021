<html>
<head>
<title>The Easiest and Cheapest Way to Try Kubernetes For Yourself</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自己尝试Kubernetes最简单最便宜的方法</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/the-easiest-and-cheapest-way-to-try-kubernetes-for-yourself-d7367ff1d6e?source=collection_archive---------2-----------------------#2020-02-17">https://medium.datadriveninvestor.com/the-easiest-and-cheapest-way-to-try-kubernetes-for-yourself-d7367ff1d6e?source=collection_archive---------2-----------------------#2020-02-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1575" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过使用Docker Desktop的Kubernetes集群，您可以节省一些资金，并保持理智。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/54df86451b8638e20a12960669fba8e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AcZmFcrHSKAs8bPM"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@kaitlynbaker?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kaitlyn Baker</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ee07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">学习新事物的最好方法是亲自尝试。想学一门新的编程语言？下载运行时并创建几个示例应用程序。渴望尝试新的微服务框架？使用您环境的包管理器来安装二进制文件，并创建一个简单的CRUD ReST服务。准备好沉浸在Docker中了吗？下载<a class="ae ky" href="https://www.docker.com/products/docker-desktop" rel="noopener ugc nofollow" target="_blank"> Docker桌面</a>并创建一个新的映像——可能使用您的新微服务框架！—并将其作为容器运行。</p><div class="lv lw gp gr lx ly"><a href="https://www.datadriveninvestor.com/2019/03/25/a-programmers-guide-to-creating-an-eclectic-bookshelf/" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">创建折衷书架的程序员指南|数据驱动的投资者</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">每个开发者都应该有一个书架。他的内阁中可能的文本集合是无数的，但不是每一个集合…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ks ly"/></div></div></a></div><p id="93bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是我们如何获得Kubernetes的实践经验呢？为了与Kubernetes交互，我们首先需要一个<em class="mn">集群</em>——一个或多个<a class="ae ky" href="https://en.wikipedia.org/wiki/Kubernetes#Kubernetes_node" rel="noopener ugc nofollow" target="_blank">节点</a>(或工作机)加上一些让Kubernetes工作的服务(也称为<a class="ae ky" href="https://en.wikipedia.org/wiki/Kubernetes#Kubernetes_control_plane" rel="noopener ugc nofollow" target="_blank">控制平面</a>)。那么，我们实际上可以在哪里找到一个集群来玩呢？</p><h1 id="a86c" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">访问Kubernetes集群的选项</h1><p id="a5d6" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">有几个常见的选项:</p><h2 id="118d" class="nl mp it bd mq nm nn dn mu no np dp my li nq nr na lm ns nt nc lq nu nv ne nw bi translated">我们公司的集群</h2><p id="7d70" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">我们可能为一个拥有大型运营团队的大型组织工作，该团队维护着自己的Kubernetes集群。如果是这样，我们可能被授权部署我们自己的图像和Kubernetes对象。</p><h2 id="d8e6" class="nl mp it bd mq nm nn dn mu no np dp my li nq nr na lm ns nt nc lq nu nv ne nw bi translated">云提供商</h2><p id="9feb" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">但是我们大多数人没有那么幸运。因此，我们可能会转向主要的云提供商，每个提供商都提供自己的Kubernetes产品。</p><ul class=""><li id="d349" class="nx ny it lb b lc ld lf lg li nz lm oa lq ob lu oc od oe of bi translated"><strong class="lb iu">谷歌云平台(GCP) </strong>。Kubernetes脱胎于谷歌，因此<a class="ae ky" href="https://cloud.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌的GCP </a>有强大的Kubernetes产品，<a class="ae ky" href="https://cloud.google.com/kubernetes-engine/" rel="noopener ugc nofollow" target="_blank">谷歌Kubernetes工程师(GKE) </a>是有道理的。GCP以开发人员友好和易于使用而闻名，而GKE则相对简单地在GCP上建立了一个集群。但是不便宜。上次我在GCP建立集群时，每天花费大约3美元，这并不是一个划算的选择。</li><li id="a652" class="nx ny it lb b lc og lf oh li oi lm oj lq ok lu oc od oe of bi translated"><strong class="lb iu">亚马逊网络服务(AWS) </strong>。<a class="ae ky" href="http://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank"> AWS </a>可能是目前最受欢迎的云提供商。从一开始，AWS就提供了自己的服务和平台，先是EC2和AMIs，后来是AWS Lambda和ECS。然而，由于Kubernetes越来越受欢迎，AWS勉强加入了这股潮流，现在提供<a class="ae ky" href="https://aws.amazon.com/eks/" rel="noopener ugc nofollow" target="_blank">弹性Kubernetes服务(EKS) </a>。EKS比GKE更难合作，价格也更贵(主要是因为EKS对控制平面收费)；我的上一个GKE项目每天花费我4美元多一点。</li><li id="af57" class="nx ny it lb b lc og lf oh li oi lm oj lq ok lu oc od oe of bi translated"><strong class="lb iu">微软Azure </strong>。我从来都不是微软的粉丝，但我们不能忘记<a class="ae ky" href="https://azure.microsoft.com/" rel="noopener ugc nofollow" target="_blank"> Azure </a>的基于could的Kubernetes产品(<a class="ae ky" href="https://azure.microsoft.com/en-us/services/kubernetes-service/" rel="noopener ugc nofollow" target="_blank"> Azure Kubernetes Service，或AKS </a>)。我从未使用过Azure或AKS，但我听说过该服务的可用性很好。尽管如此，它并不比其他任何一家云提供商更便宜。</li></ul><p id="b63b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用上面提到的云提供商之一可以帮助你开始，但是这可能是一个有点过程来设置一切。更重要的是，这是一个昂贵的选择，特别是如果你只是为了学习Kubernetes而建立一个集群。</p><h2 id="9e46" class="nl mp it bd mq nm nn dn mu no np dp my li nq nr na lm ns nt nc lq nu nv ne nw bi translated">迷你库贝</h2><p id="748c" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">您也可以使用<a class="ae ky" href="https://kubernetes.io/docs/tutorials/hello-minikube/" rel="noopener ugc nofollow" target="_blank"> Minikube </a>在自己的计算机上本地运行集群。Minikube是一个工具，旨在通过在笔记本电脑或台式机上的虚拟机(VM)内运行单节点Kubernetes集群来简化本地运行Kubernetes。</p><p id="e4c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Minikube将自动为您设置集群。但是首先，你必须设置Minikube本身。考虑到Minikube的依赖性，这可能是一个令人沮丧的经历。我花了一个周末与Minikube战斗(并输给了mini kube)，我远远不是唯一有这种经历的工程师。Minikube也可能喜怒无常，工作一次，然后莫名其妙地失败。尽管如此，我知道其他工程师在Minikube上没有重大问题，所以你的里程数会有所不同。</p><h2 id="12ea" class="nl mp it bd mq nm nn dn mu no np dp my li nq nr na lm ns nt nc lq nu nv ne nw bi translated">但是等等，还有一个…</h2><p id="74fd" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">然而，如果你想要一个近乎傻瓜的，基本上免费的选择，还有一个要考虑的。并且您可能已经安装了它并准备好了。因为<a class="ae ky" href="https://www.docker.com/products/docker-desktop" rel="noopener ugc nofollow" target="_blank"> Docker Desktop </a>也附带了一个单节点Kubernetes集群。好消息是，如果你安装了Docker Desktop，那么你就安装了Kubernetes。</p><h1 id="8558" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">如何在Docker桌面中使用Kubernetes</h1><p id="d85c" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">如果您对Kubernetes感兴趣，那么您可能会对部署Docker映像并将其作为容器运行感兴趣。这意味着你可能已经在你的电脑上安装了Docker桌面。但是如果你不这样做，安装是小菜一碟。只是按照<a class="ae ky" href="https://www.docker.com/products/docker-desktop" rel="noopener ugc nofollow" target="_blank"> Docker网站</a>上的说明。</p><h2 id="6c36" class="nl mp it bd mq nm nn dn mu no np dp my li nq nr na lm ns nt nc lq nu nv ne nw bi translated">只需启动您的集群</h2><p id="e59d" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">随着Docker Desktop的安装和运行，在自己的集群上运行容器已经完成了一半。您只需点击工具栏中的Docker图标，并选择<em class="mn">首选项… </em>项，即可打开Docker Desktop的首选项:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/1f6813ee222f051ac6f34116433bce3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:544/format:webp/1*XvV3BQ6sS5e5-yh7w8mXHQ.png"/></div></figure><p id="e1a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当首选项窗口打开时，转到<em class="mn"> Kubernetes </em>选项卡并选择<em class="mn"> Enable Kubernetes </em>复选框:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/844ae5239aec49d4e8999aed63e6fe72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fOp1NrcJFHGWlKoDBW0M_A.png"/></div></div></figure><p id="18e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后选择<em class="mn">应用&amp;重启</em>。可能会提示您安装Kubernetes集群需要几分钟时间；没关系，点击<em class="mn">安装</em>按钮即可。您将在Docker工具栏菜单中看到您的集群正在被创建:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/50f85d0bb8bc655af7d44a0ad09800d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:544/format:webp/1*KwzV-kcQoP17IWDHv9axSA.png"/></div></figure><p id="6c03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">几分钟后，您的新集群应该准备好了！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/1c9008b077b9b423d25e95e4c85fca3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/format:webp/1*4Jt24ZtIBNDjecIaOQc5Ew.png"/></div></figure><h2 id="f2e0" class="nl mp it bd mq nm nn dn mu no np dp my li nq nr na lm ns nt nc lq nu nv ne nw bi translated">使用kubectl来尝试一下</h2><p id="32c2" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated"><a class="ae ky" href="https://kubernetes.io/docs/reference/kubectl/overview/" rel="noopener ugc nofollow" target="_blank"> <em class="mn"> kubectl </em> </a>是我们用来与Kubernetes集群通信的工具。首先，让我们通过进入命令行并键入<code class="fe oo op oq or b">kubectl version</code>来验证它是否已经安装。如果我们看到如下内容，那么我们就可以开始了:</p><pre class="kj kk kl km gt os or ot ou aw ov bi"><span id="8d1e" class="nl mp it or b gy ow ox l oy oz">Client Version: version.Info{Major:”1", Minor:”15", GitVersion:”v1.15.5", GitCommit:”20c265fef0741dd71a66480e35bd69f18351daea”, GitTreeState:”clean”, BuildDate:”2019–10–15T19:16:51Z”, GoVersion:”go1.12.10", Compiler:”gc”, Platform:”darwin/amd64"}</span><span id="8d69" class="nl mp it or b gy pa ox l oy oz">Server Version: version.Info{Major:”1", Minor:”15", GitVersion:”v1.15.5", GitCommit:”20c265fef0741dd71a66480e35bd69f18351daea”, GitTreeState:”clean”, BuildDate:”2019–10–15T19:07:57Z”, GoVersion:”go1.12.10", Compiler:”gc”, Platform:”linux/amd64"}</span></pre><p id="e84f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果不是，没问题！只需前往官方<a class="ae ky" href="https://kubernetes.io/docs/tasks/tools/install-kubectl/" rel="noopener ugc nofollow" target="_blank"> kubectl安装页面</a>获取最新版本。(注意，如果你需要了解Docker桌面安装的是Kubernetes服务器的哪个版本，只需进入Docker桌面菜单，选择<em class="mn">关于Docker桌面</em>)。</p><p id="7459" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们使用<em class="mn"> kubectl </em>来部署一个示例pod。首先，我们将创建一个Pod定义文件(称之为<code class="fe oo op oq or b">nginx-pod.yaml</code>，如下所示，它部署了<a class="ae ky" href="https://www.nginx.com/" rel="noopener ugc nofollow" target="_blank"> nginx </a>服务器:</p><pre class="kj kk kl km gt os or ot ou aw ov bi"><span id="1001" class="nl mp it or b gy ow ox l oy oz">apiVersion: v1<br/>kind: Pod<br/>metadata:<br/>  name: nginx-server<br/>  labels:<br/>    app: nginx-server<br/>spec:<br/>  containers:<br/>  - name: nginx <br/>    image: nginx:1.7.9<br/>    ports:<br/>    - containerPort: 80</span></pre><p id="7b20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了部署它，我们将简单地<code class="fe oo op oq or b">run kubectl create -f nginx-pod.yaml</code>我们的吊舱应该被部署。我们可以通过运行<code class="fe oo op oq or b">kubectl get pod</code>来验证这一点；我们应该看到如下内容:</p><pre class="kj kk kl km gt os or ot ou aw ov bi"><span id="84d9" class="nl mp it or b gy ow ox l oy oz">NAME           READY   STATUS    RESTARTS   AGE</span><span id="7ee3" class="nl mp it or b gy pa ox l oy oz">nginx-server   1/1     Running   0          3s</span></pre><p id="ec27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们完成后，我们可以通过<code class="fe oo op oq or b">kubectl delete -f nginx-pod.yaml</code>旋转我们的吊舱。</p><p id="b0a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">至此，我们已经轻松地建立了自己的Kubernetes集群。而且对我们来说没有额外的成本(节省了运行本地集群可能需要的额外电力)。我们已经准备好学习Kubernetes并尽情地使用它！</p></div><div class="ab cl pb pc hx pd" role="separator"><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg"/></div><div class="im in io ip iq"><p id="7587" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">觉得这个故事有用？想多读点？只需<a class="ae ky" href="https://dt-23597.medium.com/subscribe" rel="noopener">在此订阅</a>即可将我的最新故事直接发送到您的收件箱。</p><p id="8e63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你也可以支持我和我的写作——并获得无限数量的故事——通过<a class="ae ky" href="https://dt-23597.medium.com/membership" rel="noopener">今天成为媒体会员</a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pi pj l"/></div></figure></div></div>    
</body>
</html>