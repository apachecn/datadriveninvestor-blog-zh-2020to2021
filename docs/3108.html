<html>
<head>
<title>Web Hosting Using Python Part 4 (Routes and Links in Flask)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python的虚拟主机第4部分(Flask中的路由和链接)</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/web-hosting-using-python-part-4-routes-and-links-in-flask-de72ce1fc0ff?source=collection_archive---------6-----------------------#2020-06-01">https://medium.datadriveninvestor.com/web-hosting-using-python-part-4-routes-and-links-in-flask-de72ce1fc0ff?source=collection_archive---------6-----------------------#2020-06-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="af54" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">大家好，在之前的故事中，我们看了如何在Flask环境中渲染外部文件，以及这样做的好处(链接<a class="ae kl" href="https://medium.com/datadriveninvestor/web-hosting-using-python-part-3-5bcec13b6ed0" rel="noopener">此处</a>)。由于我们计划使用Flask作为我们网站的服务器，所以我们的网站很可能会有多个网页，并且这些网页会链接在一起。让我们看看如何将多个网页添加到我们的服务器。</p><p id="663d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">任务</strong></p><p id="1614" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于这个故事和下面的几个故事，让我们假设我们的任务是创建一个网站，允许用户登录，在登录时向他们发送电子邮件，将他们的凭据存储在SQL数据库中，并允许用户以后登录。</p><p id="90aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">添加多个HTML页面</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/26ae7868f4493e403d5b9a7de38ed496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_1M4tCGPNqt75Hcl8j956w.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Home Page</figcaption></figure><p id="9255" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里，第一页是默认情况下向用户显示的主页。注意在第11行，url_for()函数引用了一个到另一个HTML页面的链接。创建后，单击此链接会将我们重定向到“注册”页面。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lc"><img src="../Images/e1a73f37845a12d681bf81974926ae0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WtlW859gTwmuEVjXUn346Q.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Sign Up Page</figcaption></figure><p id="2954" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上面我们已经创建了一个注册页面，当用户点击主页上的重定向链接或者试图直接访问注册页面时，就会显示这个页面(我们将在后面的故事中讨论)。请注意，这个页面包含一个传统的HTML表单，唯一的区别是第10行，在这里，当表单被填写和提交时，函数url_for()用于重定向到成功页面。在下一步中，我们将创建“success.html”页面(在正确输入表单细节后显示)。前面的故事中提到了url_for()函数的使用。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ld"><img src="../Images/698e0f237cb48219c5575d059d58197a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3PSIXfw8_F-tqPoEjplQ6w.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Sign Up success Page</figcaption></figure><p id="4b05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在上面的代码片段中，我们创建了一个HTML页面，一旦用户成功注册，就会显示该页面。注意在第10行，显示了注册的用户的名字。一会儿我们将看看如何从表单访问用户名到“success.html”页面。</p><p id="35e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">将页面添加到Flask服务器</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi le"><img src="../Images/619748297907c2350268c23bcedb7c90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*86IHjVjhG3-3GtSDNyYhYw.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Python File</figcaption></figure><p id="319a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦我们创建了新的HTML文件(它需要位于templates文件夹中)，我们现在需要在服务器上路由这些页面。</p><div class="lf lg gp gr lh li"><a href="https://www.datadriveninvestor.com/2020/03/29/microsoft-having-an-edge-over-chrome/" rel="noopener  ugc nofollow" target="_blank"><div class="lj ab fo"><div class="lk ab ll cl cj lm"><h2 class="bd ir gy z fp ln fr fs lo fu fw ip bi translated">数据驱动的投资者|微软比Chrome有“优势”</h2><div class="lp l"><h3 class="bd b gy z fp ln fr fs lo fu fw dk translated">简史我从来不是浏览器的粉丝，确切地说，我只是一个浏览器的粉丝，Chrome。这是我的…</h3></div><div class="lq l"><p class="bd b dl z fp ln fr fs lo fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="lr l"><div class="ls l lt lu lv lr lw kw li"/></div></div></a></div><p id="9855" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在上面例子中的第4行，我们可以看到传递的参数是'/'，这表示当试图访问给定的链接时，下面编写的代码行将被执行。由于参数只包括'/'，因此当服务器启动时将访问下面编写的代码。因此，这是我们服务器的默认页面。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/6e1ded13a00a065f33c7206625ae6701.png" data-original-src="https://miro.medium.com/v2/resize:fit:914/format:webp/1*oFIxeEVodypkcRyShaqmtg.png"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Home Page</figcaption></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/3e2aedc069b93926960b2bf77301883d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/1*m6vR6DIFH21mc5JaauB5Kg.png"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Sign Up Page</figcaption></figure><p id="1f17" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，一旦我们在地址栏中键入我们的本地主机地址(127.0.0.1:5000 ),后跟“/signup ”,就会加载页面“signup.html”。如果我们单击上一页中的链接，也可以访问该页。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/2b61893edc0648f1c2a7b6ce2314e35d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/format:webp/1*bFW7N_SpRsIfY9q2jRJolg.png"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Filling Up the signup form</figcaption></figure><p id="90d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们在表格中填写详细信息以完成注册过程，然后进入下一页。</p><p id="6516" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">确认用户注册</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lc"><img src="../Images/e1a73f37845a12d681bf81974926ae0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WtlW859gTwmuEVjXUn346Q.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Sign Up Page</figcaption></figure><p id="e7c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请记住，在注册模板中，表单使用post方法指向success.html模板，这意味着一旦填写了表单并按下了提交按钮，我们就会被重定向到success.html页面。我们现在可以捕获表单值，向页面添加错误处理。</p><p id="34e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">获取用户输入</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi le"><img src="../Images/619748297907c2350268c23bcedb7c90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*86IHjVjhG3-3GtSDNyYhYw.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Python File</figcaption></figure><p id="cb0e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第13行，我们调用success函数，以防表单被提交。第14行的if条件确保只有当表单第一次提交时才调用该函数，并在用户试图直接访问页面时向用户显示一个错误。第15-18行用于存储用户在上一页表格中填写的变量。第19行的else语句处理当用户试图直接访问页面而没有首先填写表单时的错误。第21行中的参数“data”用于在“success.html”文件中传递这些变量。我们将看看如何在html页面上使用这些变量。还记得在第1行导入请求。</p><p id="2bdf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">向用户显示注册成功</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ld"><img src="../Images/698e0f237cb48219c5575d059d58197a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3PSIXfw8_F-tqPoEjplQ6w.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Sign Up success Page</figcaption></figure><p id="0449" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意，在第10行，{{data[0]}} '用于访问用户在上一页中输入的名字。数据是我们之前传递的变量的名称，0表示数据变量中名字的索引。</p><p id="ca4a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">用户注册成功</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ma"><img src="../Images/4575980bea9ff9c223263712c708bb3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*mUJ037TEGSRbEnWB1qAplw.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Successful Sign Up</figcaption></figure><p id="618d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">错误处理</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/93cfc901fbf0dd7b767469b3680ad0e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*Szi-Qw5qzc3sgc-Dsi0rrg.png"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Error Handling</figcaption></figure><p id="4d47" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如上所示，如果试图直接访问“success.html”而没有先访问表单，则会向用户显示一条错误消息，因为所涉及的方法不是“POST”。</p><p id="1ca2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">感谢阅读</strong></p><p id="c5b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如您所见，我们已经向服务器添加了多个模板，并将它们链接在一起。在接下来的故事中，我计划添加在成功注册后向用户发送电子邮件的功能，将用户凭证以哈希形式存储在SQL数据库中，并为用户提供以后登录的选项。</p><p id="5322" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请在下面评论你的观点和建议。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mc md l"/></div></figure></div></div>    
</body>
</html>