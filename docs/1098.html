<html>
<head>
<title>Accelerate Building Custom Computer Vision Datasets With This Script💨</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用此脚本加速构建自定义计算机视觉数据集💨</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/accelerate-building-custom-computer-vision-datasets-8a1f682864a4?source=collection_archive---------5-----------------------#2020-03-02">https://medium.datadriveninvestor.com/accelerate-building-custom-computer-vision-datasets-8a1f682864a4?source=collection_archive---------5-----------------------#2020-03-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="616b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个脚本，使用Flickr API和makesense.ai下载图像并为它们的注释做准备</h2></div><p id="f81b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你是否曾经想建立一个模型来检测浣熊<strong class="kk iu"> </strong>却没有找到任何开源的带注释的图片来训练它？我就是这种情况。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/de0c7df9ce0e8c6b5b5dc73bd06bf763.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bVTyiKuTO6AInG5s42kVGg.jpeg"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Source: <a class="ae lu" href="https://www.pexels.com/photo/brown-and-black-raccoon-photo-634255/" rel="noopener ugc nofollow" target="_blank">Pexel</a></figcaption></figure><p id="7c20" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">坦率地说，我认识的每一个从事计算机视觉工作的人都曾经遇到过这种情况:<strong class="kk iu"> </strong>构建一个定制的计算机视觉数据集。</p><p id="5e9e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你对计算机视觉生态系统有点熟悉，你可能听说过常见的大型图像数据库，如<a class="ae lu" href="http://www.image-net.org/" rel="noopener ugc nofollow" target="_blank"> ImageNet </a>或<a class="ae lu" href="http://cocodataset.org/" rel="noopener ugc nofollow" target="_blank"> COCO </a>。</p><p id="d90c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些是由研究实验室和科技公司开源的经过仔细注释的图像组成的大型数据集。它们也被认为是评估最先进模型的标准基准数据集。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi lv"><img src="../Images/87bbabab3e1e022a10969aa8efc51001.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lcGf7Trv_tp4mQeN.jpeg"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Some ImageNet and COCO thumbnails</figcaption></figure><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi lw"><img src="../Images/2c1468feae9c9f227a4e7c91e4850a90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nGvg4ObqOhML2bG4"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Some ImageNet and COCO thumbnails</figcaption></figure><p id="cf9b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它们包含数百万张图像和数百个类，以及标签、边界框或分段遮罩的丰富元数据。</p><p id="052a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，无论何时您想要构建图像分类器或对象检测器，您特别寻找的东西很有可能已经在那里了。</p><blockquote class="lx"><p id="150f" class="ly lz it bd ma mb mc md me mf mg ld dk translated">但是，如果您正在寻找不在这些数据库中的对象呢？</p></blockquote><p id="b5ff" class="pw-post-body-paragraph ki kj it kk b kl mh ju kn ko mi jx kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated"><strong class="kk iu">简答……</strong></p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="b735" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">你必须建立自己的数据集</h1><p id="7b37" class="pw-post-body-paragraph ki kj it kk b kl nl ju kn ko nm jx kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated">这个任务可能很乏味，所以我准备了一个Python脚本来加速它。</p><p id="8949" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个脚本旨在帮助您快速构建用于分类、检测或分割的自定义计算机视觉数据集:<strong class="kk iu"> </strong>它不会为您做标记。</p><p id="229a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是它预先处理了这些步骤:</p><ul class=""><li id="d9f8" class="nq nr it kk b kl km ko kp kr ns kv nt kz nu ld nv nw nx ny bi translated">定义您的类集。</li><li id="91c9" class="nq nr it kk b kl nz ko oa kr ob kv oc kz od ld nv nw nx ny bi translated">从Flickr上收集每个班级的图片。</li><li id="430b" class="nq nr it kk b kl nz ko oa kr ob kv oc kz od ld nv nw nx ny bi translated">重命名文件。</li><li id="ea4c" class="nq nr it kk b kl nz ko oa kr ob kv oc kz od ld nv nw nx ny bi translated">组织文件夹结构。</li><li id="0687" class="nq nr it kk b kl nz ko oa kr ob kv oc kz od ld nv nw nx ny bi translated">将数据上传到<a class="ae lu" href="http://makesense.ai" rel="noopener ugc nofollow" target="_blank"> makesense.ai </a>进行标注(异议检测或分割)。</li></ul><p id="9210" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦这个管道完成，你就可以开始训练了！</p><p id="92fc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你没听说过<a class="ae lu" href="https://makesense.ai" rel="noopener ugc nofollow" target="_blank"> makesense.ai </a>，去网上查一下。这是一个基于浏览器的工具，用于对图像进行分类、检测和分割。它非常简洁、快速、可靠，而且免费。</p><div class="oe of gp gr og oh"><a href="https://www.datadriveninvestor.com/2019/03/22/fixing-photography/" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd iu gy z fp om fr fs on fu fw is bi translated">修复摄影|数据驱动的投资者</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">汤姆·津伯洛夫在转向摄影之前曾在南加州大学学习音乐。作为一个…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="oq l"><div class="or l os ot ou oq ov lo oh"/></div></div></a></div><p id="afe9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另外，它不会把你的数据上传到云中的任何地方。数据保留在您的浏览器文件系统中。</p><p id="a517" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我完全推荐。向建造它的Piotr Skalski致敬。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi oy"><img src="../Images/afab2ec5591a6bf2b0e49445b2df6dee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*c5N-EIXRpRdNbdeuSlx__Q.gif"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk"><a class="ae lu" href="https://github.com/SkalskiP/make-sense" rel="noopener ugc nofollow" target="_blank">https://github.com/SkalskiP/make-sense</a></figcaption></figure></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="6118" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">我如何运行脚本？</h1><p id="ce52" class="pw-post-body-paragraph ki kj it kk b kl nl ju kn ko nm jx kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated">先说一些要求。您必须安装:</p><ul class=""><li id="9bfd" class="nq nr it kk b kl km ko kp kr ns kv nt kz nu ld nv nw nx ny bi translated"><a class="ae lu" href="https://www.selenium.dev/" rel="noopener ugc nofollow" target="_blank">硒</a> : <code class="fe oz pa pb pc b">pip install -U selenium</code></li><li id="7385" class="nq nr it kk b kl nz ko oa kr ob kv oc kz od ld nv nw nx ny bi translated"><a class="ae lu" href="https://www.flickr.com/services/api/" rel="noopener ugc nofollow" target="_blank"> Flickr API </a> : <code class="fe oz pa pb pc b">pip install flickrapi</code></li></ul><p id="e28a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">并下载<a class="ae lu" href="https://chromedriver.chromium.org/" rel="noopener ugc nofollow" target="_blank">chrome driver</a>80版本。<strong class="kk iu"> </strong>嗯，需要配合你的Chrome版本。写这篇文章的时候，我的Chrome版本是80。</p><p id="c088" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你还必须创建一个Flickr账户并请求一个API密匙。这最多需要2分钟。有了凭证后，在<code class="fe oz pa pb pc b">src/</code>文件夹中创建一个<code class="fe oz pa pb pc b">config.yaml</code>，如下所示:</p><pre class="lf lg lh li gt pd pc pe pf aw pg bi"><span id="d0b1" class="ph mu it pc b gy pi pj l pk pl">key: "XXXXXXXXXXXXXXX"<br/>secret: "XXXXXXXXXXXXXXX"</span></pre><h2 id="c971" class="ph mu it bd mv pm pn dn mz po pp dp nd kr pq pr nf kv ps pt nh kz pu pv nj pw bi translated"><strong class="ak">论据</strong></h2><p id="92d2" class="pw-post-body-paragraph ki kj it kk b kl nl ju kn ko nm jx kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated">可以通过一组选项从终端启动该脚本:</p><ul class=""><li id="e59a" class="nq nr it kk b kl km ko kp kr ns kv nt kz nu ld nv nw nx ny bi translated"><code class="fe oz pa pb pc b">output-directory</code> —下载图像的根文件夹。</li><li id="bd0e" class="nq nr it kk b kl nz ko oa kr ob kv oc kz od ld nv nw nx ny bi translated"><code class="fe oz pa pb pc b">limit</code> —每类的最大下载次数。</li><li id="b158" class="nq nr it kk b kl nz ko oa kr ob kv oc kz od ld nv nw nx ny bi translated"><code class="fe oz pa pb pc b">delete-history</code> —是否选择清除之前的下载。</li><li id="0d01" class="nq nr it kk b kl nz ko oa kr ob kv oc kz od ld nv nw nx ny bi translated"><code class="fe oz pa pb pc b">task</code> —分类、检测或分割。</li><li id="2421" class="nq nr it kk b kl nz ko oa kr ob kv oc kz od ld nv nw nx ny bi translated"><code class="fe oz pa pb pc b">driver</code>—Chrome驱动程序的路径。</li></ul><p id="feeb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是一个为影像分类准备数据集的例子:<code class="fe oz pa pb pc b">python dataset_builder.py --limit 20 --delete-history</code>。</p><p id="2e4a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦脚本开始运行，您将被要求定义您的类:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi px"><img src="../Images/ec0fde48c80e614c5d427973c1be8c4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XHxZ2kngJJAWuZsd2MDp9g.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Source: <a class="ae lu" href="https://github.com/ahmedbesbes/dataset-builder" rel="noopener ugc nofollow" target="_blank">my Github</a></figcaption></figure><p id="46f8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦脚本完成，您将拥有以下结构。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi py"><img src="../Images/47a922809edf6fce38289709e9a33ed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nzStP4BKFmY28MZXuzVzOQ.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Source: <a class="ae lu" href="https://github.com/ahmedbesbes/dataset-builder" rel="noopener ugc nofollow" target="_blank">my Github</a></figcaption></figure><p id="cfb0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是为图像检测准备数据集的另一个例子:<code class="fe oz pa pb pc b">python dataset-builder.py --limit 5 --delete-history --task detection</code>。</p><p id="2c43" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如预期的那样，该脚本打开makesense.ai，通过Selenium上传其中的图像(在浏览器文件系统内),这样您就不必手动做任何事情。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi pz"><img src="../Images/d614dd292612b410a61f6e59c5bae57f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*yukzwBrm0PTiAmfg-j2COg.gif"/></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">A GIF of the script</figcaption></figure><p id="645b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">差不多就是这样。</p><p id="3216" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想试试代码，你可以在我的回购中找到你需要的一切:</p><div class="oe of gp gr og oh"><a href="https://github.com/ahmedbesbes/dataset-builder" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd iu gy z fp om fr fs on fu fw is bi translated">ahmedbesbes/数据集构建器</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">帮助您快速构建用于分类和检测的自定义计算机视觉数据集的脚本。它允许您…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">github.com</p></div></div><div class="oq l"><div class="qa l os ot ou oq ov lo oh"/></div></div></a></div></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="e201" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">下一步是什么🔜？</h1><p id="0efa" class="pw-post-body-paragraph ki kj it kk b kl nl ju kn ko nm jx kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated">请随意投稿！在问题部分报告任何错误或请求任何您希望看到发布的功能。</p><p id="ea63" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是我在路线图中的计划:</p><ul class=""><li id="7fa5" class="nq nr it kk b kl km ko kp kr ns kv nt kz nu ld nv nw nx ny bi translated">对图像进行质量检查。</li><li id="307d" class="nq nr it kk b kl nz ko oa kr ob kv oc kz od ld nv nw nx ny bi translated">使用预先训练的网络集成自动标记。</li><li id="57fd" class="nq nr it kk b kl nz ko oa kr ob kv oc kz od ld nv nw nx ny bi translated">支持必应或谷歌图片。</li></ul><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="qb qc l"/></div></figure></div></div>    
</body>
</html>