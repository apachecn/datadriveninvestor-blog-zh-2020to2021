<html>
<head>
<title>An Intro to Reading Scraped Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">阅读抓取数据简介</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/an-intro-to-reading-scraped-data-7163b9360bba?source=collection_archive---------17-----------------------#2020-09-11">https://medium.datadriveninvestor.com/an-intro-to-reading-scraped-data-7163b9360bba?source=collection_archive---------17-----------------------#2020-09-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7b82" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从网络抓取中获取有用数据。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f71714ef984c118e8d4af598b67fa3ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WkcDyTSYglYYvlUn"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@nastya_kvokka?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Nastya Kvokka</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1f25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">免责声明:刮痧处于法律的灰色地带，所以在刮痧之前要做好自己的研究。</em></p><p id="85ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lw translated"><span class="l lx ly lz bm ma mb mc md me di"> W </span> eb抓取是获取替代数据的一种强大方式。通过访问额外的、相对未开发的数据(与API或整洁的CSV文件相比)，你可能会在人工智能建模方面比竞争对手获得优势，无论你是用Python编码还是使用AutoML工具，如<a class="ae ky" href="http://apteo.co" rel="noopener ugc nofollow" target="_blank"> Apteo </a>。</p><p id="0947" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，收集到的数据往往极其混乱。不同的网站有完全不同的风格，格式和数据的位置。例如，这里有来自三个不同站点的三个表:一个葡萄酒评论站点、一个赛马站点和一个加密价格站点。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mf"><img src="../Images/b840e48b8ede1778fff113725481ed71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N2LoDEX_-alFW3T8TE5I6w.png"/></div></div></figure><p id="5fd4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的表格周围有一些东西，比如空格、图像、我们可能不想要的超链接、按钮和不相关的数据。不管使用什么工具，这些都可能出现在我们收集的数据中。</p><div class="mg mh gp gr mi mj"><a href="https://www.datadriveninvestor.com/2020/08/27/what-is-a-data-catalog-and-how-does-it-enable-machine-learning-success/" rel="noopener  ugc nofollow" target="_blank"><div class="mk ab fo"><div class="ml ab mm cl cj mn"><h2 class="bd iu gy z fp mo fr fs mp fu fw is bi translated">什么是数据目录，它如何使机器学习取得成功？数据驱动的投资者</h2><div class="mq l"><h3 class="bd b gy z fp mo fr fs mp fu fw dk translated">数据目录是机器学习和数据分析的燃料。没有它，你将不得不花费很多…</h3></div><div class="mr l"><p class="bd b dl z fp mo fr fs mp fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="ms l"><div class="mt l mu mv mw ms mx ks mj"/></div></div></a></div><p id="a7a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">杂乱的数据不适合分析工具，因为分析工具需要特定的、干净的数据格式。</p><div class="mg mh gp gr mi mj"><a href="https://medium.com/towards-artificial-intelligence/7-techniques-to-clean-and-structure-data-for-analysis-e38af00f3725" rel="noopener follow" target="_blank"><div class="mk ab fo"><div class="ml ab mm cl cj mn"><h2 class="bd iu gy z fp mo fr fs mp fu fw is bi translated">清理和结构化数据以进行分析的7种技术</h2><div class="mq l"><h3 class="bd b gy z fp mo fr fs mp fu fw dk translated">节省时间的最佳方法。⏰</h3></div><div class="mr l"><p class="bd b dl z fp mo fr fs mp fu fw dk translated">medium.com</p></div></div><div class="ms l"><div class="my l mu mv mw ms mx ks mj"/></div></div></a></div><h2 id="e4d7" class="mz na it bd nb nc nd dn ne nf ng dp nh li ni nj nk lm nl nm nn lq no np nq nr bi translated">简单的指南</h2><p id="171a" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">我最近想检索所有香港赛马会比赛的日期，结果得到了这个结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mf"><img src="../Images/c1fe63289603f42a89dab81f7b63a327.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dTAoZPsB8s_l7BrzqFWDvg.png"/></div></div></figure><p id="e78f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们尝试使用<code class="fe nx ny nz oa b">pd.read_csv</code>在Python中读取这个文件，我们会得到一个错误。</p><pre class="kj kk kl km gt ob oa oc od aw oe bi"><span id="b368" class="mz na it oa b gy of og l oh oi">ParserError: Error tokenizing data. C error: Expected 3 fields in line 10, saw 9</span></pre><p id="2915" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">问题出在名字:<strong class="lb iu">逗号分隔值</strong>。通常，抓取的数据不是逗号分隔的。事实上，我们的数据中存在不同程度的间距，我们可以通过放大文件中的一行来看到这一点。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/2a9033ca5ef8fff47f10f8387bfa9e32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*abafjOODCF4pozfLUBBcMA.png"/></div></div></figure><p id="9edf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要告诉熊猫分隔符是什么——在这里是制表符。</p><pre class="kj kk kl km gt ob oa oc od aw oe bi"><span id="318a" class="mz na it oa b gy of og l oh oi">df = pd.read_csv('tmp-159974671053736.csv', sep='\t')</span></pre><p id="f3a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们得到了更合理的产量。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mf"><img src="../Images/aa81c673b39bebe880acb2bf9eeb8f03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CRWg506LUOvkVJ46QjGdxg.png"/></div></div></figure><p id="2bc5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们在<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html" rel="noopener ugc nofollow" target="_blank"> read_csv文档</a>中看到的，你可以传入<em class="lv">任何正则表达式</em>作为分隔符。</p><p id="0241" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">出于我的目的，我希望只关注日期列(以获得所有比赛的日期)，这可以用这段代码来实现。</p><pre class="kj kk kl km gt ob oa oc od aw oe bi"><span id="67f3" class="mz na it oa b gy of og l oh oi">df = df[['DTSTART', 'DTEND']]</span></pre><p id="5547" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们验证一下我们实际上看到的是日期。</p><pre class="kj kk kl km gt ob oa oc od aw oe bi"><span id="431e" class="mz na it oa b gy of og l oh oi">type(df['DTSTART'][0])</span></pre><p id="20b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这会输出<code class="fe nx ny nz oa b">str</code>，这意味着我们的日期格式不正确。我们希望将它们格式化为日期，特别是YYYY/MM/DD格式(例如2017/05/25)。</p><pre class="kj kk kl km gt ob oa oc od aw oe bi"><span id="9e5c" class="mz na it oa b gy of og l oh oi">df['DTSTART'] = pd.to_datetime(pd.Series(df['DTSTART']))<br/>df['DTEND'] = pd.to_datetime(pd.Series(df['DTEND']))</span><span id="f360" class="mz na it oa b gy ok og l oh oi">df.DTEND = df.DTEND.dt.strftime('%Y/%m/%d')<br/>df.DTSTART = df.DTSTART.dt.strftime('%Y/%m/%d')</span></pre><p id="e975" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们有了我们想要的每场比赛日期的精确格式。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/55855dd0f4f1fa0b78c481fea7881553.png" data-original-src="https://miro.medium.com/v2/resize:fit:588/format:webp/1*82FbwNA7WMlBG6dgQsblVg.png"/></div></figure><p id="9653" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以将其导出为CSV格式，如下所示:</p><pre class="kj kk kl km gt ob oa oc od aw oe bi"><span id="c22e" class="mz na it oa b gy of og l oh oi">df.to_csv('df.csv')</span></pre><p id="2df8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或Excel表格:</p><pre class="kj kk kl km gt ob oa oc od aw oe bi"><span id="32e3" class="mz na it oa b gy of og l oh oi">df.to_excel('df.xlsx')</span></pre><h2 id="4aa6" class="mz na it bd nb nc nd dn ne nf ng dp nh li ni nj nk lm nl nm nn lq no np nq nr bi translated">摘要</h2><p id="6f08" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">抓取的数据看起来<em class="lv"/>超级混乱，但是像<code class="fe nx ny nz oa b">read_csv</code>分隔符参数和正则表达式这样的简单工具可以用来轻松格式化数据。</p><p id="15f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">访问专家视图— </strong> <a class="ae ky" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">订阅DDI英特尔</strong> </a></p></div></div>    
</body>
</html>