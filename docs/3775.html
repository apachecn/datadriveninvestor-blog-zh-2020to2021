<html>
<head>
<title>Recursively download all the contents of a Google Drive folder using Python, wget and a Bash script</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python、wget和Bash脚本递归下载Google Drive文件夹的所有内容</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/recursively-download-all-the-contents-of-a-google-drive-folder-using-python-wget-and-a-bash-script-d8f2c6b105d5?source=collection_archive---------1-----------------------#2020-07-07">https://medium.datadriveninvestor.com/recursively-download-all-the-contents-of-a-google-drive-folder-using-python-wget-and-a-bash-script-d8f2c6b105d5?source=collection_archive---------1-----------------------#2020-07-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><h1 id="ce71" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">你什么时候需要这个？</h1><p id="88f8" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">Google Drive是目前最受欢迎的存储数据集的地方之一，其中一些数据集是公开的。但是，在某些情况下，数据集被拆分到多个文件夹和数百个单独的文件中。在这种情况下，逐个下载这些文件是非常低效的。当您必须在远程服务器上工作时，这就更加困难了，因为您没有任何GUI访问权限，也不能访问浏览器。</p><h1 id="f1c0" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">剧本</h1><p id="f493" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">为了达到我的目的，我编写了一个Python代码，它将生成一个bash脚本，然后我将它复制到远程服务器并执行。所以，这是步骤。</p><p id="0885" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir">第一步</strong></p><p id="9759" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">我用过<strong class="kn ir"> PyDrive </strong>库。要使用这个库，你必须完成<a class="ae lo" href="https://pythonhosted.org/PyDrive/quickstart.html#authentication" rel="noopener ugc nofollow" target="_blank">链接</a>中描述的指令。为了完整起见，我将在这里提到这些步骤。</p><ol class=""><li id="3923" class="lp lq iq kn b ko lj ks lk kw lr la ls le lt li lu lv lw lx bi translated">去Google APIs控制台创建你自己的项目。</li><li id="73a7" class="lp lq iq kn b ko ly ks lz kw ma la mb le mc li lu lv lw lx bi translated">搜索“Google Drive API”，选择条目，然后单击“启用”。</li><li id="4e10" class="lp lq iq kn b ko ly ks lz kw ma la mb le mc li lu lv lw lx bi translated">从左侧菜单中选择“凭据”，单击“创建凭据”，选择“OAuth客户端ID”。</li><li id="1819" class="lp lq iq kn b ko ly ks lz kw ma la mb le mc li lu lv lw lx bi translated">现在，需要设置产品名称和同意屏幕-&gt;单击“配置同意屏幕”并按照说明进行操作。一旦完成:</li><li id="9c4d" class="lp lq iq kn b ko ly ks lz kw ma la mb le mc li lu lv lw lx bi translated">选择“应用类型”为Web应用。<br/>输入适当的名称。</li><li id="313b" class="lp lq iq kn b ko ly ks lz kw ma la mb le mc li lu lv lw lx bi translated">输入<a class="ae lo" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a>作为“授权的JavaScript源”。</li><li id="2dbe" class="lp lq iq kn b ko ly ks lz kw ma la mb le mc li lu lv lw lx bi translated">输入<a class="ae lo" href="http://localhost:8080/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080/ </a>为“授权重定向URIs”。</li><li id="90a9" class="lp lq iq kn b ko ly ks lz kw ma la mb le mc li lu lv lw lx bi translated">点击“保存”。</li><li id="36a8" class="lp lq iq kn b ko ly ks lz kw ma la mb le mc li lu lv lw lx bi translated">点击客户端ID右侧的“下载JSON”下载client_secret_ <really long="" id=""> .json。</really></li><li id="6445" class="lp lq iq kn b ko ly ks lz kw ma la mb le mc li lu lv lw lx bi translated">下载的文件包含应用程序的所有身份验证信息。将文件重命名为“client_secrets.json ”,并将其放在您的工作目录中。</li></ol><p id="603f" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir">第二步</strong></p><p id="1f3d" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">现在，在保存“client_secrets.json”文件的同一个工作目录中创建一个python脚本或笔记本。我在下面附上了笔记本。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="b4e1" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir">第三步</strong></p><p id="1e50" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">使用scp，将“script.sh”复制到远程服务器。<br/>` scp ~/path/script . sh username @ IP:path '</p><p id="522c" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir">第四步</strong></p><ol class=""><li id="1699" class="lp lq iq kn b ko lj ks lk kw lr la ls le lt li lu lv lw lx bi translated">登录到删除服务器，导航到路径。然后使用以下命令使脚本可执行。<br/> `chmod 777 script.sh '</li><li id="4341" class="lp lq iq kn b ko ly ks lz kw ma la mb le mc li lu lv lw lx bi translated">运行脚本，瞧！<br/>`。/script.sh '</li></ol><p id="711c" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">这将创建子文件夹，并下载您在python代码中指定的父目录中的所有文件。</p><p id="4115" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">我已经用这个文件夹测试过我的代码:<a class="ae lo" href="https://drive.google.com/drive/folders/1NIGvjHBuUQHWnMqzboyg-zLI1q_bOuCH?usp=sharing" rel="noopener ugc nofollow" target="_blank">https://drive . Google . com/drive/folders/1 nigvjhbuuqhwnmqzboyg-zLI1q _ bOuCH？usp =共享</a></p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/fefa301c21f781992acad7e08733d389.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*v482lXjJg4pZIysfZpwc1w.png"/></div></figure></div></div>    
</body>
</html>