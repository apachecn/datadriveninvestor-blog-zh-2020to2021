<html>
<head>
<title>Nine reasons to switch from Python to Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从Python转到Go的九个理由</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/nine-reasons-to-switch-from-python-to-go-f1b0cd746974?source=collection_archive---------0-----------------------#2020-02-25">https://medium.datadriveninvestor.com/nine-reasons-to-switch-from-python-to-go-f1b0cd746974?source=collection_archive---------0-----------------------#2020-02-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3306af6e02b6c17c833ce0a9fb8a8347.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S4jbHR7FEYFJHxksIeiW2w.png"/></div></div></figure><p id="8112" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">切换到一种新的编程语言通常是一件大事，尤其是当团队成员对原始语言有很多经验的时候。今年早些时候，<a class="ae kw" href="https://getstream.io/" rel="noopener ugc nofollow" target="_blank"> Stream的</a>将其主要编程语言从Python切换到Go。本文将解释他们决定从Python转向Go的一些原因。</p><h1 id="7771" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">使用Go的理由</h1><h1 id="495c" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">原因1 —性能</h1><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/e8a26d6b4415564f3b9f38b219e675fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1348/format:webp/1*h5rhSTq8eKPETNU0jCr83w.png"/></div></figure><p id="8890" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">围棋非常快。其性能接近Java或c，Go比Python快30倍。</p><h1 id="7020" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">原因2 —语言本身的性能很重要</h1><p id="2b05" class="pw-post-body-paragraph jy jz iq ka b kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv ij bi translated">对于许多应用程序来说，编程语言只是应用程序和数据库之间的粘合剂。语言本身的表现通常并不重要。</p><p id="1f9d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Stream是一个API提供商，为500家公司和超过2亿的最终用户提供反馈基础设施。多年来，我们一直在优化Cassandra、PostgreSQL、Redis等软件的性能，但现在我们已经达到了我们正在使用的编程语言的极限。</p><div class="mf mg gp gr mh mi"><a href="https://www.datadriveninvestor.com/2019/03/25/a-programmers-guide-to-creating-an-eclectic-bookshelf/" rel="noopener  ugc nofollow" target="_blank"><div class="mj ab fo"><div class="mk ab ml cl cj mm"><h2 class="bd ir gy z fp mn fr fs mo fu fw ip bi translated">创建折衷书架的程序员指南</h2><div class="mp l"><h3 class="bd b gy z fp mn fr fs mo fu fw dk translated">每个开发者都应该有一个书架。他的内阁中可能的文本集合是无数的，但不是每一个集合…</h3></div><div class="mq l"><p class="bd b dl z fp mn fr fs mo fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="mr l"><div class="ms l mt mu mv mr mw jw mi"/></div></div></a></div><p id="43ee" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Python是一种很棒的语言，但是对于诸如序列化/反序列化、排序和聚合之类的例子，它表现很差。我们经常遇到性能问题，Cassandra需要1ms的时间来检索数据，Python在接下来的10ms内将其转换为对象。</p><h1 id="3813" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">原因3——开发者效率，没有太多创新</h1><p id="55f9" class="pw-post-body-paragraph jy jz iq ka b kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv ij bi translated">请看一下<a class="ae kw" href="http://howistart.org/posts/go/1/" rel="noopener ugc nofollow" target="_blank"/>教程“如何开始学习围棋”这一节的围棋代码。</p><pre class="lw lx ly lz gt mx my mz na aw nb bi"><span id="9232" class="nc ky iq my b gy nd ne l nf ng">type openWeatherMap struct{}</span><span id="7cc1" class="nc ky iq my b gy nh ne l nf ng">func (w openWeatherMap) temperature(city string) (float64, error) {<br/>    resp, err := http.Get("http://api.openweathermap.org/data/2.5/weather?APPID=YOUR_API_KEY&amp;q=" + city)<br/>    if err != nil {<br/>        return 0, err<br/>    }</span><span id="ed61" class="nc ky iq my b gy nh ne l nf ng">    defer resp.Body.Close()</span><span id="981b" class="nc ky iq my b gy nh ne l nf ng">    var d struct {<br/>        Main struct {<br/>            Kelvin float64 `json:"temp"`<br/>        } `json:"main"`<br/>    }</span><span id="d531" class="nc ky iq my b gy nh ne l nf ng">    if err := json.NewDecoder(resp.Body).Decode(&amp;d); err != nil {<br/>        return 0, err<br/>    }</span><span id="9c55" class="nc ky iq my b gy nh ne l nf ng">    log.Printf("openWeatherMap: %s: %.2f", city, d.Main.Kelvin)<br/>    return d.Main.Kelvin, nil<br/>}</span></pre><p id="4f99" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您是新手，阅读这段代码不会有太多惊喜。它演示了赋值、数据结构、指针、格式和内置的HTTP库。</p><p id="5432" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">刚接触编程的时候，一直喜欢用Python的高级特性。Python让你从你正在编写的代码中获得很好的想法。例如，您可以:</p><ul class=""><li id="736d" class="ni nj iq ka b kb kc kf kg kj nk kn nl kr nm kv nn no np nq bi translated">当代码初始化时，自己用元类注册该类</li><li id="c917" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nn no np nq bi translated">对错转换</li><li id="ee13" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nn no np nq bi translated">将函数添加到内置函数列表中</li><li id="4820" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nn no np nq bi translated">用魔术方法重载运算符</li></ul><p id="7a70" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这些特性很有趣，但大多数程序员认为这增加了阅读他人代码的难度。</p><p id="a39c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Go强制你使用最基本的东西，这样很容易读懂别人的代码。</p><p id="ee58" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nw">注:当然，“容易”取决于具体项目。如果你想创建一个基本的CRUD API，我还是推荐使用Django和</em> <a class="ae kw" href="http://www.django-rest-framework.org/" rel="noopener ugc nofollow" target="_blank"> <em class="nw"> DRF </em> </a> <em class="nw">或者Rails </em></p><h1 id="2561" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">原因4 —并发和通道</h1><p id="000a" class="pw-post-body-paragraph jy jz iq ka b kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv ij bi translated">作为一门编程语言，Go一直保持着尽可能的简单。它没有引入太多新概念，因为目标是创建一种易于使用的编程语言。它唯一有创新的地方是路线和渠道。Goroutines是Go的轻量级线程解决方案，Channels是与Goss交互的首选方式。</p><p id="5ba8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Goroutines非常轻量级，只需要几千字节的额外内存。由于go routine非常轻量级，因此可以同时运行数百甚至数千个go routine。</p><p id="c717" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以使用通道在Goroutines之间进行通信。Go运行时处理所有的内部复杂性。Goroutines和基于通道的并发方案使应用程序可以轻松使用所有可用的CPU内核并处理并发ioo，而不会使开发复杂化。与Python/Java相比，在Goroutinerequires上运行一个函数需要很少的固定代码。您只需使用关键字“go”调用该函数:</p><pre class="lw lx ly lz gt mx my mz na aw nb bi"><span id="code" class="nc ky iq my b gy nd ne l nf ng">package main</span><span id="48c0" class="nc ky iq my b gy nh ne l nf ng">import (<br/>    "fmt"<br/>    "time"<br/>)</span><span id="3747" class="nc ky iq my b gy nh ne l nf ng">func say(s string) {<br/>    for i := 0; i &lt; 5; i++ {<br/>        time.Sleep(100 * time.Millisecond)<br/>        fmt.Println(s)<br/>    }</span><span id="9134" class="nc ky iq my b gy nh ne l nf ng">}</span><span id="ebca" class="nc ky iq my b gy nh ne l nf ng">func main() {<br/>    go say("world")<br/>    say("hello")<br/>}</span></pre><p id="660a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://tour.golang.org/concurrency/1" rel="noopener ugc nofollow" target="_blank">https://tour.golang.org/concurrency/1</a></p><p id="8dd8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Go的并发解决方案很好用。与Node相比，这是一个非常有趣的场景，在Node中，开发人员必须密切关注如何处理异步代码。</p><p id="256e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Go并发的另一个焦点是<a class="ae kw" href="https://blog.golang.org/race-detector" rel="noopener ugc nofollow" target="_blank">竞争检测。</a>它让应用程序很容易知道异步代码中是否有任何竞争条件。</p><p id="7f43" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以下是了解Go和渠道的一些重要资源:</p><ul class=""><li id="8d42" class="ni nj iq ka b kb kc kf kg kj nk kn nl kr nm kv nn no np nq bi translated">【https://gobyexample.com/channels T4】</li><li id="1a11" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nn no np nq bi translated"><a class="ae kw" href="https://tour.golang.org/concurrency/2" rel="noopener ugc nofollow" target="_blank">https://tour.golang.org/concurrency/2</a></li><li id="9795" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nn no np nq bi translated"><a class="ae kw" href="http://guzalexander.com/2013/12/06/golang-channels-tutorial.html" rel="noopener ugc nofollow" target="_blank">http://guzalexander . com/2013/12/06/golang-channels-tutorial . html</a></li><li id="2bef" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nn no np nq bi translated"><a class="ae kw" href="https://www.golang-book.com/books/intro/10" rel="noopener ugc nofollow" target="_blank">https://www.golang-book.com/books/intro/10</a></li><li id="62ad" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nn no np nq bi translated"><a class="ae kw" href="https://www.goinggo.net/2014/02/the-nature-of-channels-in-go.html" rel="noopener ugc nofollow" target="_blank">https://www . going go . net/2014/02/the-nature-of-channels-in-go . html</a></li><li id="859c" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nn no np nq bi translated"><a class="ae kw" href="https://softwareengineering.stackexchange.com/questions/222642/are-go-langs-goroutine-pools-just-green-threads" rel="noopener ugc nofollow" target="_blank">go routines vs Green threads</a></li></ul><h1 id="0ce2" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">原因5 —编译速度快</h1><p id="a846" class="pw-post-body-paragraph jy jz iq ka b kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv ij bi translated">用Go写的最大的微服务项目，只需要6秒钟就可以编译完成。与Java和c等语言的龟速编译相比，Go的快速编译速度是其主要生产力。</p><h1 id="a67a" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">原因6 —组件团队的能力</h1><p id="a247" class="pw-post-body-paragraph jy jz iq ka b kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv ij bi translated">先说这个数据:围棋开发者没有C和Java多。根据<a class="ae kw" href="https://insights.stackoverflow.com/survey/2017" rel="noopener ugc nofollow" target="_blank"> StackOverflow，</a> <strong class="ka ir"> 38% </strong>的开发者使用Java，<strong class="ka ir"> 19.3% </strong>使用C，而<strong class="ka ir">只有4.6% </strong>使用Go。<a class="ae kw" href="https://madnight.github.io/githut/" rel="noopener ugc nofollow" target="_blank"> GitHub数据</a>显示<a class="ae kw" href="http://githut.info/" rel="noopener ugc nofollow" target="_blank">类似的趋势:</a> Go比Erlang、Scala、Elixir等语言应用更广泛，但不如Java、c流行。</p><p id="2c2b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">幸运的是，Go是一门非常简单易学的语言。它只提供您需要的基本功能，没有其他额外功能。它引入了新的概念，如<a class="ae kw" href="https://blog.golang.org/defer-panic-and-recover" rel="noopener ugc nofollow" target="_blank">“defer”</a>语句和内置的“go例程”以及通道并发管理。团队中任何一个Python、Elixir、C、Scala或者Java开发人员都可以在一个月内学会用Go编程，因为Go太简单了。</p><p id="97f2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">与其他语言相比，我们发现建立一个Go开发团队更容易。如果你在竞争激烈的环境中招聘，这是一个非常重要的优势，比如博尔德和阿姆斯特丹。</p><h1 id="1df8" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">原因7 —强大的生态系统</h1><p id="cff8" class="pw-post-body-paragraph jy jz iq ka b kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv ij bi translated">对于我们这样规模的团队(大约20人)来说，生态系统非常重要。如果你必须重新发明所有的功能，你就不能为你的客户创造价值。Go对于我们经常使用的工具是一个很大的支持。比如Redis、RabbitMQ、PostgreSQL、模板解析、任务调度、表达式解析、DBRocks等都可以使用现成的库。</p><p id="16c7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">与Rust或Elixir等其他较新的语言相比，Go具有巨大的生态系统优势。尽管它不能与Java、Python或Node相比，但您会发现许多基本需求都有高质量的包。</p><h1 id="f8a4" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">原因8 — Gofmt，强制代码格式化</h1><p id="31bf" class="pw-post-body-paragraph jy jz iq ka b kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv ij bi translated">Gofmt是一个优秀的命令行程序，内置于Go编译器中，用于格式化代码。从功能上来说，和Python的autopep 8差不多。我们大多数人不喜欢争论制表符和空格，但是格式的目标是一致的，实际的格式标准位置并不重要。Gofmt以一种正式的方式格式化代码，以避免所有这些争论。</p><h1 id="decb" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">原因9 — gRPC和协议缓冲区</h1><p id="b4ec" class="pw-post-body-paragraph jy jz iq ka b kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv ij bi translated">Go为协议缓冲区和gRPC提供一流的支持。这两个工具完美地结合在一起，构建了一个通过RPC进行通信的微服务器。您只需要编辑一个定义RPC调用及其参数的清单文件，服务端和客户端就可以从中自动生成适当的代码。这样不仅速度快，而且占用网络空间少，使用起来更方便。</p><p id="6358" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">其他语言(如C、Java、Python和Ruby)的客户端代码可以基于同一个清单文件生成。这样就和内部REST接口没有冲突，我们也不用每次都写几乎一样的客户端和服务端代码。</p><h1 id="88fc" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">使用Golang的缺点</h1><h1 id="75a3" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">Cons1 —缺乏框架</h1><p id="2980" class="pw-post-body-paragraph jy jz iq ka b kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv ij bi translated">Go没有一个staple框架，比如Ruby的Rails、Python或者Django或者PHP的Laravel。这个话题在Go社区引起了激烈的争论，许多人认为现成的框架不应该用来启动一个项目。在某些情况下，我完全同意这一点。然而，如果你想构建一个简单的CRUD API，使用Django/DJRF、Rails Laravel或<a class="ae kw" href="http://phoenixframework.org/" rel="noopener ugc nofollow" target="_blank"> Phoenix会更容易。</a></p><h1 id="83fd" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">Cons2 —错误处理</h1><p id="d944" class="pw-post-body-paragraph jy jz iq ka b kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv ij bi translated">Go通过简单地从函数返回错误来处理错误。虽然这种情况是存在的，但是很容易丢失错误的范围，从而很难向用户提供有价值的错误消息。错误包通过<a class="ae kw" href="https://github.com/pkg/errors" rel="noopener ugc nofollow" target="_blank">返回</a>错误的上下文和错误堆栈来解决这个问题。</p><p id="8e75" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">还有一个问题，很容易忘记处理错误。虽然errcheck和megacheck等静态分析工具可以避免这些错误，但总感觉不够完美。也许我们应该期待一个语言级别的错误处理方案。</p><h1 id="d65b" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">缺点3 —包装管理</h1><p id="aa3d" class="pw-post-body-paragraph jy jz iq ka b kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv ij bi translated">Go的包管理并不完美。默认情况下，它无法指定依赖项的特定版本，也无法创建可重复的构建场景。Python，Node，Ruby都有比较好的包管理系统。然而，如果使用正确的工具，Go的包管理可以变得更容易。</p><p id="de05" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以使用<a class="ae kw" href="https://github.com/golang/dep" rel="noopener ugc nofollow" target="_blank"> Dep </a>来管理依赖关系，它指定并固定版本。此外，我们为多项目管理提供了一个名为<a class="ae kw" href="https://github.com/getstream/vg" rel="noopener ugc nofollow" target="_blank"> VirtualGo </a>的开源工具。</p><h1 id="e411" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">Python vs Go</h1><p id="d1e6" class="pw-post-body-paragraph jy jz iq ka b kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv ij bi translated">我们做了一个有趣的实验，用Go重写了最初的<a class="ae kw" href="https://getstream.io/docs/#custom_ranking" rel="noopener ugc nofollow" target="_blank"> Python编写的提要</a>。看看这种排序方法的一个例子:</p><pre class="lw lx ly lz gt mx my mz na aw nb bi"><span id="2542" class="nc ky iq my b gy nd ne l nf ng">{<br/>    "functions": {<br/>        "simple_gauss": {<br/>            "base": "decay_gauss",<br/>            "scale": "5d",<br/>            "offset": "1d",<br/>            "decay": "0.3"<br/>        },<br/>        "popularity_gauss": {<br/>            "base": "decay_gauss",<br/>            "scale": "100",<br/>            "offset": "5",<br/>            "decay": "0.5"<br/>        }<br/>    },<br/>    "defaults": {<br/>        "popularity": 1<br/>    },<br/>    "score": "simple_gauss(time)*popularity"<br/>}</span></pre><p id="649d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Python和Go代码都需要执行以下操作来支持这种排序方法:</p><ol class=""><li id="e849" class="ni nj iq ka b kb kc kf kg kj nk kn nl kr nm kv nx no np nq bi translated">解析分数表达式，将“simple_gauss”转换为函数，进入activity，输出分数。</li><li id="14df" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nx no np nq bi translated">从JSON配置中创建函数。例如，我们希望simple_gauss以5天的比例调用“decay_gauss”，偏移1天，衰减因子为0.3。</li><li id="500f" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nx no np nq bi translated">当字段没有值时，解析“defaults”配置采用默认值。</li><li id="bd24" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nx no np nq bi translated">开始使用步骤1中的函数对提要中的所有活动进行评级。</li></ol><p id="220d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">开发Python版本的排序代码花了大约三天时间，包括编写代码、单元测试和文档。接下来，我们花了大约2周的时间来优化代码。其中一个优化是将score表达式(simple_gauss(time)转换成一棵<a class="ae kw" href="https://docs.python.org/3/library/ast.html" rel="noopener ugc nofollow" target="_blank">抽象语法树。</a>我们还实现了可用于预测分数的缓存逻辑。</p><p id="22dc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">相比之下，开发这段代码的Go版本需要大约四天的时间，并且不需要在后面的阶段进一步优化性能。结果，尽管Python在一开始发展得更快，但Go版本最终需要更少的努力。另一个优势是Go代码比我们高度优化的Python代码快大约40倍。</p><p id="3c85" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当然，这只是我们改用Go后遇到的性能提升的一个简单例子:</p><ul class=""><li id="749e" class="ni nj iq ka b kb kc kf kg kj nk kn nl kr nm kv nn no np nq bi translated">分类代码是我用Go写的第一个项目。</li><li id="351a" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nn no np nq bi translated">Go代码是在Python代码之后编写的，因此对这个项目有了更深入的理解</li><li id="833e" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nn no np nq bi translated">Go的表达式解析库质量更高</li></ul><p id="1672" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你的体验可能会不一样。我们系统的一些其他组件需要比Python更多的时间来构建。总的趋势是，我们看到编写Go代码需要更多的努力。但是，优化代码的性能花费的时间更少。</p><h1 id="f709" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">仙丹vs围棋</h1><p id="e70e" class="pw-post-body-paragraph jy jz iq ka b kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv ij bi translated">我们要评价的另一种语言是<a class="ae kw" href="https://elixir-lang.org/" rel="noopener ugc nofollow" target="_blank">仙丹。</a> Elixir是一种构建在Erlang虚拟机上的迷人语言。我谈论它是因为我们的一个项目团队精通这门语言。</p><p id="5e41" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正因如此，我们才注意到Go原来的表现更好。Go和Elixir都支持数千个并发请求。然而，如果你看单个请求的性能，Go要快得多。我们选择Go的另一个原因是生态系统。Go对我们需要的组件有更成熟的库，而Elixir还不适合生产。同时，很难培训和找到使用Elixir的开发人员来使用Elixir。</p><h1 id="b5b0" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">结论</h1><p id="1ffa" class="pw-post-body-paragraph jy jz iq ka b kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv ij bi translated">Go是一种非常高性能的语言，对并发的支持非常强大。几乎和C和Java一样快。虽然Go编译起来比Python或Ruby慢，但是你可以节省很多优化代码的时间。</p><p id="38e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Go有一个<strong class="ka ir">巨大的生态系统</strong>供新手使用，并且很容易学会<strong class="ka ir">使用，</strong>它有<strong class="ka ir">超快的性能</strong>和在并发方面强大的<strong class="ka ir">支持</strong>，以及一个非常高效的开发环境。这些特性让Go成为开发者最合适的选择。</p><p id="ac27" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你想了解更多关于围棋的知识，请阅读下面的文章。要了解更多关于Stream的信息，请浏览本<a class="ae kw" href="https://getstream.io/get_started/" rel="noopener ugc nofollow" target="_blank">互动教程。</a></p><h1 id="80d9" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">阅读更多关于切换到Golang的信息</h1><ul class=""><li id="bf78" class="ni nj iq ka b kb ma kf mb kj ny kn nz kr oa kv nn no np nq bi translated"><a class="ae kw" href="https://movio.co/en/blog/migrate-Scala-to-Go/" rel="noopener ugc nofollow" target="_blank">https://movio.co/en/blog/migrate-Scala-to-Go/</a></li><li id="0776" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nn no np nq bi translated"><a class="ae kw" href="https://hackernoon.com/why-i-love-golang-90085898b4f7" rel="noopener ugc nofollow" target="_blank">https://hackernoon.com/why-i-love-golang-90085898b4f7</a></li><li id="14d1" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nn no np nq bi translated"><a class="ae kw" href="https://sendgrid.com/blog/convince-company-go-golang/" rel="noopener ugc nofollow" target="_blank">https://sendgrid.com/blog/convince-company-go-golang/</a></li><li id="b441" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nn no np nq bi translated"><a class="ae kw" href="https://dave.cheney.net/2017/03/20/why-go" rel="noopener ugc nofollow" target="_blank">https://dave.cheney.net/2017/03/20/why-go</a></li></ul><h1 id="bb32" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">去学习吧</h1><ul class=""><li id="3678" class="ni nj iq ka b kb ma kf mb kj ny kn nz kr oa kv nn no np nq bi translated"><a class="ae kw" href="https://learnxinyminutes.com/docs/go/" rel="noopener ugc nofollow" target="_blank">https://learnxinyminutes.com/docs/go/</a></li><li id="ac4e" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nn no np nq bi translated"><a class="ae kw" href="https://tour.golang.org/" rel="noopener ugc nofollow" target="_blank">https://tour.golang.org/</a></li><li id="a04e" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nn no np nq bi translated"><a class="ae kw" href="http://howistart.org/posts/go/1/" rel="noopener ugc nofollow" target="_blank">http://howistart.org/posts/go/1/</a></li><li id="9cb7" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nn no np nq bi translated"><a class="ae kw" href="https://getstream.io/blog/building-a-performant-api-using-go-and-cassandra/" rel="noopener ugc nofollow" target="_blank">https://getstream . io/blog/building-a-performant-API-using-go-and-Cassandra/</a></li><li id="6b44" class="ni nj iq ka b kb nr kf ns kj nt kn nu kr nv kv nn no np nq bi translated"><a class="ae kw" href="https://www.amazon.com/gp/product/0134190440" rel="noopener ugc nofollow" target="_blank">https://www.amazon.com/gp/product/0134190440</a></li></ul><figure class="lw lx ly lz gt jr"><div class="bz fp l di"><div class="ob oc l"/></div></figure></div></div>    
</body>
</html>