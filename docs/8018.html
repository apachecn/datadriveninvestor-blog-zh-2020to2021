<html>
<head>
<title>K-Means Clustering in Google BigQuery ML</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Google BigQuery MLä¸­çš„K-Meansèšç±»</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.datadriveninvestor.com/k-means-clustering-in-google-bigquery-ml-b02907a961a8?source=collection_archive---------1-----------------------#2020-12-30">https://medium.datadriveninvestor.com/k-means-clustering-in-google-bigquery-ml-b02907a961a8?source=collection_archive---------1-----------------------#2020-12-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="44d1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">å…³äºGoogle BigQuery (data+ML)ä¸­æœ€æµè¡Œå’Œæœ€å®ç”¨çš„é›†ç¾¤æŠ€æœ¯çš„å®Œæ•´æŒ‡å—</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/68e8b2771b55a98cab1478fdb9446e69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/1*Nx6IyGfRAV1ly6uDGnVCxQ.gif"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Get this image on <a class="ae kr" href="https://commons.wikimedia.org/wiki/File:K-means_convergence.gif" rel="noopener ugc nofollow" target="_blank">Wikimedia Commons</a> | <a class="ae kr" href="https://creativecommons.org/licenses/by-sa/4.0" rel="noopener ugc nofollow" target="_blank">License details</a></figcaption></figure><p id="0baf" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">åœ¨æœ¬å¸–ä¸­ï¼Œè¯¦ç»†å±•ç¤ºäº†K-meansèšç±»åœ¨Googleäº‘å¹³å°(BigQuery)ä¸­çš„å®ç°ã€‚ä»»ä½•ä»¥å‰æ²¡æœ‰æ¥è§¦è¿‡Googleäº‘å †æ ˆçš„äººéƒ½åº”è¯¥èƒ½å¤Ÿå¾ˆå®¹æ˜“åœ°ç†è§£ã€‚</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lo"><img src="../Images/3f4a7add883feaea7783f04f90f73b2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G7wDiMXnyk9iFdAArbNEJA.jpeg"/></div></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk"><a class="ae kr" href="https://decipherzone.com/" rel="noopener ugc nofollow" target="_blank">License details</a> Creator: Decipher Zone Softwares Copyright: Created by Decipher Zone Softwares (Free to use content)</figcaption></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h2 id="b3da" class="ma mb iq bd mc md me dn mf mg mh dp mi lb mj mk ml lf mm mn mo lj mp mq mr ms bi translated">è¿™ç¯‡æ–‡ç« é€‚åˆä½ ï¼Œå¦‚æœä½ æ˜¯:</h2><ul class=""><li id="87f9" class="mt mu iq ku b kv mv ky mw lb mx lf my lj mz ln na nb nc nd bi translated">å¯¹æœ€å¸¸è§çš„ä¸šåŠ¡é—®é¢˜å’Œå¯ä»¥ç”¨æ¥è§£å†³å®ƒçš„å·¥å…·æ„Ÿåˆ°å¥½å¥‡å—</li><li id="a137" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln na nb nc nd bi translated">é™·å…¥ç¼–ç Kâ€”â€”æ„å‘³ç€è¦ä¹ˆç”¨Pythonè¦ä¹ˆç”¨Rè¿›è¡Œé›†ç¾¤ï¼Œå¹¶ä¸”æƒ³è¦æ¢ç´¢</li><li id="4dc6" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln na nb nc nd bi translated">é›¶åˆ°è¾ƒå°‘çš„è°·æ­Œäº‘å¹³å°ç»éªŒ</li><li id="a135" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln na nb nc nd bi translated">ä¸ç¡®å®šå®Œæ•´çš„Kå‡å€¼èšç±»é€æ­¥æ¼”ç»ƒ<br/>(å®šä¹‰é—®é¢˜ã€åˆ›å»ºæ¨¡å‹ã€è§£é‡Š)</li><li id="c790" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln na nb nc nd bi translated">æƒ³å­¦ä¹ å¾ˆé…·çš„æ•°æ®ç§‘å­¦çš„ä¸œè¥¿(è€Œä¸”å®é™…ä¸Šå¾ˆæœ‰ç”¨)</li></ul><h2 id="123a" class="ma mb iq bd mc md me dn mf mg mh dp mi lb mj mk ml lf mm mn mo lj mp mq mr ms bi translated">è¿™ç¯‡æ–‡ç« ä¸é€‚åˆä½ ï¼Œå¦‚æœä½ æ˜¯:</h2><ul class=""><li id="d54f" class="mt mu iq ku b kv mv ky mw lb mx lf my lj mz ln na nb nc nd bi translated">è¯•å›¾è·å¾—k-meansèšç±»çš„åŸºæœ¬å­—å…¸ç†è§£</li><li id="689a" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln na nb nc nd bi translated">å·²ç»æ˜¯MLçš„ä¸“å®¶äº†</li><li id="0822" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln na nb nc nd bi translated">æƒ³å­¦Python/R</li><li id="c5ca" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln na nb nc nd bi translated">æƒ³ç¼–ç å—</li></ul><p id="9706" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">ä½†æ˜¯å¯¹äºé‚£äº›æƒ³é‡æ¸©kå‡å€¼èšç±»æ˜¯ä»€ä¹ˆçš„äººæ¥è¯´ï¼Œ</p><p id="2461" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir"> K-meansæ¦‚è¿°</strong></p><ol class=""><li id="bd1d" class="mt mu iq ku b kv kw ky kz lb nj lf nk lj nl ln nm nb nc nd bi translated">è¯¥è¿‡ç¨‹ä»éšæœºåˆå§‹åŒ–kä¸ªè´¨å¿ƒå¼€å§‹ã€‚</li><li id="5909" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln nm nb nc nd bi translated">è¿™äº›è´¨å¿ƒç”¨äºå°†ç‚¹åˆ†é…ç»™å®ƒä»¬æœ€è¿‘çš„ç°‡ã€‚</li><li id="ccef" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln nm nb nc nd bi translated">ç„¶åï¼Œä½¿ç”¨èšç±»å†…æ‰€æœ‰ç‚¹çš„å¹³å‡å€¼æ¥æ›´æ–°è´¨å¿ƒçš„ä½ç½®ã€‚</li><li id="7d39" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln nm nb nc nd bi translated">é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°è´¨å¿ƒçš„å€¼ç¨³å®šã€‚</li></ol><p id="e7a4" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><em class="nn">ã€å‚è€ƒã€‘(</em><a class="ae kr" href="https://blog.cambridgespark.com/how-to-determine-the-optimal-number-of-clusters-for-k-means-clustering-14f27070048f" rel="noopener ugc nofollow" target="_blank"><em class="nn">https://blog . Cambridge spark . com/how-to-determine-the-optimal-number-of-clusters-for-k-means-clustering-14f 27070048 f</em></a><em class="nn">)</em></p><p id="f999" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">å¥½çš„ã€‚è®©æˆ‘ä»¬å¼€å§‹å§</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi no"><img src="../Images/d557715a056b50b2a89c20a6c6d65d32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hRKCj38yzEKtA0Vw"/></div></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Photo by <a class="ae kr" href="https://unsplash.com/@hasinhayder?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Hasin Hayder</a> on <a class="ae kr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="26b4" class="np mb iq bd mc nq nr ns mf nt nu nv mi jw nw jx ml jz nx ka mo kc ny kd mr nz bi translated">åŠ¨æœº</h1><p id="cc91" class="pw-post-body-paragraph ks kt iq ku b kv mv jr kx ky mw ju la lb oa ld le lf ob lh li lj oc ll lm ln ij bi translated">å¦‚æœæ‚¨ç›®å‰æ˜¯ä¸€åæ•°æ®åˆ†æå¸ˆ/ç§‘å­¦å®¶/ä¸šåŠ¡åˆ†æå¸ˆï¼Œæˆ–è€…å¦‚æœæ‚¨æ˜¯ä¸€åæœ‰æŠ±è´Ÿçš„æ•°æ®ä¸“ä¸šäººå£«ï¼Œæ‚¨å¯èƒ½è‡³å°‘æ›¾ç»é‡åˆ°è¿‡(æˆ–å¬è¯´è¿‡)<strong class="ku ir">åˆ†ç±»æˆ–èšç±»é—®é¢˜</strong>ã€‚å®ƒæ˜¯ç°å®å•†ä¸šæ¡ˆä¾‹ä¸­æœ€å¸¸è§çš„é—®é¢˜ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯å¯¹å„ç§å•†ä¸šå†³ç­–å½±å“æœ€å¤§çš„é—®é¢˜(æ ¹æ®æˆ‘çš„ç»éªŒ)ã€‚</p><p id="0e2d" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">å°½ç®¡å¦‚æ­¤ï¼Œåœ¨è®¸å¤šå•†ä¸šç»„ç»‡ä¸­ï¼Œèšç±»é€šå¸¸æ˜¯ç”±æœ€ä¼˜ç§€çš„äºº(é«˜çº§æˆå‘˜æˆ–é«˜ç®¡)æ¥è¿›è¡Œçš„ã€‚ä¾‹å¦‚ï¼Œæ¯æœˆçš„è¥é”€é¢„ç®—ç®€å•åœ°æ ¹æ®å—ä¼—çš„å¹´é¾„ç»„æ¥å†³å®š(å³ï¼Œä¸è€ƒè™‘æ¶ˆè´¹ä¹ æƒ¯ã€è®¿é—®é¢‘ç‡)ã€‚ä½œä¸ºæ•°æ®ä¸“ä¸šäººå‘˜ï¼Œè¿™æ˜¯ä¸€ä¸ªç¦å¿Œã€‚</p><p id="bd14" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">æˆ‘ä»¬å¸Œæœ›åˆ©ç”¨æ•°æ®ç§‘å­¦æ¥æŒ‡å¯¼å›¢é˜Ÿåšå‡ºæ›´å¤æ‚çš„çŒœæµ‹ã€‚</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi od"><img src="../Images/ca022fef566a48be6517c0648b0900ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m-JXd2br2e5uJlrSxA-wvg.jpeg"/></div></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk"><a class="ae kr" href="https://www.istockphoto.com/legal/license-agreement?utm_medium=organic&amp;utm_source=google&amp;utm_campaign=iptcurl" rel="noopener ugc nofollow" target="_blank">License details</a> Creator: structuresxx | Credit: Getty Images/iStockphoto</figcaption></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="383a" class="np mb iq bd mc nq nr ns mf nt nu nv mi jw nw jx ml jz nx ka mo kc ny kd mr nz bi translated">ä»€ä¹ˆæ˜¯Google BigQueryï¼Ÿ</h1><p id="bac5" class="pw-post-body-paragraph ks kt iq ku b kv mv jr kx ky mw ju la lb oa ld le lf ob lh li lj oc ll lm ln ij bi translated">Google BigQueryå¯ä»¥æä¾›å¾ˆå¤§çš„å¸®åŠ©ã€‚</p><p id="518b" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">æˆ‘<strong class="ku ir">ä¿è¯</strong>ä½ å¯¹ä¸€ç§æ–°æ–¹æ³•çš„å­¦ä¹ èƒ½å¤Ÿæœ‰ç›Šäºåœ¨é«˜çº§ç¼–ç¨‹è¯­è¨€ä¸­åº”ç”¨ç›¸åŒçš„æ¦‚å¿µ(<em class="nn">æ‰€ä»¥è¯·é€šè¯»</em>)</p><p id="f8cf" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">åœ¨å¤§å¤šæ•°æ•°å­—ç»„ç»‡ä¸­ï¼Œæ¯ä¸ªç»„ç»‡éƒ½æœ‰è‡ªå·±çš„å­˜å‚¨æŸç§æ•°æ®çš„æ•°æ®åº“ï¼Œè®¸å¤šç»„ç»‡å·²ç»å°†Google BigQueryä½œä¸ºä»–ä»¬çš„ä¸»è¦SQLæ•°æ®åº“ã€‚å› æ­¤ï¼Œäº†è§£Google BigQueryçš„åŠŸèƒ½/å¯ä¼¸ç¼©æ€§æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå®ƒå¯ä»¥é€šè¿‡è®¸å¤šä¸åŒçš„æ–¹å¼è¿›è¡Œæ‰©å±•ã€‚</p><blockquote class="oe of og"><p id="0261" class="ks kt nn ku b kv kw jr kx ky kz ju la oh lc ld le oi lg lh li oj lk ll lm ln ij bi translated">BigQueryæ˜¯ä¸€ä¸ªå®Œå…¨æ‰˜ç®¡çš„ã€æ— æœåŠ¡å™¨çš„æ•°æ®ä»“åº“ï¼Œèƒ½å¤Ÿå¯¹æ•°Pbçš„æ•°æ®è¿›è¡Œå¯æ‰©å±•çš„åˆ†æã€‚å®ƒæ˜¯ä¸€ä¸ªå¹³å°å³æœåŠ¡ï¼Œæ”¯æŒä½¿ç”¨ANSI SQLè¿›è¡ŒæŸ¥è¯¢ã€‚å®ƒè¿˜å…·æœ‰å†…ç½®çš„æœºå™¨å­¦ä¹ åŠŸèƒ½</p></blockquote><div class="ok ol gp gr om on"><a href="https://en.wikipedia.org/wiki/BigQuery" rel="noopener  ugc nofollow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd ir gy z fp os fr fs ot fu fw ip bi translated">BigQuery</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">BigQueryæ˜¯ä¸€ä¸ªå®Œå…¨æ‰˜ç®¡çš„ã€æ— æœåŠ¡å™¨çš„æ•°æ®ä»“åº“ï¼Œèƒ½å¤Ÿå¯¹æ•°Pbçš„æ•°æ®è¿›è¡Œå¯æ‰©å±•çš„åˆ†æã€‚è¿™æ˜¯ä¸€ä¸ªâ€¦</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">en.wikipedia.org</p></div></div></div></a></div><p id="07da" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><em class="nn">æœ¬æ–‡æ€»ç»“äº†ã€è°·æ­Œäº‘ç½‘ç«™ã€‘ä¸Šçš„å®˜æ–¹æ–‡æ¡£(</em><a class="ae kr" href="https://cloud.google.com/bigquery-ml/docs/kmeans-tutorial" rel="noopener ugc nofollow" target="_blank"><em class="nn">ã€https://cloud.google.com/bigquery-ml/docs/kmeans-tutorialã€‘</em></a><em class="nn">)</em></p><p id="88c6" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">å¯¹äºé‚£äº›ä»…ä»…å°†Google BigQueryè§†ä¸ºæ•°æ®åº“çš„äººæ¥è¯´ï¼Œä½ å¯èƒ½ä¼šæ„Ÿåˆ°æƒŠè®¶ã€‚</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h2 id="1251" class="ma mb iq bd mc md me dn mf mg mh dp mi lb mj mk ml lf mm mn mo lj mp mq mr ms bi translated">ç›®å½•</h2><p id="80cc" class="pw-post-body-paragraph ks kt iq ku b kv mv jr kx ky mw ju la lb oa ld le lf ob lh li lj oc ll lm ln ij bi translated">æœ¬æ–‡çš„å…ˆå†³æ¡ä»¶å¯èƒ½æ˜¯SQLï¼Œä½†æ²¡æœ‰å¿…è¦ã€‚</p><ol class=""><li id="82a5" class="mt mu iq ku b kv kw ky kz lb nj lf nk lj nl ln nm nb nc nd bi translated">åˆ›å»ºæ–°çš„GCPé¡¹ç›®</li><li id="ca19" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln nm nb nc nd bi translated">åŠ è½½æ¼”ç¤ºæ•°æ®</li><li id="bcfb" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln nm nb nc nd bi translated">åˆ›å»ºæ•°æ®é›†(å­˜å‚¨æ¨¡å‹)</li><li id="b250" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln nm nb nc nd bi translated">æ£€æŸ¥æ•°æ®</li><li id="c2b0" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln nm nb nc nd bi translated">ç¼–å†™ä¸€ä¸ªSQLæŸ¥è¯¢</li><li id="f5f0" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln nm nb nc nd bi translated">åˆ›å»ºKå‡å€¼èšç±»æ¨¡å‹</li><li id="488a" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln nm nb nc nd bi translated">ä½¿ç”¨â€œml.predictâ€å‡½æ•°é¢„æµ‹åˆ†ç±»</li><li id="6ecb" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln nm nb nc nd bi translated">å•†ä¸šè§è§£/ç»“è®º</li><li id="096c" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln nm nb nc nd bi translated">(å¯é€‰)åˆ é™¤æ•°æ®é›†</li></ol><h2 id="bc85" class="ma mb iq bd mc md me dn mf mg mh dp mi lb mj mk ml lf mm mn mo lj mp mq mr ms bi translated">å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„</h2><h2 id="6056" class="ma mb iq bd mc md me dn mf mg mh dp mi lb mj mk ml lf mm mn mo lj mp mq mr ms bi translated">1.åˆ›å»ºæ–°çš„GCPé¡¹ç›®</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ow"><img src="../Images/60edaec72da2c5290e1f8d19190f6ace.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NhFLCADxmONjDxTApM2ZDg.png"/></div></div></figure><p id="3919" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">å¦‚æœæ‚¨è¿˜æ²¡æœ‰è°·æ­Œäº‘å¹³å°å¸æˆ·ï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°åˆ›å»ºä¸€ä¸ªã€‚ç‚¹å‡»è°·æ­Œäº‘ç½‘ç«™ä¸Šçš„â€œå…è´¹å…¥é—¨â€åï¼ŒæŒ‰ç…§æ­¥éª¤è¿›è¡Œæ“ä½œã€‚è¿™å¾ˆç®€å•ã€‚</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ox"><img src="../Images/945222cdad221f4a4b54fde1a1539f5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mfuMVHefPLfIHE1fBjjlAg.png"/></div></div></figure><p id="fe24" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">ç„¶åï¼Œç™»å½•ã€https://console.cloud.google.com/homeæ§åˆ¶å°ã€‘(<a class="ae kr" href="https://console.cloud.google.com/home" rel="noopener ugc nofollow" target="_blank"/>)ï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ°è¿™æ ·çš„ä¸œè¥¿</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi oy"><img src="../Images/a1f96c2f1db2b50318cf4101dfddaa8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IZ2MLR_IzO2_SF-n5sC6DA.png"/></div></div></figure><p id="dda5" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">å¯¹äºæœ¬æ¼”ç»ƒï¼Œæˆ‘å°†åœ¨è¿™é‡Œåˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ã€‚ç‚¹å‡»å·¦ä¸Šè§’çš„â€œé€‰æ‹©é¡¹ç›®â€ï¼Œç‚¹å‡»é‡Œé¢çš„â€œæ–°å»ºé¡¹ç›®â€ã€‚</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi oz"><img src="../Images/bc70fd282d4e3a4826b050368a990ec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SOLUanN8aqN61uh63JlHcg.png"/></div></div></figure><p id="b2b4" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">å‘½åæ‚¨çš„é¡¹ç›®ï¼Œç„¶åå•å‡»â€œåˆ›å»ºâ€ã€‚ç„¶åé¡¹ç›®è¢«åˆ›å»ºã€‚æ‚¨å¯ä»¥åœ¨ä»ªè¡¨æ¿æ ¼å¼ä¸­æŸ¥çœ‹é¡¹ç›®çš„åŸºæœ¬ä¿¡æ¯ã€‚</p><p id="b86f" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">æˆ‘ä»¬å°†ä½¿ç”¨BigQueryï¼Œå› æ­¤åœ¨å·¦ä¾§çª—æ ¼ä¸­æ‰¾åˆ°å¹¶å•å‡»<strong class="ku ir">ã€å¤§æ•°æ®ã€‘</strong>â†’<strong class="ku ir">ã€Big queryã€‘</strong>ã€‚</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi pa"><img src="../Images/ce1a3af7675b1d651ed6ee68f9506300.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-0581q-2Dy2u8PrG1mnekA.png"/></div></div></figure><p id="5af1" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡åœ¨Googleäº‘å¹³å°ä¸Šä½¿ç”¨BigQueryï¼Œä½ ä¼šçœ‹åˆ°è¿™ä¸ªã€‚ç‚¹å‡»<strong class="ku ir">â€˜å¯ç”¨â€™</strong></p><h2 id="64f2" class="ma mb iq bd mc md me dn mf mg mh dp mi lb mj mk ml lf mm mn mo lj mp mq mr ms bi translated">2.åŠ è½½æ¼”ç¤ºæ•°æ®</h2><p id="1c3f" class="pw-post-body-paragraph ks kt iq ku b kv mv jr kx ky mw ju la lb oa ld le lf ob lh li lj oc ll lm ln ij bi translated">BigQueryæœ‰è®¸å¤šæ¼”ç¤ºæ•°æ®é›†ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥å…è´¹ä½¿ç”¨ã€‚åœ¨è¿™ä¸ªå…·ä½“çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨â€œä¼¦æ•¦è‡ªè¡Œè½¦ç§Ÿèµâ€æ•°æ®é›†æ¥æ„å»ºK-meansèšç±»ã€‚</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/347068f7d1b6bbc626c2bf1ceaa7b6ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*G51-norkUpJ0jTLeXPbf6g.png"/></div></figure><p id="0d2c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">é¦–å…ˆï¼Œåœ¨å·¦ä¾§çª—æ ¼ä¸­æ‰¾åˆ°<strong class="ku ir">"+æ·»åŠ æ•°æ®"</strong>ï¼Œç‚¹å‡»<strong class="ku ir">â€˜æ¢ç´¢å…¬å…±æ•°æ®é›†â€™</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi pc"><img src="../Images/8ae44855acfe25b29a8b86453fc4c34f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*agG3N5IG08Gnpxv7ixBW5A.png"/></div></div></figure><p id="40db" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">æœç´¢<strong class="ku ir">â€œä¼¦æ•¦è‡ªè¡Œè½¦å‡ºç§Ÿâ€</strong>ï¼Œç‚¹å‡»<strong class="ku ir">â€œæŸ¥çœ‹æ•°æ®é›†â€</strong></p><p id="a7b0" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">ç„¶åä½ å¯ä»¥çœ‹åˆ°å·¦ä¸‹è§’æ·»åŠ äº†<strong class="ku ir">â€œbig query-public-dataâ€</strong>DBã€‚å¦‚æœå‘ä¸‹æ»šåŠ¨<em class="nn">ã€</em>æ—¶çœ‹åˆ°<em class="nn">London _ bikes</em>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å‡†å¤‡å¥½äº†ï¼</p><h2 id="a4af" class="ma mb iq bd mc md me dn mf mg mh dp mi lb mj mk ml lf mm mn mo lj mp mq mr ms bi translated">3.åˆ›å»ºæ•°æ®é›†(å­˜å‚¨æ¨¡å‹)</h2><p id="5b1d" class="pw-post-body-paragraph ks kt iq ku b kv mv jr kx ky mw ju la lb oa ld le lf ob lh li lj oc ll lm ln ij bi translated">ä¸ºäº†åœ¨BigQueryä¸­åˆ›å»ºK-meansèšç±»æ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªâ€œæ•°æ®é›†â€æ¥ä¿å­˜æˆ‘ä»¬å°†è¦æ„å»ºçš„æ¨¡å‹ã€‚</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi pd"><img src="../Images/dbe2dbabae16aab52a0356e27fc976e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hgY4vaBPqWw81xJ3cu0ZcQ.png"/></div></div></figure><p id="35c5" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">ä¸ºæ­¤ï¼Œå•å‡»æ‚¨åœ¨æ­¥éª¤1ä¸­åˆ›å»ºçš„<strong class="ku ir">é¡¹ç›®ID </strong>(åœ¨æˆ‘çš„ä¾‹å­ä¸­ä¸º<strong class="ku ir"> my-project 0623 </strong>)ï¼Œç„¶åå•å‡»ç›‘è§†å™¨å³ä¾§çš„â€œåˆ›å»ºæ•°æ®é›†â€</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi pe"><img src="../Images/03035c8eae0b69dc48c1e85f15fc1e4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S23B8PcLQDyKZz_UZfQZXQ.png"/></div></div></figure><p id="eacc" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">å°†<strong class="ku ir"> k_means_tutorial </strong>æ”¾å…¥Dataset IDä¸­ï¼Œå¹¶ç¡®ä¿åœ¨æ•°æ®ä½ç½®<em class="nn">ä¸­é€‰æ‹©'<strong class="ku ir"> EU </strong>'(ä¼¦æ•¦è‡ªè¡Œè½¦æ•°æ®å­˜å‚¨åœ¨EUå¤šåŒºåŸŸä¸­ï¼Œå› æ­¤è¯¥æ•°æ®é›†ä¹Ÿåº”è¯¥ä½äºåŒä¸€åŒºåŸŸä¸­)ã€‚</em>ä¿æŒå…¶ä»–è®¾ç½®ä¸å˜ï¼Œç‚¹å‡»â€œåˆ›å»ºæ•°æ®é›†â€ã€‚</p><h2 id="690a" class="ma mb iq bd mc md me dn mf mg mh dp mi lb mj mk ml lf mm mn mo lj mp mq mr ms bi translated">4.æ£€æŸ¥æ•°æ®é›†</h2><p id="8114" class="pw-post-body-paragraph ks kt iq ku b kv mv jr kx ky mw ju la lb oa ld le lf ob lh li lj oc ll lm ln ij bi translated">å¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨çš„æ•°æ®é›†æ˜¯<code class="fe pf pg ph pi b">london_bicycles</code>æ•°æ®é›†ï¼Œæˆ‘ä»¬å°†æ ¹æ®ä»¥ä¸‹ä¸‰ä¸ªç‰¹å¾å¯¹è‡ªè¡Œè½¦ç«™è¿›è¡Œèšç±»:</p><ul class=""><li id="33c8" class="mt mu iq ku b kv kw ky kz lb nj lf nk lj nl ln na nb nc nd bi translated">ç§Ÿèµé•¿åº¦</li><li id="0159" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln na nb nc nd bi translated">æ—¥ç§Ÿæ¬¡æ•°</li><li id="3086" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln na nb nc nd bi translated">ç¦»åŸå¸‚çš„è·ç¦»</li></ul><p id="a24c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><code class="fe pf pg ph pi b">london_bicycles</code>æ•°æ®é›†æœ‰ä¸¤ä¸ªè¡¨(cycle_hireå’Œcycle_stations)ã€‚æ‚¨å¯ä»¥å•å‡»æ¯ä¸ªæ•°æ®é›†æ¥æŸ¥çœ‹æ¯ä¸ªè¡¨ä¸­çš„åˆ—ã€‚</p><p id="14d2" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir"> cycle_hire </strong>:ä»¥rental_idå’Œbike_idä¸ºå…³é”®å­—çš„ç§Ÿèµè¡¨ï¼Œå…¶ä¸­åŒ…å«æ¯æ¬¡è‡ªè¡Œè½¦ç§Ÿèµçš„æŒç»­æ—¶é—´å’Œèµ·æ­¢ç«™ç‚¹ä¿¡æ¯</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi pj"><img src="../Images/c466008e00c59aaefebbd9d8d08986fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c43CA6OC-QNlrIzQ1HUbQg.png"/></div></div></figure><p id="8107" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir"> cycle_stations </strong>:è‡ªè¡Œè½¦ç§Ÿèµç«™çš„æ•°æ®(ç»åº¦/çº¬åº¦å’Œæ¯ä¸ªç«™ç‚¹çš„è‡ªè¡Œè½¦æ•°é‡)</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi pk"><img src="../Images/8c225a99fee4d3225870ce31169637f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eyz76rzFowklAybn_Hm_Rg.png"/></div></div></figure><h2 id="d628" class="ma mb iq bd mc md me dn mf mg mh dp mi lb mj mk ml lf mm mn mo lj mp mq mr ms bi translated">5.ç¼–å†™ä¸€ä¸ªSQLæŸ¥è¯¢</h2><p id="381c" class="pw-post-body-paragraph ks kt iq ku b kv mv jr kx ky mw ju la lb oa ld le lf ob lh li lj oc ll lm ln ij bi translated">æˆ‘ä»¬å°†ç”¨æ¥å¯¹ç«™è¿›è¡Œèšç±»çš„å˜é‡æœ‰</p><ul class=""><li id="24d4" class="mt mu iq ku b kv kw ky kz lb nj lf nk lj nl ln na nb nc nd bi translated">ç§Ÿèµé•¿åº¦</li><li id="aabc" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln na nb nc nd bi translated">æ—¥ç§Ÿæ¬¡æ•°</li><li id="4402" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln na nb nc nd bi translated">ç¦»åŸå¸‚çš„è·ç¦»</li></ul><p id="376b" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">å°†é¼ æ ‡æ‚¬åœåœ¨æˆ‘ä»¬åˆ›å»ºçš„<strong class="ku ir"> k_means_tutorial </strong>é¡¹ç›®ä¸Šï¼Œå°†ä¸‹é¢çš„SQLæŸ¥è¯¢å¤åˆ¶+ç²˜è´´åˆ°â€œ<strong class="ku ir">æŸ¥è¯¢ç¼–è¾‘å™¨â€</strong>ä¸­ï¼Œ<strong class="ku ir">ç‚¹å‡»â€œè¿è¡Œâ€</strong></p><pre class="kg kh ki kj gt pl pi pm pn aw po bi"><span id="8990" class="ma mb iq pi b gy pp pq l pr ps">with hs as (<br/>    select <br/>        h.start_station_name as station_name<br/>        ,if (extract(dayofweek from h.start_date) = 7 or<br/>            extract(dayofweek from h.start_date) = 1,<br/>            "weekend","weekday") as isweekday<br/>        ,h.duration<br/>        ,st_distance(st_geogpoint(s.longitude, s.latitude), st_geogpoint(-0.1, 51.5)) / 1000 as distance_from_city_center<br/>    from `bigquery-public-data.london_bicycles.cycle_hire`as h<br/>    join `bigquery-public-data.london_bicycles.cycle_stations`as s<br/>    on h.start_station_id = s.id <br/>    where h.start_date between cast('2015-01-01 00:00:00' as timestamp) and<br/>        cast('2016-01-01 00:00:00' as timestamp)<br/>),<br/>    stationstats as (<br/>        select <br/>            station_name<br/>            ,avg(duration) as duration<br/>            ,count(duration) as num_trips<br/>            ,max(distance_from_city_center) as distance_from_city_center<br/>        from hs <br/>        group by station_name<br/>)<br/><br/>select *<br/>from stationstats <br/>order by distance_from_city_center</span></pre><p id="0b88" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">åœ¨â€œæŸ¥è¯¢ç»“æœâ€éƒ¨åˆ†ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi pt"><img src="../Images/8189d8121b01c767eec2f2f041187997.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MFKJKFkR46ikP16y3MrcdQ.png"/></div></div></figure><p id="21e6" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">æˆ‘ä¸æ‰“ç®—è¯¦ç»†è®¨è®ºSQLæŸ¥è¯¢ï¼Œå› ä¸ºè¿™ä¸æ˜¯ä¸€ç¯‡SQLæ•™ç¨‹æ–‡ç« ã€‚ç®€è€Œè¨€ä¹‹ï¼Œ</p><ul class=""><li id="ac08" class="mt mu iq ku b kv kw ky kz lb nj lf nk lj nl ln na nb nc nd bi translated">æˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªä¸´æ—¶è¡¨â€˜hsâ€™å’Œâ€˜station statsâ€™ä½œä¸ºå­æŸ¥è¯¢ã€‚</li><li id="3e3a" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln na nb nc nd bi translated">â€œhsâ€åœ¨æ¯è¡Œä¸­ç»™å‡ºäº†2015å¹´åŠ æ²¹ç«™çš„ä¿¡æ¯(åç§°ã€æ˜ŸæœŸå‡ ã€ç§ŸèµæœŸé™ã€è·ç¦»åŸå¸‚çš„è·ç¦»)</li><li id="e21b" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln na nb nc nd bi translated">ç„¶ååœ¨â€œstationstatsâ€è¡¨ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨èšåˆå‡½æ•°æ¥è®¡ç®—å­˜å‚¨åœ¨â€œhsâ€è¡¨ä¸­çš„ä¸€äº›é‡è¦çš„ç»Ÿè®¡æ•°æ®</li></ul><h2 id="8dc2" class="ma mb iq bd mc md me dn mf mg mh dp mi lb mj mk ml lf mm mn mo lj mp mq mr ms bi translated">6.åˆ›å»ºKå‡å€¼èšç±»æ¨¡å‹</h2><p id="91e3" class="pw-post-body-paragraph ks kt iq ku b kv mv jr kx ky mw ju la lb oa ld le lf ob lh li lj oc ll lm ln ij bi translated">ç°åœ¨æˆ‘ä»¬äº†è§£äº†BigQueryçš„åŸºæœ¬é€»è¾‘ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªK-meansèšç±»æ¨¡å‹ã€‚</p><p id="f35d" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">æˆ‘ä»¬å¯ä»¥åˆ¶ä½œä¸€ä¸ª<code class="fe pf pg ph pi b">create model</code>ï¼Œç”¨model_type = 'kmeans 'æ¥è®­ç»ƒèšç±»æ¨¡å‹ã€‚</p><p id="10cf" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">å†æ¬¡å¤åˆ¶+ç²˜è´´ä¸‹é¢çš„å†…å®¹ï¼Œç„¶å<strong class="ku ir">ç‚¹å‡»â€˜è¿è¡Œâ€™</strong></p><pre class="kg kh ki kj gt pl pi pm pn aw po bi"><span id="0666" class="ma mb iq pi b gy pp pq l pr ps">create or replace model<br/>  k_means_tutorial.london_station_clusters OPTIONS(model_type='kmeans',num_clusters=4) as<br/>with hs as (<br/>    select <br/>        h.start_station_name as station_name<br/>        ,if (extract(dayofweek from h.start_date) = 7 or<br/>            extract(dayofweek from h.start_date) = 1,<br/>            "weekend","weekday") as isweekday<br/>        ,h.duration<br/>        ,st_distance(st_geogpoint(s.longitude, s.latitude), st_geogpoint(-0.1, 51.5)) / 1000 as distance_from_city_center<br/>    from `bigquery-public-data.london_bicycles.cycle_hire`as h<br/>     join `bigquery-public-data.london_bicycles.cycle_stations`as s<br/>    on h.start_station_id = s.id <br/>    where h.start_date between cast('2015-01-01 00:00:00' as timestamp) and<br/>        cast('2016-01-01 00:00:00' as timestamp)<br/>),<br/>    stationstats as (<br/>        select <br/>            station_name<br/>            , isweekday<br/>            ,avg(duration) as duration<br/>            ,count(duration) as num_trips<br/>            ,max(distance_from_city_center) as distance_from_city_center<br/>        from hs <br/>        group by station_name, isweekday<br/>)<br/>select * except(station_name, isweekday)<br/>from stationstats <br/>order by distance_from_city_center</span></pre><p id="39d8" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">è¿™ä¸ªSQLæŸ¥è¯¢ä¸å‰ä¸€ä¸ªæŸ¥è¯¢çš„ä¸åŒä¹‹å¤„ä»…åœ¨äº<strong class="ku ir">çš„ä¸¤ä¸ªéƒ¨åˆ†</strong>ã€‚</p><ul class=""><li id="9eb9" class="mt mu iq ku b kv kw ky kz lb nj lf nk lj nl ln na nb nc nd bi translated">æˆ‘ä»¬åœ¨ä¸Šé¢åˆ¶ä½œçš„<em class="nn"> k_means_tutorial </em>æ•°æ®é›†ä¸­æ·»åŠ äº†ä¸€è¡Œæ¥åˆ›å»ºæ¨¡å‹ï¼Œç»“æœå­˜å‚¨ä¸º<code class="fe pf pg ph pi b">london_station_clusters</code></li></ul><pre class="kg kh ki kj gt pl pi pm pn aw po bi"><span id="ba50" class="ma mb iq pi b gy pp pq l pr ps">create or replace model<br/>  bqml_tutorial.london_station_clusters options (model_type='kmeans',num_clusters=4) as</span></pre><ul class=""><li id="44fd" class="mt mu iq ku b kv kw ky kz lb nj lf nk lj nl ln na nb nc nd bi translated">stationstatsè¡¨ä¸­çš„' groupby 'æŸ¥è¯¢ä¸­æ–°å¢äº†ä¸€åˆ—' isweekday 'ï¼Œè¿˜å¢åŠ äº†<code class="fe pf pg ph pi b">except (station_name, isweekday)</code>ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æƒ³çœ‹çœ‹å·¥ä½œæ—¥/å‘¨æœ«å¦‚ä½•å½±å“ç§Ÿèµä»·æ ¼ã€‚å¦å¤–ï¼Œ<strong class="ku ir"> Except (column) </strong>æŸ¥è¯¢æ’é™¤æ‹¬å·å†…çš„åˆ—å</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi pu"><img src="../Images/af9307cdadbe71c1c267e3b6f7d08ec3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xCQZbumNImTIulYatfxTQw.png"/></div></div></figure><p id="586d" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">ä¸€æ—¦å®Œæˆï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ°è¿™æ ·çš„ä¸œè¥¿ã€‚ç‚¹å‡»<strong class="ku ir">â€˜è½¬åˆ°æ¨¡å‹â€™</strong>ï¼Œå³å¯æŸ¥çœ‹è¯¦æƒ…ã€‚</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi pv"><img src="../Images/0c1bf49d93032a95005494c9f29ac14f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R4mqNDq6Gt01ymv-FZ-zQQ.png"/></div></div></figure><p id="94f8" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">å¦‚æœä½ ç‚¹å‡»â€œSchema â€,ä½ å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ¨¡å‹æ˜¯ç”¨ä¸‰åˆ—<code class="fe pf pg ph pi b">(duration, num_trips, distance_from_city_center)</code>æ¥è®­ç»ƒçš„</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi pw"><img src="../Images/590154d93cceb987909be44881e95b70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2stMqZy4eVWyGcjGQRtA4g.png"/></div></div></figure><p id="e7d3" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">å¦‚æœæ‚¨å•å‡»â€œè¯„ä¼°â€ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°æ¯ä¸ªé›†ç¾¤ã€‚ç”±äºæˆ‘ä»¬åœ¨<code class="fe pf pg ph pi b">create model</code>ä¸­å°†<code class="fe pf pg ph pi b">num_clusters</code> ë¥¼è®¾ç½®ä¸º4ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ‰4ä¸ªé›†ç¾¤ï¼Œå¹¶ä¸”æˆ‘ä»¬çœ‹åˆ°äº†â€œ<strong class="ku ir">è´¨å¿ƒå€¼</strong>â€ã€‚</p><h2 id="12be" class="ma mb iq bd mc md me dn mf mg mh dp mi lb mj mk ml lf mm mn mo lj mp mq mr ms bi translated">7.ä½¿ç”¨â€œml.predictâ€å‡½æ•°é¢„æµ‹åˆ†ç±»</h2><p id="d936" class="pw-post-body-paragraph ks kt iq ku b kv mv jr kx ky mw ju la lb oa ld le lf ob lh li lj oc ll lm ln ij bi translated">æˆ‘ä»¬å°†ä½¿ç”¨å†…ç½®çš„â€œml.predictâ€å‡½æ•°æ¥æŸ¥æ‰¾æŸä¸ªç”µå°æ‰€å±çš„é›†ç¾¤ã€‚</p><pre class="kg kh ki kj gt pl pi pm pn aw po bi"><span id="0b80" class="ma mb iq pi b gy pp pq l pr ps">with hs as (<br/>    select <br/>        h.start_station_name as station_name<br/>        ,if (extract(dayofweek from h.start_date) = 7 or<br/>            extract(dayofweek from h.start_date) = 1,<br/>            "weekend","weekday") as isweekday<br/>        ,h.duration<br/>        ,st_distance(st_geogpoint(s.longitude, s.latitude), st_geogpoint(-0.1, 51.5)) / 1000 as distance_from_city_center<br/>    from `bigquery-public-data.london_bicycles.cycle_hire`as h<br/>     join `bigquery-public-data.london_bicycles.cycle_stations`as s<br/>    on h.start_station_id = s.id <br/>    where h.start_date between cast('2015-01-01 00:00:00' as timestamp) and<br/>        cast('2016-01-01 00:00:00' as timestamp)<br/>),<br/>    stationstats as (<br/>        select <br/>            station_name<br/>            , isweekday<br/>            ,avg(duration) as duration<br/>            ,count(duration) as num_trips<br/>            ,max(distance_from_city_center) as distance_from_city_center<br/>        from hs <br/>        group by station_name, isweekday<br/>)<br/>select  * except(nearest_centroids_distance)<br/>from ml.predict( <br/>    model k_means_tutorial.london_station_clusters,<br/>    (<br/>        select *<br/>        from stationstats<br/>)<br/>)</span></pre><p id="38dc" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">ä¸Šé¢çš„æŸ¥è¯¢æœ‰ä¸¤ä¸ªéƒ¨åˆ†</p><ul class=""><li id="a1e4" class="mt mu iq ku b kv kw ky kz lb nj lf nk lj nl ln na nb nc nd bi translated">æˆ‘ä»¬åˆ›å»ºçš„k-å‡å€¼èšç±»æ¨¡å‹</li><li id="b200" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln na nb nc nd bi translated">æµ‹è¯•é›†æ•°æ®(ç”¨äºé¢„æµ‹)</li></ul><p id="7c93" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">æˆ‘ä»¬æ·»åŠ äº†<code class="fe pf pg ph pi b">except(nearest_centroids_distance)</code>æ¥åªæŸ¥çœ‹é¢„æµ‹çš„é›†ç¾¤</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi px"><img src="../Images/0c4583ac3d388730f0d48ec1b2c104cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uaiamgj-x5LsnXLYUZAykA.png"/></div></div></figure><p id="7d25" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">æˆ‘ä»¬å¯ä»¥é€šè¿‡<code class="fe pf pg ph pi b">centroid_id</code>åˆ—çœ‹åˆ°æ¯ä¸€è¡Œå±äºå“ªä¸ªé›†ç¾¤</p><h2 id="2d37" class="ma mb iq bd mc md me dn mf mg mh dp mi lb mj mk ml lf mm mn mo lj mp mq mr ms bi translated">8.å•†ä¸šè§è§£/ç»“è®º</h2><p id="1f8f" class="pw-post-body-paragraph ks kt iq ku b kv mv jr kx ky mw ju la lb oa ld le lf ob lh li lj oc ll lm ln ij bi translated">å‡è®¾æ‚¨åœ¨ä¼¦æ•¦å¸‚çš„ä¸€ä¸ªæ•°æ®ç§‘å­¦å›¢é˜Ÿä¸­ç®¡ç†è‡ªè¡Œè½¦ç§Ÿèµï¼Œå¹¶ä¸”å¿…é¡»æ ¹æ®è¿™ç§èšç±»æ¨¡å‹æå‡ºä¸€ä¸ªé¡¹ç›®è®¡åˆ’</p><p id="8ef5" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">æˆ‘ä»¬å†æ¥çœ‹çœ‹è¯„æµ‹å›¾</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi pw"><img src="../Images/590154d93cceb987909be44881e95b70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2stMqZy4eVWyGcjGQRtA4g.png"/></div></div></figure><p id="6795" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">ä»æˆ‘ä»¬å¾—åˆ°çš„ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®º:</p><ul class=""><li id="bfb9" class="mt mu iq ku b kv kw ky kz lb nj lf nk lj nl ln na nb nc nd bi translated">é›†ç¾¤#1è¿œç¦»å¸‚ä¸­å¿ƒï¼Œå¹¶ä¸”å¹³å‡è·ç¦»æ›´é•¿ã€‚ç§ŸèµæœŸé™</li><li id="8690" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln na nb nc nd bi translated">é›†ç¾¤#2ç¦»åŸå¸‚æœ€è¿‘ï¼Œä¸å¤ªæ‹¥æŒ¤</li><li id="8b13" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln na nb nc nd bi translated">é›†ç¾¤#3å…·æœ‰æœ€é«˜çš„å‡ºç§Ÿ(å‡ºè¡Œ)æ¬¡æ•°ï¼Œå¹¶ä¸”é è¿‘åŸå¸‚â†’è¿™å°†æ˜¯æœ€å—æ¬¢è¿çš„<strong class="ku ir">è½¦ç«™</strong></li><li id="4485" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln na nb nc nd bi translated">èšç±»#4è¿œç¦»åŸå¸‚ï¼Œä½†ç§Ÿèµæ—¶é—´æ¯”èšç±»#1çŸ­</li></ul><p id="fe40" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å–ä»¥ä¸‹ä¸šåŠ¡æªæ–½:</p><ul class=""><li id="d11f" class="mt mu iq ku b kv kw ky kz lb nj lf nk lj nl ln na nb nc nd bi translated">å¯¹äºåœ¨æŸäº›ç«™ç‚¹å®‰è£…èµ›è½¦çš„Q1æ‰©å»ºé¡¹ç›®ï¼Œ<strong class="ku ir">é›†ç¾¤#1 </strong>å°†æ˜¯æœ€å¥½çš„æµ‹è¯•ç»„ï¼Œå› ä¸ºå®ƒè·ç¦»åŸå¸‚æœ€è¿œ<strong class="ku ir">ï¼Œå› æ­¤å…·æœ‰<strong class="ku ir">æœ€é•¿çš„ç§ŸèµæœŸé™</strong></strong></li><li id="2b9c" class="mt mu iq ku b kv ne ky nf lb ng lf nh lj ni ln na nb nc nd bi translated">ä¸ºäº†æ·±å…¥åˆ†æä¼¦æ•¦çš„ç§Ÿèµæ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä¼˜å…ˆè€ƒè™‘ç¬¬ä¸‰ç»„,å› ä¸ºå®ƒæœ€é è¿‘åŸå¸‚<strong class="ku ir">,å¹¶ä¸”è®°å½•äº†æœ€é«˜çš„ç§Ÿèµæ•°é‡</strong></li></ul><p id="b1b4" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">ä¸Šé¢çš„å»ºè®®å·²ç»è¶³å¤Ÿå¼ºå¤§ï¼Œå¯ä»¥ä»GCP UIç»™å‡ºçš„åŸºæœ¬ä¿¡æ¯ä¸­å¾—å‡ºï¼Œä¸ºäº†æ¼”ç¤ºèµ·è§ï¼Œçœç•¥äº†æ›´é«˜çº§çš„åˆ†æã€‚</p><h2 id="af8a" class="ma mb iq bd mc md me dn mf mg mh dp mi lb mj mk ml lf mm mn mo lj mp mq mr ms bi translated">9.åˆ é™¤æ•°æ®é›†</h2><p id="0dec" class="pw-post-body-paragraph ks kt iq ku b kv mv jr kx ky mw ju la lb oa ld le lf ob lh li lj oc ll lm ln ij bi translated">ä¸ºäº†é˜²æ­¢å¯¹æœ¬æ•™ç¨‹ä¸­æ‰€åšçš„å·¥ä½œäº§ç”Ÿä»»ä½•æ„å¤–çš„é¢å¤–è´¹ç”¨ï¼Œè®©æˆ‘ä»¬ä»é¡¹ç›®ä¸­åˆ é™¤æ•°æ®é›†ã€‚</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi py"><img src="../Images/f1bda6e768d62ea94faa4ff222e5dcdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WnynoJttX6dcjCpeyGwO4Q.png"/></div></div></figure><p id="3d70" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">è½¬åˆ°æ‚¨çš„é¡¹ç›®IDï¼Œç‚¹å‡»å³ä¾§çš„â€œ<strong class="ku ir">åˆ é™¤æ•°æ®é›†</strong></p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><p id="95b5" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir">éå¸¸æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼å¦‚æœä½ è®¤ä¸ºå†…å®¹æ˜¯å¯Œæœ‰æˆæ•ˆçš„ï¼Œæˆ‘ä¼šæ„Ÿè°¢ä»»ä½•æ”¯æŒ(åˆ†äº«/å–œæ¬¢)æˆ–é¼“æŒ(ğŸ‘ğŸ¼)æŒ‰é’®å¾ˆä¸‹é¢ã€‚</strong></p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="7531" class="np mb iq bd mc nq nr ns mf nt nu nv mi jw nw jx ml jz nx ka mo kc ny kd mr nz bi translated">å…³äºä½œè€…</h1><p id="2c30" class="pw-post-body-paragraph ks kt iq ku b kv mv jr kx ky mw ju la lb oa ld le lf ob lh li lj oc ll lm ln ij bi translated">è´¤ä¿Šæ˜¯ä¸€åæ•°æ®åˆ†æå¸ˆã€‚ä»–æ‹¥æœ‰åŠ å·å¤§å­¦æ´›æ‰çŸ¶åˆ†æ ¡çš„ç»Ÿè®¡å­¦å­¦ä½ã€‚ä»–æ˜¯ä¸€åæ•°æ®çˆ±å¥½è€…ï¼Œå–œæ¬¢åˆ†äº«æ•°æ®ç§‘å­¦/åˆ†æçŸ¥è¯†ã€‚<br/>åœ¨<a class="ae kr" href="https://www.linkedin.com/in/hyunjoonbok/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>ä¸Šè”ç³»ä»–ã€‚</p><h2 id="1595" class="ma mb iq bd mc md me dn mf mg mh dp mi lb mj mk ml lf mm mn mo lj mp mq mr ms bi translated">å‚è€ƒ</h2><div class="ok ol gp gr om on"><a href="https://towardsdatascience.com/machine-learning-algorithms-part-9-k-means-example-in-python-f2ad05ed5203" rel="noopener follow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd ir gy z fp os fr fs ot fu fw ip bi translated">K-meansèšç±»Pythonç¤ºä¾‹</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">K-Meansèšç±»æ˜¯ä¸€ç§æ— ç›‘ç£çš„æœºå™¨å­¦ä¹ ç®—æ³•ã€‚ä¸ä¼ ç»Ÿçš„ç›‘ç£æœºå™¨ç›¸æ¯”â€¦</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">towardsdatascience.com</p></div></div><div class="pz l"><div class="qa l qb qc qd pz qe kl on"/></div></div></a></div><div class="ok ol gp gr om on"><a href="https://blog.cambridgespark.com/how-to-determine-the-optimal-number-of-clusters-for-k-means-clustering-14f27070048f" rel="noopener  ugc nofollow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd ir gy z fp os fr fs ot fu fw ip bi translated">æ•™ç¨‹:å¦‚ä½•ç¡®å®šk-meansèšç±»çš„æœ€ä½³èšç±»æ•°</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">å‰‘æ¡¥ç«èŠ±å¤§å­¦çš„æ•°æ®ç§‘å­¦å®¶å’Œåº”ç”¨æ•°æ®ç§‘å­¦å­¦ç”Ÿæ‰˜æ‹‰Â·å­™å¿ƒæ€¡</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">blog.cambridgespark.com</p></div></div><div class="pz l"><div class="qf l qb qc qd pz qe kl on"/></div></div></a></div><div class="ok ol gp gr om on"><a href="https://towardsdatascience.com/k-means-clustering-from-a-to-z-f6242a314e9a" rel="noopener follow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd ir gy z fp os fr fs ot fu fw ip bi translated">k-å‡å€¼èšç±»:ä»Aåˆ°Z</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">å…³äºK-å‡å€¼èšç±»ä½ éœ€è¦çŸ¥é“çš„ä¸€åˆ‡</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">towardsdatascience.com</p></div></div><div class="pz l"><div class="qg l qb qc qd pz qe kl on"/></div></div></a></div><div class="ok ol gp gr om on"><a href="https://assaeunji.github.io/db/2020-12-11-bigquery_kmeans/" rel="noopener  ugc nofollow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd ir gy z fp os fr fs ot fu fw ip bi translated">10ë¶„ ë§Œì— êµ¬í˜„í•˜ëŠ”å¤§è´¨ç–‘K-í‰ê·  í´ëŸ¬ìŠ¤í„°ë§ ëª¨ë¸</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">å¤§æŸ¥è¯¢mlì—ì„œëŠ”í‘œì¤€SQLì¿¼ë¦¬ë¥¼ì‚¬ìš©í•˜ì—¬bigqueryì—ì„œë¨¸ì‹ ëŸ¬ë‹ëª¨ë¸ì„ë§Œë“¤ê³ ì‹¤í–‰í• ìˆ˜ìˆìŠµë‹ˆë‹¤.(ì°¸ì¡°:[link)ìš”ì¦˜ë¹…ì¿¼ë¦¬ë¥¼ì‚¬ìš©í• ì¼ë“¤ì´ì¢…ì¢…ìˆì–´â€œë°°ì›Œì•¼ì§€"í•˜ê¸°ë§Œí•˜ê³ ì•„ì§â€¦</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">assaeunji.github.io</p></div></div><div class="pz l"><div class="qh l qb qc qd pz qe kl on"/></div></div></a></div></div></div>    
</body>
</html>