<html>
<head>
<title>Karate, BDD, and API Automation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">空手道、BDD和API自动化</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/karate-bdd-and-api-automation-b4f4918c027?source=collection_archive---------1-----------------------#2020-10-28">https://medium.datadriveninvestor.com/karate-bdd-and-api-automation-b4f4918c027?source=collection_archive---------1-----------------------#2020-10-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/36053ffd97dc6b7f3d7cd343ff028970.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/0*wm8xtuZUxhOQpSEO.png"/></div></figure><p id="589f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">随着IT行业最近的发展及其不断增长的步伐，软件公司和专业人士都必须提升他们的水平。虽然在努力提高生产率和降低成本的过程中，已经出现了许多与开发相关的体系结构变化，但是也确实需要对软件测试给予类似的关注。但是从哪里开始呢？幸运的是，您使用BDD以API自动化开始和结束。</p><p id="36a0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">第一件事是寻找一种工具，帮助你更快地编写易于维护的自动化测试。对于本文，我们将重点关注自动化Rest API测试。多年来，我为此使用了许多工具，然而，最近我遇到了一个工具，它不仅改变了我对自动化API测试的看法，也改变了我对绝对自动化概念的整体看法。它叫<strong class="jw ir">空手道</strong>，如果你参与自动化API测试，没有编程背景，不妨考虑一下。</p><p id="a367" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">什么是空手道？</strong></p><p id="43d1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">首先，这是我最喜欢的武术形式。其次，从更专业的角度来看，空手道是一个开源的测试自动化工具，用于使用行为驱动开发(BDD)语法编写的测试。不像其他BDD框架，像<a class="ae ks" href="https://cucumber.io/docs/bdd/better-gherkin/" rel="noopener ugc nofollow" target="_blank">小黄瓜</a>空手道默认定义了所有的步骤定义。这使得即使是非开发人员和没有编程背景的人也能快速编写API测试<a class="ae ks" href="https://en.wikipedia.org/wiki/Cucumber_(software)%26sa=D%26ust=1572942289138000" rel="noopener ugc nofollow" target="_blank">黄瓜</a>，</p><p id="bd6b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">以下是对我的意思的完美描述:</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/8ec7519c315d1f0bc80b350ac633e4c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/0*0cVELTddPmCOb_g9.png"/></div></figure><p id="802b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在从上面的图片可以清楚地看到，使用空手道编写REST API测试是多么简单。尽管测试的可读性不如Cucumber测试那样深入，但它确实为您省去定义步骤、业务逻辑和POJOs的麻烦。我认为这是值得的。关于空手道的另一个最酷的事情是，它是你的API、Web和本地应用程序测试的一站式商店，你可以很容易地在你的CI/CD管道中实现。至于上面的樱桃，您可以使用相同的测试进行性能测试。</p><p id="d6a2" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> BDD框架&amp;空手道</strong></p><p id="66cd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><a class="ae ks" href="https://perspectives.mobilelive.ca/blog/bdd-making-life-easier" rel="noopener ugc nofollow" target="_blank">行为驱动开发(BDD) </a>是一种软件开发和测试方法，它在技术和非技术团队之间架起了一座桥梁。作为测试驱动开发的一个分支，BDD主要处理系统用户行为。就测试和自动化而言，BDD框架在小型团队中尤其重要，在这些团队中，人们没有能力雇佣个人来创建和维护自动化框架。这就是空手道的由来。</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/cf8589ffec83c4e0decc10c6bc9e57ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/0*od5RGszctEdvhpkV.png"/></div></figure><p id="a528" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">空手道入门</strong></p><p id="e281" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们来看看您通常会在自动化API测试中执行的一些操作，假设您已经有了环境设置。如果没有，请参考空手道的官方网站，<a class="ae ks" href="https://github.com/intuit/karate" rel="noopener ugc nofollow" target="_blank"> GitHub页面</a>，它会给你一个关于空手道和如何建立你的项目的完整见解。</p><p id="1e8b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">定义</strong></p><p id="ddda" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">空手道提供了自己的DSL(领域特定语言)，它使用一种类似小黄瓜的语言，使人们能够在没有编程知识的情况下编写测试，并用<em class="kx">编写测试。特征</em>文件。这里有一个例子:</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi ky"><img src="../Images/707c91639fac7d961708fde3f5a2b131.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ooa-uDo0hRYzZQv5.png"/></div></div></figure><p id="dbff" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在第一个<strong class="jw ir">背景</strong>部分，我们将定义全局访问所需的变量，以及URL和其他变量。现在，为了充分利用可重用性，空手道让我们可以轻松地调用和读取背景部分中定义的其他特性文件，因此我们可以从被调用的特性中访问变量。</p><p id="af27" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">背景部分的最后一项是用于模式验证的'<em class="kx">模式</em>'变量。从上面的例子可以清楚地看出，定义空手道的模式而不是使用复杂的JSON模式是多么容易。</p><p id="5d27" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在让我们了解特征文件的<em class="kx">场景</em>部分下的所有组件:</p><p id="9594" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">你能用空手道做的事情不仅限于这个例子。你可以使用内嵌的JavaScript函数，因为JS是空手道的原生函数，另一方面，你也可以选择编写定制的Java函数。空手道也支持动态数据驱动测试，通过简单的“场景概要和例子”的实现，类似于Cucumber。最后，您可以使用与使用<a class="ae ks" href="https://github.com/intuit/karate/tree/master/karate-gatling" rel="noopener ugc nofollow" target="_blank">加特林</a>进行性能测试相同的测试特性。</p><p id="7abd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">执行</strong></p><p id="f9ce" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">要执行上述特性文件，您需要一个简单的Java runner文件，如下所示:</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div class="gh gi ld"><img src="../Images/aa5bbc3fec235bbb2676a58259038771.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/0*gjdMOERHZsSQifz2.png"/></div></figure><p id="aa7e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这里我们使用的是JUnit 4 Runner。在@KarateOptions中提供特性文件的路径，差不多就是这样。</p><p id="3abc" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">报道</strong></p><p id="62d9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">由于我们使用的是JUnit 4 Runner，默认情况下，空手道可以为每次运行提供非常简单而优雅的报告，但是您也可以自定义它们并附上失败步骤的截图。另外，如果您想要更详细的报告或者如果您正在实现并行执行，您可以使用<a class="ae ks" href="https://github.com/damianszczepanik/cucumber-reporting" rel="noopener ugc nofollow" target="_blank">cumber-reporting</a>。</p><p id="0964" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">以下是一份实际测试报告的截图:</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div class="gh gi ld"><img src="../Images/da46cf723ec64555cde1267da055f996.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/0*BMUY6FFAfEamCTPE.png"/></div></figure><p id="e021" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">与CI/CD管道整合</strong></p><p id="39d8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">最后，要完成自动化周期，您需要做的就是将您的测试与您的CI/CD管道相集成。有几个选项可供选择，然而，在我看来，最好的web测试是<em class="kx"> Jenkins和Saucelabs </em> duo，而对于API来说，<em class="kx"> Jenkins和docker </em>是最合适的。你可以在这里找到docker实现<a class="ae ks" href="https://github.com/intuit/karate" rel="noopener ugc nofollow" target="_blank">的大量文档。</a></p><p id="0075" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">拿走</strong></p><p id="528e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我使用空手道已经有一段时间了，它已经证明了它在API自动化方面的价值。就我而言，它简单的语法和支持复杂代码的能力使它成为所有BDD自动化框架中的领跑者之一。如果你没有被说服，在我们分手之前，我想请你考虑以下几点:</p><p id="3472" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">虽然我认为空手道的好处在这一点上非常明显，但如果我不得不留给您一个收获，那就是如果您正在寻找一个框架来编写简单快速的API测试，但缺乏编程知识，空手道可能是您的最佳选择。更不用说你可以在简历上加上“会空手道”。</p><p id="8163" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><em class="kx">以上内容是与mobileLIVE自动化服务经理Ragavan Balasubramaniam合作撰写的。</em></p></div><div class="ab cl le lf hu lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ij ik il im in"><p id="8f19" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><em class="kx">像我们说的那样？你会喜欢我们的工作的。</em> <a class="ae ks" href="https://www.mobilelive.ca/" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> <em class="kx">见</em> </strong> </a> <strong class="jw ir"> <em class="kx">。</em>T25】</strong></p></div></div>    
</body>
</html>