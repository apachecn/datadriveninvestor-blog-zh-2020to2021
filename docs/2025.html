<html>
<head>
<title>Real-Time Introduction to NumPy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NumPy的实时介绍</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/real-time-introduction-to-numpy-d556deb56f49?source=collection_archive---------0-----------------------#2020-04-10">https://medium.datadriveninvestor.com/real-time-introduction-to-numpy-d556deb56f49?source=collection_archive---------0-----------------------#2020-04-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/2ff055ce630416ec30c321253ebe891b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*PSMPWnmgdNKYb8TdNKh1AA.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk">NumPy library consists of many functions.</figcaption></figure><p id="7883" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在科学计算、深度学习和金融分析等许多领域，我们都使用高维数组。你可能认为Python的数据结构如列表、元组和字典可以用来存储这样的数据。是的，它们可以使用，但性能比预期的慢得多。<br/> <strong class="kd iu">为什么列表不能用？<br/> </strong> 1。在列表中可以存储异构数据，因此列表包含类型检查的开销，而在现实生活中，我们处理的是具有同构数据的高维数组。<br/>例如:图像是由数字形式的像素值组成的矩阵。<br/> 2。列表没有完全使用低级硬件机制来加速操作。</p><blockquote class="kz la lb"><p id="5329" class="kb kc lc kd b ke kf kg kh ki kj kk kl ld kn ko kp le kr ks kt lf kv kw kx ky im bi translated">Numpy旨在提高数值计算的性能和功能。</p></blockquote><p id="7c36" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">NumPy(<strong class="kd iu">Num</strong>erical<strong class="kd iu">Py</strong>thon)是一个试图高效处理和存储高维数组的库。它是Python中一个几乎在所有领域都广为人知且被广泛使用的包。NumPy对于在大型高维数组和矩阵上执行数学和逻辑运算非常有用。它有很多功能，可以用来有效地执行各种数值运算。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lg"><img src="../Images/c8dd87de824b48cd8d6d7e1aeac1a31a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FJlCaKlYIr3rx75ds6mEBA.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk">A Brief Description of what NumPy offers at various levels.</figcaption></figure><h1 id="7c5f" class="lp lq it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">在NumPy中创建数组。</h1><p id="3171" class="pw-post-body-paragraph kb kc it kd b ke mn kg kh ki mo kk kl km mp ko kp kq mq ks kt ku mr kw kx ky im bi translated">要开始使用NumPy和NumPy中所有可用的功能，您需要导入它。这可以通过以下import语句轻松完成:</p><pre class="lh li lj lk gt ms mt mu mv aw mw bi"><span id="37d8" class="mx lq it mt b gy my mz l na nb">import numpy as np</span></pre><p id="a753" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">NumPy数组是一个<strong class="kd iu">同质网格</strong>的值。阵列沿其每个维度的大小称为其形状。</p><pre class="lh li lj lk gt ms mt mu mv aw mw bi"><span id="c8de" class="mx lq it mt b gy my mz l na nb"><strong class="mt iu"><em class="lc">#  Creating 1D array</em></strong></span><span id="b605" class="mx lq it mt b gy nc mz l na nb">arr1d = np.array([1, 2, 3])</span><span id="7ee5" class="mx lq it mt b gy nc mz l na nb"><strong class="mt iu"><em class="lc">#  Creating 2D array</em></strong></span><span id="614d" class="mx lq it mt b gy nc mz l na nb">arr2d = np.array([                    <br/>                   [1,2,3],<br/>                   [4,5,6]<br/>                ])</span><span id="1958" class="mx lq it mt b gy nc mz l na nb"><strong class="mt iu"><em class="lc">#  Creating 3D array</em></strong></span><span id="00cb" class="mx lq it mt b gy nc mz l na nb">arr3d = np.array([<br/>                   [<br/>                     [1,2,3],<br/>                     [4,5,6]<br/>                   ],<br/>                   [<br/>                     [7,8,9],<br/>                     [10,11,12],<br/>                   ]<br/>                ])</span></pre><p id="e24c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">下面列出了在NumPy中创建数组的一些替代方法。</p><pre class="lh li lj lk gt ms mt mu mv aw mw bi"><span id="1d51" class="mx lq it mt b gy my mz l na nb"><strong class="mt iu">#  <em class="lc">Create an array of all zeros<br/></em></strong>a = np.zeros((2,2))</span><span id="cc25" class="mx lq it mt b gy nc mz l na nb"><strong class="mt iu">#  <em class="lc">Create an array of all ones<br/></em></strong>b = np.ones((2,2))</span><span id="8be4" class="mx lq it mt b gy nc mz l na nb"><strong class="mt iu">#  <em class="lc">Create a constant array of x<br/></em></strong>x = 0.8<br/>c = np.full((2,2), x)</span><span id="b160" class="mx lq it mt b gy nc mz l na nb"><strong class="mt iu">#  <em class="lc">Creates a 3x3 identity matrix<br/></em></strong>d = np.eye(3)</span><span id="5c9b" class="mx lq it mt b gy nc mz l na nb"><strong class="mt iu">#  <em class="lc">Create an array of random values<br/></em></strong>e = np.random.randn((2,2))</span><span id="eb35" class="mx lq it mt b gy nc mz l na nb">f = np.arange(0, 30, 5)<br/><strong class="mt iu">Output: [0, 5, 10, 15, 20, 25]<br/></strong></span><span id="6c64" class="mx lq it mt b gy nc mz l na nb">g = np.linspace(1, 15, 3)<br/><strong class="mt iu">Output: [ 1.0,  8.0, 15.0]</strong></span></pre><ol class=""><li id="fada" class="nd ne it kd b ke kf ki kj km nf kq ng ku nh ky ni nj nk nl bi translated">这里<strong class="kd iu"> np.arange() </strong>返回一个由给定区间内均匀分布的值组成的数组。第三个参数是步长。</li><li id="7d9c" class="nd ne it kd b ke nm ki nn km no kq np ku nq ky ni nj nk nl bi translated"><strong class="kd iu"> np.linspace() </strong>返回一个数组，该数组由给定间隔内均匀分布的值组成。第三个参数是数组中所需的元素数量。</li></ol></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><h1 id="61de" class="lp lq it bd lr ls ny lu lv lw nz ly lz ma oa mc md me ob mg mh mi oc mk ml mm bi translated">索引数组</h1><p id="5e89" class="pw-post-body-paragraph kb kc it kd b ke mn kg kh ki mo kk kl km mp ko kp kq mq ks kt ku mr kw kx ky im bi translated">我们可以像编程一样索引1D和2D数组，但是索引3D数组有点棘手。让我们考虑一个例子</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi od"><img src="../Images/1534c58a72df8bf6fa8ef57e3854aa9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:974/format:webp/1*oY7qZRWWn8DlknYI12klew.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk">Dimensions are ordered as shown here. (Source — <a class="ae oe" href="https://www.pythoninformer.com/python-libraries/numpy/index-and-slice/" rel="noopener ugc nofollow" target="_blank">https://www.pythoninformer.com</a>)</figcaption></figure><pre class="lh li lj lk gt ms mt mu mv aw mw bi"><span id="0e24" class="mx lq it mt b gy my mz l na nb">arr3d[0, 0, 0]  <strong class="mt iu"><em class="lc">#</em></strong> <strong class="mt iu"><em class="lc">(i=0, j=0, k=0)</em></strong>   <br/><strong class="mt iu">Output: 10</strong></span><span id="bbad" class="mx lq it mt b gy nc mz l na nb">arr3d[1, 0, 2]  <strong class="mt iu"><em class="lc"># (i=1, j=0, k=2)</em></strong>           <br/><strong class="mt iu">Output: 22</strong></span><span id="12d3" class="mx lq it mt b gy nc mz l na nb">arr3d[0, :, 1]        <em class="lc"> <br/></em><strong class="mt iu">Output: [11, 14, 17]</strong></span><span id="8229" class="mx lq it mt b gy nc mz l na nb">arr3d[:, 1, 2]           <em class="lc"> <br/></em><strong class="mt iu">Output: [15, 25, 35]</strong></span><span id="5e84" class="mx lq it mt b gy nc mz l na nb">arr3d[:, :, 0]<br/><strong class="mt iu">Output: [[10 13 16]<br/>         [20 23 26]<br/>         [30 33 36]]</strong></span><span id="54ff" class="mx lq it mt b gy nc mz l na nb">arr3d[2, :, :]   <br/><strong class="mt iu">Output: [[30 31 32]<br/>         [33 34 35]<br/>         [36 37 38]]</strong></span></pre><p id="5551" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">前两个例子非常简单，但是从第三个例子开始，我们可以看到一个新的索引“<strong class="kd iu">:</strong>”。它表示<strong class="kd iu">全切片</strong>，这意味着必须打印沿该尺寸的所有数字。</p><h2 id="7ef9" class="mx lq it bd lr of og dn lv oh oi dp lz km oj ok md kq ol om mh ku on oo ml op bi translated">基于条件的索引</h2><pre class="lh li lj lk gt ms mt mu mv aw mw bi"><span id="8a2f" class="mx lq it mt b gy my mz l na nb">arr3d[arr3d % 2 == 1]         <br/><strong class="mt iu">Output: [11, 13, 15, 17, .... 37]</strong></span><span id="2805" class="mx lq it mt b gy nc mz l na nb">arr3d[(arr3d % 2 == 1) &amp; (arr3d &gt; 30)]   <br/><strong class="mt iu">Output: [31, 33, 35, 37]</strong></span></pre></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><h1 id="588b" class="lp lq it bd lr ls ny lu lv lw nz ly lz ma oa mc md me ob mg mh mi oc mk ml mm bi translated">个案研究</h1><p id="b838" class="pw-post-body-paragraph kb kc it kd b ke mn kg kh ki mo kk kl km mp ko kp kq mq ks kt ku mr kw kx ky im bi translated">让我们考虑一个数据集，该数据集由Sachin和Dravid以及印度队在比赛子集上的得分组成。数据集包含225个匹配项。让我们试着回答几个问题。你可以在这里下载数据<a class="ae oe" href="https://drive.google.com/file/d/1lBEeQ9iycLmQX9LkA8gq2Tm1Utd9sKu8/view?usp=sharing" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/88e7190eaa4fa2b01d8b9a4bd75da9bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/format:webp/1*JUG-y9Hgfc0NqQFdR-SU1Q.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk">A subset of a given data set.</figcaption></figure><p id="533a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，让我们使用命令加载数据集—</p><pre class="lh li lj lk gt ms mt mu mv aw mw bi"><span id="e24a" class="mx lq it mt b gy my mz l na nb">cric_data = np.loadtxt("cric_data.tsv", skiprows=1)<br/>cric_data.shape()      <br/><strong class="mt iu">Output: (225,4) Indicates 225 matches.</strong></span></pre><p id="48c4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">输出如下所示，其中第一列表示指数，第二列表示Sachin的得分，第三列表示Dravid的得分，第四列表示印度在每场比赛中的得分。</p><pre class="lh li lj lk gt ms mt mu mv aw mw bi"><span id="4cf7" class="mx lq it mt b gy my mz l na nb">array([[  0., 100.,  78., 342.],        <br/>       [  1.,  11.,  62., 191.],        <br/>       [  2.,   8.,  85., 252.],        <br/>       [  3.,  71.,  24., 307.],............</span></pre><p id="1e0f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们首先把n-d数组分成几个独立的部分。</p><pre class="lh li lj lk gt ms mt mu mv aw mw bi"><span id="1084" class="mx lq it mt b gy my mz l na nb">Sachin = cric_data[:,1]  <br/>Dravid = cric_data[:,2]   <br/>India  = cric_data[:,3]  </span><span id="fe5a" class="mx lq it mt b gy nc mz l na nb">(Note - ':' indicates all values along that dimension)</span><span id="973b" class="mx lq it mt b gy nc mz l na nb"><strong class="mt iu">Example Output:</strong><br/>Sachin = [100, 11, 8, 71.......]</span></pre><p id="73ff" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">需要注意的重要一点是，上述数组Sachin、Dravid和India是实际数组的<strong class="kd iu">切片</strong>，而<strong class="kd iu">不是深度副本。如果你知道切片是如何工作的，我想你已经明白我的意思了。这里，上述三个数组仅仅是对实际cric_data的引用或视图，而不是深层副本。</strong></p><h2 id="04d0" class="mx lq it bd lr of og dn lv oh oi dp lz km oj ok md kq ol om mh ku on oo ml op bi translated">1)求Sachin，Dravid，India的均值和中位数。</h2><p id="4333" class="pw-post-body-paragraph kb kc it kd b ke mn kg kh ki mo kk kl km mp ko kp kq mq ks kt ku mr kw kx ky im bi translated">要了解平均值和中间值，你可以参考我以前的文章<a class="ae oe" href="https://link.medium.com/WI04Vgv2y5" rel="noopener">。现在让我们写一个函数，返回上述各项的平均值和中值。我们可以使用NumPy库函数<strong class="kd iu"> np.mean() </strong>和<strong class="kd iu"> np.median() </strong>来达到想要的结果。</a></p><pre class="lh li lj lk gt ms mt mu mv aw mw bi"><span id="a705" class="mx lq it mt b gy my mz l na nb">def stats(col):<br/>    print('Mean', np.mean(col))<br/>    print('Median', np.median(col))</span><span id="c566" class="mx lq it mt b gy nc mz l na nb">stats(Sachin)     <br/><strong class="mt iu">Output: Mean 39.87  Median 27.0</strong></span><span id="779a" class="mx lq it mt b gy nc mz l na nb">stats(Dravid)     <br/><strong class="mt iu">Output: Mean 32.06  Median 22.0</strong></span><span id="3332" class="mx lq it mt b gy nc mz l na nb">stats(India)      <br/><strong class="mt iu">Output: Mean 220.79  Median 216.0</strong></span></pre><h2 id="774e" class="mx lq it bd lr of og dn lv oh oi dp lz km oj ok md kq ol om mh ku on oo ml op bi translated">2)萨钦和德拉维德的分数是多少世纪？</h2><p id="049c" class="pw-post-body-paragraph kb kc it kd b ke mn kg kh ki mo kk kl km mp ko kp kq mq ks kt ku mr kw kx ky im bi translated">使用<strong class="kd iu">count _非零方法(condition) </strong>我们可以找到满足给定条件的元素的数量。</p><pre class="lh li lj lk gt ms mt mu mv aw mw bi"><span id="6812" class="mx lq it mt b gy my mz l na nb">np.count_nonzero(Sachin&gt;99)     <br/><strong class="mt iu">Output: 23</strong></span><span id="efdd" class="mx lq it mt b gy nc mz l na nb">np.count_nonzero(Dravid&gt;<strong class="mt iu">Output: 8</strong></span></pre><h2 id="b37a" class="mx lq it bd lr of og dn lv oh oi dp lz km oj ok md kq ol om mh ku on oo ml op bi translated">3)萨钦和德拉维德用了多少场比赛才达到1000分？</h2><p id="6a3c" class="pw-post-body-paragraph kb kc it kd b ke mn kg kh ki mo kk kl km mp ko kp kq mq ks kt ku mr kw kx ky im bi translated">我们可以用累计和的概念来解决这个问题。方法<strong class="kd iu"> np.cumsum(array) </strong>将执行数组中所有元素的累加和。例如:a=[1，2，3，4]。<br/> np.cumsum(a)将返回[1，3，6，10]</p><pre class="lh li lj lk gt ms mt mu mv aw mw bi"><span id="33a3" class="mx lq it mt b gy my mz l na nb">sachin_cumscores = np.cumsum(sachin)<br/>np.searchsorted(sachin_cumscores, 1000)<br/><strong class="mt iu">Output: 29</strong></span></pre><p id="2ee4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这意味着Sachin用了29场比赛来获得他的第一个1000分。在这里，search sorted查找应该插入元素的索引，以便保持顺序。<br/><strong class="kd iu">NP . search sorted</strong>([1，2，3，4，5]，3) <br/> Output: 2(为了保持排序的性质，只能在第二个索引后插入3)</p><h2 id="f7e1" class="mx lq it bd lr of og dn lv oh oi dp lz km oj ok md kq ol om mh ku on oo ml op bi translated">4)每场比赛找出谁得分更多——萨钦还是德拉维德</h2><p id="e778" class="pw-post-body-paragraph kb kc it kd b ke mn kg kh ki mo kk kl km mp ko kp kq mq ks kt ku mr kw kx ky im bi translated">我们希望所有225场比赛的输出都是[Sachin，Dravid，Sachin，Sachin……]形式。</p><pre class="lh li lj lk gt ms mt mu mv aw mw bi"><span id="826d" class="mx lq it mt b gy my mz l na nb"><em class="lc">## To store runs scored by both Sachin and Dravid.</em></span><span id="2725" class="mx lq it mt b gy nc mz l na nb">Sachin_and_Dravid = cric_data[:, [0:2]]</span><span id="dd6a" class="mx lq it mt b gy nc mz l na nb"><em class="lc">## The below method would return [0,1,1,0,1......] for all the matches where 0 denotes Sachin scored more and 1 denotes Dravid scored more.</em></span><span id="0624" class="mx lq it mt b gy nc mz l na nb">is_dravid_higher = np.argmax(Sachin_and_Dravid, axis=1)</span><span id="bd28" class="mx lq it mt b gy nc mz l na nb">np.where(is_dravid_higher == 0, 'Sachin', 'Rahul')</span><span id="de7e" class="mx lq it mt b gy nc mz l na nb"><strong class="mt iu">Output:</strong><br/>array(['Sachin', 'Rahul', 'Rahul', 'Sachin', 'Sachin', 'Rahul', 'Rahul', .......])</span></pre><ol class=""><li id="87a6" class="nd ne it kd b ke kf ki kj km nf kq ng ku nh ky ni nj nk nl bi translated"><strong class="kd iu"> np.argmax() </strong>有一个参数‘axis ’,它指定查找跨行/列的最大元素。1表示跨行，0表示跨列。</li><li id="b3d5" class="nd ne it kd b ke nm ki nn km no kq np ku nq ky ni nj nk nl bi translated"><strong class="kd iu"> np.where(condition，[x，y]) </strong>根据条件返回‘x’或‘y’。</li></ol></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><p id="0eac" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">希望你对NumPy的使用方法有一个清晰的认识。敬请关注下一篇关于熊猫的文章！！！</p></div></div>    
</body>
</html>