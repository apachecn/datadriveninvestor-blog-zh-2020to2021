<html>
<head>
<title>Study Guide For The GSE (GIAC Security Expert): Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GIAC安全专家学习指南:第一部分</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/study-guide-for-the-gse-giac-security-expert-part-1-da6ca4e4da7a?source=collection_archive---------0-----------------------#2020-07-18">https://medium.datadriveninvestor.com/study-guide-for-the-gse-giac-security-expert-part-1-da6ca4e4da7a?source=collection_archive---------0-----------------------#2020-07-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2ef4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">GIAC安全专家(GSE)认证的学习指南，包括Google云部署、Jupyter笔记本电脑、参考资料和技巧</h2></div><p id="bd92" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我已经决定写一本关于我获得GIAC安全专家之旅的指南。本指南主要针对那些也计划获得普通中等教育证书和/或正在准备资格考试或实验室的人。</p><p id="1769" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lf">即使这不适用于你；这里有大量关于命令行和脚本的高质量提示，可以帮助您进行日常安全管理</em>。</p><p id="4fa7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是一个三部分系列。<strong class="kk iu">第1部分</strong>是关于我的资格考试准备和实验室动手准备工作，包括:</p><ul class=""><li id="804e" class="lg lh it kk b kl km ko kp kr li kv lj kz lk ld ll lm ln lo bi translated">设置f <em class="lf"> ree </em> Google Cloud VPS和Colab Juypter笔记本环境用于脚本编写，基于linux的工具用于实践学习</li><li id="63ea" class="lg lh it kk b kl lp ko lq kr lr kv ls kz lt ld ll lm ln lo bi translated">收集和编译用于索引的“脱机”资源</li></ul><p id="3581" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae le" href="https://medium.com/@dw.chow/study-guide-for-the-gse-giac-security-expert-part-2-d7b30ddd5845" rel="noopener"> <strong class="kk iu">第2部分</strong> </a>侧重于资格考试和实验室考试的动手练习。并不是GSEC/GCIH/GCIA的每个主题都包括在内；但我觉得我没有天生的键盘肌肉记忆；可能类似于其他候选人的挣扎:</p><ul class=""><li id="e830" class="lg lh it kk b kl km ko kp kr li kv lj kz lk ld ll lm ln lo bi translated">工具在Windows和Linux下执行和操作语法方面的差异示例</li><li id="cbb3" class="lg lh it kk b kl lp ko lq kr lr kv ls kz lt ld ll lm ln lo bi translated">当您选择的主要“前往”工具失败或不起作用时，可以使用替代脚本和工具</li><li id="03f1" class="lg lh it kk b kl lp ko lq kr lr kv ls kz lt ld ll lm ln lo bi translated">分析很可能在你的考试中出现的例子</li></ul><p id="5045" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae le" href="https://dwchow.medium.com/study-guide-for-the-gse-giac-security-expert-part-3-52d6798b45f0" rel="noopener"> <strong class="kk iu">第三部分</strong></a>【2022年7月16日更新】关于考试的实验室部分和我的成绩的提示</p><div class="lu lv gp gr lw lx"><a href="https://www.datadriveninvestor.com/2020/06/29/cybersecurity-is-in-meltdown-heres-a-new-idea/" rel="noopener  ugc nofollow" target="_blank"><div class="ly ab fo"><div class="lz ab ma cl cj mb"><h2 class="bd iu gy z fp mc fr fs md fu fw is bi translated">网络安全正在崩溃，这里有一个新的想法|数据驱动的投资者</h2><div class="me l"><h3 class="bd b gy z fp mc fr fs md fu fw dk translated">对于许多公司来说，网络安全策略是在安全系统和服务上花费数百万，遵循最佳…</h3></div><div class="mf l"><p class="bd b dl z fp mc fr fs md fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="mg l"><div class="mh l mi mj mk mg ml mm lx"/></div></div></a></div><h1 id="cc07" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated"><strong class="ak">Q2 2019年后资格赛考试</strong></h1><p id="f773" class="pw-post-body-paragraph ki kj it kk b kl nf ju kn ko ng jx kq kr nh kt ku kv ni kx ky kz nj lb lc ld im bi translated">早在2019年5月，我应邀参加了测试，用动手实践取代了笔试。这样你就可以参加第二部分的考试，也就是从笔试日期起18个月内必须参加的实验。对于那些已经获得GIAC认证或者最近获得认证的人来说，你们会注意到，现在有一些实际问题，要求基本上采用旗帜式的回答。许多问题都是类似的格式，所以有效利用你的时间是关键。我不能确认也不允许透露考试的具体内容；但是我可以向别人展示我是如何准备的。我的准备工作进行得非常顺利，我带着90%以上的分数离开了测试。现在我在等待SANS再次开放实验室，因为新冠肺炎基本上已经暂停了我应该采取的措施。</p><h1 id="1612" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated"><strong class="ak">资格考试的三大备考技巧</strong></h1><p id="0808" class="pw-post-body-paragraph ki kj it kk b kl nf ju kn ko ng jx kq kr nh kt ku kv ni kx ky kz nj lb lc ld im bi translated">通过资格考试后，您将有机会进入先到先得的等候名单，参加实验室考试，这种考试通常一年不超过两次，而且只能亲自参加。时间、问题数量及其相当低的64%及格分数的具体细节列在<a class="ae le" href="https://www.giac.org/certification/security-expert-gse" rel="noopener ugc nofollow" target="_blank">这里</a>。如果有一件事我想指出的是，<strong class="kk iu">速度是GSE </strong>的游戏名称。尽可能完成最有效的考试，以便您可以在提交或标记问题之前正确地检查每个答案；考虑以下提示:</p><ul class=""><li id="3dba" class="lg lh it kk b kl km ko kp kr li kv lj kz lk ld ll lm ln lo bi translated">提示1:不要把你所有的GSEC、GCIA和GCIH的书都带进来。只选择1-2本书和你认为自己最薄弱或在实践考试中遇到最大困难的索引。最好像准备实验室考试一样准备资格考试；真正挑战自己，带上最少的衣服，看看你有多公平。具有讽刺意味的是，对我来说，我带了GSEC的Windows和Linux管理书籍，因为我不会整天在这两个系统上进行系统管理。</li><li id="80c5" class="lg lh it kk b kl lp ko lq kr lr kv ls kz lt ld ll lm ln lo bi translated">提示2:在你的主要索引或补充材料中，打印出你需要参考的内容的彩色副本，并使用多种标签颜色代码来区分主题类型甚至深度。真正有用的例子可能是堆栈溢出、tcp封装计算和协议头。找一个有口袋或拉链的活页夹来包裹和保护所有东西。如果你已经准备好了，希望你不需要太依赖你的材料。</li><li id="76d6" class="lg lh it kk b kl lp ko lq kr lr kv ls kz lt ld ll lm ln lo bi translated">技巧3:自己练习书中提到的每一种工具，不要局限于书中的研讨会/实验室部分。尝试将书中涉及的每个工具或脚本应用到您可以自己构建的场景中，或者使用其他人的数据集，这些数据集超出了您在书中看到的预期参数。你可以使用不同的环境来获得更多的机会，或者在你和其他GSE候选人之间交换想法，在<a class="ae le" href="https://groups.google.com/g/giac-study?pli=1" rel="noopener ugc nofollow" target="_blank"> Google group </a> s或<a class="ae le" href="https://gse-prep.slack.com" rel="noopener ugc nofollow" target="_blank">slack channel</a>l中相互挑战。注意:Slack channel是为那些为实验室而学习的人开设的；和来自管理员的邀请，所以你可能必须先把时间放在论坛上。</li></ul><h1 id="b808" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated"><strong class="ak">基线指标材料</strong></h1><p id="69ae" class="pw-post-body-paragraph ki kj it kk b kl nf ju kn ko ng jx kq kr nh kt ku kv ni kx ky kz nj lb lc ld im bi translated">这里是我编辑的伟大资源列表，可以打印出来，放入你的活页夹中快速参考。它尽最大努力寻找有颜色和易于参考显示的项目，这将有助于我的考试。拥有易于阅读的协议头和十六进制/十进制/二进制表格对于提高您回答考试和实验问题的能力是必不可少的。这些是我为资格考试准备的资料，也是我将带去实验室的资料:</p><ul class=""><li id="e12f" class="lg lh it kk b kl km ko kp kr li kv lj kz lk ld ll lm ln lo bi translated">RTFM和BTFM袖珍指南</li><li id="d340" class="lg lh it kk b kl lp ko lq kr lr kv ls kz lt ld ll lm ln lo bi translated">用于DFIR和渗透测试的印刷SANS备忘单</li><li id="0ae0" class="lg lh it kk b kl lp ko lq kr lr kv ls kz lt ld ll lm ln lo bi translated">所有PacketLife备忘单(Wireshark显示过滤器、Scapy、Tcpdump(用于高级BPF位屏蔽考虑)、IPv4子网划分等:<a class="ae le" href="https://packetlife.net/library/cheat-sheets/" rel="noopener ugc nofollow" target="_blank">https://packetlife.net/library/cheat-sheets/</a></li><li id="44e3" class="lg lh it kk b kl lp ko lq kr lr kv ls kz lt ld ll lm ln lo bi translated">来自Nmap.org的协议标题图片:<a class="ae le" href="https://nmap.org/book/tcpip-ref.html" rel="noopener ugc nofollow" target="_blank">https://nmap.org/book/tcpip-ref.html</a></li><li id="a4b4" class="lg lh it kk b kl lp ko lq kr lr kv ls kz lt ld ll lm ln lo bi translated">十进制、十六进制、八进制和二进制图表:<a class="ae le" href="https://ascii.cl/conversion.htm" rel="noopener ugc nofollow" target="_blank">https://ascii.cl/conversion.htm</a></li><li id="ccd4" class="lg lh it kk b kl lp ko lq kr lr kv ls kz lt ld ll lm ln lo bi translated">Bro通过Corelight记录备忘单:<a class="ae le" href="https://github.com/corelight/bro-cheatsheets/blob/master/Corelight-Bro-Cheatsheets-2.6.pdf" rel="noopener ugc nofollow" target="_blank">https://github . com/Corelight/Bro-Cheat Sheets/blob/master/Corelight-Bro-Cheat Sheets-2.6 . pdf</a></li><li id="46a0" class="lg lh it kk b kl lp ko lq kr lr kv ls kz lt ld ll lm ln lo bi translated">US-CERT的丝绸快速参考指南:<a class="ae le" href="https://tools.netsa.cert.org/silk/silk-quickref.pdf" rel="noopener ugc nofollow" target="_blank">https://tools.netsa.cert.org/silk/silk-quickref.pdf</a></li><li id="4231" class="lg lh it kk b kl lp ko lq kr lr kv ls kz lt ld ll lm ln lo bi translated">Snort备忘单:<a class="ae le" href="https://cdn.comparitech.com/wp-content/uploads/2019/07/Snort-Cheat-Sheet.pdf" rel="noopener ugc nofollow" target="_blank">https://cdn . comparitech . com/WP-content/uploads/2019/07/Snort-Cheat-Sheet . pdf</a></li></ul><h1 id="8692" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated"><strong class="ak">为资格考试和实验设置动手工具和环境</strong></h1><p id="3353" class="pw-post-body-paragraph ki kj it kk b kl nf ju kn ko ng jx kq kr nh kt ku kv ni kx ky kz nj lb lc ld im bi translated">这对一些人来说似乎是显而易见的；但值得注意的是，您并不总是能够访问装有VMware或Virtualbox的主要笔记本电脑或台式机。所以在你之外使用本地虚拟机；考虑第二个和第三个资源，以便在准备时促进学习和协作。</p><h2 id="3eac" class="nk mo it bd mp nl nm dn mt nn no dp mx kr np nq mz kv nr ns nb kz nt nu nd nv bi translated"><em class="nw">谷歌云平台——计算机虚拟机实例</em></h2><p id="f7ef" class="pw-post-body-paragraph ki kj it kk b kl nf ju kn ko ng jx kq kr nh kt ku kv ni kx ky kz nj lb lc ld im bi translated">先说谷歌云平台(<a class="ae le" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank"> GCP </a>)。为什么要在AWS EC2免费层上使用它？AWS将在1年后过期，除非你用不同的电子邮件注册。GCP每月在其最小的虚拟机实例上的特定小时数内是“始终免费”层，包括磁盘存储、WAN IP、防火墙以及您在VPC网络中的实例所需的入/出流量。继续注册并使用你的信用卡；只有当你查看<a class="ae le" href="https://cloud.google.com/free/docs/gcp-free-tier" rel="noopener ugc nofollow" target="_blank">自由等级分配</a>时才需要。</p><p id="8f73" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在撰写本文时，对于大多数美国地区的任意数量的F1-Micro虚拟机，您每个月可以获得大约30天的cpu时间，这些虚拟机具有30 GB的驱动器、5 GB的存储快照和1 GB的出口流量配额。F1微型虚拟机并不花哨；您可以选择在600 MB内存和1个共享CPU上运行的个性化实例。这几乎将您的范围缩小到了一个普通的Linux实例。你可以免费存储多个实例。我还不会导入Kali或Metasploitable2。</p><p id="87dc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注册后，打开您的控制台，创建一个F1-Micro VM，并创建包含您的VPC环境的第一个“项目”。将会打开一个向导；但是，如果您关闭它，您可以点击左上角的“汉堡包”图标，并访问计算机&gt;虚拟机实例。</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi nx"><img src="../Images/e64f76707fef05e4c28d365d8c096b7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5PxUsQCkLyZSXXQzYMcoJw.png"/></div></div></figure><p id="2310" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">命名您的实例，并给它任何您想要的标记标签。考虑使用实例名作为您的标签，以及您能记住的任何其他内容，如果您计划以后构建您的订阅的话。不要介意每月4.28美元的估计，F1-Micro实例744小时免费，即使你一直在线，也有大约30天免费。</p><p id="a06f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">确保选择美国西部1、美国中部1或美国东部1作为您的地区。任何其他地区可能会产生费用。完成向导后<strong class="kk iu">不要选择接受入站/入站http/s连接</strong>。我们将自己创建适当的网络标记和入站防火墙规则。</p><p id="a897" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，在您的虚拟机实例屏幕上，单击绿色复选标记旁边的虚拟机实例主机名本身(表示它已联机并正在运行)以深入了解详细信息:</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/70417ea54e064daebf01118459a86c26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*nkyUZORk3yfREiljhkINTQ.jpeg"/></div><figcaption class="oj ok gj gh gi ol om bd b be z dk">VM instances Screen</figcaption></figure><p id="3265" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在“虚拟机实例”屏幕中，在“网络标记”下设置您需要的标记。我们将使用xtec-vps-01，因为这是我们的实例名称，我们获取流量的主要用例是netcat-listener。所以我们为此创建了第二个标签。滚动到底部，然后点击蓝色的保存按钮。</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div class="gh gi on"><img src="../Images/91efd49e3ea41f0a2e3ab33a67a9396d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*qJgOFiTCeuYTfYtUk8yE4A.jpeg"/></div><figcaption class="oj ok gj gh gi ol om bd b be z dk">Create network tags that your firewall rules will use</figcaption></figure><p id="7c60" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下一步是创建防火墙规则，允许/拒绝VPC实例之间以及进出互联网的双向流量。再次转到控制台左上方的“汉堡”图标，选择VPC网络&gt;防火墙。</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi oo"><img src="../Images/ef8b80e995d5646efbdb843ba0c6a71d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sqscTRSDLtp1wkKfhDL8nQ.jpeg"/></div></div><figcaption class="oj ok gj gh gi ol om bd b be z dk">Create a firewall rule for any inbound traffic</figcaption></figure><p id="7a45" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">命名您的防火墙规则，并启用它。保持<strong class="kk iu">注销</strong>，这样你就不会产生费用。除了添加实例名的“目标标签”之外，其他都保持默认。整个互联网的源是0.0.0.0/0，您也可以指定您认为要使用的TCP/UDP端口。只有当您打算稍后接收流量时，才需要此规则。您可能希望禁用它，直到您需要它作为最佳实践。要测试它，请保持启用状态；我们将我们的设置为进入TCP端口65000，这样我们就不太可能被如此多的网络噪音扫描击中。因为它已经启动了，继续点击实例列表中的“连接SSH”图标，您将得到一个漂亮的web浏览器弹出窗口，这将是您的控制台会话。</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi op"><img src="../Images/3d4b2054af353f00104db7de2118d1f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TM3szOLUqM-hudNISF0jqQ.png"/></div></div><figcaption class="oj ok gj gh gi ol om bd b be z dk">VM instance running a ncat listener and no host firewall rules</figcaption></figure><p id="8d1b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如您在上面看到的，我的主机正在将出口连接到我们的VPS实例，请注意，我不需要iptable规则就可以让它工作。只需sudo to root或sudo bash yourself，并像使用其他任何东西一样使用实例。如果我忘记了我分配的WAN IP地址，我喜欢做的一个有趣的提示是“curl ifconfig.me ”,它会自动返回我的WAN IP。你也可以用wget访问其他网站，如“wget ipchicken.com”或“curl whatismyip.com ”,只是它不会返回一个干净的ip地址字符串，你会在HTTP GET请求中获得额外的HTML标记和内容。</p><p id="cafd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从这里开始，你有几个选择。您可以集中精力让这个实例一天一天地运行。或者，您可以添加第二个F1微实例，也许可以将<a class="ae le" href="http://downloads.metasploit.com/data/metasploitable/metasploitable-linux-2.0.0.zip" rel="noopener ugc nofollow" target="_blank">metapsliotable 2</a>映像导入到您的控制台中，并在长达15天的计算时间内运行它们，您可以攻击或枚举并练习针对它的工具。枚举是GSE的核心基础，所以如果你真的想专注于命令行枚举工具，如Nikto、Nmap、NetCat connectivity，或者只是想专注于旋转技术，我会使用import image。说到旋转*提示，提示*这是你的GSE的核心目标，因为它来自于你的GCIH基础。来自SANS的Gordon Fraser 撰写的这份<a class="ae le" href="https://www.sans.org/reading-room/whitepapers/testing/tunneling-pivoting-web-application-penetration-testing-36117" rel="noopener ugc nofollow" target="_blank">白皮书是一份很好的资料来源，它很好地解释了我们将在第2部分演示的易于设置的旋转技术的用法。</a></p><p id="07af" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们更进一步，继续生成SSH密钥，并使用GCP的本地端口转发隧道功能，称为“IAP隧道”，代表<a class="ae le" href="https://cloud.google.com/iap/docs/using-tcp-forwarding" rel="noopener ugc nofollow" target="_blank">互联网感知代理。</a>它本质上是一个本地端口，通过封装的隧道，可以使用SSH或RDP转发到GCP的代理侦听APIservice，该服务将自动路由您的实例，而无需向互联网的其余部分打开通用TCP套接字端口。相当漂亮。是的，在GCP这也是一项免费服务，别担心。</p><p id="d69a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在GCP控制台中，转到“安全”部分&gt;身份识别代理</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi oq"><img src="../Images/166a3338c2783ab4ffd1bbbd286cbb67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tQCH-rcWq0Ui-4bRC9Nlow.png"/></div></div></figure><p id="49c2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您必须授权来自35.235.240.0/20的访问，这是GCP的本地范围池，将作为您的侦听代理来接受您的隧道连接。单击编辑防火墙规则，并像上次一样将该范围应用于您标记的主机；但是请注意目标端口的差异，这在最后一个窗口中没有指定。</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi or"><img src="../Images/ffd3734a307692171a29d45432efc35f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ji6YFo9DN4qjmA2roQGlpQ.png"/></div></div></figure><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div class="gh gi os"><img src="../Images/f044a5949cb712d170e4a7f38b69c71b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*o0OHPLZJGmhaJIguXtz03w.png"/></div></figure><p id="f23d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注意，对于第一次来说有点奇怪；您可以选择TCP <strong class="kk iu">而无需输入任何值</strong>。你看到的灰度值只是例子，并不是我输入的。选中allow TCP协议，将其他内容留空。继续保存。返回IAP菜单。</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/5d65f1670b6e35abc51293423fc0d4a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*6vSNQ6zDMnh1K9jusbnGWw.png"/></div></figure><p id="28df" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在允许SSH和TCP资源IAP API之后，您应该为您的区域和实例拥有隧道资源组，并带有绿色复选标记，表明您的配置正常。这并不意味着隧道通了；这只是意味着它能够将其转发到您的实例。</p><p id="1534" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在从任何机器创建隧道；你需要安装名为'<a class="ae le" href="https://cloud.google.com/sdk/install" rel="noopener ugc nofollow" target="_blank"> gcloud </a>'的GCP SDK。将它安装在您想要的任何计算机上:</p><ul class=""><li id="c3be" class="lg lh it kk b kl km ko kp kr li kv lj kz lk ld ll lm ln lo bi translated">脚本、API或CLI管理您的VPC实例、网络和GCP控制台的其他方面。请将此视为您的云服务帐户的PowerShell。这是关于如何动态创建SDN的众多工具之一。整洁对吗？</li><li id="d9a9" class="lg lh it kk b kl lp ko lq kr lr kv ls kz lt ld ll lm ln lo bi translated">建立直接到您的实例的IAP SSH或RDP隧道，而无需一直直接向您的实例开放防火墙规则。<strong class="kk iu">注意:</strong>默认情况下，允许RDP/SSH等管理端口从互联网进入您的防火墙。您可以在防火墙VPC网络控制台部分禁用这些规则，以提高安全性。<em class="lf">这可以防止你的实例受到危害，比如你的私钥甚至从你的本地主机上被盗。</em></li></ul><p id="14c8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为我使用Windows连接到我的实例，所以我将使用为gcloud SDK创建的<a class="ae le" href="https://dl.google.com/dl/cloudsdk/channels/rapid/GoogleCloudSDKInstaller.exe" rel="noopener ugc nofollow" target="_blank">交互式MSI </a>。或者，您可以使用powershell并使用。NET下载器对象并执行。请注意，这种方法通常被攻击者滥用，因此如果您运行下面列出的PowerShell下载器，您的终端安全(如AV或EDR)可能会将其检测为“特洛伊木马下载器”。*提示提示*这可能是您的事件或事件分析的一部分，以日志的形式作为您考试的感染点。</p><pre class="ny nz oa ob gt ou ov ow ox aw oy bi"><span id="143b" class="nk mo it ov b gy oz pa l pb pc">(New-Object Net.WebClient).DownloadFile("https://dl.google.com/dl/cloudsdk/channels/rapid/GoogleCloudSDKInstaller.exe", "$env:Temp\GoogleCloudSDKInstaller.exe")<br/><br/>&amp; $env:Temp\GoogleCloudSDKInstaller.exe</span></pre><p id="98cd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">开始安装并完成所有步骤。安装完成后，您将使用google控制台帐户声明IAP隧道的身份部分，如下所示:</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/ca8a5aa601ea923b287b4a94c7e50274.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*gfx19iLRH0MU3o3CsBPqMA.png"/></div></figure><p id="7ac8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，您的浏览器将会打开；如果您已经像我一样登录；选择您在注册GCP时为VPC订阅命名的项目。</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pe"><img src="../Images/c5d02691ad0e350622c979d7ba01f9ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VYplRaZfPoQRm1vwuulsaw.png"/></div></div></figure><p id="3b46" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">浏览选项。还记得您在哪个区域部署了实例吗？对我来说，这是美国中央1-a；所以我在选项中选择了那个区域。您可以在控制台&gt;计算引擎&gt;和虚拟机实例下找到它。这应该是你的最后一个问题。请记住，您还没有<strong class="kk iu">而不是</strong>建立隧道。您只需创建一个<em class="lf">默认配置文件</em>，供gcloud CLI kit在每次从浏览器要求您进行身份验证时使用和连接。让我们继续探索如何更改概要文件，以防您第一次就搞砸了向导。(这种情况时有发生，尤其是当你有多个项目的时候)</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/b607568f9502277e3c94112441e35cb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*hQFPR6kpXtD8ci3F-7qKIg.png"/></div></figure><p id="f232" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以运行gcloud auth list和gcloud config list来检查您当前的配置文件。您还可以运行“gcloud配置集项目<your project="" name="">”，它也可以在控制台中找到，以防它改变上下文。使用<a class="ae le" href="https://cloud.google.com/sdk/gcloud/reference/config/set" rel="noopener ugc nofollow" target="_blank">文档</a>中的语法‘g cloud config set<propertyobj><yourvalue>’。您也可以通过运行“<a class="ae le" href="https://cloud.google.com/sdk/docs/initializing" rel="noopener ugc nofollow" target="_blank"> gcloud init </a>”来重新启动向导。</yourvalue></propertyobj></your></p><p id="faca" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们已经设置了配置文件，如何启动本地端口转发隧道？获取该语法的最简单方法是再次从您的控制台获取，并保留它以备将来记录。转到您单击“SSH连接”的虚拟机实例，而不是单击它；使用下拉菜单:</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi nx"><img src="../Images/5fc12b5e2f2465bd678b24456d754f6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uJ5cfXbNEg7bhIxKHhuKug.png"/></div></div></figure><p id="067d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您应该可以点击“查看gcloud命令”,复制该字符串并将其粘贴到当前powershell或cmd会话中:</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pg"><img src="../Images/682229e611cdc7dc8b79893adff3bfb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*teU8y1fc83vJjifv0yfq4g.png"/></div></div></figure><p id="a5f8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，使用Gcloud SDK将充当您在代理的防火墙规则中输入的那些google ranges的本地端口转发器。它们不会从互联网直接进入您的虚拟机。请注意区域、实例和项目名称是如何指定的，以便IAP隧道能够工作。细心的人会注意到没有生成SSH密钥。您还会注意到，它还以适当的PPK格式生成Putty兼容的密钥，以便与<a class="ae le" href="https://www.ssh.com/ssh/putty/putty-manuals/0.68/Chapter9.html" rel="noopener ugc nofollow" target="_blank"> Pageant </a>或Putty客户端本身一起使用。如果一切顺利，您将从桌面上立即弹出Putty登录窗口。<strong class="kk iu">注意:您的用户名现在是您桌面上的公钥用户名；这不是你的谷歌云控制台帐户名称</strong>。</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi ph"><img src="../Images/a0c1a053e0ab7513f0a7891bf0811794.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*jxZkfWgs8j8lkIArBZfbTw.png"/></div></div></figure><p id="aa36" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果需要在实例上找到公钥，可以在本地主机名的主目录下找到它。ssh/authorized_keys，并保存它以备后用，例如，如果您的密钥出现故障或验证失败，您可以重复使用备份的公钥/私钥对。尽管这不太可能。这也是另一个*提示提示*可能的领域，您必须在linux管理或关键管理目标下的GSE资格考试中进行检查。</p><p id="47b1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可能想知道。那太好了，丹尼斯，谢谢——但是如果我的桌面一直打开一个Putty实例，我该如何将任何东西从我的桌面切换到这个实例呢？很好的问题。有两个东西你可以用。Putty自己的PSCP二进制或标准的WinSCP/ <a class="ae le" href="https://wavemotiondigital.com/tutorials/using-putty-pageant-with-filezilla-on-windows/" rel="noopener ugc nofollow" target="_blank"> FileZilla </a>类型的应用程序。您还可以考虑将<a class="ae le" href="https://www.ssh.com/ssh/putty/putty-manuals/0.68/Chapter7.html" rel="noopener ugc nofollow" target="_blank"> Plink </a>与Pageant结合使用，这样当IAP隧道从一个单独的命令窗口打开时，您就可以自动化VM实例管理或任务。</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pi"><img src="../Images/da3ad7ca4fc793014bfc3db834762f7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PTp41ABp_LuwQ_nEK7bVFw.png"/></div></div></figure><p id="dd49" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，找到gcloud慷慨地为您生成的私钥。注意，它使用了标准的rsa-keygen和putty风格的密钥。你可以在“C:\users\ <your user="" profile="" name="">下找到它。ssh\ "。它将被标记为google_compute_engine.ppa。</your></p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pj"><img src="../Images/37d6bde4c46605d5517f0b7d308ee051.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aVftu7-DX0V7gmY3tdB8ng.png"/></div></div></figure><p id="ff58" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">打开“我的站点”下的FileZilla，定义SFTP(实际上是SCP)协议的使用以及分配给实例的当前WAN IP。这种情况在每次关机和开机时都会发生变化。如果有疑问，使用您现有的putty会话并在quick“curl ifconfig . me”下执行以获取它。将用户设置为在users\profile 目录下指定的本地Windows桌面用户名<strong class="kk iu">。如果你指定了错误的用户，并允许FileZilla连接，这将使你的IP被谷歌的防火墙暂时禁止，你可能不得不关闭/打开你的实例来获取一个新的IP。将您的<strong class="kk iu">密钥文件</strong>设置到google_compute_engine.ppa的位置，然后连接。现在您可以导航到/home/ &lt;您用来传输文件的本地桌面用户名&gt;(如二进制文件、pcaps、日志等)。)</strong></p><h2 id="cdac" class="nk mo it bd mp nl nm dn mt nn no dp mx kr np nq mz kv nr ns nb kz nt nu nd nv bi translated"><em class="nw"> Jupyter笔记本— Google Colab设置</em></h2><p id="87f0" class="pw-post-body-paragraph ki kj it kk b kl nf ju kn ko ng jx kq kr nh kt ku kv ni kx ky kz nj lb lc ld im bi translated">如果您对维护完整的VPC不感兴趣，也不打算接受入口连接；你可能更适合Google Colab Juptyer托管的笔记本。也是免费的。但是，每个任务的计算时间会在90分钟后超时。因此，如果您不需要让某些东西从头开始运行或编译；这是自动构建和托管Python 2/3环境并与通过<a class="ae le" href="https://jakevdp.github.io/PythonDataScienceHandbook/01.05-ipython-and-shell-commands.html" rel="noopener ugc nofollow" target="_blank"> IPython </a>解释的Bash shell命令协同工作的一个很好的选择。重要的是要注意，你没有得到一个完整的交互式TTY。</p><p id="1fe0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您得到的东西可以作为任务加载作业输入和运行，并通常以标准输出返回。然而，某些输出或命令不能很好地与IPython的解释器(如“cat ”)兼容。谷歌Colab笔记本将允许你在它的笔记本控制台中查看文件。因此可能需要使用标准输出重定向。如果对你来说这不是一个很好的展示，这也是一个很好的出口枚举方式。下面你会看到IPython的解释器在解析我的bash shell命令时出现了一个错误，原因是我的管道使用了cat。嘘。</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pk"><img src="../Images/74ec462e1e7b817165dbe62c7601711b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nSw6cd3iZoXG_AvhksDqEQ.png"/></div></div></figure><p id="401f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要纠正这个IPython解释问题，有两个技巧。将您的“cat”输出重定向到一个文件，而不是标准输出，并在控制台中读取它。还有将bash命令语法包装成变量中的字符串，或者使用“eval”调用它。有关更多详细信息，请参见以下示例:</p><pre class="ny nz oa ob gt ou ov ow ox aw oy bi"><span id="8a55" class="nk mo it ov b gy oz pa l pb pc">#Code block cat viewing and piping issues<br/>!stuff-that-creates-std-out &gt;&gt; my-std-out-file.txt #view in the Colab console</span><span id="20a1" class="nk mo it ov b gy pl pa l pb pc">#Code block meta characters causing IPython interpreter errors<br/>!eval "multi command string and arguments here"</span><span id="49ec" class="nk mo it ov b gy pl pa l pb pc">!variable=$(command and/or arguments here with regex)<br/>!command -func $variable &lt;arguments&gt;</span></pre><p id="9152" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的解决方案中，让我们看看使用tshark的效果，我们希望使用正则表达式作为显示过滤器，从pcap中为URI寻找最少10个字符。我们还并排展示了它如何在Colab笔记本之外的Wireshark中完美运行:</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pm"><img src="../Images/1fe68057f5401bf25266f095436590e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VhEwDChCAGVxiAaQedUoQA.png"/></div></div></figure><p id="0235" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们看看当我们将标准输出或重定向到一个可以在控制台中查看的文件时会发生什么。我们展示的例子是使用tcpxtract的本地write来输出文件，这与重定向字符是一样的:</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pn"><img src="../Images/b748b37830fff6aa84cee7ba58e13aef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CCK-fOqrHR9uie-9mtpz5w.png"/></div></div></figure><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pn"><img src="../Images/d185176250d89d114a16f6b81fce0873.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t17hJAL-DpE13p9WFGiqaQ.png"/></div></div></figure><p id="3152" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">colab笔记本还具有连接到互联网的能力。让我们来研究一下它的一般用法。它是便携式的，你可以和其他人分享它来进行“colab”分析，甚至可以互相进行突击测验。</p><p id="d5b5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从这里开始，你有两个选择。我在Github上做了一个colab笔记本，免费提供给公众使用，这样你就可以看到我的用例以及思考过程。对于这个路径，你需要安装Chrome的“<a class="ae le" href="https://chrome.google.com/webstore/detail/open-in-colab/iogfkhleblhcpcekbiedikdehleodpjo" rel="noopener ugc nofollow" target="_blank"> Open in Colab </a>”扩展。接下来，导航到我的Github，点击我的colab笔记本链接<a class="ae le" href="https://colab.research.google.com/github/dc401/mixed_scripts/blob/master/GSE_practice_fun_ipynb.ipynb" rel="noopener ugc nofollow" target="_blank">这里</a>。从这里开始你应该都准备好了。那不是很容易吗？如果你想制作你自己的，你可以直接去https://colab.research.google.com/<a class="ae le" href="https://colab.research.google.com/" rel="noopener ugc nofollow" target="_blank">制作你自己的，并链接到你的Google Drive账户。由你决定，反正计算资源都是免费的。</a></p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi po"><img src="../Images/d4798d53c67e99c081a7a1e5be2742d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AtoH_3uiokd_d-kBf6E5NQ.png"/></div></div></figure><p id="8daf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">colab笔记本的第一课是，如果你使用左侧窗格直接上传文件到会话；它将在会话超时后消失。让这些文件“粘”起来的唯一方法就是把它链接到你的谷歌硬盘上。但是如果你不介意的话，可以随意上传。</p><p id="4501" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，需要注意的一点是，如果您运行的代码块出现超时问题或性能下降，您可以在colab笔记本中查看运行时日志文件。当你等待一项任务完成时，请记住这一点。您还会看到右侧的ram和磁盘使用情况，以监控您的计算时间。是的，我知道屏幕上有一只猫。默认情况下，它有猫和柯基模式选项，当你因代码而沮丧时，它们会在你的屏幕上爬行，给你一种友好的感觉。</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pm"><img src="../Images/b6173ab9d120a99dc25de499d6d184d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KB5p4ZeEEKBWPEipPlmbaw.png"/></div></div></figure><p id="deee" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，这些“已知的问题”已经解决了，让我们来看看使用Colab的一些用例。我将在第2部分中展示更多的案例。现在，让我们把重点放在我们能在colab中做些什么来获得乐趣和可移植性。</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pp"><img src="../Images/9b1625176f8ba36a40e69b4fcc3e9d5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*8IrhqAjbKqNC1XRpGFSzlA.png"/></div></div></figure><p id="f429" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要上传一个文件，打开你左边的文件夹面板，进入“文件”,你可以使用图标或者像PCAP那样拖放文件。如果您需要知道在哪里引用该文件，例如以“cd或ls”的方式，右键单击该文件并选择“复制路径”,现在您可以将它粘贴到您的代码片段中。</p><p id="2197" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们利用一点我们的集成Python环境，让Scapy运行起来。我把这张来自packetlife.net的<a class="ae le" href="https://packetlife.net/media/library/36/scapy.pdf" rel="noopener ugc nofollow" target="_blank">大小抄带到了我的考试中，它帮助我记住了交互对象和功能，而不必参考它的内置帮助，这非常慢，减少了你可以用来思考答案和捕捉标志的时间。一定要用彩色打印。它确实帮助了我。</a></p><p id="ef00" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们继续添加代码块，进行标准的pip安装，并设置<strong class="kk iu">笔记本环境</strong>，就好像它是一个大型脚本文件一样。我强调这一点的原因是，当我们通过IPython解释器运行bash shell命令时，您会看到非Python变量和环境设置是针对每个代码块运行的，而不是<strong class="kk iu">跟随您到后续的代码块。</strong></p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pq"><img src="../Images/3e7bcbd467e0b713576169aff57ab8e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cfg3R0wRhorbCsujn3rCrw.png"/></div></div></figure><p id="3124" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如您所见，我在第一个代码块中添加了一个简单的pip安装。要<strong class="kk iu">执行</strong> it，快捷方式是“<strong class="kk iu"> SHIFT + ENTER </strong>”，然后它将执行并为您提供标准输出/结果，然后自动为您创建第二个代码块。在第[8]行，我设置笔记本使用python3，然后导入scapy模块以及random和sys作为示例。注意每个代码块中都有后续的行号<strong class="kk iu">。代码块本身基于输出线的数量，而块内数量仅基于该块进行编号。</strong></p><p id="2a05" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在与其他团队成员交流或参考时，请记住这一点。您还会看到代码块的第[12]行，其中“ifconfig前面加上了一个砰”！ifconfig”。“bang”字符用于告诉笔记本将它作为/bin/bash IPython解释的命令来执行。我们的输出显示ifconfig没有安装，不用担心；你总是可以”！apt-get更新；apt-get install ifconfig”来获得该功能。</p><p id="dacc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们通过使用Scapy和shell命令，将我们所学的关于基本笔记本用法的知识放在一起。下面我们快跑”！ls-lah；PD；文件。/ <my file="" uploaded="">”。注意每行只有一个刘海字符。在bash中，您可以使用分号将多个命令链接起来，并运行单行循环。</my></p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pr"><img src="../Images/7eb36c6114143cedafad8570df5c87ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m0zghKqZbiwPABEG2k1KoQ.png"/></div></div></figure><p id="32be" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们已经在/content目录下找到了上面的文件，让我们继续在scapy用例中引用它，并在将第一个<strong class="kk iu">包加载到数组中时读取它。您可以在scapy语法中通过“variable = rdpcap("/local/path/to/pcap ")后跟变量[#]来实现这一点。显示()。如果需要，您甚至可以在同一个脚本块中这样做。</strong></p><p id="c018" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可能想知道你能做的就是接收标准输出。好消息是，根据运行的命令或包的类型，您可以运行半交互式shell会话。然而，它相当笨重，而colab笔记本代码块就是为此而设计的。还是可以做到的；记住无论你做什么都有90分钟的休息时间。要进入“根”bash shell会话，您可以通过IPython解释器执行它，并以“交互式”方式运行您的命令，而不是作业任务。您将得到shell会话的错误和警告。</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi ps"><img src="../Images/5ed6e6b010c3964b95b4fbe0e0406d94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6_djfvhZLDrQ7961fZIpRA.png"/></div></div></figure><p id="073e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">除了通过“！apt-get更新；apt-get install <package name="">“笔记本电脑有一条通往互联网的默认路径。酷！我们来练习一下nmap“foo”好吗？</package></p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pt"><img src="../Images/a823456171af0f7da0353518a474ac91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Vb9zEnD7Stmv5GknfMlwg.png"/></div></div></figure><p id="910a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们在没有ping的情况下运行标准的Nmap SYN端口检查，我们不仅可以访问google地址空间，还可以访问其他主机。现在，让我们继续推进我们的colab用例。我们将继续为一个工具安装依赖项，我们知道San将在实验室和资格考试中安装在他们的Kali虚拟机上。</p><p id="87ab" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个工具就是US-CERT 开发的众所周知且令人苦恼的<a class="ae le" href="https://isc.sans.edu/forums/diary/Netflow+on+Nexus+1000v/16865/" rel="noopener ugc nofollow" target="_blank"> iSilk套件。这是大多数安全专业人员不经常使用的东西，因为他们的组织可能会购买商业流量许可和分析器，通常与他们的SIEM结合使用。如果你在我的笔记本上跟着做，这些已经调好的命令和<strong class="kk iu">代码块</strong>需要运行<strong class="kk iu">以便</strong>从上到下启动一个完整的安装。如果你想自己做这些，可以参考SANS storm日记中的iSilk链接。注意，这些命令不会像你一样100%在Colab笔记本上工作。其中一些需要调整一下，如下所示:</a></p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pu"><img src="../Images/69274d1d8d06d5d0f706e29073eeaa92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eHtV9UCETGB5DjAv_MC3OA.png"/></div></div></figure><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div class="gh gi pv"><img src="../Images/fe9551cbdc3c9e0ca2d67d56b78e9e3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*eGEWiypxIUOSlVnbWWtEpQ.png"/></div></figure><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pw"><img src="../Images/e7bc7c7106049927b5594961256f2d18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HMvgXOaVPeKrTQD0kIOoTg.png"/></div></div></figure><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi px"><img src="../Images/5a307975f4d13f289b13b93f3ceb6f72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KWXWAE-7EnQ7OpVkesh_Vg.png"/></div></div></figure><p id="5bae" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们已经安装了silk标准工具；我们不会设置YaF来“收集”流量，因为这不是最终目标。我们想把重点放在rw-tools套件上，这就是您在GCIA看到的。下面是一些例子，说明如何将PCAP文件转换为创建流记录进行分析所需的适当的IPFIX格式。请注意，使用rwfilter和rwcut可以在完整的TTY交互shell中工作，但是管道无法正确解释，因此读取到rwcut中的文件会失败。虽然免费也不可怕！</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi py"><img src="../Images/194b3e398dba0a3be7ec1e440289c92b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hJtMZh-FWJ4UMcXMQ1GXKg.png"/></div></div></figure><p id="22a7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们从恶意迷宫勒索软件PCAP获得了C2的详细信息。让我们在tshark中做类似的事情，因为为什么有时要采取额外的步骤呢？我提到过，当您的主要工具对您不起作用时，有时您需要考虑替代工具。我们可以在特定的字段和协议上使用tshark统计数据，就像我们在flow上所做的一样，它将提供类似于您在没有运行X服务器的情况下在其附带的wireshark gui中看到的内容。让我们从基于IP地址的端点分析开始，我们看到每个主机进出的数据包的字节数。</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pz"><img src="../Images/9100e48ed9337bd103ed37a6cc5c9b2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rSjOsE21Lj4C523SicIgVQ.png"/></div></div></figure><p id="f5a0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们已经看到了一些正在聊天的主机字节；我们可以明显地看到一些C2心跳，发送相同的传输字节和数据包计数，而不是接收到/24块中的IP。也许一些替代端口值得在L4检查TCP和UDP，看看除了一些可能的心跳流之外，我们是否还能看到任何东西:</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi qa"><img src="../Images/7dadc157222d6aa826526eaa737195ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VUIrHFvKexwtSqwJlLb5aw.png"/></div></div></figure><p id="37f8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用我们的模式和大约10-11秒的短脉冲间隔，通过HTTP明文向相同的主机发送大量的短期端口。有意思…</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi qb"><img src="../Images/e0efc6c498e045fbffc19bd3dec4af94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0pDHN4H4Qjuoj6PWjPgxcA.png"/></div></div></figure><p id="9d53" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用HTTP POST命令的简单显示过滤器检查closer，我们看到一些随机生成的语法，与我们的间隔和短突发流量相对应。有要检查的域名或域名吗？</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi qc"><img src="../Images/a162ac82740550d42fdac8eb28701850.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_WPWTD4RGLULUHVkUzajVw.png"/></div></div></figure><p id="051d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们再次使用tshark "-z "进行统计，并部署一个DNS树，看看我们能否将IP与别名匹配起来。</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi qd"><img src="../Images/282bb36881da745e798b1322d13e13e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o3G2BXcniXAl_0PX4C5gQg.png"/></div></div></figure><p id="d197" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">哦，看，0个DNS查询——如果你问我的话，肯定不是正常的网络流量；假设我们进行了完整的pcap，而BPF没有过滤掉DNS流量。那绝对是任何人的网络都不好的东西。</p><p id="4762" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我们结束第1部分之前:让我们探索一下Google的Colab笔记本设置。我们如何引用Tshark和Tcpdump接口？通过与笔记本的bash shell交互，我们获得了有趣的输出:</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi qe"><img src="../Images/952c0f9b10a2a8d096d5f74f5432001c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mz05diw0yD7Unhak8lwajw.png"/></div></div></figure><p id="74e3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从ifconfig看起来很简单，但是当我们进行接口转储时，Tshark看到了什么？</p><figure class="ny nz oa ob gt oc gh gi paragraph-image"><div class="gh gi qf"><img src="../Images/144872832a82e5c6950fc3d1aa0628d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*XwpV7olssBleDOLTDbZ3-g.png"/></div></figure><p id="11a7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们在这里看到的是没有明确的列表，因为Tshark找不到ifconfig可能能够识别的接口。因此，您可以参考tshark安装中列出的扩展“extcap”实用程序。这些extcap接口对于环回测试非常有用，比如随机生成数据包。更多信息可以在<a class="ae le" href="https://tshark.dev/capture/sources/extcap_interfaces/" rel="noopener ugc nofollow" target="_blank">开发者文档</a>网站上找到。</p><h2 id="c9c3" class="nk mo it bd mp nl nm dn mt nn no dp mx kr np nq mz kv nr ns nb kz nt nu nd nv bi translated"><strong class="ak">收官第一部</strong></h2><p id="6dc9" class="pw-post-body-paragraph ki kj it kk b kl nf ju kn ko ng jx kq kr nh kt ku kv ni kx ky kz nj lb lc ld im bi translated">我希望您喜欢我们的一些探索技巧和额外的免费资源，我们可以用它们来支持分析，并让您掌握几乎来自世界任何地方的技能。请继续关注第2部分，该部分将重点介绍许多值得寻找威胁的攻击技术，并考虑从取证分析的角度收集的IOC，这些应该在您的检查中加以考虑。</p><p id="e9b4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你准备好第二部分了吗？点击<a class="ae le" href="https://medium.com/@dw.chow/study-guide-for-the-gse-giac-security-expert-part-2-d7b30ddd5845" rel="noopener">此处</a>继续。</p><p id="fcb3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一如既往，让我知道你对这篇文章的看法，如果你需要任何安全服务，请在<a class="ae le" href="http://www.scissecurity.com" rel="noopener ugc nofollow" target="_blank">www.scissecurity.com</a>找到我</p><p id="865e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">访问专家视图— </strong> <a class="ae le" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">订阅DDI英特尔</strong> </a></p></div></div>    
</body>
</html>