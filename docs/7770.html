<html>
<head>
<title>Algorithmic Trading with Python.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python进行算法交易。</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/algorithmic-trading-with-python-80ee7e7fb8b2?source=collection_archive---------7-----------------------#2020-12-22">https://medium.datadriveninvestor.com/algorithmic-trading-with-python-80ee7e7fb8b2?source=collection_archive---------7-----------------------#2020-12-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="048a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">高级技术的初级编码。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/18c7d4d9db6701a2dcd2f56b271136fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r8kE2zZC6DOQntquBvfj6w.png"/></div></div></figure><p id="7926" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">目录:</p><ul class=""><li id="547c" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn lg lh li lj bi translated">从北海巨妖Api提取数据</li><li id="dea1" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">格式化数据帧</li><li id="8545" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">计算每日回报</li><li id="8a53" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">生成指数移动平均线(短/长窗口)</li><li id="d3b4" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">用均线绘制比特币的收盘价</li><li id="8cb5" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">计算每日波动性</li><li id="9fec" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">构建布林线</li></ul><h1 id="908f" class="lp lq it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">简介:</h1><p id="7355" class="pw-post-body-paragraph jq jr it js b jt mn jv jw jx mo jz ka kb mp kd ke kf mq kh ki kj mr kl km kn im bi translated">首先，让我们先了解这篇文章的目的，它为普通散户投资者提供了一个快速简单的方法来导入数据，使用这些数据来突出关键指标，并绘制一个信息图表，供我们评估我们的头寸。</p><p id="0846" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这篇文章中，我们将介绍三种使用各种技术指标的基本交易信号。</p><pre class="kq kr ks kt gt ms mt mu mv aw mw bi"><span id="6e77" class="mx lq it mt b gy my mz l na nb"># Import libraries and dependencies<br/>import pandas as pd<br/>import numpy as np<br/>from pathlib import Path<br/>%matplotlib inline</span><span id="0d87" class="mx lq it mt b gy nc mz l na nb">import warnings<br/>warnings.filterwarnings('ignore')</span><span id="ce90" class="mx lq it mt b gy nc mz l na nb"># Set path to CSV and read in CSV<br/>csv_path = Path('../Medium/kraken_btc_1hr.csv')<br/>btc_df=pd.read_csv(csv_path)<br/>btc_df.head()</span></pre><p id="a6a9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">我们将在这个例子中使用的数据来自</em> <a class="ae nd" href="https://www.kraken.com/en-us/" rel="noopener ugc nofollow" target="_blank"> <em class="ko">【北海巨妖】</em> </a> <em class="ko">，如果你想使用他们的实时数据，你必须创建一个帐户并获得一个API密钥。但是，您可以通过进入my</em><a class="ae nd" href="https://github.com/scottandersen23/Medium_Blog" rel="noopener ugc nofollow" target="_blank"><em class="ko">GitHub</em></a><em class="ko">并下载csv.file. </em>来找到本文中使用的确切数据</p><pre class="kq kr ks kt gt ms mt mu mv aw mw bi"><span id="70a5" class="mx lq it mt b gy my mz l na nb"># Set index as datetime object and drop columns</span><span id="dccd" class="mx lq it mt b gy nc mz l na nb">btc_df.set_index(pd.to_datetime(btc_df['Timestamp'], infer_datetime_format=True), inplace=True)</span><span id="b2ff" class="mx lq it mt b gy nc mz l na nb">btc_df.drop(columns=['Timestamp'], inplace=True)<br/>btc_df.head()</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ne"><img src="../Images/9a4580d38076cdb1c6a222ee2e8ef6d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iQAeOEQg7ZjkbXOdr_gIGA.png"/></div></div></figure><p id="cc9e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我们用我们想要的列清理了数据集之后，在这种情况下删除“NaN”值并计算每日百分比回报是很重要的。</p><div class="nf ng gp gr nh ni"><a href="https://www.datadriveninvestor.com/2020/12/07/name-matching-techniques-with-python/" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd iu gy z fp nn fr fs no fu fw is bi translated">使用Python |数据驱动投资者的名称匹配技术</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">我们确实面临很多情况，我们必须匹配一个有很多变体的单词。这可能是因为错别字…</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw kz ni"/></div></div></a></div><p id="c1fe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们还将在数据框架中添加一个名为“每日回报”的新列。</p><pre class="kq kr ks kt gt ms mt mu mv aw mw bi"><span id="3c77" class="mx lq it mt b gy my mz l na nb"># Drop NAs and calculate daily percent return</span><span id="3047" class="mx lq it mt b gy nc mz l na nb">btc_df['daily_return'] = btc_df['Close'].dropna().pct_change()<br/>btc_df</span></pre><p id="3595" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">交易信号#1: </strong>指数移动平均线</p><ul class=""><li id="ee7b" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn lg lh li lj bi translated"><em class="ko">与简单移动平均线(SMA)相比，收盘价的指数移动平均线(EMA)代表一种移动平均线，其对最近的价格给予更多的权重或关注。</em></li></ul><pre class="kq kr ks kt gt ms mt mu mv aw mw bi"><span id="2ef3" class="mx lq it mt b gy my mz l na nb"># Set short and long windows<br/>short_window = 1<br/>long_window = 10</span><span id="c5dd" class="mx lq it mt b gy nc mz l na nb"># Construct a `Fast` and `Slow` Exponential Moving Average from short and long windows, respectively<br/>btc_df['fast_close'] = btc_df['Close'].ewm(halflife=short_window).mean()<br/>btc_df['slow_close'] = btc_df['Close'].ewm(halflife=long_window).mean()</span><span id="c073" class="mx lq it mt b gy nc mz l na nb"># Construct a crossover trading signal<br/>btc_df['crossover_long'] = np.where(btc_df['fast_close'] &gt; btc_df['slow_close'], 1.0, 0.0)<br/>btc_df['crossover_short'] = np.where(btc_df['fast_close'] &lt; btc_df['slow_close'], -1.0, 0.0)<br/>btc_df['crossover_signal'] = btc_df['crossover_long'] + btc_df['crossover_short']</span><span id="01af" class="mx lq it mt b gy nc mz l na nb">btc_df.head()</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nx"><img src="../Images/9ce765549d53967c299f125251674763.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E0NKYCRCCSXpUd97X2vNgg.png"/></div></div></figure><p id="85e4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">绘制比特币“收盘价”的均线</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ny"><img src="../Images/5caa8f2105a0df7d49807c23bd91dd19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9RqeD46mGBco-NKQ3KC0uw.png"/></div></div></figure><p id="835c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">交易信号#2: </strong>日收益率波动的均线</p><pre class="kq kr ks kt gt ms mt mu mv aw mw bi"><span id="6804" class="mx lq it mt b gy my mz l na nb"># Set short and long volatility windows<br/>short_vol_window = 1<br/>long_vol_window = 10</span><span id="0729" class="mx lq it mt b gy nc mz l na nb"># Construct a `Fast` and `Slow` Exponential Moving Average from short and long windows, respectively<br/>btc_df['fast_vol'] = btc_df['daily_return'].ewm(halflife=short_vol_window).std()<br/>btc_df['slow_vol'] = btc_df['daily_return'].ewm(halflife=long_vol_window).std()</span><span id="d8b7" class="mx lq it mt b gy nc mz l na nb"># Construct a crossover trading signal<br/>btc_df['vol_trend_long'] = np.where(btc_df['fast_vol'] &lt; btc_df['slow_vol'], 1.0, 0.0)<br/>btc_df['vol_trend_short'] = np.where(btc_df['fast_vol'] &gt; btc_df['slow_vol'], -1.0, 0.0) <br/>btc_df['vol_trend_signal'] = btc_df['vol_trend_long'] + btc_df['vol_trend_short']</span></pre><p id="57c4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">情节:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nz"><img src="../Images/7e19bb08bc436987902890a9b6ed96d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gzX6fajelPq7I-Ut1eEqMQ.png"/></div></div></figure><ul class=""><li id="fd17" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn lg lh li lj bi translated">当日回报波动的短窗口(快速)均线大于日回报波动的长窗口(慢速)均线时，交叉表明日回报波动预期上升时存在做空机会。</li></ul><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi oa"><img src="../Images/15da670ea5ced3a40225b8fc9c75a5fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BlhFjuKVlA0Eu_XXO-_tkA.png"/></div></div></figure><p id="54c8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">交易信号#3: </strong>布林线</p><ul class=""><li id="bf37" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn lg lh li lj bi translated"><em class="ko">布林线描述了一个中、上、下三个波段，其中中间是收盘价的简单移动平均线(SMA)，上下两个波段分别描述了SMA上方和下方的滚动标准差。</em></li></ul><pre class="kq kr ks kt gt ms mt mu mv aw mw bi"><span id="5e1d" class="mx lq it mt b gy my mz l na nb"># Set bollinger band window<br/>bollinger_window = 20</span><span id="41f8" class="mx lq it mt b gy nc mz l na nb"># Calculate rolling mean and standard deviation<br/>btc_df['bollinger_mid_band'] = btc_df['Close'].rolling(window=bollinger_window).mean()<br/>btc_df['bollinger_std'] = btc_df['Close'].rolling(window=20).std()</span><span id="c5bc" class="mx lq it mt b gy nc mz l na nb"># Calculate upper and lowers bands of bollinger band<br/>btc_df['bollinger_upper_band']  = btc_df['bollinger_mid_band'] + (btc_df['bollinger_std'] * 1)<br/>btc_df['bollinger_lower_band']  = btc_df['bollinger_mid_band'] - (btc_df['bollinger_std'] * 1)</span><span id="7be4" class="mx lq it mt b gy nc mz l na nb"># Calculate bollinger band trading signal<br/>btc_df['bollinger_long'] = np.where(btc_df['Close'] &lt; btc_df['bollinger_lower_band'], 1.0, 0.0)<br/>btc_df['bollinger_short'] = np.where(btc_df['Close'] &gt; btc_df['bollinger_upper_band'], -1.0, 0.0)<br/>btc_df['bollinger_signal'] = btc_df['bollinger_long'] + btc_df['bollinger_short']</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ob"><img src="../Images/86dd87874fb7163f6b8c829f29f3216b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v8SdYMw9O0MLumCbpS8Row.png"/></div></div></figure><p id="d935" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">绘制布林线:</p><pre class="kq kr ks kt gt ms mt mu mv aw mw bi"><span id="cf52" class="mx lq it mt b gy my mz l na nb"># Plot the Bollinger Bands for BTC/USD closing prices</span><span id="531c" class="mx lq it mt b gy nc mz l na nb">btc_df[['Close','bollinger_mid_band','bollinger_upper_band','bollinger_lower_band']].plot(figsize=(20,10))</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi oc"><img src="../Images/87f95ce95055c7a7d8f0616a796c175f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IHjk5T0H_5LWhf6OlEAm9Q.png"/></div></div></figure><p id="1e10" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当价格向高波段或低波段移动时，它会反弹向平均价格。这是因为上下波段代表一定的标准差。因此，价格更有可能回到它的平均值，而不是保持在一个不太可能远离平均值的范围内。</p><p id="7ba9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，当比特币收盘价小于下限时，存在一个<strong class="js iu">长</strong>的机会:信号表明价格行动将倾向于向上移动，更符合价格在负标准差内的位置。</p><p id="017e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">相反的情况存在一个短暂的机会，在这种情况下，资产收盘价高于上限，表明价格波动将趋于向下移动，并在正标准差范围内。</p><p id="3963" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">感谢您的阅读！</strong></p><p id="aced" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">如果你觉得这篇文章有用，欢迎在</em> <a class="ae nd" href="https://github.com/scottandersen23/Medium_Blog/tree/main/Articles" rel="noopener ugc nofollow" target="_blank"> <em class="ko"> GitHub </em> </a> <em class="ko">上下载我的个人代码。你也可以直接在scottandersen23@gmail.com给我发邮件，在</em><a class="ae nd" href="https://www.linkedin.com/in/scott-andersen-3208897b/" rel="noopener ugc nofollow" target="_blank"><em class="ko">LinkedIn</em></a><em class="ko">上找到我。有兴趣了解更多关于数据分析、数据科学和机器学习应用的信息吗？跟我上</em> <a class="ae nd" href="https://medium.com/@scottandersen23" rel="noopener"> <em class="ko">中</em> </a> <em class="ko">。</em></p><h2 id="893a" class="mx lq it bd lr od oe dn lv of og dp lz kb oh oi md kf oj ok mh kj ol om ml on bi translated">访问专家视图— <a class="ae nd" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank">订阅DDI英特尔</a></h2></div></div>    
</body>
</html>