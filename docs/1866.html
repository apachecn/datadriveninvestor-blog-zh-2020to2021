<html>
<head>
<title>Windows Sandbox</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Windows沙盒</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/windows-sandbox-163d873e78ce?source=collection_archive---------3-----------------------#2020-04-03">https://medium.datadriveninvestor.com/windows-sandbox-163d873e78ce?source=collection_archive---------3-----------------------#2020-04-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="5e6c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Windows沙盒是基于Windows容器技术构建的，该技术允许您构建一个隔离的临时桌面环境，您可以在该环境中运行不受信任的软件。您在Windows沙箱中运行和安装的软件不会影响主机。如果关闭Windows沙盒，所有更改和安装在沙盒中的所有软件都将被删除。这类似于Windows Defender应用程序保护，已经用于为Microsoft Edge构建沙盒环境。</p><p id="e4a8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Windows沙盒具有以下属性:</p><ul class=""><li id="e050" class="ko kp it js b jt ju jx jy kb kq kf kr kj ks kn kt ku kv kw bi translated"><strong class="js iu">Windows</strong>的一部分Windows 10 Pro和Enterprise附带了此功能所需的一切。不需要下载VHD！</li><li id="f193" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated"><strong class="js iu">纯净</strong>——每次Windows沙盒运行时，它就像全新安装的Windows一样干净</li><li id="4849" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated"><strong class="js iu">一次性</strong> —设备上无任何东西存留；关闭应用程序后，所有内容都会被丢弃</li><li id="97dd" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated"><strong class="js iu">安全</strong> —使用基于硬件的虚拟化进行内核隔离，这依赖于微软的虚拟机管理程序来运行独立的内核，将Windows沙盒与主机隔离开来</li><li id="5a04" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated"><strong class="js iu">高效</strong> —使用集成内核调度程序、智能内存管理和虚拟GPU</li></ul><h1 id="916d" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">Windows沙盒体系结构</h1><p id="6625" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">Windows沙盒构建在Windows容器上。</p><p id="0374" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">动态生成的图像</strong></p><ul class=""><li id="c7bd" class="ko kp it js b jt ju jx jy kb kq kf kr kj ks kn kt ku kv kw bi translated">Windows Sandbox利用安装在您计算机上的Windows 10。</li><li id="f661" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">通过使用“动态基础映像”，Windows沙盒始终呈现一个干净的环境:大多数操作系统文件是不可变的，可以与Windows沙盒自由共享。一小部分操作系统文件是可变的，不能共享，所以沙盒基础映像包含它们的原始副本。完整的Windows映像可以由主机上可共享的不可变文件和可变文件的原始副本的组合来构建。</li><li id="8526" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">Windows沙盒具有完整的Windows安装，无需下载或存储额外的Windows副本即可启动。</li><li id="5d61" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">当没有安装Windows沙盒时，动态基础映像是一个只有30MB的压缩包。安装动态基础包时，它会占用大约500MB的磁盘空间。</li></ul><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi mg"><img src="../Images/58f2054d620584bd1e34e72aa0d7cdbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TdklXxwv1vCGonk2"/></div></div></figure><p id="2323" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">智能内存管理和共享</strong></p><ul class=""><li id="28b7" class="ko kp it js b jt ju jx jy kb kq kf kr kj ks kn kt ku kv kw bi translated">如果主机面临内存压力，它可以像处理进程一样从容器中回收内存。</li></ul><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ms"><img src="../Images/5922942f80e62470825e16a7a846f2c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dYrLbMcO9HgrVzVh"/></div></div></figure><ul class=""><li id="0b55" class="ko kp it js b jt ju jx jy kb kq kf kr kj ks kn kt ku kv kw bi translated">Windows沙盒通过一种称为“直接映射”的技术，将与主机相同的物理内存页面用于操作系统二进制文件。</li></ul><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ms"><img src="../Images/fa2d8b3a8f3993ed4d8217873e3ea5f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MyoP6eIz87H_mWJQ"/></div></div></figure><p id="e19d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">集成内核调度器</strong> —通过更好地对主机和沙箱中的进程进行优先级排序，提高响应能力。</p><ul class=""><li id="da26" class="ko kp it js b jt ju jx jy kb kq kf kr kj ks kn kt ku kv kw bi translated">Windows沙盒使用一种叫做“集成调度程序”的新技术，它允许主机决定沙盒何时运行。</li><li id="833f" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">Windows沙盒采用一种独特的调度策略，允许沙盒的虚拟处理器以与为进程调度线程相同的方式进行调度。主机上的高优先级任务可以抢占沙箱中不太重要的工作。使用集成调度程序的好处是，主机将Windows沙盒作为一个进程而不是虚拟机来管理，这导致主机的响应速度更快，类似于<a class="ae mf" href="https://en.wikipedia.org/wiki/Kernel-based_Virtual_Machine" rel="noopener ugc nofollow" target="_blank"> Linux KVM </a>。</li><li id="9d5a" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">这里的整个目标是将沙箱视为一个应用程序，但具有虚拟机的安全保证。</li></ul><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ms"><img src="../Images/7b4c7bd785e83210e4a7314bf816ec90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ER8J1EOUpTAgBChT"/></div></div></figure><p id="4933" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">快照和克隆</strong>改进沙盒的启动时间</p><p id="a1aa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">图形虚拟化</strong>受益于硬件加速渲染。需要具有兼容GPU和图形驱动程序(WDDM 2.5或更新版本)的系统。不兼容的系统将使用微软基于CPU的渲染技术Windows高级光栅化平台(WARP)在Windows沙盒中渲染应用。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ms"><img src="../Images/11dbfbe1a75e9f9127b1e3bad3b05d14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oCtNgmZ0LIrdKNex"/></div></div></figure><p id="5ef1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">电池直通</strong>感知主机的电池状态，从而优化功耗。类似于Windows 10 Hyper-V电池直通。</p><h1 id="be77" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">Windows沙盒的先决条件</h1><ul class=""><li id="77dc" class="ko kp it js b jt ma jx mb kb mt kf mu kj mv kn kt ku kv kw bi translated">Windows 10专业版或企业版18305或更高版本</li><li id="0507" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">AMD64架构</li><li id="97ca" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">BIOS中启用的虚拟化功能</li><li id="00ea" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">至少4GB内存(建议8GB)</li><li id="e5e0" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">至少1 GB的可用磁盘空间(建议使用SSD)</li><li id="6e86" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">至少2个CPU内核(建议使用4个超线程内核)</li></ul><h1 id="f49d" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">快速启动</h1><ol class=""><li id="330f" class="ko kp it js b jt ma jx mb kb mt kf mu kj mv kn mw ku kv kw bi translated">确保您的计算机使用的是Windows 10 Pro或Enterprise，内部版本18305或更高版本。</li><li id="9885" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn mw ku kv kw bi translated">支持虚拟化:</li></ol><ul class=""><li id="6018" class="ko kp it js b jt ju jx jy kb kq kf kr kj ks kn kt ku kv kw bi translated">如果您使用的是物理机，请确保在BIOS中启用了虚拟化功能。</li><li id="baea" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">如果您使用虚拟机，请使用以下PowerShell cmdlet启用嵌套虚拟化:</li></ul><pre class="mh mi mj mk gt mx my mz na aw nb bi"><span id="ae23" class="nc ld it my b gy nd ne l nf ng">Set-VMProcessor -VMName &lt;VMName&gt; -ExposeVirtualizationExtensions $true</span></pre><p id="ca82" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.打开Windows功能，然后选择Windows沙盒。选择“确定”安装Windows沙盒。可能会要求您重新启动计算机。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/ee7c3bb483dc7e19e24ba1ca65a97149.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/0*BOa88wwInyKPJN4Y"/></div></figure><p id="6891" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您也可以运行以下PowerShell命令:</p><pre class="mh mi mj mk gt mx my mz na aw nb bi"><span id="7759" class="nc ld it my b gy nd ne l nf ng">Enable-WindowsOptionalFeature -FeatureName "Containers-DisposableClientVM" -Online</span></pre><p id="ce3a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">4.使用开始菜单，找到Windows沙盒，运行它，并允许提升</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ni"><img src="../Images/bf0a816189e7b420c18f89ff7128037c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uZMN8QfPDCgBTbdM"/></div></div></figure><p id="9232" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">或者只运行WindowsSandbox.exe cmd C:\ Users \ % username % \ windowssandbox . exe</p><p id="041a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">5.从主机复制可执行文件</p><p id="e594" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">6.将可执行文件粘贴到Windows沙盒的窗口中(在Windows桌面上)</p><p id="1be2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">7.在Windows沙盒中运行可执行文件；如果它是一个安装程序，继续安装它</p><p id="0d3c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">8.运行应用程序并像平常一样使用它</p><p id="1f36" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">9.当你完成实验后，你可以简单地关闭Windows沙盒应用程序。所有沙盒内容将被丢弃并永久删除</p><p id="9140" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">10.确认主机没有您在Windows沙盒中所做的任何修改。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ms"><img src="../Images/0a39bed2474ba7590ead65276ddcba09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FKmGAhYBmK5RK79g"/></div></div></figure><p id="b13c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Windows沙盒尊重主机诊断数据设置。所有其他隐私设置都设置为默认值。</p><p id="b504" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae mf" href="https://www.microsoft.com/en-us/videoplayer/embed/RE4rFAo" rel="noopener ugc nofollow" target="_blank">https://www.microsoft.com/en-us/videoplayer/embed/RE4rFAo</a></p><h1 id="29b8" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">Windows沙盒—配置</h1><h1 id="e245" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">概观</h1><p id="1df5" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">沙盒配置文件被格式化为XML，并通过。wsb文件扩展名。配置文件允许用户控制Windows沙盒的以下方面:</p><ol class=""><li id="71b7" class="ko kp it js b jt ju jx jy kb kq kf kr kj ks kn mw ku kv kw bi translated">vGPU(虚拟化GPU):启用或禁用虚拟化GPU。如果禁用vGPU，沙盒将使用Windows高级光栅化平台(WARP)。</li><li id="e813" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn mw ku kv kw bi translated">网络:在沙箱中启用或禁用网络访问。</li><li id="a9a1" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn mw ku kv kw bi translated">映射的文件夹:共享主机上具有读或写权限的文件夹。请注意，暴露主机目录可能会允许恶意软件影响系统或窃取数据。</li><li id="8ecf" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn mw ku kv kw bi translated">登录命令:当Windows沙盒启动时执行的命令。</li><li id="18d0" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn mw ku kv kw bi translated">音频输入:在沙箱中共享主机的麦克风输入。</li><li id="4d8e" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn mw ku kv kw bi translated">视频输入:将主机的网络摄像头输入共享到沙盒中。</li><li id="4e35" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn mw ku kv kw bi translated">受保护的客户端:将RDP会话的增强安全设置置于沙箱中。</li><li id="54f5" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn mw ku kv kw bi translated">打印机重定向:将打印机从主机共享到沙箱中。</li><li id="9acc" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn mw ku kv kw bi translated">剪贴板重定向:与沙箱共享主机剪贴板，以便文本和文件可以来回粘贴。</li><li id="0cfe" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn mw ku kv kw bi translated">Memory in MB:分配给沙箱的内存量，以兆字节为单位。</li></ol><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/bf13f5b2d3a61d182addcc9031286544.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/0*q6ovXKeKs8QS-oAq"/></div></figure><p id="7083" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">配置文件可用于精确控制Windows沙盒，以增强隔离。</p><p id="eaaf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">双击配置文件以在Windows沙盒中打开它，或者通过命令行调用它，如下所示:</p><pre class="mh mi mj mk gt mx my mz na aw nb bi"><span id="0e28" class="nc ld it my b gy nd ne l nf ng">C:\Temp&gt; MyConfigFile.wsb</span></pre><p id="10b2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下面是您可以在配置文件中使用的不同设置的快速概述。</p><h1 id="4d95" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">Windows沙盒配置文件、值和限制</h1><p id="51c7" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated"><strong class="js iu"> vGPU </strong>:启用或禁用GPU共享。</p><p id="63fa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="nj">支持值</em>:</p><p id="48e8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Enable:在沙箱中启用vGPU支持。Disable:在沙箱中禁用vGPU支持。如果设置了该值，沙盒将使用软件渲染，这可能比虚拟化GPU慢。默认vGPU支持已禁用。</p><p id="cad8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">启用虚拟化GPU可能会增加沙箱的攻击面。</p><p id="1852" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">联网</strong>:在沙箱中启用或禁用联网。您可以禁用网络访问以减少沙箱暴露的攻击面。</p><p id="eb1b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="nj">支持的值</em>:</p><p id="5a96" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Disable:禁用沙箱中的网络。默认值:这是网络支持的默认值。该值通过在主机上创建虚拟交换机来启用网络，并通过虚拟NIC将沙箱连接到主机。</p><p id="a3a9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">启用网络会将不受信任的应用程序暴露给内部网络。</p><p id="ee07" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> Mapped folders </strong>:一个文件夹数组，每个文件夹代表主机上的一个位置，该位置将被共享到指定路径的沙箱中。目前，不支持相对路径。如果没有指定路径，文件夹将被映射到容器用户的桌面。</p><p id="e713" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">可扩展标记语言</p><pre class="mh mi mj mk gt mx my mz na aw nb bi"><span id="4a72" class="nc ld it my b gy nd ne l nf ng">&lt;MappedFolders&gt;<br/>  &lt;MappedFolder&gt; <br/>    &lt;HostFolder&gt;absolute path to the host folder&lt;/HostFolder&gt; <br/>    &lt;SandboxFolder&gt;absolute path to the sandbox folder&lt;/SandboxFolder&gt; <br/>    &lt;ReadOnly&gt;value&lt;/ReadOnly&gt; <br/>  &lt;/MappedFolder&gt;<br/>  &lt;MappedFolder&gt;  <br/>    ...<br/>  &lt;/MappedFolder&gt;<br/>&lt;/MappedFolders&gt;</span></pre><p id="f010" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nj"> HostFolder </em> </strong>:指定主机上要共享到沙箱中的文件夹。请注意，该文件夹必须已经存在于主机上，否则容器将无法启动。</p><p id="214f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nj">沙盒文件夹</em> </strong>:指定沙盒中文件夹映射到的目的地。如果该文件夹不存在，将会创建它。如果没有指定沙盒文件夹，该文件夹将被映射到容器桌面。</p><p id="3b56" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"><em class="nj"/></strong>ReadOnly:如果为true，则强制从容器内对共享文件夹进行只读访问。支持的值:真/假。默认为false。</p><p id="803c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">从主机映射的文件和文件夹可能会被沙盒中的应用程序破坏，或者可能会影响主机。</p><p id="a2ad" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">登录命令</strong>:指定沙箱登录后自动调用的单个命令。沙盒中的应用程序在容器用户帐户下运行。</p><p id="eb56" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">可扩展标记语言</p><pre class="mh mi mj mk gt mx my mz na aw nb bi"><span id="cdf5" class="nc ld it my b gy nd ne l nf ng">&lt;LogonCommand&gt;<br/>  &lt;Command&gt;command to be invoked&lt;/Command&gt;<br/>&lt;/LogonCommand&gt;</span></pre><p id="f11f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nj">命令</em> </strong>:登录后要执行的容器内可执行文件或脚本的路径。</p><p id="700b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">尽管非常简单的命令也可以工作(例如启动可执行文件或脚本)，但是涉及多个步骤的更复杂的场景应该放在脚本文件中。这个脚本文件可以通过共享文件夹映射到容器中，然后通过LogonCommand指令执行。</p><p id="ce38" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">音频输入</strong>:启用或禁用沙箱的音频输入。</p><p id="613b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">启用:在沙箱中启用音频输入。如果设置了这个值，沙箱将能够接收用户的音频输入。使用麦克风的应用可能需要这种能力。禁用:禁用沙箱中的音频输入。如果设置了该值，沙盒将无法接收用户的音频输入。在这种设置下，使用麦克风的应用程序可能无法正常工作。默认值:这是音频输入支持的默认值。目前，这意味着音频输入已启用。</p><p id="9a25" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将主机音频输入暴露给容器可能存在安全隐患。</p><p id="4558" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">视频输入</strong>:启用或禁用沙盒的视频输入。</p><p id="4076" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">启用:在沙箱中启用视频输入。禁用:禁用沙箱中的视频输入。使用视频输入的应用程序可能无法在沙箱中正常运行。默认值:这是视频输入支持的默认值。目前，这意味着视频输入被禁用。使用视频输入的应用程序可能无法在沙箱中正常运行。</p><p id="7593" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将主机视频输入暴露给容器可能存在安全隐患。</p><p id="ee82" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">受保护客户端</strong>:对沙盒远程桌面客户端应用额外的安全设置，减少其攻击面。</p><p id="ee6c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Enable:在受保护的客户端模式下运行Windows沙盒。如果设置了该值，沙箱运行时会启用额外的安全缓解措施。Disable:在标准模式下运行沙箱，没有额外的安全缓解措施。默认值:这是受保护客户端模式的默认值。目前，这意味着沙箱不能在受保护的客户端模式下运行。</p><p id="f518" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此设置可能会限制用户在沙箱内外复制/粘贴文件的能力。</p><p id="6a1a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">打印机重定向</strong>:启用或禁用从主机到沙箱的打印机共享。</p><p id="679d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">支持的值:</p><p id="22c6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">启用:启用沙箱中主机打印机的共享。Disable:在沙箱中禁用打印机重定向。如果设置了该值，沙盒将无法从主机查看打印机。默认值:这是打印机重定向支持的默认值。目前，这意味着打印机重定向被禁用。</p><p id="a31b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">剪贴板重定向</strong>:启用或禁用主机剪贴板与沙箱的共享。</p><p id="3e49" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Disable:在沙箱中禁用剪贴板重定向。如果设置了该值，沙盒内外的复制/粘贴将受到限制。默认值:这是剪贴板重定向的默认值。默认情况下，当前允许在主机和沙盒之间复制/粘贴。</p><p id="5e15" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">以MB为单位的内存</strong> *:以兆字节(MB)为单位指定沙箱可以使用的内存量。</p><p id="8d64" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果指定的内存值不足以启动沙箱，它将自动增加到所需的最小数量。</p><h1 id="6472" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">例子</h1><h1 id="52f3" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">示例1:</h1><p id="54de" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">以下配置文件可用于在沙箱内轻松测试下载的文件。为了实现这一点，该脚本禁用了网络和vGPU，并将共享下载文件夹限制为容器中的只读访问。为了方便起见，logon命令在启动时会打开容器内部的downloads文件夹。</p><p id="cb20" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> Downloads.wsb </strong></p><pre class="mh mi mj mk gt mx my mz na aw nb bi"><span id="90f5" class="nc ld it my b gy nd ne l nf ng">&lt;Configuration&gt;<br/>  &lt;VGpu&gt;Disable&lt;/VGpu&gt;<br/>  &lt;Networking&gt;Disable&lt;/Networking&gt;<br/>  &lt;MappedFolders&gt;<br/>    &lt;MappedFolder&gt;<br/>      &lt;HostFolder&gt;C:\Users\Public\Downloads&lt;/HostFolder&gt;<br/>      &lt;SandboxFolder&gt;C:\Users\WDAGUtilityAccount\Downloads&lt;/SandboxFolder&gt;<br/>      &lt;ReadOnly&gt;true&lt;/ReadOnly&gt;<br/>    &lt;/MappedFolder&gt;<br/>  &lt;/MappedFolders&gt;<br/>  &lt;LogonCommand&gt;<br/>    &lt;Command&gt;explorer.exe C:\users\WDAGUtilityAccount\Downloads&lt;/Command&gt;<br/>  &lt;/LogonCommand&gt;<br/>&lt;/Configuration&gt;</span></pre><h1 id="847e" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">示例2</h1><p id="4d00" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">下面的配置文件在容器中安装Visual Studio代码，这需要稍微复杂一些的LogonCommand设置。</p><p id="b297" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">两个文件夹被映射到容器中；第一个(沙盒脚本)包含VSCodeInstall.cmd，它将安装并运行VSCode。假设第二个文件夹(CodingProjects)包含开发人员希望使用VSCode修改的项目文件。</p><p id="e6b4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">VSCode安装程序脚本已经映射到容器中，LogonCommand可以引用它。</p><p id="0801" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> VSCodeInstall.cmd </strong></p><pre class="mh mi mj mk gt mx my mz na aw nb bi"><span id="f7ae" class="nc ld it my b gy nd ne l nf ng">REM Download VSCode curl -L "https://update.code.visualstudio.com/latest/win32-x64-user/stable" --output C:\users\WDAGUtilityAccount\Desktop\vscode.exe </span><span id="129c" class="nc ld it my b gy nk ne l nf ng">REM Install and run VSCode C:\users\WDAGUtilityAccount\Desktop\vscode.exe /verysilent /suppressmsgboxes</span></pre><p id="f844" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> VSCode.wsb </strong></p><pre class="mh mi mj mk gt mx my mz na aw nb bi"><span id="f07a" class="nc ld it my b gy nd ne l nf ng">&lt;Configuration&gt;<br/>&lt;MappedFolders&gt;<br/>   &lt;MappedFolder&gt;<br/>     &lt;HostFolder&gt;C:\SandboxScripts&lt;/HostFolder&gt;<br/>     &lt;ReadOnly&gt;true&lt;/ReadOnly&gt;<br/>   &lt;/MappedFolder&gt;<br/>   &lt;MappedFolder&gt;<br/>     &lt;HostFolder&gt;C:\CodingProjects&lt;/HostFolder&gt;<br/>     &lt;ReadOnly&gt;false&lt;/ReadOnly&gt;<br/>   &lt;/MappedFolder&gt;<br/>&lt;/MappedFolders&gt;<br/>&lt;LogonCommand&gt;<br/>   &lt;Command&gt;C:\users\wdagutilityaccount\desktop\SandboxScripts\VSCodeInstall.cmd&lt;/Command&gt;<br/>&lt;/LogonCommand&gt;<br/>&lt;/Configuration&gt;</span></pre><h1 id="ad38" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">示例3</h1><pre class="mh mi mj mk gt mx my mz na aw nb bi"><span id="1d75" class="nc ld it my b gy nd ne l nf ng">&lt;Configuration&gt;<br/>&lt;VGpu&gt;Default&lt;/VGpu&gt;<br/>&lt;Networking&gt;Default&lt;/Networking&gt;<br/>&lt;MappedFolders&gt;<br/>   &lt;MappedFolder&gt;<br/>     &lt;HostFolder&gt;C:\Users\admin\Downloads&lt;/HostFolder&gt;<br/>     &lt;ReadOnly&gt;true&lt;/ReadOnly&gt;<br/>   &lt;/MappedFolder&gt;<br/>&lt;/MappedFolders&gt;<br/>&lt;LogonCommand&gt;<br/>   &lt;Command&gt;explorer.exe C:\users\WDAGUtilityAccount\Desktop\Downloads&lt;/Command&gt;<br/>&lt;/LogonCommand&gt;<br/>&lt;/Configuration&gt;</span></pre><p id="0f00" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是一个将本地只读下载文件夹从主机装载到沙箱中的程序。</p><p id="e3cc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这意味着下载文件夹(C:\Users\admin\Downloads)将安装在沙盒的桌面文件夹(C:\ Users \ WDAGUtilityAccount \ Desktop \ Downloads)中。使用命令“explorer . exe C:\ users \ WDAGUtilityAccount \ Desktop \ Downloads”将直接在资源管理器窗口中打开下载文件夹。</p><h1 id="3298" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">实例4</h1><pre class="mh mi mj mk gt mx my mz na aw nb bi"><span id="740a" class="nc ld it my b gy nd ne l nf ng">&lt;Configuration&gt;<br/>&lt;MappedFolders&gt;<br/>&lt;MappedFolder&gt;<br/>&lt;HostFolder&gt;C:\Users\admin\Downloads&lt;/HostFolder&gt;<br/>&lt;ReadOnly&gt;true&lt;/ReadOnly&gt;<br/>&lt;/MappedFolder&gt;<br/>&lt;/MappedFolders&gt;<br/>&lt;LogonCommand&gt;<br/>&lt;Command&gt;C:\Users\WDAGUtilityAccount\Desktop\Downloads\MicrosoftEdgeChromiumSetup.exe&lt;/Command&gt;<br/>&lt;/LogonCommand&gt;<br/>&lt;/Configuration&gt;</span></pre><p id="aa2a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此示例在Windows沙箱中安装Microsoft Edge Chromium版本。我把MicrosoftEdgeChromiumSetup.exe储存在我的下载文件夹里。在配置文件中，我挂载下载文件夹并运行MicrosoftEdgeChromiumSetup.exe。</p><h1 id="7c2b" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">实例5</h1><pre class="mh mi mj mk gt mx my mz na aw nb bi"><span id="b8ee" class="nc ld it my b gy nd ne l nf ng">&lt;Configuration&gt;<br/>&lt;LogonCommand&gt;<br/>&lt;Command&gt;net use S: \\live.sysinternals.com\tools&lt;/Command&gt;<br/>&lt;/LogonCommand&gt;<br/>&lt;/Configuration&gt;</span></pre><p id="d2e3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您想使用Sysinternals，也可以使用下面的配置文件轻松地挂载Sysinternals SMB共享。</p></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><p id="00ca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="nj">最初发布于</em><a class="ae mf" href="https://github.com/ealtili/Blog/blob/master/WindowsSandbox.md" rel="noopener ugc nofollow" target="_blank"><em class="nj">【https://github.com】</em></a><em class="nj">/ealtili/</em>Blog/blob/master/windowssandbox . MD<em class="nj">。</em></p><p id="d950" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，可以考虑报名成为一名媒体成员。每月5美元，你可以无限制地阅读媒体上的故事。如果你注册使用我的链接，我会赚一小笔佣金。</p><div class="ns nt gp gr nu nv"><a href="https://ealtili.medium.com/membership" rel="noopener follow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd iu gy z fp oa fr fs ob fu fw is bi translated">通过我的推荐链接加入Medium-Eray ALTILI</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">ealtili.medium.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj mq nv"/></div></div></a></div></div></div>    
</body>
</html>