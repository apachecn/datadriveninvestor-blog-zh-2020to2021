<html>
<head>
<title>Credit Risk Assessment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">信用风险评估</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/credit-risk-assessment-4e34a92441bc?source=collection_archive---------3-----------------------#2020-05-24">https://medium.datadriveninvestor.com/credit-risk-assessment-4e34a92441bc?source=collection_archive---------3-----------------------#2020-05-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/7b4fcb586c7f21b2122538ff2991fd8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tt5YHi-p0Ak7sgFREIhbiQ.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk"><a class="ae jd" href="https://bit.ly/3c6gIXL" rel="noopener ugc nofollow" target="_blank">image</a></figcaption></figure><div class=""/><ul class=""><li id="f125" class="kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated"><em class="kv">这是来自</em> <a class="ae jd" href="https://sigmoidal.ai/curso-online-data-science-na-pratica/" rel="noopener ugc nofollow" target="_blank"> <em class="kv"> DSNP(数据科学na Pratica)课程</em> </a> <em class="kv">导师</em> <a class="ae jd" href="https://www.linkedin.com/in/carlosfab/" rel="noopener ugc nofollow" target="_blank"> <em class="kv">卡洛斯·梅洛</em> </a>的项目</li><li id="11cf" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated">在<a class="ae jd" href="https://bit.ly/36sBhwj" rel="noopener ugc nofollow" target="_blank"> my Github </a>中查看完整项目</li></ul><p id="38bf" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">如何不支付你的信用卡，贷款…在金融机构？</p><p id="a920" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">嗯，如果你不偿还金融机构的债务，这就是你所能期待的:</p><ul class=""><li id="a6db" class="kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">支付滞纳金，</li><li id="321a" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated">获得更高的利率，以及</li><li id="728d" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated">招致损害你的信用评分。</li></ul><p id="aed0" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">因此，如果有一个领域让银行和整体金融机构更加头疼，那就是它们客户投资组合的违约率。</p><p id="59c3" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">评估客户或未来客户是否会无法履行其财务义务极其重要，并且会对机构的资产负债表产生重大影响。越来越多的解决方案正在被开发和改进，以最大限度地降低<em class="kv">违约</em>的风险。</p><div class="ip iq gp gr ir lq"><a href="https://www.datadriveninvestor.com/2019/01/23/which-is-more-promising-data-science-or-software-engineering/" rel="noopener  ugc nofollow" target="_blank"><div class="lr ab fo"><div class="ls ab lt cl cj lu"><h2 class="bd jh gy z fp lv fr fs lw fu fw jf bi translated">数据科学和软件工程哪个更有前途？数据驱动的投资者</h2><div class="lx l"><h3 class="bd b gy z fp lv fr fs lw fu fw dk translated">大约一个月前，当我坐在咖啡馆里为一个客户开发网站时，我发现了这个女人…</h3></div><div class="ly l"><p class="bd b dl z fp lv fr fs lw fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="lz l"><div class="ma l mb mc md lz me ix lq"/></div></div></a></div><p id="12e5" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">在金融领域，违约是指未能履行贷款的法律义务(或条件)，例如，购房者未能支付抵押贷款。通常，不遵守付款条件的主要原因是客户的财务能力不足。</p><figure class="mg mh mi mj gt is gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/2afc075321c52af1e88926e633973262.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*n1Lfjm1D7GVsCFJy.jpg"/></div></figure><p id="e10e" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">大银行、金融机构和金融科技越来越多地使用机器学习解决方案来避免或尽量减少<em class="kv">违约</em>。</p><p id="c641" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">在巴西，<a class="ae jd" href="https://nubank.com.br/sobre-nos" rel="noopener ugc nofollow" target="_blank"> Nubank </a>是最大的金融科技公司之一，在使用<em class="kv">人工智能</em>和<em class="kv">数据科学</em>团队方面表现突出。</p><p id="14ec" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">这个<em class="kv">数据科学</em>项目中使用的数据集是初创公司<a class="ae jd" href="https://nubank.com.br/sobre-nos" rel="noopener ugc nofollow" target="_blank"> Nubank </a>举办的一场竞赛的一部分，旨在揭示Fintech的人才和潜在招聘。</p><h1 id="9225" class="mk ml jg bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">商业问题</h1><p id="e5a0" class="pw-post-body-paragraph lb lc jg kf b kg ni ld le ki nj lf lg kk nk li lj km nl ll lm ko nm lo lp kq ij bi translated">在这个问题中，目标是预测一个新成立的Nubank客户不履行其财务义务和无法支付其信用卡账单的可能性有多大。</p><p id="de9c" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">值得一提的是，这种评估必须在客户要求办卡的那一刻进行(通常是在第一次与机构接触时)。</p><figure class="mg mh mi mj gt is gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/3e26f733621ffa208cf896c116825d7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/0*W0FRZdKFbW2_TJYn.png"/></div></figure><p id="9831" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi no translated"><span class="l np nq nr bm ns nt nu nv nw di">G</span><strong class="kf jh"><em class="kv">OAL:</em></strong><em class="kv">创建一个</em>机器学习<em class="kv">算法，提供客户违约的可能性。</em></p><h1 id="5038" class="mk ml jg bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated"><strong class="ak">关于数据</strong></h1><p id="bcd0" class="pw-post-body-paragraph lb lc jg kf b kg ni ld le ki nj lf lg kk nk li lj km nl ll lm ko nm lo lp kq ij bi translated">本项目使用的数据可通过<a class="ae jd" href="http://dl.dropboxusercontent.com/s/xn2a4kzf0zer0xu/acquisition_train.csv?dl=0" rel="noopener ugc nofollow" target="_blank">此链接</a>下载。它由一个包含45，000个条目和43列的<strong class="kf jh"> <em class="kv"> CSV </em> </strong>文件组成。</p><h2 id="79cf" class="nx ml jg bd mm ny nz dn mq oa ob dp mu kk oc od my km oe of nc ko og oh ng oi bi translated">数据汇总</h2><ul class=""><li id="3d2b" class="kd ke jg kf b kg ni ki nj kk oj km ok ko ol kq kr ks kt ku bi translated">我们有两个变量叫做目标:<strong class="kf jh"> <em class="kv">目标_默认</em> </strong>和<strong class="kf jh"> <em class="kv">目标_欺诈。</em> </strong>嗯，一开始，我们可以认为target_fraud是我们的目标变量，但是检查列条目，我们确认target_default是我们的变量target。</li><li id="7c9b" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated">一些列，如<strong class="kf jh"><em class="kv">last _ amount _ lowed，ok_since，external _ data _ provider _ credit _ checks _ last _ 2 _ year，last _ lowed _ in _ months</em></strong>，具有超过50%的缺失数据，并且具有更多缺失数据的列具有大约97%的缺失数据:<strong class="kf jh"> <em class="kv"> target_fraud。</em> </strong></li><li id="46cd" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated">我们把两个变量<strong class="kf jh"> <em class="kv"> score_1 </em> </strong>和<strong class="kf jh"> <em class="kv"> score_2 </em> </strong>作为对象，其他的分数都是浮动的。</li></ul><p id="1baa" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated"><em class="kv">因为我排除了target_fraud列作为我们的目标变量的可能性，所以我检查了target_default列，以查看该列的平衡程度，并检查我们有多少个空值。下面你可以看到结果。</em></p><figure class="mg mh mi mj gt is gh gi paragraph-image"><div class="gh gi om"><img src="../Images/fb7957b742143024d9a19c403ecbd203.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*Mpm09cPXI5HeWOAIQUH0Vw.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">About 8% is missing</figcaption></figure><figure class="mg mh mi mj gt is gh gi paragraph-image"><div class="gh gi on"><img src="../Images/da189018c9613966fb7be5de97773b6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/1*Lmt5Gj38hsxZrlEx3NWJTA.png"/></div></figure><h1 id="61c7" class="mk ml jg bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">汇总统计数据</h1><ul class=""><li id="12c5" class="kd ke jg kf b kg ni ki nj kk oj km ok ko ol kq kr ks kt ku bi translated">risk_rate似乎在0到1之间，75%的数据在0.36以下，均值在0.3左右。</li><li id="0083" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated">external _ data _ provider _ credit _ checks _ last _ 2 _ year所有条目当不为null时为零，不带任何信息。</li><li id="e2eb" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated">reported_income有带<strong class="kf jh"> inf </strong>的条目，可以干扰我们的ML模型，所以我们要把np.inf改成np.NaN。</li><li id="7803" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated">考虑到其他值，external _ data _ provider _ email _ seen _ before有一个奇怪的最小值-999.0。这可能是由于输入错误或处理不当造成的。所以我们要把那个值改成np.NaN。</li></ul><h1 id="3c7b" class="mk ml jg bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">数据准备</h1><p id="6a8b" class="pw-post-body-paragraph lb lc jg kf b kg ni ld le ki nj lf lg kk nk li lj km nl ll lm ko nm lo lp kq ij bi translated">以下是为我们的机器学习算法准备数据的步骤:</p><ul class=""><li id="738d" class="kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">把我们专栏的inf改成reported _ income，</li><li id="ea42" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated">将external _ data _ provider _ email _ seen _ before中的-999改为NaN，</li><li id="a705" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated"><strong class="kf jh"> <em class="kv">下降列id，target_fraud，external _ data _ provider _ credit _ checks _ last _ 2 _ year and channel，</em> </strong></li><li id="5a23" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated">删除不提供信息或需要更多研究的专栏，</li><li id="98e2" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated">删除列target_default中的行，即NaN。</li></ul><p id="3b90" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">尽管没有关于<strong class="kf jh">特性</strong>的更多信息，但我们假设许多值由于两个因素而为空:</p><ol class=""><li id="8a22" class="kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq oo ks kt ku bi translated">有些项目在填写表单时不是必填的，例如关于客户脸书资料的信息；和</li><li id="4ff5" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq oo ks kt ku bi translated">与列[<strong class="kf jh"><em class="kv">‘最后_借入金额’，‘最后_借入_月份’，‘n _发行’</em></strong>]的情况一样，没有关于列的观察。</li></ol><p id="52e9" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">一般来说，对于属于第二种情况的变量，<strong class="kf jh"> NaN </strong>值被替换为<strong class="kf jh"> zero </strong>。对于数值变量，采用中值，对于分类变量，采用最常见的值。</p><h1 id="4faa" class="mk ml jg bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">概述</h1><p id="ebc8" class="pw-post-body-paragraph lb lc jg kf b kg ni ld le ki nj lf lg kk nk li lj km nl ll lm ko nm lo lp kq ij bi translated">到目前为止，为了建立一个机器学习模型，我做了大量的数据操作，以了解数据集，这是执行的步骤:</p><p id="2a89" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated"><strong class="kf jh">探索性分析:</strong></p><ul class=""><li id="01e6" class="kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated"><em class="kv">数据的第一印象，了解它</em></li><li id="d765" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated"><em class="kv">数据帧第一个条目</em></li><li id="27b8" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated"><em class="kv">形状</em></li><li id="bc57" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated"><em class="kv">列变量类型</em></li></ul><p id="1623" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated"><strong class="kf jh">仔细看:</strong></p><ul class=""><li id="58d4" class="kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated"><em class="kv">检查缺失值</em></li><li id="3e67" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated"><em class="kv">汇总统计</em></li><li id="0c2e" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated"><em class="kv">定义了目标变量</em></li></ul><p id="d178" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated"><strong class="kf jh">准备数据:</strong></p><ul class=""><li id="8081" class="kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated"><em class="kv">删除列和行</em></li><li id="9d25" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated"><em class="kv">用零和均值填充缺失值</em></li><li id="017c" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated"><em class="kv">使用标准化将数据放在同一个标尺上</em></li><li id="233b" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated"><em class="kv">标签编码分类变量</em></li><li id="8352" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated"><em class="kv">分割训练中的数据并测试</em></li></ul><h1 id="0fff" class="mk ml jg bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">机器学习</h1><p id="c7d6" class="pw-post-body-paragraph lb lc jg kf b kg ni ld le ki nj lf lg kk nk li lj km nl ll lm ko nm lo lp kq ij bi translated">在构建或选择模型之前，即<strong class="kf jh"> XGBoost </strong>模型，让我们构建一个虚拟分类器模型。顾名思义，你可能会问…为什么？</p><p id="55d2" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">因为<a class="ae jd" href="https://scikit-learn.org/stable/modules/generated/sklearn.dummy.DummyClassifier.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kf jh">哑分类器</strong> </a>是使用简单规则进行预测的分类器。这个分类器作为一个简单的基线与其他(真实的)分类器进行比较是很有用的。</p><p id="c5dc" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated"><em class="kv">这是我们</em> <strong class="kf jh"> <em class="kv">哑分类器</em> </strong> <em class="kv"> : </em>的结果</p><figure class="mg mh mi mj gt is gh gi paragraph-image"><div class="gh gi op"><img src="../Images/8d4a41c3f503c68cd3d349fae8f892d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/1*C6-ibglUHAviv_G_3pMvSw.png"/></div></figure><p id="b085" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">我使用的一个度量标准称为<a class="ae jd" href="https://en.wikipedia.org/wiki/Matthews_correlation_coefficient" rel="noopener ugc nofollow" target="_blank">马修斯相关系数(MCC) </a>在机器学习中用作二进制(两类)分类质量的衡量标准。</p><p id="bfce" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">在我们的两类分类中，MMC的范围在-1和1之间，其中最差值= 1，最佳值= +1。</p><p id="4312" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">在我们的虚拟分类器模型中，我们的MMC是0(零),即使有84%的准确率，这也不够好。</p><p id="c050" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">让我们记住，真实标签指的是未能履行法律义务的客户，而虚假标签则相反。</p><p id="cafa" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">因此，我们可以从混淆矩阵中观察到，我们的虚拟分类器没有预测到任何真实标签，这就是为什么在分类报告中，<strong class="kf jh">精度</strong>、<strong class="kf jh">召回</strong>、<strong class="kf jh">f1-得分</strong>的真实标签为零。</p><p id="370e" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">我们的模型84%的准确性并不意味着什么，因为它不能预测真正的标签，这正是我们想要在我们的商业案例中避免的。</p><h2 id="0e8b" class="nx ml jg bd mm ny nz dn mq oa ob dp mu kk oc od my km oe of nc ko og oh ng oi bi translated">梯度推进</h2><p id="01d6" class="pw-post-body-paragraph lb lc jg kf b kg ni ld le ki nj lf lg kk nk li lj km nl ll lm ko nm lo lp kq ij bi translated">我决定运行一个<strong class="kf jh">梯度提升</strong>来看看是否可以预测任何<code class="fe oq or os ot b">True</code>标签，因为我们的<code class="fe oq or os ot b"><strong class="kf jh">Dummy Classifier</strong></code>没有预测任何标签，所以我们也可以使用这个强大的模型作为基线来与<code class="fe oq or os ot b"><strong class="kf jh">XGBoost</strong></code> <strong class="kf jh">进行比较。</strong></p><p id="3788" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated"><em class="kv">这是我们</em> <strong class="kf jh"> <em class="kv">梯度提升分类器</em> </strong> <em class="kv"> : </em>的结果</p><figure class="mg mh mi mj gt is gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/31d5e3b3d99515b81888483e28d65758.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/format:webp/1*s0zuuxzAi0mNSZZUkGJR5A.png"/></div></figure><p id="67ce" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">我们的MMC是0.15，比我们的虚拟分类器好很多</p><p id="48e8" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">查看混淆矩阵，我们可以看到这个强大的模型预测了一些真实的标签。它的准确率高达84%。</p><p id="0a80" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">但是看看真实标签的召回。这里的问题是:在所有真正<strong class="kf jh"> <em class="kv">违约</em> </strong>的客户中，我们标记了多少？</p><p id="aa35" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">答案只有大约0.09 = 9%</p><p id="b401" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">对于我们的商业案例，我们希望预测更多正确的标签，以避免违约。</p><h1 id="0a40" class="mk ml jg bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">XGBoost</h1><p id="d9a1" class="pw-post-body-paragraph lb lc jg kf b kg ni ld le ki nj lf lg kk nk li lj km nl ll lm ko nm lo lp kq ij bi translated">正如我之前提到的我们将使用<strong class="kf jh"> XGBoost </strong>来构建或分类模型。<strong class="kf jh"> XGboost </strong>如其<a class="ae jd" href="https://xgboost.readthedocs.io/en/latest/index.html" rel="noopener ugc nofollow" target="_blank">文档</a>中所述:</p><blockquote class="ov ow ox"><p id="0ea4" class="lb lc kv kf b kg kh ld le ki kj lf lg oy lh li lj oz lk ll lm pa ln lo lp kq ij bi translated">是一个优化的分布式梯度增强库，设计成高效的、灵活的和便携的。</p><p id="efa1" class="lb lc kv kf b kg kh ld le ki kj lf lg oy lh li lj oz lk ll lm pa ln lo lp kq ij bi translated">它在<strong class="kf jh">梯度提升</strong>框架下实现机器学习算法。<strong class="kf jh"> XGBoost </strong>提供了一个并行树提升(也称为GBDT，GBM)，以快速准确的方式解决了许多数据科学问题。"</p></blockquote><p id="6c17" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">在我开始构建我们的“XGBoost”模型之前，文档中说当我们有不平衡的类时，我们应该使用参数<strong class="kf jh"> scale_pos_weight </strong>，默认情况下它是1。要考虑的典型值是:</p><blockquote class="ov ow ox"><p id="3cb1" class="lb lc kv kf b kg kh ld le ki kj lf lg oy lh li lj oz lk ll lm pa ln lo lp kq ij bi translated"><strong class="kf jh">总和(负实例)/总和(正实例)</strong></p></blockquote><figure class="mg mh mi mj gt is gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/8e9132b0100e310e5301f3700a4d4e70.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*Tkavz1eJY7gaafbX7pUt6g.png"/></div></figure><p id="4f94" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">经过大量实验后，我发现<code class="fe oq or os ot b">scaled_pos_weight</code>的最佳值是2.5，这是我们用来调整模型的值。</p><p id="ebc5" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">此外，我调整了模型的<strong class="kf jh">估算器</strong>和<strong class="kf jh">最大深度</strong></p><p id="6279" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated"><em class="kv">好了，既然我们有了比较的基线模型，我最终建立了许多参数的调整。</em></p><p id="19ca" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated"><em class="kv">这是我们</em> <strong class="kf jh"> <em class="kv"> XGBoost分类器</em> </strong> <em class="kv"> : </em>的结果</p><figure class="mg mh mi mj gt is gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/4eb412bd699f7602b59234be3a2fed5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*wLhRPng7vSMoZSbWJXtFAw.png"/></div></figure><p id="0578" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">正如我们从结果中看到的，与其他模型相比，我们的模型具有相同的准确性，但我们改进了<strong class="kf jh"> true </strong>标签的其他指标，这从我们的业务角度来看非常好。</p><h1 id="b3ad" class="mk ml jg bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">结论</h1><p id="c1df" class="pw-post-body-paragraph lb lc jg kf b kg ni ld le ki nj lf lg kk nk li lj km nl ll lm ko nm lo lp kq ij bi translated">因为我们没有关于数据集的任何解释或文档，所以我们能够创建一个具有高性能的算法。</p><p id="1a8f" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">我们可以看到，仅仅使用准确性作为度量标准会使我们对将要投入生产的模型做出错误的决策。</p><p id="ef15" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated">我们的ML模型可以通过拥有更多数据或者使用<code class="fe oq or os ot b"><a class="ae jd" href="https://en.wikipedia.org/wiki/Feature_engineering" rel="noopener ugc nofollow" target="_blank">Feature engineering</a></code>来改进。</p></div><div class="ab cl pd pe hu pf" role="separator"><span class="pg bw bk ph pi pj"/><span class="pg bw bk ph pi pj"/><span class="pg bw bk ph pi"/></div><div class="ij ik il im in"><div class="mg mh mi mj gt lq"><a href="https://github.com/glauciodrumond" rel="noopener  ugc nofollow" target="_blank"><div class="lr ab fo"><div class="ls ab lt cl cj lu"><h2 class="bd jh gy z fp lv fr fs lw fu fw jf bi translated">glauciodrumond -概述</h2><div class="lx l"><h3 class="bd b gy z fp lv fr fs lw fu fw dk translated">在GitHub上注册你自己的个人资料，这是托管代码、管理项目和构建软件的最佳地方…</h3></div><div class="ly l"><p class="bd b dl z fp lv fr fs lw fu fw dk translated">github.com</p></div></div><div class="lz l"><div class="pk l mb mc md lz me ix lq"/></div></div></a></div><figure class="mg mh mi mj gt is gh gi paragraph-image"><div class="gh gi pl"><img src="../Images/14a174f14f3be16f8d269cbe61fe06d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*A4rM0CqIr1q7_HgiRSJKgg.jpeg"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk"><a class="ae jd" href="https://www.linkedin.com/in/glaucio-drumond-1734a018b/" rel="noopener ugc nofollow" target="_blank">Glaucio Drumond</a></figcaption></figure><p id="bc0d" class="pw-post-body-paragraph lb lc jg kf b kg kh ld le ki kj lf lg kk lh li lj km lk ll lm ko ln lo lp kq ij bi translated"><strong class="kf jh">资源:</strong></p><ul class=""><li id="eda4" class="kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated"><a class="ae jd" href="https://sigmoidal.ai/curso-online-data-science-na-pratica/" rel="noopener ugc nofollow" target="_blank"> DSNP(数据科学杂志)</a></li><li id="8034" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated"><a class="ae jd" href="https://machinelearningmastery.com/" rel="noopener ugc nofollow" target="_blank">机器学习掌握度</a></li><li id="1a57" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated"><a class="ae jd" href="http://blog.exsilio.com/" rel="noopener ugc nofollow" target="_blank">博客</a></li><li id="abbb" class="kd ke jg kf b kg kw ki kx kk ky km kz ko la kq kr ks kt ku bi translated">谷歌</li></ul><figure class="mg mh mi mj gt is"><div class="bz fp l di"><div class="pm pn l"/></div></figure></div></div>    
</body>
</html>