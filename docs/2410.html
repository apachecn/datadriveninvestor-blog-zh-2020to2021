<html>
<head>
<title>Forecasting future stock prices based on past performance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">根据过去的表现预测未来的股票价格</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/how-to-predict-future-stock-prices-using-historic-volatility-b0e17b2abd02?source=collection_archive---------1-----------------------#2020-04-29">https://medium.datadriveninvestor.com/how-to-predict-future-stock-prices-using-historic-volatility-b0e17b2abd02?source=collection_archive---------1-----------------------#2020-04-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c4bdc9d50d08e5501ac7ffac1bf438da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*D6ZYjtN7CLrnLJCT"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@aditya1702?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Aditya Vyas</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="2c05" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">简介</strong></h1><p id="db85" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">如果你能自信地决定一只股票明天、下周以及下个月的开盘价，那么你很可能会成为这个星球上最富有的人。但准确预测一只股票的未来价格几乎是一项不可能完成的任务，接近它也极具挑战性。市场的起伏很大程度上受到无法预见的外部因素的影响，如世界大事、公司战略变化或突发新闻。</p><p id="a327" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">对何时投资一家公司、以什么价格投资做出估计和决定，是基于经验、公司研究、数据分析，有时也是基于直觉。借助一些基本的统计学和Python，我试图回答以下问题。</p><blockquote class="me"><p id="f7e9" class="mf mg iq bd mh mi mj mk ml mm mn ly dk translated">历史波动率能否作为推断未来股价的可接受依据？</p></blockquote><h1 id="1c76" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko mo kq kr ks mp ku kv kw mq ky kz la bi translated"><strong class="ak">方法</strong></h1><p id="74c9" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">用于模拟未来股票价格趋势的过程如下图所示。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mr"><img src="../Images/a464cf939df92ce7f2fc97dbe076b0e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8MHUHqiTiCkL2iv169EBZw.png"/></div></div></figure><p id="b3cb" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">什么是波动性？</strong></p><blockquote class="mw mx my"><p id="eae5" class="lb lc mz ld b le lz lg lh li ma lk ll na mb lo lp nb mc ls lt nc md lw lx ly ij bi translated"><a class="ae kc" href="https://www.investopedia.com/terms/v/volatility.asp" rel="noopener ugc nofollow" target="_blank"> <strong class="ld ir">波动率</strong> </a>是对给定证券或市场指数的收益离差的统计度量。</p></blockquote><p id="e61e" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">表现出高波动性的股票价格更加不稳定，在被评估的时间间隔内会经历快速的变化。低波动性通常意味着价格稳定，与平均值的差异较小。</p><div class="nd ne gp gr nf ng"><a href="https://www.datadriveninvestor.com/2020/03/25/using-google-search-trends-to-predict-initial-jobless-claims/" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd ir gy z fp nl fr fs nm fu fw ip bi translated">使用谷歌搜索趋势预测首次申请失业救济人数|数据驱动的投资者</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">几年来，我的重点一直是使用多种替代数据来预测宏观经济统计数据…</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="np l"><div class="nq l nr ns nt np nu jw ng"/></div></div></a></div><p id="1d17" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">公司股价的波动性可以用各种指标来计算。在这个例子中，我选择使用股票的历史日收益率来生成概率分布曲线。我关注两种历史波动性不同的安全资产，S&amp;P500 ETF(SPY)和AMD。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nv"><img src="../Images/3c0093aef1031b590349e695a48df10c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UJr6955kvyVTCFuIKYs78w.png"/></div></div></figure><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/dfdb6d0a736850d158020eecbe676058.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*y0TNpkb5BULWfINENcr58Q.png"/></div></figure><p id="ca40" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">根据所示的标准差，AMD的波动性是SPY的3.5倍(3.31%比0.97%)。</p><p id="cf31" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">对数据拟合概率分布</strong></p><p id="79dc" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">为我们的数据集拟合正确的标准分布至关重要。通过选择一个使原始数据的变化最小化的标准分布，我们可以提高相对于我们的假设的结果的置信水平。</p><p id="e1b4" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">因为我们处理的是对称分布，所以我选择研究正态分布、拉普拉斯分布和均匀分布曲线。我使用SciPy Python包来计算标准分布输入参数并生成随机数据数组。</p><p id="7e2d" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">下面的Q-Q图可用于确定哪种分布最符合我们的数据。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nx"><img src="../Images/e3154c1f56d491c70ecbfd78f050711b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S9HUVmMvqs08mQHAmKvV-w.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Q-Q plots for various probability distributions</figcaption></figure><p id="6b64" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">从上图中可以得出一些观察结果:</p><ul class=""><li id="703f" class="ny nz iq ld b le lz li ma lm oa lq ob lu oc ly od oe of og bi translated">均匀分布很难捕捉数据集的行为和分布。</li><li id="3199" class="ny nz iq ld b le oh li oi lm oj lq ok lu ol ly od oe of og bi translated">正态分布在捕捉数据方面做得更好，但是无法考虑远离均值的日收益率。</li><li id="f530" class="ny nz iq ld b le oh li oi lm oj lq ok lu ol ly od oe of og bi translated">拉普拉斯分布看起来最适合这两种股票。它在捕捉数据的极值方面做得更好。这些值代表引起市场剧烈波动的低概率事件，如2008年的金融危机。</li></ul><p id="345e" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">蒙特卡洛模拟</strong></p><p id="0bd4" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">现在我们已经选择了拉普拉斯分布曲线作为我们的基础，我们可以从概率分布中生成随机值。每次我们生成一个随机数组的值，并绘制价格趋势，我们就称之为“运行”。用于推断价格的等式定义如下，其中<em class="mz"> PercentChange </em>是未来每天随机生成值的一维数组。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi om"><img src="../Images/3e7adb6e68372ca2e116c533ce3154b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*vuHp69tIgxL0cNzYbLnbrg.png"/></div></figure><p id="8c7b" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">下面是一个单次“运行”的例子，我们推断未来90天的股票价格。图表中的每条虚线都说明了单次运行中股票的预计未来价格趋势。加粗的彩色线条显示了历史价格趋势。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nv"><img src="../Images/a7983951c87116f766d840ee88c82844.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1UMZgBs6hS3XqaSfW-1Ngw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">1 Run</figcaption></figure><p id="8f5f" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在90天内运行100次“运行”会产生:</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nv"><img src="../Images/47a3398902e56a6af0053e501475921c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9GhBuK2jZ_M-85a0_dN1Ag.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">100 Runs</figcaption></figure><p id="2931" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">现在是90天1000次“跑步”:</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nv"><img src="../Images/822203920726ce474d9e1f9d47c67b16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0G6S_CgNeTnSS3sko9Bjng.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">1,000 Runs</figcaption></figure><p id="df2c" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在模拟了1000次运行后，很明显很难确定正确的未来价格。通过拉动模拟返回的最大值和最小值，我们可以看到，相对于AMD的当前股价，存在比SPY更大的价格分布。这是意料之中的，因为AMD是一只更不稳定的股票。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi on"><img src="../Images/28c5c63d11ef5b22808fbfdea60e14b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/1*y-mhly6kVDThzukiq2AEBQ.png"/></div></figure><p id="e728" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">最大值和最小值事件发生的概率比其他价格小得多，这可以从上面的图表密度中看出。在柱状图上绘制90天后的最终价格可以更好地显示结果。垂直虚线表示截至2020年4月27日SPY和AMD的当前交易价格。模拟表明，90天后，SPY和AMD的股价都将低于其当前交易价格的可能性更高。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nx"><img src="../Images/a28252c23eb720ca2baf95231864d64c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y8lWUTVqC4mQpokUhLZSbQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Histogram of stock prices after 90 days for 1,000 run simulation</figcaption></figure><h1 id="0f80" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">结论</strong></h1><p id="7905" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">从结果中可以明显看出，仅使用历史波动率来预测未来价格趋势可能会导致糟糕的结果，因为潜在结果的分布很广。上述方法是一种数据驱动的分析，仅基于过去的波动数据。为了改进我们的结果，需要使用一个更健壮的模型。其他指标，如交易量、收益报告数据、财务报表数据，都可以纳入进来，以提高我们模型的准确性。</p><p id="5440" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">诸如未来公司战略或决策等因素是不可预测的，会影响股票的未来走势。预测和量化这些企业行为本身就是一个挑战，这也是利用纯数据方法进行预测的一个陷阱。</p><p id="c17d" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">如果你读过一份公司文件，通常会弹出一个重复的短语。</p><blockquote class="mw mx my"><p id="14e3" class="lb lc mz ld b le lz lg lh li ma lk ll na mb lo lp nb mc ls lt nc md lw lx ly ij bi translated">“…过去的表现并不能保证未来的表现…”</p></blockquote></div><div class="ab cl oo op hu oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="ij ik il im in"><p id="b94b" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">使用的Python包:<em class="mz"> Pandas，NumPy，SciPy，Seaborn，Matplotlib </em></p><p id="75cb" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">源代码可以在我的<strong class="ld ir"> </strong> <a class="ae kc" href="https://github.com/nasriv/VolatilityPredictor" rel="noopener ugc nofollow" target="_blank"> <strong class="ld ir"> GitHub </strong> </a>上找到</p><p id="cdf7" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">连接上<a class="ae kc" href="https://www.linkedin.com/in/vincentnasri/" rel="noopener ugc nofollow" target="_blank"> <strong class="ld ir"> Linkedin </strong> </a></p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="ov ow l"/></div></figure></div></div>    
</body>
</html>