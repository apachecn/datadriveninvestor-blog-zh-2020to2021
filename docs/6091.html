<html>
<head>
<title>Build yourself a Data Science Codebase Today!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">今天就为自己构建一个数据科学代码库！</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/build-yourself-a-data-science-codebase-today-31bb124c1e26?source=collection_archive---------7-----------------------#2020-10-12">https://medium.datadriveninvestor.com/build-yourself-a-data-science-codebase-today-31bb124c1e26?source=collection_archive---------7-----------------------#2020-10-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8749" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">加快实验、分析和执行的秘诀</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f85e2dc010c51198765b3f63806360f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BjfPWwpe6oUWDxqWN8_SWQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Welcome</figcaption></figure><p id="ba46" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当使用相同的工具同时处理多个项目时，例如像Python这样的编程语言和Jupyter Notebooks，<strong class="kx ir">大部分代码是可重用的</strong>。这确实有助于重用大量的导入语句、笔记本设置、绘图参数等。<strong class="kx ir"> <em class="lr">可以很容易的复制粘贴到下一个分析中，节省你很多时间</em> </strong>。嗯，有很多代码库可以创建和构建。让我们单独来看看其中的一些。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="3849" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">我应该保存什么？</h1><blockquote class="mr ms mt"><p id="ca4d" class="kv kw lr kx b ky kz jr la lb lc ju ld mu lf lg lh mv lj lk ll mw ln lo lp lq ij bi translated">保存特定用例、平台、分析或任务的代码块。例如- </p></blockquote><ul class=""><li id="d9fa" class="mx my iq kx b ky kz lb lc le mz li na lm nb lq nc nd ne nf bi translated"><strong class="kx ir">数据分析代码库</strong></li><li id="5bd9" class="mx my iq kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated"><strong class="kx ir"> Jupyter笔记本代码库</strong></li><li id="a91b" class="mx my iq kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated"><strong class="kx ir">可视化代码库</strong></li><li id="1c25" class="mx my iq kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated"><strong class="kx ir">云存储代码库中的数据加载</strong></li><li id="29f9" class="mx my iq kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated"><strong class="kx ir">机器学习，深度学习代码库</strong></li></ul><p id="46be" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">根据需要更多…..</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="18ce" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">数据分析代码库</strong></h1><p id="b89a" class="pw-post-body-paragraph kv kw iq kx b ky nl jr la lb nm ju ld le nn lg lh li no lk ll lm np lo lp lq ij bi translated">我举个例子解释一下。假设您想要为您刚刚收到的某个数据集开发<strong class="kx ir">探索性数据分析</strong>。嗯，我们肯定可以从头开始编写导入语句，<strong class="kx ir">或</strong>，我可以从我的代码库中复制粘贴这些语句。</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="c901" class="nv ma iq nr b gy nw nx l ny nz"># Data <br/>import pandas as pd<br/>import numpy as np<br/> <br/># Visualisation<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns</span><span id="b9fb" class="nv ma iq nr b gy oa nx l ny nz"># Helper Libraries <br/>from glob import glob<br/>from datetime import datetime<br/>import warnings<br/>warnings.filterwarnings('ignore')</span><span id="253d" class="nv ma iq nr b gy oa nx l ny nz"># Kick Start<br/>df = pd.read_csv('&lt;file_name&gt;')<br/>print(df.shape)<br/>print(df.describe())<br/>print(df.info())<br/>df.head()</span></pre><p id="4892" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">轰！你为自己节省了一分钟，也为自己赢得了速度上的加分。感觉不错吧？</strong></p><div class="ob oc gp gr od oe"><a href="https://www.datadriveninvestor.com/2020/07/23/learn-data-science-in-a-flash/" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd ir gy z fp oj fr fs ok fu fw ip bi translated">一瞬间学会数据科学！？数据驱动的投资者</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">在我之前的职业生涯中，我是一名训练有素的古典钢琴家。还记得那些声称你可以…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="on l"><div class="oo l op oq or on os kp oe"/></div></div></a></div></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="5119" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">Jupyter笔记本代码库</h1><p id="e1dd" class="pw-post-body-paragraph kv kw iq kx b ky nl jr la lb nm ju ld le nn lg lh li no lk ll lm np lo lp lq ij bi translated">所以在这些年里，我练习数据科学，建造了超过，我不知道，像一百万个Jupyter笔记本，使用StackOverflow来解决我的代码中最小的问题，<strong class="kx ir">我最终收集了许多增强我的笔记本功能的材料</strong>，例如-</p><div class="ob oc gp gr od oe"><a href="https://stackoverflow.com/questions/27934885/how-to-hide-code-from-cells-in-ipython-notebook-visualized-with-nbviewer" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd ir gy z fp oj fr fs ok fu fw ip bi translated">如何隐藏用nbviewer可视化的ipython笔记本中单元格的代码？</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">这可以使用IPython ToggleButton小部件和一点JavaScript来完成。下面的代码应该是…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">stackoverflow.com</p></div></div><div class="on l"><div class="ot l op oq or on os kp oe"/></div></div></a></div><p id="f17f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在上面的链接中，我发现了一些HTML和JavaScript代码，它们可以隐藏你所有的代码单元，你的笔记本被转换成一个演示文稿，只有情节、降价和基本上是系统输出的小部件，绝对没有可见的代码<strong class="kx ir"/>。是的，很神奇。对于我已经多次做过的商业演示，我不可能解释这一点的价值。同样，<strong class="kx ir">我给自己建了下面这个笔记本代码库</strong>。</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="b990" class="nv ma iq nr b gy nw nx l ny nz"><strong class="nr ir"># Pushing the display limits</strong><br/>pd.set_option('display.max_rows', 1000)<br/>pd.set_option('display.max_columns', 1000)<br/>pd.set_option('max_colwidth', 100)</span><span id="f7fc" class="nv ma iq nr b gy oa nx l ny nz"><strong class="nr ir"># Expanding the Width of a Code Cell - Longer Lines of Code visible</strong><br/>from IPython.core.display import display, HTML<br/>display(HTML("&lt;style&gt;.container { width:100% !important; }&lt;/style&gt;"))</span><span id="85b0" class="nv ma iq nr b gy oa nx l ny nz"><strong class="nr ir"># Hide Code Cells</strong><br/>from IPython.display import HTML<br/><br/>HTML('''&lt;script&gt;<br/>code_show=true; <br/>function code_toggle() {<br/> if (code_show){<br/> $('div.input').hide();<br/> } else {<br/> $('div.input').show();<br/> }<br/> code_show = !code_show<br/>} <br/>$( document ).ready(code_toggle);<br/>&lt;/script&gt;<br/>&lt;form action="javascript:code_toggle()"&gt;&lt;input type="submit" value="Click here to toggle on/off the raw code."&gt;&lt;/form&gt;''')</span><span id="23ce" class="nv ma iq nr b gy oa nx l ny nz"><strong class="nr ir"># Set Data Output Formats</strong><br/>pd.options.display.float_format <strong class="nr ir">=</strong> <!-- -->'{:, .2f}'.format</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/486e183347b0d5a1c57838fe8e88ffab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*640pAKroRSq-9WwnGRixGA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">The legendary Copy-Paste [ PC: memegenerator.com ]</figcaption></figure><p id="4038" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">相信我，你会感谢你在代码库中保存新东西的小小努力，因为<strong class="kx ir">你只需寻找它，它就在那里</strong>，一个为你所有项目准备的完整的、经过测试的代码库。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="d0a2" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">可视化代码库</strong></h1><p id="7768" class="pw-post-body-paragraph kv kw iq kx b ky nl jr la lb nm ju ld le nn lg lh li no lk ll lm np lo lp lq ij bi translated">如果我向您展示我的Python可视化的整个代码库，您可能需要向下滚动一段时间。因此，为了节省时间，让我向您展示一个小例子，展示我如何构建、开发和使用我的可视化代码库。</p><p id="fbc6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">假设你想用matplotlib<strong class="kx ir">快速构建一个饼状图。你可以这样做—</strong></p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="ec1c" class="nv ma iq nr b gy nw nx l ny nz"># Note: Import Statements are given above <br/>plt.pie(iris['&lt;column&gt;'].value_counts().values,<br/>       labels = iris['&lt;column&gt;'].value_counts().index)<br/>plt.show()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/bc1ec1f823c09b1839e1edcd50b24176.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*RpBHKXvqG_C8AHmcOvvhRA.png"/></div></figure><p id="5e07" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">然后得到这个— </strong></p><ul class=""><li id="25f1" class="mx my iq kx b ky kz lb lc le mz li na lm nb lq nc nd ne nf bi translated">差的DPI(质量)</li><li id="de33" class="mx my iq kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated">没有标题，传奇</li><li id="9bf7" class="mx my iq kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated">默认颜色</li><li id="059e" class="mx my iq kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated">默认大小</li></ul><p id="3518" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">基本上没那么专业，不详细，最终也没那么有帮助。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="4e38" class="nv ma iq bd mb ow ox dn mf oy oz dp mj le pa pb ml li pc pd mn lm pe pf mp pg bi translated"><strong class="ak">或者，你可以使用你的代码库来做这件事</strong></h2><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="7ba4" class="nv ma iq nr b gy nw nx l ny nz"># Add more based on your preference<br/>colors = ['mediumvioletred','seagreen','dodgerblue']</span><span id="2550" class="nv ma iq nr b gy oa nx l ny nz"># Define Plot Size and quality<br/>plt.figure(figsize=[7,7] , dpi = 100) <br/># Add title to the top of the plot<br/>plt.title("&lt;ADD TITLE&gt;" , fontsize = 12)  </span><span id="3d72" class="nv ma iq nr b gy oa nx l ny nz">plt.pie(df['&lt;columnn&gt;'].value_counts().values ,<br/>        labels = df['&lt;column&gt;'].value_counts().index ,<br/>        colors = colors, explode=(0.1,0.1,0.0) ,<br/>        autopct='%1.1f%%', shadow=True, startangle=90 )</span><span id="932e" class="nv ma iq nr b gy oa nx l ny nz">plt.legend(loc = 2)<br/>plt.show()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ph"><img src="../Images/744154067c5b6a038f444e9d2fa6ed88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RGr-m3wMYedY1-iaOx18SA.png"/></div></div></figure><p id="5d13" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">在这里得到这种美——</strong></p><ul class=""><li id="e129" class="mx my iq kx b ky kz lb lc le mz li na lm nb lq nc nd ne nf bi translated">颜色—您的选择</li><li id="e5a4" class="mx my iq kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated">质量—您的选择</li><li id="83aa" class="mx my iq kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated">百分比—有洞察力</li><li id="82a3" class="mx my iq kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated">阴影和爆炸</li><li id="28f3" class="mx my iq kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated">传说</li></ul><p id="384b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir"> <em class="lr">顺便说一句，我们刚刚在不到30秒的时间里复制粘贴并编辑了</em> </strong></p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="6e44" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">从云存储中加载<strong class="ak">数据的代码库</strong></h1><p id="d873" class="pw-post-body-paragraph kv kw iq kx b ky nl jr la lb nm ju ld le nn lg lh li no lk ll lm np lo lp lq ij bi translated">现在，当处理多个项目时，数据可能来自不同的供应商，比如亚马逊AWS、GCP、雪花等等。您希望将其加载到笔记本或脚本中。所有这些单独的平台通过SQL查询获取数据并将它们加载到您的pandas数据框架中的方式都有很大的不同。下面是我如何优化我的代码库来加快数据加载</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="ef83" class="nv ma iq nr b gy nw nx l ny nz">q = ''' &lt; PASTE QUERY HERE &gt; '''</span><span id="c14c" class="nv ma iq nr b gy oa nx l ny nz"><strong class="nr ir"># GCP</strong><strong class="nr ir"><br/></strong>df = pd.read_gbq<!-- -->(q, <em class="lr">project_id=&lt;PROJECT_ID&gt;</em>, <em class="lr">reauth=True</em>,<br/>                 <em class="lr">dialect='standard'</em>, , <em class="lr">credentials=&lt;CRED&gt;</em>,<br/>                 <em class="lr">max_results=True</em>, <em class="lr">private_key=&lt;KEY&gt;</em>, <em class="lr">verbose=2)</em></span><span id="dc27" class="nv ma iq nr b gy oa nx l ny nz"><strong class="nr ir"># AWS</strong><br/>from pyathena import connect<br/>from pyathena.util import as_pandas<br/><br/>aws_access_key_id = '&lt;ATHENA_ACCESS_KEY&gt;'<br/>aws_secret_access_key = '&lt;ATHENA_SECRET_KEY&gt;'<br/>region_name = '&lt;ATHENA_REGION_NAME&gt;'<br/>staging_bucket_dir = '&lt;ATHENA_STAGING_BUCKET&gt;'<br/><br/>cursor = connect(aws_access_key_id=aws_access_key_id,<br/>                 aws_secret_access_key=aws_secret_access_key,<br/>                 region_name=region_name,<br/>                 s3_staging_dir=staging_bucket_dir,<br/>                ).cursor()<br/>cursor.execute(q)<br/>df = as_pandas(cursor)</span><span id="6191" class="nv ma iq nr b gy oa nx l ny nz"><strong class="nr ir"># Snowflake<br/></strong>import snowflake.connector as con</span><span id="8f6e" class="nv ma iq nr b gy oa nx l ny nz">ct = con.connect(user='&lt;USER&gt;',password='&lt;PWD&gt;',account='&lt;ACT&gt;')<br/>cur = ct.cursor()</span><span id="d182" class="nv ma iq nr b gy oa nx l ny nz">batches = []<br/>cur.execute(q)<br/>it = cur.fetch_pandas_batches()<br/>for df in it:<br/>    batches.append(df)<br/>df = pd.concat(batches, ignore_index=True)</span></pre><p id="6c0a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，我的代码库帮助我<strong class="kx ir">利用我的智慧和精力</strong>编写准确的查询，而<strong class="kx ir">而不是</strong>继续在网上寻找代码样本，这些样本很难快速集成，可能需要我没有安装的库，在某些情况下可能一开始就很难找到。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="3bbf" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">最后，一些快速提示—</h1><ul class=""><li id="5ada" class="mx my iq kx b ky nl lb nm le pi li pj lm pk lq nc nd ne nf bi translated">尽可能保持你的代码库的通用性</li><li id="6785" class="mx my iq kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated">确保您<strong class="kx ir">存储了“常量”值</strong>，如密钥、ID等。在代码库中，你不想在粘贴代码后再去寻找它们</li><li id="86cb" class="mx my iq kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated">确保你没有存储“可变的”值，如列名、图名等。在你从你的代码库复制粘贴后编辑它们，以避免任何愚蠢错误的机会</li><li id="940a" class="mx my iq kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated">最后，由于这个代码库可能包含敏感信息，请确保它的安全！</li></ul><p id="8379" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">这个故事到此结束。如果你喜欢这个，鼓掌鼓掌！</strong>我希望你喜欢这篇文章，现在意识到<strong class="kx ir">为自己构建代码库的好处</strong>。知道这不是一天的练习也很重要。你可能要花上几周甚至几个月的时间来持续跟踪你正在做的不同的事情，使用以及如何节省一部分，以便在未来的项目中得到最佳利用。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pl"><img src="../Images/3e7424d095665a3a5c8c5ff79961f4a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*vjeLXVmBM2e7SyAOGkcV_Q.jpeg"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">PATIENCE [ PC: quickmeme.com ]</figcaption></figure><blockquote class="pm"><p id="a44a" class="pn po iq bd pp pq pr ps pt pu pv lq dk translated">我希望你今天过得愉快！干杯！</p></blockquote><h2 id="3c34" class="nv ma iq bd mb ow pw dn mf oy px dp mj le py pb ml li pz pd mn lm qa pf mp pg bi translated">获得专家观点— <a class="ae qb" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank">订阅DDI英特尔</a></h2></div></div>    
</body>
</html>