<html>
<head>
<title>Basic Car-Game using python(Part -3)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用python的基本汽车游戏(第3部分)</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/basic-car-game-using-python-part-3-c35338ca7a50?source=collection_archive---------5-----------------------#2020-05-27">https://medium.datadriveninvestor.com/basic-car-game-using-python-part-3-c35338ca7a50?source=collection_archive---------5-----------------------#2020-05-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d872" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在之前的<a class="ae kl" href="https://medium.com/datadriveninvestor/basic-car-game-using-python-part-2-24bdeb3506c1" rel="noopener">文章</a>中，我们已经添加了关闭按钮的事件处理。在这篇文章中，我们将学习如何在屏幕上添加图像，以及每当我们按下箭头键时如何向左和向右移动图像。<br/>= = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =<br/><em class="km">在继续之前，我只想展示一下我的代码，因为我已经对前面的代码进行了重组，并将建议做同样的事情，以便有更好的清晰度。<br/>没什么复杂的，我刚刚添加了:<br/> *几个变量为定值和<br/> *创建了一个游戏循环函数。<br/>= = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =</em></p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kn"><img src="../Images/315806365c752a75a9b78d83bf99b91b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2O9ML8GH7HzkKXPKK9LgZQ.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk">code restructure</figcaption></figure><p id="eae9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，对于图像，我们应该首先学习如何在屏幕上加载图像。为此，我们在pygame中有一个名为'<a class="ae kl" href="https://www.pygame.org/docs/ref/image.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> pygame.image </strong> </a>'的模块。看一下文档网站，<a class="ae kl" href="https://www.pygame.org/docs/" rel="noopener ugc nofollow" target="_blank"> <em class="km">这里</em> </a>。<br/>对于加载图片，我们必须使用名为“<a class="ae kl" href="https://www.pygame.org/docs/ref/image.html#pygame.image.load" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">pygame . image . load()</strong></a>”的方法。这个方法将从文件中加载一个新的图像。它接受一个参数，要么是文件名，要么是类似python文件的对象。<br/>我们将使用上述方法添加汽车的图像。<br/>&gt;&gt;&gt;<strong class="jp ir">carimg = py game . image . load(" car 1 . jpg ")</strong></p><p id="55e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所有的图片你都可以在线下载，或者我会在这里提供我的GitHub链接<a class="ae kl" href="https://github.com/asishraz/game_learning" rel="noopener ugc nofollow" target="_blank"><em class="km"/></a>，里面有所有相关的文件。<br/>一定要把它下载到你上面代码所在的目录下，否则就要给出文件路径。</p><div class="ld le gp gr lf lg"><a href="https://www.datadriveninvestor.com/2020/03/29/microsoft-having-an-edge-over-chrome/" rel="noopener  ugc nofollow" target="_blank"><div class="lh ab fo"><div class="li ab lj cl cj lk"><h2 class="bd ir gy z fp ll fr fs lm fu fw ip bi translated">数据驱动的投资者|微软比Chrome有“优势”</h2><div class="ln l"><h3 class="bd b gy z fp ll fr fs lm fu fw dk translated">简史我从来不是浏览器的粉丝，确切地说，我只是一个浏览器的粉丝，Chrome。这是我的…</h3></div><div class="lo l"><p class="bd b dl z fp ll fr fs lm fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="lp l"><div class="lq l lr ls lt lp lu kx lg"/></div></div></a></div><p id="2c13" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">加载图像后，我们必须将该图像添加到屏幕上。在'<a class="ae kl" href="https://www.pygame.org/docs/ref/surface.html" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">pygame . surface</strong></a>'模块中有一个叫做<a class="ae kl" href="https://www.pygame.org/docs/ref/surface.html#pygame.Surface.blit" rel="noopener ugc nofollow" target="_blank"> <em class="km"> blit() </em> </a>的方法。<br/>这里，<em class="km">面</em>就是屏幕，我们要在这里添加图像。</p><p id="be7a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">&gt; &gt; &gt;<strong class="jp ir"> screen.blit(carimg，(0，0)) </strong></p><p id="3fc4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里的<strong class="jp ir"> <em class="km"> blit </em> </strong> <em class="km"> </em>方法接受两个参数。第一个是源，这是图像，我们必须在表面/屏幕上绘制。第二个是目的地，也就是我们必须在屏幕上绘制图像的确切位置。让我们用(0，0)坐标试试，看看汽车图像是从哪里加载的。保存并运行代码，如果一切正常，我们将看到如下内容:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi lv"><img src="../Images/96de0b815886afedc46b2b41e518f087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zLxu-xcyUj-Pp80pOmx6Qg.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk">car image</figcaption></figure><p id="73dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们希望将汽车图像添加到底部中间。坐标是，比如说<em class="km"> (400，470) </em>宽度是800，高度是600。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi lw"><img src="../Images/532cb80ca01db082a09a65e2a9822f34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ASPGjPAYPE2fIq2i5TfSZw.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk">x,y cordinates</figcaption></figure><p id="10b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">&gt; &gt; &gt;<strong class="jp ir"> screen.blit(carimg，(400，470)) </strong> <br/>该行必须添加在背景行之后，因为我们是在颜色更新之后添加该图像的。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/4d4843aaa55434ee5a8a7290c01b641c.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*6QU_zkq3u8ztdJmdPPPr6w.jpeg"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk">car final cordinates</figcaption></figure><p id="816a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">保存这段代码并运行它。我们现在将能够看到汽车如下:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ly"><img src="../Images/b4997168b31cd12c0401d27b4be85eec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vmT-QfEwY-YEJub3-vOwgg.jpeg"/></div></div></figure><p id="db37" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们已经在屏幕上添加了汽车图像，让我们开始添加当我们点击箭头键时开始在两个方向上移动汽车的逻辑。<br/>= = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =<br/><em class="km">我在这里给大家推荐创建一个在屏幕上添加汽车图像的功能。我个人的建议是在程序中创建越来越多的功能，让它看起来更好，更有条理。此外，我们可以通过在一个地方进行更改来修改功能。<br/></em>= = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =</p><p id="98b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">&gt; &gt; &gt;<strong class="jp ir"> def car(x，y):</strong><br/>&gt;&gt;&gt;<strong class="jp ir">screen . blit(carimg，(x，y)) </strong> <br/>这个<em class="km"> x，y </em>坐标，我们要在<em class="km"> game_loop </em>函数中定义。<br/> &gt; &gt; &gt; <strong class="jp ir"> x，y = 400，470 </strong> <br/>最后，我们可以替换行:<br/>&gt;&gt;&gt;<strong class="jp ir">screen . blit(carimg，(400，470))</strong><br/>to:<br/>&gt;&gt;&gt;<strong class="jp ir">car(x，y) </strong> <br/>保存它并运行代码。<em class="km">恭喜你！你已经完成了本文的第一部分。现在，让我们进入第二部分。</em></p><p id="e84e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了让汽车在两个方向上移动，我们必须处理事件处理，因为我们必须与事件和队列进行交互。再次，<a class="ae kl" href="https://www.pygame.org/docs/ref/event.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> pygame.event </strong> </a>模块进入画面。<br/>首先，我们必须看到事件类型，也就是说，我们要按下一些键吗？<br/>如果是，那么我们将继续前进。<br/>如果我们正在按键，那么我们必须处理<strong class="jp ir"> KEYDOWN </strong>事件。<br/>&gt;&gt;&gt;<strong class="jp ir">if event . type = = py game。KEYDOWN: </strong> <br/>这里面，我们要看按下的键是不是左箭头键:<br/>&gt;&gt;&gt;<strong class="jp ir">if event . key = = pygame。K_LEFT: </strong> <br/>然后，我们必须将汽车移动到左侧，为此，我们必须定义一个变量来管理汽车的x坐标。首先，创建一个变量，给它赋一个零值，并把它保存在游戏循环函数中。<br/>&gt;&gt;&gt;<strong class="jp ir">x _ change = 0</strong></p><p id="5b6e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在每当我们按下左箭头键时，这个<em class="km"> x_change </em>值应该减少<strong class="jp ir"> 5px </strong>(比方说)，每当我们按下右箭头键时，这个<em class="km"> x_change </em>值应该增加<strong class="jp ir"> 5px </strong>。整个代码应该是这样的:<br/><strong class="jp ir">&gt;&gt;&gt;if event . type = = pygame。KEYDOWN:<br/>&gt;&gt;&gt;if event . key = = pygame。k _ LEFT:<br/>&gt;&gt;&gt;x _ change =-5<br/>&gt;&gt;&gt;if event . key = = py game。k _ RIGHT:<br/>&gt;&gt;&gt;x _ change = 5</strong></p><p id="108f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们保存上面的代码并运行它，我们可以看到，当我们按下任何箭头键时，汽车将不断地向那个方向移动，不会停在任何地方。<br/>因为我们增加了按下按键不释放按键的逻辑。我们应该添加释放关键事件的逻辑<em class="km">。完成上述代码后，我们必须编写释放按键的逻辑。<br/>为了处理按键释放事件，pygame中有一个模块叫做<a class="ae kl" href="https://www.pygame.org/docs/ref/key.html" rel="noopener ugc nofollow" target="_blank"> pygame。KEYUP</a><br/><strong class="jp ir">&gt;&gt;&gt;if event . type = = pygame。KEYUP: </strong>K_LEFT或event.key== pygame。k _ RIGHT:<br/>&gt;&gt;&gt;x _ change = 0<br/>整个代码会是这样的:</em></p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi lz"><img src="../Images/8f49008aab2548ea3f18cab4343fd9b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o822tql2ndFNe5heiQWcZw.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk">event handling logic</figcaption></figure><p id="354f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在最后一行，我们正在更新x坐标，否则，移动不会发生。尝试保存上面的代码并运行它。<br/>如果你运行上面的代码，你会看到汽车的快速运动。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ma"><img src="../Images/9cc0948867adf27d99c4bc92d45f9829.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xfJRnm3ImYZEQ-U5pzIErA.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk">rapid movement</figcaption></figure><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mb"><img src="../Images/63cf4cc2183f34959059ec199c4d60cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Mo0mSN42gCjrR5ztO7qZQ.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk">rapid movement</figcaption></figure><p id="352c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要控制这个动作，我们需要学习一个叫做'<a class="ae kl" href="https://www.pygame.org/docs/ref/time.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> pygame.time </strong> ' </a>的模块，负责监控时间。在这里，我们将控制帧速率。简单来说，汽车的这种运动完全是关于帧和帧速率的。为此，我们将创建一个对象来帮助跟踪时间或帧速率。<br/>&gt;&gt;&gt;clock = py game . time . clock()<br/>在这里，<a class="ae kl" href="https://www.pygame.org/docs/ref/time.html#pygame.time.Clock" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">py game . time . clock()</strong></a>会创建一个对象，来跟踪时间/帧。<a class="ae kl" href="https://www.pygame.org/docs/ref/time.html#pygame.time.Clock" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">’。clock()</strong></a>' py game . time模块负责那个方法。<br/>现在我们要处理帧速率，为此有一个方法叫做“<a class="ae kl" href="https://www.pygame.org/docs/ref/time.html#pygame.time.Clock.tick" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="km">【tick()</em></strong></a>”。</p><p id="89f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上面的方法接受一个参数，并且以毫秒为单位。在这样做之后，我们必须减慢汽车的速度。而在pygame中，如果我们想让某个东西的功能变慢，我们就用这个方法。在游戏循环中写下面这段代码，在我们调用汽车函数之后，然后更新屏幕。<br/><strong class="jp ir">&gt;&gt;&gt;【x，y】<br/>&gt;&gt;&gt;clock . tick(100)<br/>&gt;&gt;&gt;py game . display . update()</strong></p><p id="45be" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="km">宾果</em>！！！如果你成功了，直到这一部分。如果没有，请在评论区分享这个问题。在接下来的部分，我们将学习一个非常基本的东西，添加所有的图像，使游戏更加真实和生动。我希望你喜欢这篇文章，如果你不让我知道我可以改进的地方。<br/>而万一，你想看上面代码的视频，请点击<a class="ae kl" href="https://www.youtube.com/watch?v=naMhr44mUZM" rel="noopener ugc nofollow" target="_blank"> <em class="km">这里</em> </a>。我也写了一些关于其他游戏的文章，如果你有兴趣通过游戏学习编码，请访问我的页面。请点击<a class="ae kl" href="https://medium.com/@asishraz" rel="noopener"> <strong class="jp ir"> <em class="km">这里</em></strong></a><strong class="jp ir"><em class="km"/></strong>并告诉我，你觉得怎么样？</p><p id="928e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">谢谢你。<br/>继续编码，继续学习！！！<br/> -Gareeb编码器</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="mc md l"/></div></figure></div></div>    
</body>
</html>