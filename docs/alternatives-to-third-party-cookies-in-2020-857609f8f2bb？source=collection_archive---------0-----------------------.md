# ç¬¬ä¸‰æ–¹ cookies æ›¿ä»£å“

> åŸæ–‡ï¼š<https://medium.datadriveninvestor.com/alternatives-to-third-party-cookies-in-2020-857609f8f2bb?source=collection_archive---------0----------------------->

## ç¬¬ä¸€éƒ¨åˆ†

## ä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹ cookies çš„è·¨åŸŸè·Ÿè¸ª

# é¥¼å¹²é¢åŒ…åº—

ç°ä»£ç½‘ç»œæ˜¯æ›²å¥‡é¥¼åº—ã€‚å¹¿å‘Šå•†ä½¿ç”¨ cookies æ¥æä¾›ä»¤äººæ¯›éª¨æ‚šç„¶çš„å¹¿å‘Šã€‚ç½‘ç«™æ‰€æœ‰è€…ä½¿ç”¨ cookies æ¥è¡¡é‡ä»–ä»¬çš„å—ä¼—ã€‚å¼€å‘äººå‘˜ä½¿ç”¨ cookies æ¥å­˜å‚¨ç”¨æˆ·è®¾ç½®ã€‚

å¤©å“ªï¼Œå³ä½¿æ˜¯é‚£äº› cookie ä¿¡æ¯å¼¹å‡ºçª—å£ä¹Ÿæ˜¯åŸºäº cookie çš„(å¦åˆ™ç½‘ç«™æ€ä¹ˆçŸ¥é“ä½ å·²ç»çœ‹è¿‡äº†å‘¢ï¼Ÿ).

Video fragment of [asdfmovie5](https://www.youtube.com/watch?v=tCnj-uiRCn8)

è‡ªä» mighty cookies å‘æ˜ä»¥æ¥ï¼Œæ•´ä¸ªè¡Œä¸šéƒ½åœ¨ä¾é è·Ÿè¸ªç½‘ç«™ç”¨æˆ·çš„èƒ½åŠ›ã€‚ç¬¬ä¸‰æ–¹ cookies æ˜¯å¹¿å‘Šå•†ç”¨æ¥åœ¨åŸŸä¹‹é—´è¯†åˆ«ç”¨æˆ·çš„æœ€æµè¡Œçš„æœºåˆ¶ã€‚

æ‰€ä»¥éš¾æ€ªï¼Œè¿™ä¸ªæœºåˆ¶åœ¨è®¨è®ºä¸­ã€‚å‡ºäºéšç§è€ƒè™‘ã€‚

[ğŸ””æƒ³è¦æ›´å¤šè¿™æ ·çš„æ–‡ç« ï¼Ÿåœ¨è¿™é‡Œç­¾åã€‚](https://fischerbach.medium.com/membership)

# è°·æ­Œé¥¼å¹²æ€ªå…½

2019 å¹´ 8 æœˆï¼ŒChrome çš„å›¢é˜Ÿå®£å¸ƒï¼Œä»–ä»¬å°†åœ¨ä¸¤å¹´å†…ä»æµè§ˆå™¨ä¸­åˆ é™¤ç¬¬ä¸‰æ–¹ cookiesã€‚Chrome æ˜¯æœ€åä¸€ä¸ªå¼€å§‹é™åˆ¶ç¬¬ä¸‰æ–¹ cookies çš„æµè§ˆå™¨ã€‚

![](img/263bbad0f008435118fb7d58900dc6c6.png)

Image by Author

è™½ç„¶ Safari å’Œ Firefox å·²ç»å†…ç½®äº†å‡å°‘è·¨ç«™ç‚¹è·Ÿè¸ªçš„è§£å†³æ–¹æ¡ˆï¼Œä½† Chrome å æ®äº†æµè§ˆå™¨å¸‚åœºçš„å¤§éƒ¨åˆ†ä»½é¢ï¼Œå¯¹å¸‚åœºçš„å½±å“ä¹Ÿç›¸åº”æ›´å¤§ã€‚

# å¯»æ±‚æ›¿ä»£æ–¹æ¡ˆ

ç„¶è€Œï¼Œä»ç„¶æœ‰ç¬¦åˆ[ç½‘ç»œæ ‡å‡†](https://en.wikipedia.org/wiki/Web_standards)çš„æ›¿ä»£æ–¹æ¡ˆã€‚ä¸ºäº†æ‰¾åˆ°å®ƒä»¬ï¼Œè®©æˆ‘ä»¬åœ¨ web æ ‡å‡†æ–‡æ¡£ä¸­æœç´¢â€œéšç§é—®é¢˜â€ã€‚

åœ¨è¿™ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘é‡ç‚¹ä»‹ç»äº†ä½¿ç”¨ä¼šè¯å­˜å‚¨çš„æœºåˆ¶ã€åŸºäºå­˜å‚¨çš„æœºåˆ¶å’Œ web ç¼“å­˜ã€‚

**åŸºäºå­˜å‚¨çš„**

*   å±€éƒ¨å­˜å‚¨å™¨
*   ä¼šè¯å­˜å‚¨
*   ç´¢å¼• b

**ç½‘ç»œç¼“å­˜**

*   åœ¨ç¼“å­˜çš„æ–‡æ¡£ä¸­åµŒå…¥æ ‡è¯†ç¬¦
*   è´Ÿè½½æ€§èƒ½æµ‹è¯•
*   ETag &ä¸Šæ¬¡ä¿®æ”¹æ—¶é—´

åœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†ï¼Œæˆ‘å°†è°ƒæŸ¥æ›´å…ˆè¿›çš„æ–¹æ³•ï¼Œå¦‚æŒ‡çº¹å’Œç‚¹å‡»åŠ«æŒã€‚

![](img/1fb5c70f6361819c007123ddf0d8a8a3.png)

Table of possible tracking mechanisms (based on [https://arxiv.org/pdf/1507.07872.pdf](https://www.google.com/url?q=https://arxiv.org/pdf/1507.07872.pdf&sa=D&ust=1600595720426000&usg=AFQjCNGtsk4VjcBF5QbMB-C5B4Lf3-ANaQ), moderated by Author)

# å”¯ä¸€æ ‡è¯†ç¬¦çš„å­˜å‚¨

è®©æˆ‘ä»¬è€ƒè™‘è¿™ä¸ªç”¨ä¾‹ã€‚

ä½ æ˜¯ä¸€ä¸ªå‡ºç‰ˆå•†ï¼Œæ‹¥æœ‰ä¸‰ä¸ªä¸åŒé¢†åŸŸçš„ç½‘ç«™ã€‚æ‚¨éœ€è¦å®ç°åœ¨ç”¨æˆ·ä¹‹é—´è¯†åˆ«ç”¨æˆ·çš„æœºåˆ¶(ä¾‹å¦‚ï¼Œç¡®å®šæœ‰å¤šå°‘ç”¨æˆ·è‡³å°‘è®¿é—®è¿‡æ¯ä¸ªç«™ç‚¹ä¸€æ¬¡)ã€‚

ç”±äºä½ çš„ç½‘ç«™éƒ½æ²¡æœ‰ç™»å½•åŠŸèƒ½ï¼Œä½ å¿…é¡»ä½¿ç”¨æŸç§åŒ¿åæ ‡è¯†ç¬¦ã€‚

ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®æ‚¨çš„ç½‘ç«™æ—¶ï¼Œæ‚¨å°†ç”Ÿæˆä¸€ä¸ª [UUIDv4](http://ekonomia.wne.uw.edu.pl/ekonomia/getFile/778) ï¼Œå¹¶ä½¿ç”¨æ‰€æœ‰å¯ç”¨çš„æ–¹æ³•å°†å…¶ä¿å­˜åœ¨ç”¨æˆ·çš„è®¡ç®—æœºä¸Šã€‚

![](img/6e9a55eb77fe3eb0f51a904f9a9e9523.png)

Image by Author

ç„¶åï¼Œä½ çš„æ¯ä¸ªç½‘ç«™éƒ½åº”è¯¥èƒ½å¤Ÿåœ¨ç”¨æˆ·æ¯æ¬¡è®¿é—®å®ƒçš„æ—¶å€™æ£€ç´¢è¿™ä¸ªæ ‡è¯†ç¬¦ã€‚

æ— è®ºè·å– ID çš„ç½‘ç«™æ˜¯ä»€ä¹ˆï¼Œæ¢å¤çš„ ID éƒ½åº”è¯¥æ˜¯ç›¸åŒçš„ã€‚

# åŸºäºå­˜å‚¨çš„æœºåˆ¶

HTML5 æ ‡å‡†æ”¯æŒå®¢æˆ·ç«¯çš„ä¸€ç³»åˆ—ç»“æ„åŒ–æ•°æ®å­˜å‚¨æœºåˆ¶ã€‚è¿™äº›æ˜¯æœ€å¹¿ä¸ºäººçŸ¥çš„ä¸€ä»£è¿½è¸ªæŠ€æœ¯ï¼ŒåŸºäºç”¨æˆ·è®¡ç®—æœºä¸Šçš„æŒä¹…å­˜å‚¨ã€‚

Cookies å°±å±äºè¿™ä¸€ç±»ï¼Œå®ƒè¿˜åŒ…æ‹¬æœ¬åœ°å­˜å‚¨ã€ç´¢å¼•æ•°æ®åº“å’Œæ–‡ä»¶ APIã€‚

è¿™äº›æœºåˆ¶éƒ½æ˜¯å¯¹ç”¨æˆ·éšç§çš„æœ€å¤§å¨èƒã€‚å› æ­¤ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¬éƒ½ä¸èƒ½åœ¨è·¨åŸŸç¯å¢ƒä¸­å·¥ä½œï¼Œå¤§å¤šæ•°æµè§ˆå™¨ä¼šæ ¹æ®ç”¨æˆ·çš„è¯·æ±‚æ¸…é™¤è¿™äº›å­˜å‚¨ã€‚

## å±€éƒ¨å­˜å‚¨å™¨

æœ¬åœ°å­˜å‚¨æ˜¯ä¸€ç§æœºåˆ¶ï¼Œç±»ä¼¼äº cookiesï¼Œç”¨äºåœ¨å®¢æˆ·ç«¯å­˜å‚¨å¯¹è±¡ã€‚

![](img/5ccad378d8a3e6bf3486cb1933368bf1.png)

Local storage, a part of the web storage API, is a type of persistent storage built into the browser. (source: [Everything You Need To Know About Local Storage](https://www.boldare.com/blog/everything-you-need-to-know-about-local-storage/))

è¿™äº›å¯¹è±¡(é”®å€¼å¯¹)è¢«æ°¸ä¹…å­˜å‚¨ï¼Œç›´åˆ°ç”¨æˆ·æˆ–ç½‘ç«™åˆ é™¤å®ƒä»¬ã€‚ä¸€ä¸ªå¯¹è±¡å¯ä»¥æœ‰ 5 MB å¤§ï¼Œè¿™æ¯” cookies æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ã€‚

æ­£å¦‚æˆ‘ä¹‹å‰æåˆ°çš„ï¼Œ[æ ‡å‡†ç½‘ç»œå­˜å‚¨(ä¹Ÿå«æœ¬åœ°å­˜å‚¨)ä¸å…è®¸è·¨åŸŸæ•°æ®å…±äº«ã€‚](https://www.w3.org/TR/webstorage/#user-tracking)è®¿é—®æœ¬åœ°å­˜å‚¨ç”šè‡³æ¯” cookies æ›´éš¾ï¼Œå› ä¸ºä½ ç”šè‡³ä¸èƒ½æŒ‡å®šæœ‰æƒè®¿é—®æ•°æ®çš„å­åŸŸã€‚å®ƒä»¬è¢«è§†ä¸ºå®Œå…¨ä¸åŒçš„é¢†åŸŸã€‚

å½“æŸäººæœ‰è®¸å¤š(å­)åŸŸï¼Œå¹¶å¸Œæœ›åœ¨å®ƒä»¬ä¹‹é—´å…±äº«æ•°æ®æ—¶ï¼Œè¿™å¯èƒ½ä¼šæœ‰é—®é¢˜ã€‚

ä½†æ˜¯è¿™ä¸ªé—®é¢˜æœ‰ä¸€ä¸ªè§£å†³æ–¹æ¡ˆâ€”â€”post messageã€‚

[postMessage](https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage) æ–¹æ³•å®‰å…¨åœ°æ”¯æŒé¡µé¢å’ŒåµŒå…¥å…¶ä¸­çš„ iframe ä¹‹é—´çš„è·¨æ¥æºé€šä¿¡ã€‚åæ¶ˆæ¯ä¼ é€’åŠŸèƒ½æ—¨åœ¨å…è®¸æ¥è‡ªä¸åŒåŸŸçš„æ–‡æ¡£ä¹‹é—´å…±äº«æ•°æ®ï¼ŒåŒæ—¶ä»ç„¶æ˜¯å®‰å…¨çš„ã€‚

åªéœ€åœ¨æ‰€æœ‰åŸŸä¸­åµŒå…¥ä¸€ä¸ª iframeï¼Œä½¿ç”¨å®ƒå°†æ•°æ®ä¿å­˜åœ¨ localStorage ä¸­ï¼Œç„¶åæ‰€æœ‰åŸŸéƒ½å¯ä»¥é€šè¿‡è¿™ä¸ª iframe è®¿é—®åŒä¸€ä¸ªå­˜å‚¨ã€‚

ä¸å¹¸çš„æ˜¯ï¼Œè¿˜æœ‰å¦ä¸€ä¸ªéšœç¢ã€‚

æœ‰çš„æµè§ˆå™¨(*æ˜¯çš„ Safariï¼Œæˆ‘è¯´çš„å°±æ˜¯ä½ ï¼*)é˜»æ­¢ç¬¬ä¸‰æ–¹è®¾ç½®å’Œè¯»å–å­˜å‚¨(æ— è®ºæ˜¯ cookieã€æœ¬åœ°å­˜å‚¨è¿˜æ˜¯å…¶ä»–)ã€‚

é€šè¿‡å°†ç”¨æˆ·é‡å®šå‘åˆ°ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ç»•è¿‡â€œä»…ç¬¬ä¸€æ–¹â€çš„é™åˆ¶ã€‚è¿™ä¸ªä¸­é—´ç«™ç‚¹å¯ä»¥è®¾ç½®æˆ–è¯»å– cookiesï¼Œå› ä¸ºå®ƒçš„å†…å®¹å‡ºç°åœ¨ç¬¬ä¸€æ–¹ä¸Šä¸‹æ–‡ä¸­ã€‚

æ¥ä¸‹æ¥ï¼Œç”¨æˆ·è¢«é‡å®šå‘åˆ°ä»–æœ€åˆè®¿é—®çš„ç½‘ç«™ã€‚

## ä¼šè¯å­˜å‚¨

HTML5 ä¼šè¯å­˜å‚¨ç±»ä¼¼äºæœ¬åœ°å­˜å‚¨ï¼Œä½†æ˜¯å­˜å‚¨çš„å¯¹è±¡åªå¯¹å½“å‰æµè§ˆå™¨çª—å£å¯ç”¨ï¼Œå¹¶ä¸”åœ¨çª—å£å…³é—­æ—¶è¢«åˆ é™¤ã€‚

![](img/1cfe3e49200b31440baa0c903c2663ea.png)

(source: [Having fun with HTML5 â€” Local Storage and Session Storage](https://theburningmonk.com/2010/12/having-fun-with-html5-local-storage-and-session-storage/))

å°½ç®¡æœ¬åœ°å­˜å‚¨å’Œä¼šè¯å­˜å‚¨æ˜¯åŒä¸€æ ‡å‡†çš„ä¸€éƒ¨åˆ†ã€‚

é™¤äº†å®ƒçš„ä¸´æ—¶æ€§ï¼Œå®ƒè¿˜å¯ä»¥ç”¨æ¥æ¢å¤ç”¨æˆ· IDï¼Œå½“ç”¨æˆ·åœ¨ç½‘ç«™ä»ç„¶æ‰“å¼€çš„æƒ…å†µä¸‹æ¸…é™¤å…¶ä»–å­˜å‚¨æ—¶ã€‚

## ç´¢å¼• b

IndexedDB æ˜¯ä¸€ä¸ªå†…ç½®åœ¨æµè§ˆå™¨ä¸­çš„ NoSQL æ•°æ®åº“ã€‚å®ƒæ¯”æœ¬åœ°å­˜å‚¨å¼ºå¤§å¾—å¤šã€‚ç¼ºç‚¹æ˜¯ IndexedDB ä½¿ç”¨èµ·æ¥æ¯” cookies æˆ–æœ¬åœ°å­˜å‚¨ç¨å¾®å¤æ‚ä¸€äº›ã€‚

![](img/cd44d523c65a16d5d00cb2b24c6f7f68.png)

IndexedDB is a **large-scale object store** built into the browser. (source: [JavaScript IndexedDB](https://www.javascripttutorial.net/web-apis/javascript-indexeddb/))

ä½†æ˜¯è¿™ä¸ªé—®é¢˜ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨åƒ[è¿™æ ·çš„åº“æ¥è§„é¿ã€‚](https://dexie.org/)

å½“ç„¶ï¼Œä¸åŒçš„åŸŸä¸èƒ½è®¿é—®å½¼æ­¤çš„æ•°æ®åº“ã€‚ä½†æ˜¯ç”¨äºå…±äº«æœ¬åœ°å­˜å‚¨çš„è§£å†³æ–¹æ¡ˆä¹Ÿå¯ä»¥ç”¨äºå…±äº«æ¥è‡ª IndexedDB çš„æ•°æ®ã€‚

## æ–‡ä»¶ API

æˆ‘æƒ³çŸ¥é“æ˜¯å¦å°†è¯¥æœºåˆ¶åˆ—å…¥æ¸…å•ã€‚

é—®é¢˜æ˜¯ API éœ€è¦ç”¨æˆ·çš„æ˜ç¡®æ“ä½œ(ä»ç£ç›˜ä¸­é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶)ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é™åˆ¶ï¼Œå› ä¸ºå¤§å¤šæ•°ç”¨æˆ·ä¸æƒ³å…±äº«ä»–ä»¬çš„æ•°æ®ã€‚

ç„¶è€Œï¼Œæˆ‘è®¤ä¸ºæ–‡ä»¶ API å¯èƒ½æ˜¯å‡ºç‰ˆå•†çš„æŸç§å¤‡ä»½ï¼Œä½œä¸ºè·¨ç½‘ç«™äº¤æ¢æ•°æ®çš„æœ€åæœºä¼šã€‚é€šè¿‡ä¸€äº›åŠªåŠ›ï¼Œå®ƒç”šè‡³å¯ä»¥ä¸ºç”¨æˆ·å¢åŠ æ–°çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·å¯ä»¥è·å¾—ä¸€ä¸ªåŒ…å«å…¶å¸æˆ·å¯†é’¥çš„æ–‡ä»¶ï¼Œä½œä¸ºåŒå› ç´ èº«ä»½éªŒè¯ã€‚

ä½†æ˜¯åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ åº”è¯¥æŠŠå®ƒå½“ä½œä¸€ä¸ªæ›´æ·±å¥¥çš„è§£å†³æ–¹æ¡ˆã€‚

## ä¸æœ½ b

è¦å°†æ‚¨çš„å­˜å‚¨æ¸¸æˆæå‡åˆ°ä¸€ä¸ªæ–°çš„æ°´å¹³ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ ImmortalDBã€‚

![](img/b427da8e8b4190ebe4cfeddd5d670c68.png)

æ­£å¦‚æœ¬åº“çš„ä½œè€…æ‰€è¯´:

> ImmortalDB æ˜¯åœ¨æµè§ˆå™¨ä¸­å­˜å‚¨æŒä¹…é”®å€¼æ•°æ®çš„æœ€ä½³æ–¹å¼ã€‚ä¿å­˜åˆ° ImmortalDB çš„æ•°æ®å†—ä½™åœ°å­˜å‚¨åœ¨ Cookiesã€IndexedDB å’Œ LocalStorage ä¸­ï¼Œå¦‚æœå…¶ä¸­çš„ä»»ä½•æ•°æ®è¢«åˆ é™¤æˆ–æŸåï¼Œå®ƒä»¬ä¼šæ¯«ä¸ç•™æƒ…åœ°è‡ªæˆ‘ä¿®å¤ã€‚
> 
> ä¾‹å¦‚ï¼Œæ¸…é™¤ cookies æ˜¯ä¸€ä¸ªå¸¸è§çš„ç”¨æˆ·æ“ä½œï¼Œå³ä½¿å¯¹äºéæŠ€æœ¯ç”¨æˆ·ä¹Ÿæ˜¯å¦‚æ­¤ã€‚åœ¨å­˜å‚¨å‹åŠ›ä¸‹ï¼Œæµè§ˆå™¨ä¼šåœ¨æ²¡æœ‰è­¦å‘Šçš„æƒ…å†µä¸‹éšæ„åˆ é™¤ IndexedDBã€LocalStorage å’Œ/æˆ– SessionStorageã€‚
> 
> é¢å¯¹è¿™æ ·çš„äº‹ä»¶ï¼ŒImmortalDB æ˜¯æœ‰å¼¹æ€§çš„ã€‚

å…³äºä¸æœ½çš„æ›´å¤šä¿¡æ¯ https://github.com/gruns/ImmortalDB

# åŸºäºç¼“å­˜çš„æœºåˆ¶

å¦ä¸€ç»„è·Ÿè¸ªæ–¹æ³•ä¹Ÿä½¿ç”¨åŸºäºå®¢æˆ·ç«¯çš„å­˜å‚¨ã€‚æ ¹æ®è®¾è®¡ï¼Œç¼“å­˜ç”¨äºå­˜å‚¨å¾ˆå°‘æ›´æ”¹çš„æ•°æ®ã€‚

è¯¥åŠŸèƒ½é™åˆ¶äº†ä¸å¿…è¦çš„ç½‘ç»œæ•°æ®ä¼ è¾“ï¼Œå¯¹äºåŸºç¡€è®¾æ–½å¸¦å®½ç»´æŠ¤è‡³å…³é‡è¦ã€‚å› æ­¤ï¼Œæµè§ˆå™¨å°†å¾ˆéš¾åœ¨ä¸å½±å“ç”¨æˆ·ä½“éªŒå’Œäº’è”ç½‘æ€§èƒ½çš„æƒ…å†µä¸‹é™åˆ¶åŸºäºç¼“å­˜çš„è·Ÿè¸ªæœºåˆ¶ã€‚

ç¼“å­˜æ‰€éœ€çš„æœºåˆ¶ä¹Ÿå¯ä»¥ç”¨ä½œç”¨æˆ·æ ‡è¯†æ•°æ®çš„å­˜å‚¨ã€‚

## åœ¨ç¼“å­˜çš„æ–‡æ¡£ä¸­åµŒå…¥æ ‡è¯†ç¬¦

åœ¨æˆ‘ä»¬çš„åŸºæœ¬åœºæ™¯ä¸­ï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šè¿”å›ä¸€ä¸ª JavaScript æ–‡æ¡£ï¼Œè¯¥æ–‡æ¡£çš„ä¸»ä½“ä¸­åµŒå…¥äº†ä¸€ä¸ªæƒŸä¸€çš„æ ‡è¯†ç¬¦(ä¾‹å¦‚ï¼Œä½œä¸ºå˜é‡å€¼æˆ–è€…ç”šè‡³åœ¨æ³¨é‡Šä¸­)ã€‚

è¿™ä¸ª JS æ–‡ä»¶å¯ä»¥é™„åŠ åˆ°æ‰€æœ‰ 3 ä¸ªåŸŸã€‚è¿™ä¸ª id å°†åœ¨æœåŠ¡å™¨ç«¯è¢«è¯·æ±‚æ—¶ç”Ÿæˆã€‚

ä½†æ˜¯ä¸ºäº†å­˜å‚¨æ›¾ç»ç”Ÿæˆçš„æ ‡è¯†ç¬¦ï¼ŒæœåŠ¡å™¨å°† Expires/max-age=è®¾ç½®ä¸ºé¥è¿œæœªæ¥çš„æ—¥æœŸã€‚

## è´Ÿè½½æ€§èƒ½æµ‹è¯•

è®©æˆ‘ä»¬æš‚æ—¶æ”¾å¼ƒåŸºæœ¬çš„åœºæ™¯ï¼Œå‡è®¾æˆ‘ä»¬åªæƒ³çŸ¥é“ä¸€ä¸ªç»™å®šç«™ç‚¹çš„ç”¨æˆ·æ›¾ç»è®¿é—®è¿‡æˆ‘ä»¬çš„å…¶ä»–ç«™ç‚¹ã€‚

ç½‘ç«™å¯ä»¥ä½¿ç”¨ JavaScript æ¥æ£€æµ‹ä»ä»»ä½• URL åŠ è½½ä»»ä½•å¯¹è±¡(ä¾‹å¦‚ï¼Œå›¾åƒ)çš„æ—¶é—´ã€‚æ‰€æµ‹é‡çš„åŠ è½½æ—¶é—´å¯ä»¥è¢«æŠ¥å‘Šç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å¯ä»¥è¯„ä¼°å¯¹è±¡æ˜¯å¦å­˜åœ¨äºé«˜é€Ÿç¼“å­˜ä¸­(å› æ­¤ï¼Œç”¨æˆ·å…ˆå‰è®¿é—®è¿‡ç½‘ç«™)ã€‚

ä½†æ˜¯ä½ åªéœ€è¦è®°ä½ç”¨æˆ·ä½“éªŒï¼Œå› ä¸ºè¿™ç§â€œæ•²æ‰“â€å¯èƒ½ä¼šè¿…é€Ÿé™ä½ç½‘ç«™çš„åŠ è½½é€Ÿåº¦ã€‚

## ETag &ä¸Šæ¬¡ä¿®æ”¹æ—¶é—´

ETag å’Œ Last-Modified æ˜¯ HTTP å“åº”å¤´ã€‚å®ƒä»¬çš„ç›®çš„æ˜¯ä¼˜åŒ–æ€§èƒ½å’Œå¢å¼ºå®¢æˆ·ç«¯-æœåŠ¡å™¨é€šä¿¡è¿‡ç¨‹ã€‚

ETag å­—æ®µæ˜¯èµ„æºçš„ç‰¹å®šç‰ˆæœ¬çš„æ ‡è¯†ç¬¦(ä¾‹å¦‚ï¼Œæ–‡æ¡£å†…å®¹çš„æ•£åˆ—)ã€‚å®ƒå¯ä»¥åŒ…å«å¤§çº¦ 10kb çš„æ•°æ®ã€‚è¿™è¶³ä»¥å‚¨å­˜æˆ‘ä»¬çš„ UUIDã€‚

ç†è®ºä¸Šï¼ŒLast-Modified å¤´åº”è¯¥åŒ…å« DateTimeï¼Œä½†å®é™…ä¸Šä¹Ÿæ¥å—ä»»ä½•å­—ç¬¦ä¸²ã€‚ä½†æ˜¯æˆ‘ä¸å»ºè®®è¿™ä¹ˆç”¨ã€‚

æ›´å¥½çš„æ–¹æ³•æ˜¯ç”¨ä¸€ç»„ DateTime å€¼æ„å»ºä¸€ä¸ªè‡ªå®šä¹‰æ•£åˆ—å‡½æ•°ã€‚å®ƒ

åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå¦‚ä½•ä½¿ç”¨ ETag å’Œ Last-Modifiedï¼Ÿ

å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡ä»æœåŠ¡å™¨è¯·æ±‚ä¸€äº›èµ„æºæ—¶ï¼Œå“åº”å¤´åŒ…å« ETag å’Œ Last-Modified å­—æ®µã€‚åœ¨ä¸‹ä¸€æ¬¡è®¿é—®ç½‘ç«™æ—¶ï¼Œæµè§ˆå™¨åœ¨è¯·æ±‚å¤´ä¸­å‘é€ If-Modified-Since å’Œ If-None-Matchã€‚

è¿™äº›å¤´åŒ…å«æ¥è‡ªå…ˆå‰ç¼“å­˜çš„èµ„æºçš„ Last-Modified å’Œ ETag å­—æ®µçš„å€¼ã€‚

![](img/a3b4b4ca690422d16b9efd7713238ea7.png)

ETag diagram (Image by Author)

![](img/c7e73d20d464e5efaf8ebc3c6fb7bd82.png)

Last-Modified diagram (Image by Author)

æˆ‘æåˆ°è¿‡å®ƒå¯ä»¥è·¨åŸŸå·¥ä½œå—ï¼Ÿ

æœ‰è¶£çš„æ˜¯ï¼Œå³ä½¿åœ¨å•ä¸ªç§äººæµè§ˆä¼šè¯æœŸé—´ï¼Œè·Ÿè¸ªä¹Ÿæ˜¯å¯èƒ½çš„ï¼Œå› ä¸ºç¼“å­˜ä¸€ç›´ä¿æŒåˆ°æœ€åä¸€ä¸ªæµè§ˆå™¨çª—å£å…³é—­ã€‚

å”¯ä¸€çš„æŒ‘æˆ˜æ˜¯å¼€å‘ä¸€ç§æœºåˆ¶ï¼Œå°†æ¥è‡ª ETag/Last-Modified çš„æœåŠ¡å™¨ç«¯å”¯ä¸€ id æ’å…¥åˆ°å®¢æˆ·ç«¯ JavaScript ä»£ç ä¸­ã€‚

# å¤–å–é£Ÿå“

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨ä¸¥æ ¼åŸºäºåœ¨ç”¨æˆ·è®¾å¤‡ä¸Šå­˜å‚¨æ•°æ®çš„è·Ÿè¸ªæ–¹æ³•ã€‚

![](img/bd6d04058e128f4ec0fe986419dcf8ba.png)

Comparison of tracking methods (Image by Author)

åœ¨ cookie å¯ç¤ºçš„èƒŒæ™¯ä¸‹ï¼Œæœ€æœ‰å‰é€”çš„æ˜¯åŸºäºç¼“å­˜çš„ HTTP å¤´å’Œ iframes ä¹‹é—´çš„`postMessaging`ã€‚

ä½†æ˜¯ï¼Œæ€»ä¼šæœ‰å…³äºç”¨æˆ·éšç§çš„è®¨è®ºã€‚ä¸ç®¡ç½‘ç«™æ‰€æœ‰è€…ä½¿ç”¨ä»€ä¹ˆæ–¹æ³•ã€‚

åœ¨ä¸‹ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘å°†å…³æ³¨æ›´å¤æ‚çš„æ–¹æ³•ã€‚[æŒ‡çº¹è¯†åˆ«](/fingerprinting-aba640862019)ç»“åˆç»Ÿè®¡æ–¹æ³•å¯ä»¥æä¾›å‡ ä¹å’Œ cookie è·Ÿè¸ªä¸€æ ·å¥½çš„ç»“æœã€‚

![](img/22e1b0bc54a738bc156fba54cff2eda0.png)

æ„Ÿè°¢æ‚¨çš„é˜…è¯»ã€‚æˆ‘å¸Œæœ›ä½ å–œæ¬¢é˜…è¯»ï¼Œå°±åƒæˆ‘å–œæ¬¢ä¸ºä½ å†™è¿™ç¯‡æ–‡ç« ä¸€æ ·ã€‚

> [https://fischerbach.medium.com/membership](https://fischerbach.medium.com/membership)

***Pro æç¤º:*** æ³¨å†Œ Mediumï¼Œå°±å¯ä»¥å®Œå…¨è®¿é—®æˆ‘æ‰€æœ‰çš„å†…å®¹ä»¥åŠæˆåƒä¸Šä¸‡åƒæˆ‘ä¸€æ ·çš„å†…å®¹åˆ›ä½œè€…ã€‚å¦‚æœä½ å–œæ¬¢ä½ çœ‹åˆ°çš„ï¼Œä½¿ç”¨[æˆ‘çš„é“¾æ¥](https://fischerbach.medium.com/membership)æ”¯æŒæˆ‘çš„å†™ä½œã€‚

![](img/22e1b0bc54a738bc156fba54cff2eda0.png)

# å‚è€ƒ

[](/fingerprinting-aba640862019) [## æŒ‡çº¹è¯†åˆ«

### ä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹ cookies çš„è·¨åŸŸè·Ÿè¸ª

medium.datadriveninvestor.com](/fingerprinting-aba640862019) 

## è·Ÿè¸ªæœºåˆ¶

[https://arxiv.org/pdf/1507.07872.pdf](https://arxiv.org/pdf/1507.07872.pdf)
http://www . chromium . org/Home/chromium-security/client-identificati on-mechanisms
[https://github.com/gruns/ImmortalDB](https://github.com/gruns/ImmortalDB)

## å±€éƒ¨å­˜å‚¨å™¨

[https://www.w3.org/TR/webstorage/](https://www.w3.org/TR/webstorage/)
[https://caniuse.com/mdn-api_window_localstorage](https://caniuse.com/mdn-api_window_localstorage)
[https://level up . git connected . com/share-local storage-session storage-between-different-domain-EB 07581 e 9384](https://levelup.gitconnected.com/share-localstorage-sessionstorage-between-different-domains-eb07581e9384)

## ç´¢å¼• b

[https://www.w3.org/TR/IndexedDB-2/](https://www.w3.org/TR/IndexedDB-2/)
[https://caniuse.com/indexeddb](https://caniuse.com/indexeddb)
https://github.com/localForage/localForage

## æ–‡ä»¶ API

[https://www.w3.org/TR/2019/WD-FileAPI-20190911/](https://www.w3.org/TR/2019/WD-FileAPI-20190911/)
https://caniuse.com/mdn-api_file

## ETag &ä¸Šæ¬¡ä¿®æ”¹æ—¶é—´

[https://caniuse.com/mdn-http_headers_etag](https://caniuse.com/mdn-http_headers_etag)https://caniuse.com/mdn-http_headers_last-modified