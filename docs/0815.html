<html>
<head>
<title>Copy objects from one S3 bucket to another</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将对象从一个S3存储桶复制到另一个存储桶</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/copy-objects-from-one-s3-bucket-to-another-932936a739a9?source=collection_archive---------5-----------------------#2020-02-18">https://medium.datadriveninvestor.com/copy-objects-from-one-s3-bucket-to-another-932936a739a9?source=collection_archive---------5-----------------------#2020-02-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1487895d33cbc1e354c8d318eba996a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vgaXFoli0ILq8mJU8nFupw.jpeg"/></div></div></figure><p id="be3a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">亚马逊简单存储服务是互联网存储。它旨在使开发人员更容易进行网络规模的计算。</p><p id="28a1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">亚马逊S3有一个简单的网络服务界面，你可以用它在任何时间从网络上的任何地方存储和检索任何数量的数据。有时，根据我们的需要，必须将对象从一个桶复制到另一个桶，并通过副本将数据从一个区域切换到另一个区域。</p><div class="kw kx gp gr ky kz"><a href="https://www.datadriveninvestor.com/2018/09/22/infographic-journey-to-the-clouds/" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">信息图:云之旅|数据驱动的投资者</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">聪明的企业领导者了解利用云的价值。随着数据存储需求的增长，他们已经…</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="li l"><div class="lj l lk ll lm li ln jw kz"/></div></div></a></div><h2 id="b11b" class="lo lp iq bd lq lr ls dn lt lu lv dp lw kj lx ly lz kn ma mb mc kr md me mf mg bi translated"><strong class="ak">步骤1:-使用命令行检查AWS CLI版本2</strong></h2><p id="1c5a" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">在安装AWS CLI版本2之前，您必须检查它是否已经安装。通过运行以下命令进行检查。如果你得到<code class="fe mm mn mo mp b">aws2 not found </code>意味着<strong class="ka ir"> AWS CLI版本2 </strong>还没有安装。</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="b01b" class="lo lp iq mp b gy my mz l na nb">$ which aws2<br/>  <strong class="mp ir">OutPut:-</strong><br/>  aws2 not found</span><span id="7b68" class="lo lp iq mp b gy nc mz l na nb">$ aws2 --version <br/>  <strong class="mp ir">OutPut:-</strong><br/>  aws2 not found</span></pre><h2 id="a206" class="lo lp iq bd lq lr ls dn lt lu lv dp lw kj lx ly lz kn ma mb mc kr md me mf mg bi translated"><strong class="ak">步骤2:-在macOS上安装AWS CLI版本2</strong></h2><p id="46fd" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">通过运行以下命令安装AWS CLI版本。</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="14d3" class="lo lp iq mp b gy my mz l na nb">$ curl "<a class="ae nd" href="https://d1vvhvl2y92vvt.cloudfront.net/AWSCLIV2.pkg" rel="noopener ugc nofollow" target="_blank">https://d1vvhvl2y92vvt.cloudfront.net/AWSCLIV2.pkg</a>" -o "AWSCLIV2.pkg"</span></pre><figure class="mq mr ms mt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/727cfbd0433fc322576e88eae73ca66d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gOa2BmPIOEay3iq4mhx9yQ.png"/></div></div></figure><p id="2ae8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过运行旧命令再次检查。但是，现在输出将会不同。表示安装了aws2。</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="d3fd" class="lo lp iq mp b gy my mz l na nb">$ which aws2 <br/>  <strong class="mp ir">OutPut:-</strong><br/>  /usr/local/bin/aws2</span><span id="0db7" class="lo lp iq mp b gy nc mz l na nb">$ aws2 --version <br/>  <strong class="mp ir">OutPut:-</strong><br/>  aws-cli/2.0.0dev4 Python/3.7.4 Darwin/17.7.0 botocore/2.0.0dev3</span></pre><figure class="mq mr ms mt gt jr gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/961bf2ce17b786955513df71da2da44a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/format:webp/1*K9h4jYd81Zu8EyyCDg3lCw.png"/></div></figure><h2 id="49b0" class="lo lp iq bd lq lr ls dn lt lu lv dp lw kj lx ly lz kn ma mb mc kr md me mf mg bi translated"><strong class="ak">步骤3:-通过运行以下命令</strong>配置AWS CLI</h2><p id="b178" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">要配置<strong class="ka ir"> AWS CLI </strong>，您必须使用<code class="fe mm mn mo mp b">Access Key</code>和<code class="fe mm mn mo mp b">Secret key</code>。如果您没有密钥，那么创建一个用于编程的<strong class="ka ir"> IAM用户</strong>，并授予该用户完全的S3访问权限。</p><p id="bde9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">获取密钥后，通过运行以下命令进行配置。</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="b98a" class="lo lp iq mp b gy my mz l na nb">$ aws2 configure</span></pre><p id="376d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">输入您的访问密钥ID和秘密访问密钥。按Enter键跳过默认区域和默认输出选项。有关区域参数的信息，请参见<a class="ae nd" href="https://docs.aws.amazon.com/general/latest/gr/rande.html#s3_region" rel="noopener ugc nofollow" target="_blank">亚马逊S3的AWS区域和端点</a>。<br/> <strong class="ka ir">注意</strong>:AWS CLI输出为JSON、text或table，但并非所有命令都支持每种类型的输出。如果命令输出不支持您选择的格式，它将默认为自己的格式。</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="7c0a" class="lo lp iq mp b gy my mz l na nb">AWS Access Key ID [****************2JWB]: AKIANKITPOOTQIRJ2JF3<br/>AWS Secret Access Key [****************xZkN]: M/snFgx0/H/nEiIIiSmaJ34VAn195POOt787ghkHhgGGDKGHKnv1PptU<br/>Default region name [None]:<br/>Default output format [None]:</span></pre><h2 id="fcad" class="lo lp iq bd lq lr ls dn lt lu lv dp lw kj lx ly lz kn ma mb mc kr md me mf mg bi translated">步骤4:-在S3存储桶之间复制对象</h2><p id="8895" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">通过运行下面的<a class="ae nd" href="https://docs.aws.amazon.com/cli/latest/reference/s3/sync.html" rel="noopener ugc nofollow" target="_blank">同步命令</a>，在源桶和目标桶之间复制对象:</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="ca59" class="lo lp iq mp b gy my mz l na nb">$ aws2 s3 sync s3://SOURCE_BUCKET_NAME s3://NEW_BUCKET_NAME<br/>$ aws2 s3 sync s3://learning-1234 s3://replica-test-new</span><span id="6486" class="lo lp iq mp b gy nc mz l na nb"><strong class="mp ir"><br/>OutPut:-</strong></span><span id="24f9" class="lo lp iq mp b gy nc mz l na nb">copy: s3://learning-1234/aa.txt to s3://replica-test-new/aa.txt<br/>copy: s3://learning-1234/test/LinkedIn.jpg to s3://replica-test-new/test/LinkedIn.jpg<br/>copy: s3://learning-1234/test_2.png to s3://replica-test-new/test_2.png<br/>copy: s3://learning-1234/del.png to s3://replica-test-new/del.png<br/>copy: s3://learning-1234/Screen Shot 2020-02-03 at 4.22.12 PM.png to s3://replica-test-new/Screen Shot 2020-02-03 at 4.22.12 PM.png<br/>copy: s3://learning-1234/test_1.png to s3://replica-test-new/test_1.png<br/>copy: s3://learning-1234/3.png to s3://replica-test-new/3.png<br/>copy: s3://learning-1234/1.JPG to s3://replica-test-new/1.JPG</span></pre><figure class="mq mr ms mt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ng"><img src="../Images/39e457f1aa3749ff114d6bd3a179ccf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y6Nga-PeQrk8Pdp2-sBJqg.png"/></div></div></figure><p id="b551" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">注意:- </strong>处理需要多少时间，取决于数据的大小。</p><h2 id="773a" class="lo lp iq bd lq lr ls dn lt lu lv dp lw kj lx ly lz kn ma mb mc kr md me mf mg bi translated">步骤5:-验证对象已复制</h2><p id="c3d1" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">您可以验证对象是否被复制。通过运行以下命令。</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="4ce5" class="lo lp iq mp b gy my mz l na nb">$ aws2 s3 ls --recursive s3://replica-test-new --summarize</span><span id="2955" class="lo lp iq mp b gy nc mz l na nb"><strong class="mp ir">OutPut:-</strong></span><span id="26c5" class="lo lp iq mp b gy nc mz l na nb">2020-02-06 18:44:40     278363 1.JPG<br/>2020-02-06 18:44:40     247555 3.png<br/>2020-02-06 18:44:40     265132 49948283_319440778668592_1458464790849519616_o.jpg<br/>2020-02-06 18:44:40     125622 Screen Shot 2020-02-03 at 4.17.18 PM.png<br/>2020-02-06 18:44:40     110784 Screen Shot 2020-02-03 at 4.22.12 PM.png<br/>2020-02-06 18:44:40         62 aa.txt<br/>2020-02-06 18:44:40     108864 del.png<br/>2020-02-06 18:44:40      29016 test/LinkedIn.jpg<br/>2020-02-06 18:44:40      61607 test_1.png<br/>2020-02-06 18:44:40      60994 test_2.png<br/>2020-02-06 18:44:41      33238 test_3.png</span><span id="4c04" class="lo lp iq mp b gy nc mz l na nb">Total Objects: 11</span><span id="834d" class="lo lp iq mp b gy nc mz l na nb">Total Size: 1321237</span></pre><p id="28e2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">保护您的数据安全。🤓</p><p id="6649" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">欢迎在评论区提出任何问题或疑问，或者你可以在脸书上ping我。T29】</p><figure class="mq mr ms mt gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure></div></div>    
</body>
</html>