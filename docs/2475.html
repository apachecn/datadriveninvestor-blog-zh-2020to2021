<html>
<head>
<title>Edge AI - Computer vision on the edge - Part 1/2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">边缘人工智能-边缘的计算机视觉-第1/2部分</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/edge-ai-computer-vision-on-the-edge-dfa4ad604651?source=collection_archive---------1-----------------------#2020-05-02">https://medium.datadriveninvestor.com/edge-ai-computer-vision-on-the-edge-dfa4ad604651?source=collection_archive---------1-----------------------#2020-05-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="cbae" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">卡斯滕·莫宁博士</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ko"><img src="../Images/edac04b63a12fe3ffcb946a2c06186d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*Rt_CRiNHPy_e5AsDIvnrEQ.png"/></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Image by Lenin Estrade on pexels.com</figcaption></figure><p id="33cd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi la translated">如果网络连接不可用，或者网络延迟不足，或者出于监管、隐私和安全考虑需要本地处理，或者，事实上，所有这些方面的组合都存在，那么今天的标准基于云的人工智能方法就不是一个选项。</p><p id="abed" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">边缘AI，即使用本地获得的数据在具有很少或没有网络连接的“边缘”上本地执行的AI计算，在这些环境下代表了可行的替代方案，其受制于所考虑的边缘设备的计算和数据处理限制。全球整体边缘计算市场，其中支持机器人、自动驾驶车辆、无人机、个性化智能手机和本地化医疗成像应用的边缘人工智能是一个重要元素，<a class="ae lj" href="https://www.forbes.com/sites/cognitiveworld/2020/04/16/edge-ai-is-the-future-intel-and-udacity-are-teaming-up-to-train-developers/#47973ad268f2" rel="noopener ugc nofollow" target="_blank">估计到2023年将增长到1.12万亿美元</a>。</p><div class="lk ll gp gr lm ln"><a href="https://www.datadriveninvestor.com/2019/03/22/fixing-photography/" rel="noopener  ugc nofollow" target="_blank"><div class="lo ab fo"><div class="lp ab lq cl cj lr"><h2 class="bd iu gy z fp ls fr fs lt fu fw is bi translated">修复摄影|数据驱动的投资者</h2><div class="lu l"><h3 class="bd b gy z fp ls fr fs lt fu fw dk translated">汤姆·津伯洛夫在转向摄影之前曾在南加州大学学习音乐。作为一个…</h3></div><div class="lv l"><p class="bd b dl z fp ls fr fs lt fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="lw l"><div class="lx l ly lz ma lw mb ku ln"/></div></div></a></div><p id="dddd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">理由足够看一看如何在边缘AI领域入门的东西。受[1][2][3]的启发，我将演示如何使用开源<a class="ae lj" href="https://docs.openvinotoolkit.org/" rel="noopener ugc nofollow" target="_blank">英特尔OpenVINO </a>库和<a class="ae lj" href="https://software.intel.com/en-us/neural-compute-stick" rel="noopener ugc nofollow" target="_blank">英特尔神经计算棒2 </a>在商用边缘设备Raspberry Pi上进行对象检测。这是两篇系列文章中的第一篇文章，</p><ol class=""><li id="775b" class="mc md it js b jt ju jx jy kb me kf mf kj mg kn mh mi mj mk bi translated">概述edge AI硬件加速器和开发板选项，</li><li id="b78f" class="mc md it js b jt ml jx mm kb mn kf mo kj mp kn mh mi mj mk bi translated">指导您使用板载摄像头将Raspberry Pi配置为edge AI就绪设备</li><li id="092e" class="mc md it js b jt ml jx mm kb mn kf mo kj mp kn mh mi mj mk bi translated">演示如何在Raspberry Pi上安装英特尔OpenVINO，例如，在您的笔记本电脑上安装，为使用Raspberry Pi执行近实时计算机视觉推理做好准备。</li></ol><p id="7ce2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">第一篇文章是独立的。预计需要投入大约三个小时来完成端到端的工作。之后，您将拥有一个计算机视觉推理就绪的边缘设备，即，您将为(近)实时对象检测、图像分割、人体姿势估计、人脸或场景文本识别等用例的实施做好一切准备。在边缘。同样独立的<a class="ae lj" href="https://medium.com/@technoidsblog/edge-ai-computer-vision-inference-on-the-edge-part-2-2-aaddfae870f0" rel="noopener"> <strong class="js iu">第二篇</strong> </a>展示了其中一个用例的基于Python的实现，可在<a class="ae lj" href="https://github.com/cm230/Computer-Vision-On-The-Edge" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上获得。🗹</p><p id="1169" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，让我们来看看主流专用硬件加速器和Edge AI定制开发的主板选项。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mq"><img src="../Images/4549e35ee9ccf931969410c7fd8634de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kxlFZ7btHUT1CliKbBuTlw.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Device options for computer vision application development on the edge</figcaption></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/f95725d80e2a5b378470fb83b32f4068.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*Yo3Yg7H_3lLuD_t3XjpL_Q.png"/></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Google Coral TPU (left) and NVIDIA Jetson Nano development boards (right)</figcaption></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/96982b09c855309bef49abbd82fa0f98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*QM54H6_GyviDMEF1FBlu5A.png"/></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Intel NCS2 and Google Coral USB computer vision inference accelerators</figcaption></figure><p id="745f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">出于本文的目的，我们将重点关注一款Raspberry Pi 3型号，该型号配备了一个板载摄像头和一个英特尔神经计算棒2 (NCS2)。Raspberry Pi 3 CPU的工作频率为1.4 GHz，内存为1 GB。尽管这些性能数据对于这种设备来说可能相当可观，但它们使得运行最先进的计算机视觉应用程序变得不可行。这就是诸如Google Coral或Intel NCS2等协处理器的用武之地。引用英特尔官方产品规格:“英特尔NCS2构建于英特尔m ovidius Myriad X VPU之上，具有16个可编程shave内核和一个专用神经计算引擎，用于深度神经网络推理的硬件加速。”它的功耗大约为1瓦。也就是说，它使树莓派上最先进的基于深度学习的计算机视觉<em class="mx">推理</em>成为现实命题。</p><p id="e575" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">⚡请注意，这些加速器主要用于计算机视觉<em class="mx">推理</em>，也就是说，它们不用于边缘设备上的模型训练。然而，通过边缘的<em class="mx">迁移学习</em>对预训练的深度学习模型进行再训练，也就是微调，代表了<a class="ae lj" href="https://coral.ai/docs/edgetpu/retrain-classification/" rel="noopener ugc nofollow" target="_blank">明显的可能性</a>。⚡</p><p id="7739" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">除了NCS2，为了保持简单，我建议你购买一个树莓Pi 3型号B+入门套件。它通常配备所有必要的零件，不包括板载摄像头，但包括预装在附带的microSD卡上的NOOBS和拉斯比安操作系统。这将为您省去(轻微的)麻烦，您需要单独购买各种零碎的东西，然后将Raspbian操作系统映像下载/刷新到microSD卡上，使Raspberry Pi可引导。与单独购买零件相比，这种优势的代价是整体成本更高。如果选择不使用入门套件，请点击这里的<a class="ae lj" href="https://www.youtube.com/watch?v=PijX8GDco-g" rel="noopener ugc nofollow" target="_blank">获取NOOBS/拉斯比安操作系统安装指南。</a></p><p id="f690" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">raspberry pi 3型号B+仅带有一个USB 2.0端口，因此当它与支持USB 3.0的NCS2一起使用时，性能会有所下降。我没有测试这一点，但这篇文章中的例子应该也可以工作，实际上甚至更快，如果你手头有一个Raspberry Pi 4，它带有USB 3.0。⚡</p><p id="2e46" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">总的来说，在撰写本文时，这个硬件设置将出现在:</p><ul class=""><li id="7837" class="mc md it js b jt ju jx jy kb me kf mf kj mg kn my mi mj mk bi translated">~€ 70，用于树莓Pi 3型号B+入门套件</li><li id="89dc" class="mc md it js b jt ml jx mm kb mn kf mo kj mp kn my mi mj mk bi translated">~€ 28，用于兼容树莓Pi 3型号B+的车载相机</li><li id="5125" class="mc md it js b jt ml jx mm kb mn kf mo kj mp kn my mi mj mk bi translated">~€ 70，用于英特尔NCS2</li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mz"><img src="../Images/ccb79cc36b0539df8035d189fc295391.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M4GgkQ6Li68XEbIZxt3tHA.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Device setup: Raspberry Pi 3 Model B+ with 1080p HD camera module, universal power supply 2.5 A, 16GB microSD card and Intel Neural Compute Stick 2</figcaption></figure><p id="589f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">假设您的Raspberry Pi和NCS2硬件设置已完成🗹，接下来我们将执行以下步骤。</p><ol class=""><li id="0c8e" class="mc md it js b jt ju jx jy kb me kf mf kj mg kn mh mi mj mk bi translated">配置您的Raspberry Pi</li><li id="daac" class="mc md it js b jt ml jx mm kb mn kf mo kj mp kn mh mi mj mk bi translated">安装车载摄像头模块</li><li id="d959" class="mc md it js b jt ml jx mm kb mn kf mo kj mp kn mh mi mj mk bi translated">为Raspbian操作系统安装OpenVINO工具包</li><li id="8079" class="mc md it js b jt ml jx mm kb mn kf mo kj mp kn mh mi mj mk bi translated">使用样本对象检测模型执行面部检测</li></ol></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="fc7c" class="nh ni it bd nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe bi translated"><strong class="ak"> 1。配置您的树莓Pi </strong></h1><p id="3f8f" class="pw-post-body-paragraph jq jr it js b jt of jv jw jx og jz ka kb oh kd ke kf oi kh ki kj oj kl km kn im bi translated">您可以打开终端会话并直接在您的Raspberry Pi上工作，或者在您的Raspberry Pi上启用SSH或VNC，然后从您的主机建立到Pi的远程连接。在Pi上使用<code class="fe ok ol om on b">ifconfig</code>命令获取其IP地址。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi oo"><img src="../Images/8bd1c0a8b61971ff843315d3f88e30b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TQ65rDD0nrBrW6wWxC4-pA.png"/></div></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi oo"><img src="../Images/152d1f1a961fcd2809e1125c85830edd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SiRAsBi4ewfn4ud-aT4A_A.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Enabling SSH or VNC remote access on your Raspberry Pi</figcaption></figure><p id="ca84" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了安全起见，在阅读完本文后计划进行自定义开发时，可以打开一个终端会话并编辑相应的配置文件条目，将Raspberry Pi的交换分区大小从默认值100 MB增加到1，024 MB。(我们使用nano作为选择的文本编辑器来修改dphys-swapfile，但是您当然可以使用任何替代的文本编辑器。)</p><p id="d683" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ok ol om on b">sudo nano /etc/dphys-swapfile</code></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi op"><img src="../Images/518972398f19d11a07b7fc4e41fb41a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F9jVp__9rsa0-g8tc_3dZw.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Editing the Raspberry Pi’s swap partition configuration file</figcaption></figure><p id="0281" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">运行<code class="fe ok ol om on b">free -h</code>命令应该可以确认新的交换文件大小为1 GB。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi oq"><img src="../Images/c9908a8e496ae1490439704da822c5ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RMbMyMW5wxn0GbiExuC3xg.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Checking the Raspberry Pi’s swap partition size increase from 100 MB to 1 GB</figcaption></figure><p id="c665" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，您可能希望在终端会话中使用<code class="fe ok ol om on b">sudo apt-get update &amp;&amp; sudo apt-get upgrade</code>来确保您的Raspberry Pi完全是最新的，然后重启系统。</p><p id="a139" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">就Raspberry Pi配置而言，这就剩下板载摄像头模块的安装了。🗹</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="405d" class="nh ni it bd nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe bi translated"><strong class="ak"> 2。安装车载摄像头模块</strong></h1><p id="b135" class="pw-post-body-paragraph jq jr it js b jt of jv jw jx og jz ka kb oh kd ke kf oi kh ki kj oj kl km kn im bi translated">从终端打开Raspberry Pi配置工具，输入<code class="fe ok ol om on b">sudo raspi-config</code>并在“接口选项”对话框中选择“启用摄像头”。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi or"><img src="../Images/3a4704e57af121f5c60c14353c250ce2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5SPsipWxZ2X66aj3TdkHAg.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Activating the Raspberry Pi’s camera functionality</figcaption></figure><p id="4102" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，例如，参见<a class="ae lj" href="https://www.youtube.com/watch?v=VzYGDq0D1mw" rel="noopener ugc nofollow" target="_blank">这里的</a>正确地将您的相机模块物理连接到Raspberry Pi板，然后重新启动系统。开机后，打开终端会话，输入<code class="fe ok ol om on b">sudo modprobe bcm2835-v4l2</code>激活相机。</p><p id="6455" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在你应该能够分别使用<code class="fe ok ol om on b">raspistill</code>和<code class="fe ok ol om on b">raspivid</code>命令通过相机拍摄静态图像和录制视频。另请参见<a class="ae lj" href="http://projects.raspberrypi.org/en/projects/getting-started-with-picamera/2" rel="noopener ugc nofollow" target="_blank">此处</a>的简单分步指南，包括如何更改图像设置等其他信息。</p><p id="284f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了避免每次启动Raspberry Pi时都必须执行<code class="fe ok ol om on b">modprobe</code>命令，将bcm2835-v4l2形式的相机模块包含在默认列表中，如下所示，然后重新启动系统。🗹</p><p id="506d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ok ol om on b">sudo nano /etc/modules</code></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi os"><img src="../Images/9f96c4d519fe60f76535bc7e6a3de7b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ndUMCWsdNz8FeFjPkcOInw.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Adding the camera module for automatic availability after Raspberry Pi boot-up</figcaption></figure></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="43e1" class="nh ni it bd nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe bi translated"><strong class="ak"> 3。为Raspbian操作系统安装OpenVINO工具包</strong></h1><p id="b729" class="pw-post-body-paragraph jq jr it js b jt of jv jw jx og jz ka kb oh kd ke kf oi kh ki kj oj kl km kn im bi translated">通过<a class="ae lj" href="https://download.01.org/opencv/2020/openvinotoolkit/" rel="noopener ugc nofollow" target="_blank">这个OpenVINO下载网站</a>将最新版本的“OpenVINO toolkit for Raspbian OS”下载到您的Raspberry Pi上。在此站点中，查找类似以下内容的文件名:</p><p id="5e04" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ok ol om on b">l_openvino_toolkit_runtime_raspbian_p_&lt;version&gt;.tgz</code></p><p id="fda6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如，在撰写本文时，最新的OpenVINO for Raspbian版本为:2020.1.023</p><p id="9a9b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">⚡为了在这个阶段保持事情的简单，我将在这个两贴系列的第二贴中更详细地介绍OpenVINO工具包、它的元素以及用于深度学习模型部署的典型OpenVINO工作流。⚡</p><p id="d778" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">与其Linux版本不同，OpenVINO for Raspbian下载没有软件安装程序，因此您必须遵循英特尔相当简单的官方“<a class="ae lj" href="https://docs.openvinotoolkit.org/latest/_docs_install_guides_installing_openvino_raspbian.html" rel="noopener ugc nofollow" target="_blank">Install open vino toolkit for Raspbian OS</a>”指南来完成许多手动安装步骤。但是，请特别注意:</p><ul class=""><li id="5996" class="mc md it js b jt ju jx jy kb me kf mf kj mg kn my mi mj mk bi translated">事实上，强烈推荐永久设置所需环境变量的“可选”步骤，即包括此步骤:<br/> <code class="fe ok ol om on b">echo "source /opt/intel/openvino/bin/setupvars.sh" &gt;&gt; ~/.bashrc</code></li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi oo"><img src="../Images/ff281282252c5eeda5853ad304b00ae6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iNAr6LufApxxkyTMWLrJfQ.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Including the OpenVINO environment setup step at Raspberry boot-up</figcaption></figure><ul class=""><li id="b1ff" class="mc md it js b jt ju jx jy kb me kf mf kj mg kn my mi mj mk bi translated">以下步骤经常被遗漏，但是，正如官方安装指南中指出的，使用NCS2执行推理需要借助<br/> <code class="fe ok ol om on b">sh /opt/intel/openvino/install_dependencies/install_NCS_udev_rules.sh</code>准备好相关的USB依赖项</li><li id="1828" class="mc md it js b jt ml jx mm kb mn kf mo kj mp kn my mi mj mk bi translated">在撰写本文时，树莓Pi的OpenVINO预计至少是Python 3.5。万一你的树莓派需要Python更新(这里以Python 3.5.6为例):<br/><code class="fe ok ol om on b">wget https://www.python.org/ftp/python/3.5.6/Python-3.5.6.tgz</code><br/><code class="fe ok ol om on b">sudo tar zxf Python-3.5.6.tgz</code><br/><code class="fe ok ol om on b">cd Python-3.5.6</code><br/><code class="fe ok ol om on b">sudo ./configure</code><br/><code class="fe ok ol om on b">sudo make -j4</code><br/><code class="fe ok ol om on b">sudo make altinstall</code></li></ul><p id="ea07" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这完成了初始设置，现在可以将NCS2插入Raspberry Pi USB插槽。您可能想要运行<code class="fe ok ol om on b">lsusb</code>命令来检查它的可用性。🗹</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi ot"><img src="../Images/742dc8b39cfdbfadae5970b8dafb5a60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*101hqSaoLFy9aDEvj_WsGQ.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Intel Neural Compute Stick is installed and ready to use</figcaption></figure></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="342f" class="nh ni it bd nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe bi translated"><strong class="ak"> 4。使用样本对象检测模型执行面部检测</strong></h1><p id="cd13" class="pw-post-body-paragraph jq jr it js b jt of jv jw jx og jz ka kb oh kd ke kf oi kh ki kj oj kl km kn im bi translated">现在，您可以在我们的edge设备Raspberry Pi上运行OpenVINO玩具示例了。我们将运行Python版本的OpenVINO安装指南的人脸检测展示。</p><p id="d4b4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">⚡:为了便于说明，在下面，我不使用虚拟工作环境。如果你计划开发多个项目，我建议你这样做，比如以Ian Bicking的<a class="ae lj" href="https://virtualenv.pypa.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> virtualenv </a>的形式，实现项目隔离，从而避免库冲突之类的。⚡</p><p id="2f00" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">与其他平台的OpenVINO toolkit版本不同，Raspbian OS的OpenVINO toolkit仅限于OpenVINO推理引擎，不包括OpenVINO模型下载器。手动下载预先训练的人脸检测模型权重和偏差(。bin文件)及其网络拓扑结构(。xml文件)，导航到您的<code class="fe ok ol om on b">/home/pi/models</code>文件夹并执行:</p><p id="893a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ok ol om on b">wget --no-check-certificate <a class="ae lj" href="https://download.01.org/opencv/2019/open_model_zoo/R3/20190905_16300_models_bin/face-detection-adas-0001/FP16/face-detection-adas-0001.bin" rel="noopener ugc nofollow" target="_blank">https://download.01.org/opencv/2019/open_model_zoo/R3/20190905_163000_models_bin/face-detection-adas-0001/FP16/face-detection-adas-0001.bin</a></code></p><p id="1ec1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ok ol om on b">wget --no-check-certificate <a class="ae lj" href="https://download.01.org/opencv/2019/open_model_zoo/R3/20190905_16300_models_bin/face-detection-adas-0001/FP16/face-detection-adas-0001.bin" rel="noopener ugc nofollow" target="_blank">https://download.01.org/opencv/2019/open_model_zoo/R3/20190905_163000_models_bin/face-detection-adas-0001/FP16/face-detection-adas-0001.xml</a></code></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi ou"><img src="../Images/ca9032901a34caec8435534d4c83bdec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zKRWOarQ_3uvhQFCn84o0g.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Location of pre-trained face detection model weights (.bin) and network topology (.xml)</figcaption></figure><p id="f53d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">⚡请务必下载2019版的人脸检测模型。这是由于最新的OpenVINO for Raspbian OS toolkit(2020.01)的一个<a class="ae lj" href="https://software.intel.com/en-us/node/849460" rel="noopener ugc nofollow" target="_blank">已知的不兼容性</a>，这是由其新的中间表示格式v10引起的。⚡</p><p id="a016" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">上面下载了一个预先训练好的基于MobileNet的[4]人脸检测模型，该模型获取一个输入图像并产生一个输出图像，该输出图像以在输入图像中检测到的所有人脸周围的边界框为特征。</p><p id="b608" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">多亏了OpenVINO演示应用程序，我们在这个阶段不需要为<a class="ae lj" href="https://docs.openvinotoolkit.org/latest/_models_intel_face_detection_adas_0001_description_face_detection_adas_0001.html" rel="noopener ugc nofollow" target="_blank">输入图像预处理和类似的事情</a>而烦恼，但是当我们在本博客系列的<a class="ae lj" href="https://medium.com/@technoidsblog/edge-ai-computer-vision-inference-on-the-edge-part-2-2-aaddfae870f0" rel="noopener">第二篇文章</a>中开发我们自己的定制解决方案时，我们会继续做这件事。</p><p id="b231" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如，要测试人脸检测模型，只需使用Raspberry Pi相机拍摄一张自己的静态图像，然后将文件传递给模型，以便在NCS2的帮助下进行本地推理。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi ov"><img src="../Images/f92870e4f283dabc2ef851b462b13aa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EDMMGyb3q-27AM9RIzZfEA.jpeg"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Sample input faces by Ryan McGuire on pixabay.com</figcaption></figure><p id="0590" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">假设您的测试文件(这里:image.jpg)位于<code class="fe ok ol om on b">/home/pi/models/</code>目录中:</p><p id="8a7e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ok ol om on b">python /opt/intel/openvino/inference_engine/samples/python/object_detection_sample_ssd/object_detection_sample_ssd.py -m /home/pi/models/face-detection-adas-0001.xml -d MYRIAD -i /home/pi/models/image.jpg</code></p><p id="dba6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将MobileNet [4]人脸检测模型传递给OpenVINO单镜头检测器样本应用程序，指示它使用MYRIAD，即NCS2协处理器，对输入图像进行视觉推断。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi oo"><img src="../Images/74cc3a27dece66d04426de6b4321b4cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8pWvtsPHXVxdq3W-HdFEtg.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Application of MobileNet [4] face detection model to image.jpg resulting in out.bmp</figcaption></figure><p id="a832" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，您将在<code class="fe ok ol om on b">/home/pi/models</code>目录中找到一个名为out.bmp的输出图像，它在输入图像中检测到的所有人脸周围显示了边界框。🗹</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi ov"><img src="../Images/fa38b9fdbb399e8d0ca96e281a7d9efb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z-0y7Gn25xjONcZiSPr3vQ.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Output image with facial bounding boxes produced by face detection test run</figcaption></figure></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><p id="176c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这就是真正的意义所在。在阅读了两篇博客系列的第一篇独立文章之后，您已经成功地将Raspberry Pi设置为能够执行近实时计算机视觉推理的边缘人工智能设备。这开启了整个计算机视觉领域的边缘人工智能用例实现可能性的整个领域，可以说是最成熟的人工智能应用领域。在这个双帖系列的第二帖中，我们演示了这一点。更具体地说，我们完成了基于YOLOv3的[5](近)实时对象检测应用程序的定制开发，该应用程序在Edge AI就绪的Raspberry Pi上本地运行。</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><p id="9b93" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">参考资料</strong><br/>【1】a .艾伦，<a class="ae lj" href="https://www.hackster.io/news/getting-started-with-the-intel-neural-compute-stick-2-and-the-raspberry-pi-6904ccfe963" rel="noopener ugc nofollow" target="_blank">开始使用英特尔神经计算棒2和树莓派</a>，博客，2019年4月</p><p id="96f8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">[2] S. Boyce，<a class="ae lj" href="https://hackaday.com/2019/01/31/ai-on-raspberry-pi-with-the-intel-neural-compute-stick/" rel="noopener ugc nofollow" target="_blank">使用英特尔神经计算棒在Raspberry Pi上实现人工智能</a>，博客，2019年1月</p><p id="6911" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">[3] A. Rosebrock等人，Raspberry Pi for Computer Vision-Hacker Bundle，PyImageSearch，2020</p><p id="6238" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">[4] A. G. Howard等，MobileNets:用于移动视觉应用的高效卷积神经网络，arXiv:1704.04861，2017年4月</p><p id="112f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">[5] J .雷德蒙和a .法尔哈迪，“约洛夫3:增量改进”，技术报告，arXiv:1804.02767，2018年4月</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ow ox l"/></div></figure></div></div>    
</body>
</html>