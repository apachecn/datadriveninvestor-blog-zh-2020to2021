<html>
<head>
<title>How to Backtest a Trading Strategy Even if You Can’t Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">即使你不会编码，如何回溯测试一个交易策略</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/how-to-backtest-a-trading-strategy-even-if-you-cant-code-9aaf2614d483?source=collection_archive---------1-----------------------#2020-10-09">https://medium.datadriveninvestor.com/how-to-backtest-a-trading-strategy-even-if-you-cant-code-9aaf2614d483?source=collection_archive---------1-----------------------#2020-10-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/1d274e083a08f438a63a7295d1729ab9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HX-JpO-sp3zVbHas"/></div></div></figure><p id="bb82" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你曾经尝试过一个被强烈推荐的投资策略，但是一旦你开始<strong class="kd iu">赔钱</strong>就决定退出吗？</p><p id="50dd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我知道我有。</p><p id="1ad6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我的一个曾在对冲基金工作的朋友向我讲述了他疯狂的超级明星股票投资组合。出于某种原因，我觉得和他一起投资同样的股票会很酷。于是我照做了。</p><p id="63f0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当我买入的时候，它碰巧是一个很好的切入点，因为市场几乎每天都在上涨。像Sea和特斯拉这样的股票，有几天投资组合单日飙升4%！</p><p id="bb93" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然而，随着市场高度超买，一个巨大的红色日子很快就来了。之后不久我就慌了，套现了。总的来说，我在短短的三周内坚持投资组合。虽然这是一次令人兴奋的经历，但我再也不会投资于我没有信心的策略。</p><p id="6016" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我如何找到一个我可以坚持的策略，即使是在市场波动的时候？</p><h1 id="e679" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">回溯测试你的投资组合</h1><p id="51a2" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated"><a class="ae mc" href="https://pyinvesting.com/blog/12/heres-why-every-investor-should-backtest-their-investment-strategy/" rel="noopener ugc nofollow" target="_blank">回溯测试</a>是<strong class="kd iu">模拟投资策略</strong>的过程，使用历史价格来测试该策略在过去的表现。你需要对你的投资策略进行回溯测试，因为它可以让你确认你是否在市场上有优势，而不用拿你自己的钱冒险。</p><p id="7b3d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这有点像飞行员在被允许驾驶飞机之前必须使用飞行模拟器进行训练。在飞行模拟器中，将测试飞行员是否能够在不同的情况下安全驾驶飞机。如果一名飞行员在飞行模拟中撞毁了一架飞机，那么他就不可能被允许驾驶一架有数百名乘客生命危险的真飞机。</p><p id="d57f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">同样，如果一个投资策略在回溯测试中表现不佳，你为什么要拿你辛苦赚来的积蓄去冒险？</p><p id="1647" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">此外，回溯测试你的交易策略不会让你的钱面临风险。这是一种研究你的交易想法，并在你的钱到手之前测试它们是否有利可图的方法。</p><p id="aaa5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们已经讨论了回测的重要性，下一个问题是我们如何回测交易策略？</p><h1 id="61ec" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">决定你的交易规则</h1><p id="0c68" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">每一次回溯测试都依赖于一套符合逻辑的<strong class="kd iu">交易规则</strong>，这些规则在每天的模拟中会得到一致的应用。这套交易规则也就是通常所说的你的<strong class="kd iu">交易计划</strong>。</p><p id="3d96" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">例如，我们将对均线交叉策略进行回溯测试。移动平均线用于估计股票的动量。高于移动平均线交易的股票具有向上的趋势价格(上升趋势股票)，而低于移动平均线交易的股票具有向下的趋势价格(下降趋势股票)。我们想要处于强劲上升趋势的股票，因为它们可能会继续上涨。</p><p id="103d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">该策略的交易规则如下:</p><ol class=""><li id="eed0" class="md me it kd b ke kf ki kj km mf kq mg ku mh ky mi mj mk ml bi translated">过滤交易高于200天简单移动平均线(200SMA)的股票。</li><li id="dfe5" class="md me it kd b ke mm ki mn km mo kq mp ku mq ky mi mj mk ml bi translated">根据以下信号对筛选出的股票进行排序。最低的市盈率(PE比率)、最高的股本回报率(ROE)和最高的利润增长率</li></ol><p id="1d24" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">3.选择排名最高的前20只股票，组成一个权重相等的投资组合。</p><p id="2b31" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们的投资领域将是标准普尔500的股票，我们将每周观察投资组合，检查投资组合中的每只股票是否都在200均线以上。如果一只股票跌破200日均线，它将被另一只高于200日均线且排名最高的股票取代。</p><div class="mr ms gp gr mt mu"><a href="https://www.datadriveninvestor.com/2020/09/23/why-most-people-lose-money-day-trading-and-how-to-not-be-one-of-them/" rel="noopener  ugc nofollow" target="_blank"><div class="mv ab fo"><div class="mw ab mx cl cj my"><h2 class="bd iu gy z fp mz fr fs na fu fw is bi translated">为什么大多数人在日内交易中亏损(以及如何不成为他们中的一员)|数据驱动的投资者</h2><div class="nb l"><h3 class="bd b gy z fp mz fr fs na fu fw dk translated">日内交易很难，大多数人都赔钱。我确实有。事实上，我曾经在一个单一的损失更多的钱…</h3></div><div class="nc l"><p class="bd b dl z fp mz fr fs na fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="nd l"><div class="ne l nf ng nh nd ni jz mu"/></div></div></a></div><h1 id="5786" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">回溯测试软件</h1><p id="dd4e" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">回溯测试交易策略是高度计算密集型的<a class="ae mc" href="https://en.wikipedia.org/wiki/Algorithmic_trading" rel="noopener ugc nofollow" target="_blank"/>。幸运的是，我们可以依靠技术的力量来简化这一过程。</p><p id="c641" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">去PyInvesting的<a class="ae mc" href="https://pyinvesting.com/backtest/moving-average/" rel="noopener ugc nofollow" target="_blank">移动平均线回测</a>，我们将回测我们的移动平均线交叉策略。PyInvesting是一个回溯测试软件，我为用户在云上创建他们自己的机器人顾问而开发的。</p><h1 id="ca88" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">为你的投资领域选择股票</h1><p id="ef4a" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">点击蓝色按钮选择你的股票，并在投资组合模板下选择标准普尔500。这将从标准普尔500选择股票，形成我们的投资领域。</p><figure class="nk nl nm nn gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nj"><img src="../Images/5904d57a604c6d8123c4440ebe5aa8f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k9B6DqnpirRlj2l0"/></div></div></figure><h1 id="b125" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">创造你的信号来排列你的股票</h1><p id="97d5" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">接下来，我们将选择用于股票评级的smart beta系数。根据我们的交易规则，我们将选择市盈率最低、净资产收益率最高和利润增长最快的股票。这些信号以33%的权重被相等地加权，并被组合以形成总信号。</p><figure class="nk nl nm nn gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi no"><img src="../Images/670c7fe8cbc57aec51cbda8547494268.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TQ_whvzvfJMRtcz0"/></div></div></figure><h1 id="d08c" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">决定你的移动平均线参数</h1><p id="2f9c" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">按照我们的交易计划，我们将使用200天简单移动平均线(200SMA)来确定股票是处于长期上升趋势还是下降趋势。默认情况下，移动平均线参数设置为200SMA，因此我们不需要做进一步的更改。</p><figure class="nk nl nm nn gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi no"><img src="../Images/85aedb5e196419ede2ca9baa52d6eca5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LylxQ7iRQUQ7HAI9"/></div></div></figure><h1 id="ab0f" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">股票数量和投资组合再平衡频率</h1><p id="3d7b" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">将股票数量设置为20只，每周重新平衡一次，我们的交易算法将检查我们投资组合中的20只股票是否都高于其200天移动平均线。点击运行回溯测试按钮来模拟你的交易策略！</p><figure class="nk nl nm nn gt ju gh gi paragraph-image"><div class="gh gi np"><img src="../Images/198b9bbaf3a6779b50a58a87835b31f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/0*6Lx-H-T_4wyFCj63"/></div></figure><h1 id="9954" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">投资组合绩效分析</h1><p id="1ee7" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">回溯测试结果显示，我们的策略年化回报率为16.7%，而标准普尔500从2016年3月到2020年10月的年化回报率为9.1%。我们策略的波动性也较低，为17.2%，而标准普尔500的波动性为19.9%。因此，我们的策略具有更高的夏普比率0.78，而基准的夏普比率为0.37。此外，在2008年全球金融危机期间，我们的策略最高下降了39.9%，而标准普尔500下降了55.2%。</p><figure class="nk nl nm nn gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nq"><img src="../Images/8974172ebc08e5f42d74e43e395178dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_ICXAl6IyODcWMIv"/></div></div></figure><p id="1398" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">年度回报图还显示，在过去14年中，我们的策略有12年跑赢了标准普尔500。2016年和2019年表现不佳。这意味着未来任何一年都有85.7% (12/14)的机会超越基准。不算太寒酸。</p><figure class="nk nl nm nn gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nr"><img src="../Images/75824fd554f3c507eb2a6f7edb0aa214.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ITMBmr6XtIYdCwIz"/></div></div></figure><p id="e971" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是我制作的一个训练视频，里面有我运行移动平均线回溯测试的现场演示。</p><figure class="nk nl nm nn gt ju"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h1 id="6628" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">从你的投资策略中获利</h1><p id="591f" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">在分析了我们的回溯测试结果之后，我们对我们策略的表现感到满意。那么，我们如何将回溯测试转化为我们可以从中获利的真实可行的交易策略呢？只需点击“上线”按钮。一旦你的策略生效，PyInvesting的backtester将每天运行你的策略，并向你发送电子邮件，更新你策略中的任何买入或卖出订单。然后你可以用你的个人账户进行交易，从你的策略中获利。参考消息互动经纪人IBKR是伟大的，因为交易成本非常低。</p><figure class="nk nl nm nn gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nu"><img src="../Images/d669d367d81dea107e4c16152dca7b50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iIQMe1Z_iq2_KgPc"/></div></div></figure><p id="c048" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">祝你投资愉快，并祝你好运。</p><p id="89cc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="nv">如果你想制定一个有效的投资策略，学习如何利用回溯测试的结果可能是你做过的最好的决定之一，因为回溯测试可以帮助你在你的钱被押上之前识别出一个不正确或正确的投资。</em><a class="ae mc" href="https://pyinvesting.com/" rel="noopener ugc nofollow" target="_blank"><em class="nv">py investing</em></a><em class="nv">是一款用Python编写的回测软件，帮助投资者在云上创建自己的robo advisors，无需编写一行代码。</em></p><h2 id="dd54" class="nw la it bd lb nx ny dn lf nz oa dp lj km ob oc ln kq od oe lr ku of og lv oh bi translated">访问专家视图— <a class="ae mc" href="https://datadriveninvestor.com/ddi-intel" rel="noopener ugc nofollow" target="_blank">订阅DDI英特尔</a></h2></div></div>    
</body>
</html>