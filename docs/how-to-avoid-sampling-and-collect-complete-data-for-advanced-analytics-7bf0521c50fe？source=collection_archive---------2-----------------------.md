# 如何避免采样并收集完整数据以进行高级分析

> 原文：<https://medium.datadriveninvestor.com/how-to-avoid-sampling-and-collect-complete-data-for-advanced-analytics-7bf0521c50fe?source=collection_archive---------2----------------------->

![](img/b9077f10151ca17ab27173ca4e34e4d0.png)

Source: [Depositphotos](https://ru.depositphotos.com/66902161/stock-photo-clinking-glasses-of-champagne-in.html)

## 实时获取完整的非聚合用户行为数据，用于营销报告

你有没有想过如何避免谷歌分析标准报告中的抽样和限制？如何获得完整的营销报告数据？有几种解决方案，例如:

*   切换到付费的 Google Analytics 360，并设置原始数据到 Google BigQuery (GBQ)的导出。
*   使用谷歌分析应用+网络。该产品仍处于测试阶段，允许你免费下载用户行为数据到谷歌 BigQuery。
*   使用从网站收集数据的其他服务来 Google BigQuery。

每种解决方案都有其特殊性和局限性。在本文中，我们将详细解释这些特性，并描述如何使用 OWOX BI。

# 将数据导出到 Google BigQuery 的问题和限制

Google Analytics 360 的主要局限是成本高。最近的用户操作会在 15 分钟后出现在 BigQuery 表中。要设置这样的数据刷新率，您需要额外付费:默认情况下，sessions 表每天更新三次。

在某些情况下，您必须为在 Google BigQuery 中处理请求支付额外的费用。GA 360 的导出表包含许多嵌套级别和字段，在 80%的情况下可以为空。表中的嵌套层次越多，查询的开销就越大。如果您每天或每周都有许多报告要更新，数据处理将会占用您的大部分 GBQ 成本。

[](https://www.datadriveninvestor.com/2020/02/19/five-data-science-and-machine-learning-trends-that-will-define-job-prospects-in-2020/) [## 将定义 2020 年就业前景的五大数据科学和机器学习趋势|数据驱动…

### 数据科学和 ML 是 2019 年最受关注的趋势之一，毫无疑问，它们将继续发展…

www.datadriveninvestor.com](https://www.datadriveninvestor.com/2020/02/19/five-data-science-and-machine-learning-trends-that-will-define-job-prospects-in-2020/) 

App+Web 以不同于标准谷歌分析的另一种结构收集数据。如果在 GA，一切都是基于会话，在 App+Web——基于用户和事件。对于许多习惯了 GA 的分析师和营销人员来说，这可能是一个问题——他们必须探索一种新的数据结构，为网站重新设计指标体系，并重建现有的报告。其他在自己的结构中从网站收集数据到 GBQ 的服务也可能存在这个问题。

由于从 GA 360 和 App+Web 导出到 Google BigQuery 是收集到 Google Analytics 中的数据的表示，它不提供记录的追溯更新。例如，购买退货通常会被记录为一个独立的会话，与付款会话无关。因此，必须手动重新计算该订单的正确收入。

上面提到的解决方案都不能将你的广告活动成本转移到 Google BigQuery 中。这意味着你不知道你花了多少钱来吸引特定的用户群。您无法计算不同群组、产品组和登录页面的投资回报率和 DRR。

了解到这些限制，我们 OWOX 决定改善各种业务的原始数据处理体验。我们进行了数百次产品访谈，收到了以下请求:

1.  网站数据应该以非聚合的形式完全收集到 Google BigQuery 中。
2.  用户行为数据必须以近乎实时的方式交付给 Google BigQuery。
3.  Google BigQuery 中的会话表应该包含广告费用数据。
4.  表结构必须尽可能紧凑和完整，以便优化数据查询。
5.  数据必须通过历史期间的关键参数进行同步。
6.  如果出现重大差异，必须有可能将 GBQ 数据与 GA 数据进行比较。

我们考虑了所有这些请求，并开发了我们自己的网站数据流到 Google BigQuery。

# OWOX BI 的优势

让我们仔细看看 OWOX BI 如何绕过 Google Analytics 和标准 BigQuery 导出的限制，以及业务如何从中受益。

# 1.无限量的收集数据

抽样的想法是在数据样本上建立报告，而不是全部可用数据。如果样本太小，你就不能相信建立在这样一个样本上的报告。借助 OWOX BI，您可以收集完整的未采样数据，以创建更准确的报告并做出基于数据的决策。

## 它是如何工作的

网站上的每个用户操作(页面查看、点击按钮、横幅查看或下订单)都会通过一条单独的消息(hit)传输到 GA。您应该考虑到在数据收集时对点击次数没有限制。

## 谷歌分析

GA 界面对数据处理和报告应用命中限制。因此，您可以获得数据采样或聚合表(报告中的第*行和第*行)。此外，如果您想要使用一个细分市场或创建一个手动报告，它主要以示例形式显示。

## OWOX BI

当点击内容离开你的网站时，该服务会复制它，然后发送到你的 Google BigQuery 项目中。因此，您可以获得原始的未采样数据，以及无限收集和处理的命中数。

## 用例

假设您被迫将每个品牌/制造商的推广页面流量、广告合作伙伴数据或登陆页面统计数据收集到单独的 Google Analytics 属性中，以收集更有价值的数据。无论如何，为了满足 GA 的限制，你必须关闭对你有价值的流量。当您可以通过 OWOX BI 在 Google BigQuery 的单个表中收集这些数据时。它为您提供了战略解决方案的基础，以及网站和广告活动效果的全面愿景。

# 2.实时数据收集

使用 OWOX BI，您可以快速发送触发电子邮件或在 Google BigQuery 中检测收集的网站数据中的异常，因为用户行为数据会在 1-5 分钟内出现在您的项目中。

## 它是如何在谷歌分析中工作的

所有每日收集的数据仅在 48 小时后反映在 GA 中(在 GA 360 中—4 小时后)。实时报告显示有限数量的参数和指标，并且不允许您个性化用户操作。

从 GA 360 到 GBQ 的标准输出可以在两种模式下运行:

*   大约每 8 小时免费上传一次数据(你需要支付 GA 360 许可证和 GBQ 数据存储的费用)。
*   每 15 分钟上传一次数据(每处理 1tb 的数据需要额外付费)。

App+WEB 创建两个表:

*   过渡—它包含当天的事件记录。该表每 15 分钟更新一次，并在全天表生成后被删除。
*   包含全天数据的表—每天生成一次。

## 它在 OWOX BI 中如何工作

OWOX BI 立即将数据从网站发送到您的 GBQ 项目。在事件发生后的 1-5 分钟内，您会收到完整的非汇总用户行为数据。

## 用例

通过实时监控网站上的用户活动，您可以通过触发电子邮件活动和个人优惠来刺激销售。例如，当用户在购物车中添加了一件商品，但没有购买任何东西或没有在网站上签署押金。

它还可以帮助您及时发现和纠正网站上的问题:您可以从网站代码错误和流量或转化率下降的触发器中获得通知。

# 3.增加了允许的命中大小

使用 OWOX BI，您可以全面了解网站上的用户活动，即使他们订购的商品超过 15 种，或者浏览大量商品。

## 它是如何在谷歌分析中工作的

GA 对传输的 hit 大小有一个限制— 8 KB。例如，如果一个事务消息超过了这个限制，它就不会进入 GA。

## 它在 OWOX BI 中如何工作

在 OWOX BI 中，传输到 Google BigQuery 的最大 hit 大小增加到 16 KB。

## 电子商务的使用案例

当你用增强的电子商务跟踪用户浏览目录页时，包含产品列表信息的点击率可以超过 8 KB。在以下情况下会发生这种情况:

*   一次命中发送 10 个以上项目；
*   每个项目都有一个附加参数。

在这种情况下，packed hit 不会进入 GA。但是，借助 OWOX BI，您可以在 GBQ 的原始数据中找到它，并根据查看的产品列表构建更准确的报告。

## 银行的用例

假设您想要收集关于客户和产品本身的更多信息，以及银行产品请求。使用 OWOX BI，您可以获得更准确的转换统计数据。

# 4.将广告成本链接到会话

OWOX BI 计算每个会话的值。它允许您计算新老用户的 roa。此外，您可以执行以下操作:

*   比较看到横幅广告的客户和没有看到横幅广告的客户的盈利能力。
*   找出你在每个产品组上的花费和收入。
*   评估不同地区、登录页面、移动版本和应用程序的广告效果。

## 它是如何在谷歌分析中工作的

您可以将不同广告服务的广告成本手动加载到 GA 中。但是，您不知道自己在吸引特定客户或用户群方面花费了多少，因为 g a 中的成本数据是汇总的，并与广告活动相关联。

App+WEB 也不允许你将会话/用户层面的广告活动成本转移到 Google BigQuery 中。

## 它在 OWOX BI 中如何工作

OWOX BI 自动将广告费用上传到 Google Analytics 和 Google BigQuery，并根据 [UTM 标签](https://www.owox.com/blog/articles/utm-tags-end-to-end-analytics/)在会话间进行分配。这就是为什么你知道 5 个主要 UTM 标签(源，媒体，活动，关键词，内容)的每次会议的成本，你可以建立关于 CPC，CPA，CPO 和原始数据 CRR 的报告。它提高了您报告的准确性，并有助于更有效地分配您的营销预算。

## 用例

有了 OWOX BI，您可以了解您在每个会话上花费了多少，并按特定用户、群组或登录页面对成本和收入进行分组。

例如，你想了解哪组商品应该促销以带来更多利润，因为吸引用户的产品并不一定就是用户购买的产品。你需要将你的数字广告成本分类，以找到最有效的产品类别来推广。这可以通过 OWOX BI 完成，方法是将成本数据从 GA 传输到 GBQ，并使用 UTM 标签在所有会话中分配成本。在这种情况下，成本和收入都将是会话的属性。

# 5.追溯数据更新

有了 OWOX BI，不需要任何额外的操作来评估订单兑现、购买退货或了解新订户过去三个月在您的网站上做了什么。我们的服务允许您追溯更新上传到 Google BigQuery 的数据。

## 它是如何在谷歌分析中工作的

在标准 GA 中，如果从下订单到付款不到 4 小时，您只能追溯更新订单状态。否则，付款将作为新的会话记录在 GA 中。例如，如果您为 3 月 18 日的交易添加 4 月 3 日的回报，则在 3 月 18 日的报表中，您仍会看到完整的交易金额。因此，由于这一错误，价值在渠道间的分配将是不正确的。

**测量协议**目前在 App+Web 上不可用。它阻止您追溯更新订单状态或下载用户信息。

## 它在 OWOX BI 中如何工作

在 OWOX BI 用 Google BigQuery 中的数据填充的表中，您可以追溯更新以下信息:

*   交易详细信息—您可以输入退货、部分退货或更改 30 天内的总额。
*   用户信息—如果用户已登录或登录网站，他的用户 ID 将被倒带，并被指定用于在身份验证日期之前的最后 30 天内出现的会话。
*   90 天的成本数据(在 adCost，attributedAdCost 字段中)，包括导入到 Google Analytics 的所有广告服务的成本。

## 银行的用例

如果用户 ID 为的用户今天申请了点数，则该用户 ID 会出现在同一设备的所有先前会话中。您可以使用这些进程来估计用户的订单路径，以更准确的方式确定广告活动的收入，并预测其他用户的转化。

## 电子商务的使用案例

有了 OWOX BI，您可以更轻松地考虑回报和衡量广告活动的效果--流式表格始终向您显示当前订单总额。如果返回是在另一天，您不需要在另一天的表中搜索它。

如果您计划构建一个 ROPO(在线研究离线购买)报告，当用户 ID 被指定为客户端历史会话的最大数量时，进行计算会更容易。

# 6.数据表的紧凑结构

如上所述，从 Google Analytics 360 到 Google BigQuery 的标准导出表有太多的嵌套和空字段，增加了这些数据的处理成本。

OWOX BI 帮助您优化 GBQ 中数据存储和处理的成本。流表中的空白字段更少，嵌套层次更少，因此表本身及其查询“重量”更轻。

# 7.能够直接从网站收集数据到谷歌大查询

OWOX BI 帮助您避免 GA 对数据收集的限制。如果您计划跟踪所有用户活动——从查看横幅到选择订单中的其他服务——所有其他点击都可以直接发送到 Google BigQuery。

## 它是如何在谷歌分析中工作的

关于用户与你的网站互动的所有信息都通过单独的 hits 传输到 Google Analytics 发送到 GA 服务器的消息。

## 它在 OWOX BI 中如何工作

在创建 hit 时，OWOX BI 用您的项目在 Google BigQuery 中的地址替换从 GA 资源发送数据的地址。我们可以将所有 GA 寻址的命中复制到 GBQ 表中，或者在 GA 中阻塞(全部或部分)所有数据，并将命中仅发送到 GBQ 表。

该解决方案具有以下优点:

1.  在 Google Analytics 360 众所周知的结构中，您可以从网站获得未采样的数据，其中有数千个已经为其编写的 SQL 查询。它可以节省您的时间，减少花在常规分析师咨询上的时间。
2.  你可以[设置数据收集](https://support.owox.com/hc/en-us/articles/115000492573-%D0%9E%D1%82%D1%81%D0%BB%D0%B5%D0%B6%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-GTM-%D0%BC%D0%B5%D1%82%D0%BE%D0%B4-customTask?_ga=2.23509241.2110493667.1588580872-1907167021.1551689878)而不降低你网站的加载速度。这是可能的，因为 OWOX BI 复制了 GA 命中，而不是用单独的 JS 计数器使 GTM 过载。
3.  [我们在合同中保证 SLA](https://support.owox.com/hc/en-us/articles/222225328?_ga=2.231602652.2110493667.1588580872-1907167021.1551689878)并有必要的功能来监控数据质量，如果你的谷歌分析和谷歌云项目失败，自动存储信息。无需额外努力，您就可以确保报告的数据质量。

有了 OWOX BI，不用谷歌分析 JS 计数器也可以收集用户行为数据**。我们可以用我们的跟踪代码将您网站的点击数据收集到 Google BigQuery 中。**

## 银行的用例

如果您计划从网站收集敏感数据(客户类型、详细信息、订单参数)，您应该直接将其发送到 Google BigQuery，在那里, [Tier 4 安全标准](https://en.wikipedia.org/wiki/Data_center)管理信息保护。任何敏感信息都可能以散列或加密的形式传输。

## 电子商务的使用案例

假设您的网站上有 1000 多个横幅。您计划跟踪每个页面的浏览量和点击量，并衡量它如何影响当前或后续会话中的购买。如果您跟踪每个横幅的实际浏览量，发送到 GA 的数据量将超出限制 20–25%。

使用 OWOX BI，您可以将所有横幅统计数据直接发送到 Google BigQuery(绕过 GA ),并了解内部促销活动的有效性。因此，您不会因为标准 GA 中的数据采样和聚合以及超越 GA 360 中的限制而丢失任何信息。

# 8.无限数量的用户参数和尺寸

使用 OWOX BI，您可以从网站向 Google BigQuery 传输无限数量的用户参数和维度。它允许您根据任何功能对用户进行细分，并为深入分析构建更详细的报告。

Google Analytics 对从网站上收集的自定义指标的数量也有限制:标准版为 20 个，GA 360 为 200 个。App+Web 也有非常严格的限制:500 个事件、25 个事件参数和 25 个用户属性。

# 9.可选 OWOX 用户 ID

如果你有一个拥有交叉受众的网站网络，OWOX 用户 ID 可以帮助你优化你的推广和再营销成本。你也可以评估横幅广告和媒体广告的观看后效果。

## 它是如何工作的

在第三方 cookies 的帮助下，OWOX BI 将相同的标识符放在不同的网站上(可以是你在不同域上的另一个网站，也可以是独立广告平台上的媒体广告)。然后这个 ID 将几个网站的会话集合在一起，你就可以分析你的交叉受众。

## 用例

如果您的公司集团由多个品牌及其网站组成，OWOX BI 可以衡量受众的交集，并向您展示如何优化再营销和推广活动的预算。

# 10.精确的用户位置

根据我们的经验，在 OWOX BI 中确定用户地理位置的准确性平均比类似的 g a 报告高 20%。

## 它是如何在谷歌分析中工作的

GA 使用 Google API 定义了地理位置。这种方法并不总是可靠的，因为它可能不被支持，或者在某些浏览器中被阻止，或者被用户操作阻止(特别感谢 GDPR)。

## 它在 OWOX BI 中如何工作

OWOX BI 使用另一项谷歌服务——云负载平衡来确定地理位置。该服务专门用于平衡网络负载和链接特定 IP 地址内的地理数据。因此，流式传输不需要任何用户许可；我们避免阻塞，从而获得更准确的地理数据。

# 11.通过直接网站流量准确确定来源

isTrueDirect 是一个参数，指定会话是指直接网站访问(直接流量)还是必须归于另一个源。

## 它是如何在谷歌分析中工作的

GA 中的 isTrueDirect 变量在以下情况下为真:

*   这是一个到网站的直接链接(用户键入网站地址或使用书签)。
*   如果来源、渠道、活动参数在连续两次访问中完全匹配。GA 将第二次会话定义为直接流量，尽管它是由广告发起的。

## 它在 OWOX BI 中如何工作

在 OWOX BI 表中，我们仅在直接访问网站的情况下定义 isTrueDirect = true。它可以让你准确地评估品牌知名度，并正确地估计特定会议的费用。

## 用例

带有 isTrueDirect 参数的报告可帮助您衡量品牌认知广告的效果。用户旅程开始时直接入口的增长使得评估线下和外展活动对你的营销的贡献成为可能。

# 12.个人资料的收集

与谷歌分析不同，你可以在谷歌大查询中收集和使用 [PII 客户数据](https://en.wikipedia.org/wiki/Personal_data)，包括电子邮件和电话号码。不要失去那些没有到达漏斗末端但试图在网站上留下请求的用户。GBQ 中的电话或邮件可以用来细分用户，并向他们发送反馈。

## 它是如何在谷歌分析中工作的

GA 不允许传输未加密形式的个人数据。否则，您的帐户将被阻止。

## 它在 OWOX BI 中如何工作

在 OWOX BI 表中，我们使用&tel 和&email 参数(GA 中不支持)以一种简单易用的方式将个人数据传输到 big query。

## 银行的用例

您可以收集试图在网站上申请贷款或其他服务的用户的数据，但出于某种原因，他们无法提交表单。然后呼叫中心可以通过电话联系这些客户并帮助他们完成程序。

## 电子商务的使用案例

如果您不在您的在线和离线系统中收集用户 ID，那么电话号码和电子邮件可以用来链接您的用户的在线和离线数据。

# 如果您的团队中没有分析师，请使用智能数据中的报表生成器或为您的团队订购自定义仪表板

如果您没有处理原始数据的分析师，请使用我们的[智能数据](https://www.owox.com/products/bi/smart-data/)中的[报告生成器](https://support.owox.com/hc/en-us/articles/360020955973-How-to-build-a-report-in-OWOX-BI-Smart-Data)。您可以选择现成的模板或创建自定义仪表板，而无需任何 SQL 知识。智能数据允许您合并流数据和 CRM 数据，从而为分析和决策提供可靠的基础。

我们定期[添加在谷歌分析](https://www.owox.com/blog/articles/top-popular-reports-for-e-commerce/)中找不到的新报告:

*   CPA 合作伙伴监控。
*   [ROPO 分析](https://www.owox.com/blog/articles/ropo-effect/)。
*   用户转化路径。
*   CRM 中的订单兑现。
*   电话追踪效率。