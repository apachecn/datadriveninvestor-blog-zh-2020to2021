<html>
<head>
<title>You Must Know This Little Technique If You Use Jupyter Notebook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Jupyter笔记本的你一定知道这个小技巧</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/how-to-quickly-change-your-virtual-environments-within-jupyter-notebook-7ae30fd2c970?source=collection_archive---------2-----------------------#2020-10-28">https://medium.datadriveninvestor.com/how-to-quickly-change-your-virtual-environments-within-jupyter-notebook-7ae30fd2c970?source=collection_archive---------2-----------------------#2020-10-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="4c09" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">编程；编排</h2><div class=""/><div class=""><h2 id="f23f" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">无需离开Jupyter笔记本即可轻松改变虚拟环境</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/498b8fdb2c7d705a0ca586aa82c965a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yfW0HO1tQAn5cGB8.png"/></div></div></figure><h1 id="68ae" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">注意:</h1><p id="ea3c" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">本文需要一些关于Python虚拟环境的基础知识。请跳到下一节(讲的是什么？).如果你不了解基础，我建议你先看两篇文章再继续。第一篇文章告诉你为什么我们需要虚拟环境和一些简单的命令:Python虚拟环境的简单介绍(<a class="ae mr" href="https://medium.com/code-85/a-simple-introduction-to-python-virtual-environments-d41877e6b0aa" rel="noopener">链接</a>)</p><p id="ae1f" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">第二篇文章讨论了创建和管理虚拟环境的两种方法:Conda环境的权威指南(<a class="ae mr" href="https://towardsdatascience.com/a-guide-to-conda-environments-bc6180fc533" rel="noopener" target="_blank">链接</a>)。我个人使用conda来管理虚拟环境，我建议您也使用这种方法。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="3d14" class="ld le it bd lf lg ne li lj lk nf lm ln ki ng kj lp kl nh km lr ko ni kp lt lu bi translated">是关于什么的？</h1><p id="0dae" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">如果您正在处理多个项目，虚拟环境是必不可少的，并且您需要虚拟地将它们分开。另一方面，Jupyter笔记本是一个必不可少的工具，尤其是对于数据科学家来说。有时候你需要从一个虚拟环境转换到另一个虚拟环境。通常情况下，如果你有一个正在运行的Jupyter笔记本，这意味着你需要关闭它，改变你的环境并再次启动Jupyter笔记本。</p><p id="31af" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">在这篇短文中，我将向您展示如何在不离开Jupyter Notebook的情况下改变虚拟环境。</p><h1 id="5027" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">让我们开始吧…</h1><ol class=""><li id="de05" class="nj nk it lx b ly lz mb mc me nl mi nm mm nn mq no np nq nr bi translated">在您的基本环境中安装用于Jupyter笔记本的nb_conda扩展。只需打开一个新的Anaconda提示符并键入:</li></ol><pre class="ks kt ku kv gt ns nt nu nv aw nw bi"><span id="2795" class="nx le it nt b gy ny nz l oa ob">conda install nb_conda</span></pre><p id="3624" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">2.它可能会要求您继续操作([y]/n)？y型。</p><p id="3b5d" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">3.成功安装nb_conda包后，启动Jupyter笔记本。</p><pre class="ks kt ku kv gt ns nt nu nv aw nw bi"><span id="c3a4" class="nx le it nt b gy ny nz l oa ob">jupyter notebook</span></pre><p id="5b9c" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">4.您必须看到一个名为Conda的新选项卡。点击它。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oc"><img src="../Images/69cc3150bce3d73d49470e2fe3229e76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gt5h1x5gkAMdsWiN5R0osA.png"/></div></div></figure><p id="1b28" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">5.该选项卡有三个窗口:Conda环境、可用软件包和已安装的Conda软件包。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi od"><img src="../Images/d91200566ae2bbaf3ad548eab3ac277f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ay_x9uZLv1dKaSMawDFouw.png"/></div></div></figure><p id="e688" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">Conda环境窗口显示了我的系统上所有可用的环境。在我的例子中，目前我有四个虚拟环境:root和anaconda3，这实际上是我的基本环境，以及我构建的另外两个环境(test_env1和tf_gpu)。如果您已经创建了一些环境，您可能会看到更多的环境。</p><p id="c170" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">如果我单击其中一个，那么已安装的Conda软件包窗口会显示该环境中已安装软件包的列表。此外，我可以通过在“可用软件包”窗口中搜索和选择软件包来添加新软件包。Conda tab为Jupyter笔记本用户提供简单的包管理。请记住，您总是可以用命令行安装和卸载软件包(我推荐)，并且只使用这个选项卡来检查您的环境。</p><p id="6f28" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">6.要从一个虚拟环境切换到另一个虚拟环境，需要打开一个代码。让我们编写一个非常简单的示例代码。编写并运行几行简单的代码，如下图所示。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oe"><img src="../Images/00b1d3c4be667b75642997b71ed8df5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rhhLj5eUj0gAdFlYnFPDsQ.png"/></div></div></figure><p id="8418" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">我们简单的示例代码显示了Jupyter内核在这个环境(默认情况下是您的基本环境)中查找包的地址。</p><p id="5ebe" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">7.现在，让我们将我们的虚拟环境从基础环境更改为其他环境。这一定很简单，你只需要从菜单中打开Kernel，选择Change kernel(如下图截图所示)。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi of"><img src="../Images/bfcf509a137e0fc4516b08681e2fa0a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D4ikyTaqrHXwZphF4Z--rg.png"/></div></div></figure><p id="3e7c" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">但是等等！！！！为什么我在这里只看到根环境？为什么看不到我的另外两个环境，test_env1和tf_gpu？这就是棘手的地方，我花了几个小时才找到解决方案(当然是在用了谷歌之后！！！).转到下一步以快速修复此问题。</p><p id="a91c" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">8.，Jupyter Notebook无法将您的内核更改为其他可用的环境，因为这些环境没有安装Jupyter Notebook内核。你需要在那些环境中安装Jupyter Notebook或者ipykernel(这是Jupyter Notebook的内核部分)，然后你在这个列表中看到它们。让我们在test_env1环境中快速安装ipykernel。保存当前的示例代码以备将来测试(例如，保存为test_env)并退出Jupiter Notebook。打开一个新的anaconda提示符并键入:</p><pre class="ks kt ku kv gt ns nt nu nv aw nw bi"><span id="6813" class="nx le it nt b gy ny nz l oa ob">conda install -n test_env1 ipykernel</span></pre><p id="fa3c" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">请记住使用您计算机上的环境来更改test_env1，并且在Jupyter Notebook中无法看到它(或者键入:<em class="og">conda create-name test _ en v1 python = 3.7</em>来创建一个虚拟环境)</p><p id="9c6f" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">现在，启动Jupyter Notebook并打开您的示例代码。从菜单中，打开内核，并选择更改内核。瞧啊。！！！您必须看到刚刚在其中安装了ipykernel的新环境。您必须对所有需要从Jupyter Notebook访问的环境进行相同的安装。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi od"><img src="../Images/ae7cb5008c4916ed4e48e99abefe1adc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5KoRPjtnQEAQPsN2pUOo6g.png"/></div></div></figure><p id="8d23" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">现在，如果您将您的内核更改为新的环境，并再次运行我们示例代码的所有单元，您将会看到地址被更改为新的环境。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oh"><img src="../Images/d8c267305f9c4f88bf5cbd9241c5c333.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jsJcV4e9HsskLAGgp6OA5A.png"/></div></div></figure><p id="7ffa" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">恭喜你。现在不用离开Jupyter笔记本就能换个环境。这会让你的生活变得轻松一点。</p><p id="aa68" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">如果你有不同的技巧可以在Jupyter笔记本中快速改变你的环境，请告诉我。</p></div></div>    
</body>
</html>