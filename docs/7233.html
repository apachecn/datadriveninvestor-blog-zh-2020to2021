<html>
<head>
<title>How to Build a Twitter Scraping App with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python构建一个Twitter抓取App</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/how-to-build-a-twitter-scraping-app-with-python-b3fc069a19c6?source=collection_archive---------1-----------------------#2020-12-01">https://medium.datadriveninvestor.com/how-to-build-a-twitter-scraping-app-with-python-b3fc069a19c6?source=collection_archive---------1-----------------------#2020-12-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6b49" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一个简单的Python应用程序，可以让你对你能想到的任何话题都有有价值的见解</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3d28d3974dc3026d061d19b1c8cd3787.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T-MJCnwFV_aW2fL4"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@coolmilo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">camilo jimenez</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="afb8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每秒钟大约有6000条推文<strong class="ky ir"><em class="ls"/></strong><strong class="ky ir"><em class="ls">每天发布5亿条</em> </strong>，普通人甚至无法想象如何解析所有这些数据。除非普通人正在阅读这篇文章:那么你可以大胆尝试。现在我们不会检查每一条推文，而是定制的推文。我们可以提取提到特定关键词或短语的推文，并利用这些信息来衡量“twitter-verse”对所述主题或短语的感受。</p><p id="1ba4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本教程将是非常noob友好的，事实上，它不需要任何先前的编码经验来运行和安装。你只需要一台笔记本电脑和Python 3.8——剩下的我会解释。如果你从未接触过Python，那么最困难的部分将是用Python 3.8设置你的IDE并安装所需的依赖项。这个项目使用了与我的上一篇文章  相同的代码，然而，虽然这个项目主要集中于提出和测试一个想法，这个项目的最终产品是一个可执行文件。py应用程序。</p><p id="a24d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，我们将在这个项目中使用Python 3.8，因此如果您使用的是以前的版本，您将需要使用3.8建立一个新的虚拟环境，或者更新您当前的环境。使用以下工具检查您的Python版本:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="5fb6" class="ly lz iq lu b gy ma mb l mc md">from platform import python_version<br/>print(python_version())</span></pre><h2 id="e366" class="ly lz iq bd me mf mg dn mh mi mj dp mk lf ml mm mn lj mo mp mq ln mr ms mt mu bi translated"><strong class="ak">安装依赖关系</strong></h2><p id="6ab8" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">首先，和所有编码项目一样，让我们安装一些依赖项:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="ce33" class="ly lz iq lu b gy ma mb l mc md">import pandas as pd<br/>import numpy as np<br/>import csv<br/>import snscrape.modules.twitter as sntwitter<br/>from vaderSentiment.vaderSentiment import SentimentIntensityAnalyzer<br/>import datetime as dt<br/>import time</span></pre><p id="ef24" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你在安装这些软件包时收到一个错误，只需pip3安装它们(例如pip3安装snscrape)或谷歌如何安装它们。</p><p id="ac0e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们初始化日期-时间对象，以便从前一天开始提取数据。这意味着我们不是专门提取过去24小时的推文，而是提取前一天开始的推文以及今天到目前为止发布的所有推文。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="1bc5" class="ly lz iq lu b gy ma mb l mc md"># Generating datetime objects<br/>from datetime import datetime, timedelta<br/>now = datetime.now()<br/>now = now.strftime('%Y-%m-%d')<br/>yesterday = datetime.now() - timedelta(days = 1)<br/>yesterday = yesterday.strftime('%Y-%m-%d')</span></pre><p id="5d86" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">提示用户输入关键字:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="c240" class="ly lz iq lu b gy ma mb l mc md">keyword = input('Enter a topic or keyword, please:')</span></pre><h2 id="bd65" class="ly lz iq bd me mf mg dn mh mi mj dp mk lf ml mm mn lj mo mp mq ln mr ms mt mu bi translated">Twitter抓取</h2><p id="6d36" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">抓取twitter并编写一个独特的CSV文件，标题为我们在用户输入中选择的关键字和我们运行代码的日期。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="54aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正在初始化VADER情绪分析器:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="b2e8" class="ly lz iq lu b gy ma mb l mc md">analyzer = SentimentIntensityAnalyzer()</span></pre><p id="b0f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从这里，我们将CSV文件读回到我们的程序中，创建包含每个单独提取的tweet的各种情绪得分的列，获取自前一天开始发布的所有tweet的每个情绪得分的平均值，并最终打印出所有这些信息。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="89ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我还在代码中包含了一个计时器，它会告诉我运行完整代码需要多长时间。您可以在我的Github上找到并下载完整代码:</p><div class="nc nd gp gr ne nf"><a href="https://github.com/grsahagian/data-works" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd ir gy z fp nk fr fs nl fu fw ip bi translated">grsahagian/数据工程</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">各种与数据分析相关的项目笔记本GitHub是5000多万开发人员的家园，他们共同工作来管理…</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">github.com</p></div></div><div class="no l"><div class="np l nq nr ns no nt kp nf"/></div></div></a></div><p id="79ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">运行我们的应用</strong></p><p id="c0f1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要运行代码，只需打开您的命令终端，然后导航到包含您的应用程序的文件夹(在我的情况下，它位于与我的Github repo对应的data-works文件夹中的一个文件夹中):</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="8f1b" class="ly lz iq lu b gy ma mb l mc md">cd data-works/sentiment-bot</span></pre><p id="0042" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后用下面的代码<em class="ls"> ( </em> <strong class="ky ir"> <em class="ls">注:</em> </strong> <em class="ls">确保你的终端使用的是你的Python 3.8虚拟环境)</em>。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="e77b" class="ly lz iq lu b gy ma mb l mc md">python sentiment-bot.py</span></pre><p id="05ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是我的终端成功运行我们刚刚编写的程序后的截图:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/a0971cd1d7fead5d8f39f4727d89a0e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4lLRzQElF63FuXDFTCyBQQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Running sentiment-bot.py in Mac Terminal</figcaption></figure><p id="f4d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在5分17秒的时间里，我们抓取了不到3.6万条推文，其中包括关键词“拜登”，显示了整体的中立情绪，略有积极倾向。</p><p id="447c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="ls">从我们的数据中获得更多:</em> </strong></p><p id="37dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然这些信息很有趣也很有价值，但我们可以进一步分析<em class="ls"/>以给出更多<strong class="ky ir">可行的见解</strong>。例如，如果你正在推出一个与现有产品竞争的新产品，你可以在twitter上找到该产品在网上的负面反馈，然后调整你的新产品来补救这些投诉。有很多方法可以处理用户生成的数据，twitter抓取程序是一个很好的起点。</p><p id="8c50" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你喜欢这篇文章并想看更多相关内容，可以考虑在媒体上关注我或者查看我的其他文章。</p></div><div class="ab cl nv nw hu nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="ij ik il im in"><p id="4c2f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">sagefuentes。2020年9月17日。" HTTP错误，给出404，但URL正在工作#98 . "<a class="ae kv" href="https://github.com/Mottl/GetOldTweets3/issues/98" rel="noopener ugc nofollow" target="_blank">https://github.com/Mottl/GetOldTweets3/issues/98</a>。</p><p id="3962" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">伊夫·希尔皮什。“面向金融的Python:掌握数据驱动的金融”。奥莱利2014。</p></div><div class="ab cl nv nw hu nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="ij ik il im in"><p id="ed2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">原载于2020年12月1日https://www.datadriveninvestor.com</em><a class="ae kv" href="https://www.datadriveninvestor.com/2020/12/01/how-to-build-a-twitter-scraping-app-with-python/" rel="noopener ugc nofollow" target="_blank"><em class="ls"/></a><em class="ls">。</em></p></div></div>    
</body>
</html>