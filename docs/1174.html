<html>
<head>
<title>Useful List operations in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中有用的列表操作</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/exotic-and-useful-list-operations-in-python-baddb79af0db?source=collection_archive---------15-----------------------#2020-03-05">https://medium.datadriveninvestor.com/exotic-and-useful-list-operations-in-python-baddb79af0db?source=collection_archive---------15-----------------------#2020-03-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3c64" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解您(可能)不知道的有用的python列表操作</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c5728216772c351dbd29fefee4ba53b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uhOOCguW5uhxSBnm"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@jakobowens1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jakob Owens</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="125a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我作为一名数据分析师/数据科学家在Python工作了大约3年。</p><p id="2b25" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在那段时间里，我记录了这些<em class="ls">奇特的</em> Python列表操作，因为它们在执行不同的任务时很方便。我想与你分享:</p><h1 id="5028" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">内容</h1><ul class=""><li id="d8bb" class="ml mm iq ky b kz mn lc mo lf mp lj mq ln mr lr ms mt mu mv bi translated">打乱名单</li><li id="1ef6" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated">颠倒列表</li><li id="625d" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated">从列表中获取所有不同的组合</li><li id="aeda" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated">从列表中随机抽取一个样本</li><li id="7f35" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated">获取两个列表中元素的差异</li><li id="8abf" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated">创建一个随机数列表</li><li id="e60b" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated">对列表排序</li><li id="3ea5" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated">在列表中查找第一个匹配项的位置</li></ul><p id="1ab2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我将把代码写成书面格式(不是截图)，这样你就可以很容易地复制粘贴，并尝试自己的代码。</p><p id="485d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们开始吧！</p><h1 id="96f2" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">打乱名单</h1><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="3823" class="ng lu iq nc b gy nh ni l nj nk">list_1 = ['start',1,2,3,4,5,6,7,8,9,'end']</span><span id="0610" class="ng lu iq nc b gy nl ni l nj nk">import random</span><span id="0a4e" class="ng lu iq nc b gy nl ni l nj nk">random.shuffle(list_1)</span></pre><p id="9f55" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(多种可能中的一种)输出:</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="f433" class="ng lu iq nc b gy nh ni l nj nk">[2, 3, 'start', 1, 4, 9, 8, 6, 'end', 7, 5]</span></pre><h2 id="3788" class="ng lu iq bd lv nm nn dn lz no np dp md lf nq nr mf lj ns nt mh ln nu nv mj nw bi translated">用例</h2><p id="2f7f" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf nx lh li lj ny ll lm ln nz lp lq lr ij bi translated">例如，有一次我正在创建一个关于电子商务网站中的动作的玩具数据集。我不得不为每个用户设置许多事件，如<em class="ls">搜索</em>、<em class="ls">搜索后点击</em>、<em class="ls">应用过滤器</em>等。</p><p id="7815" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在第一步，我为每个用户的每个事件创建了一个随机数，但后来我想打乱它们，使它看起来更真实。这里有一个用户操作的例子。第二个选项(洗牌后)看起来比第一个更真实，对吗？</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/c0a1076f2a8d9e7a6bd4103549276d58.png" data-original-src="https://miro.medium.com/v2/resize:fit:458/format:webp/1*L16Jz1AY62pJAxHEAJCPbg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Before</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/472d7ecf674b931e22330ee53cbffdc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:452/format:webp/1*2DJoI_dafR_XJ4NnyHR7aA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">After</figcaption></figure><h1 id="3257" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">颠倒列表</h1><p id="0191" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf nx lh li lj ny ll lm ln nz lp lq lr ij bi translated">让我们看一个简单的例子:</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="1399" class="ng lu iq nc b gy nh ni l nj nk">list_2 = ['start',1,2,3,4,5,6,7,8,9,'end']</span><span id="36b2" class="ng lu iq nc b gy nl ni l nj nk">list_2[::-1]</span></pre><p id="a63a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输出:</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="bbe3" class="ng lu iq nc b gy nh ni l nj nk">['end', 9, 8, 7, 6, 5, 4, 3, 2, 1, 'start']</span></pre><h1 id="0be7" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">从列表中获取所有不同的组合</strong></h1><p id="f70a" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf nx lh li lj ny ll lm ln nz lp lq lr ij bi translated">只对短名单这样做！对于长列表，处理时间会变得很长。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="c225" class="ng lu iq nc b gy nh ni l nj nk">import itertools <br/>stuff = [1, 2, 3] <br/>for L in range(0, len(stuff)+1): <br/>    for subset in itertools.combinations(stuff, L): <br/>        print(subset)</span></pre><p id="a540" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输出:</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="5926" class="ng lu iq nc b gy nh ni l nj nk">()<br/>(1,)<br/>(2,)<br/>(3,)<br/>(1, 2)<br/>(1, 3)<br/>(2, 3)<br/>(1, 2, 3)</span></pre><h1 id="80eb" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">从列表中随机抽取样本</h1><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="445f" class="ng lu iq nc b gy nh ni l nj nk">from random import sample</span><span id="a067" class="ng lu iq nc b gy nl ni l nj nk">list_1 = [1, 2, 3, 4, 5]</span><span id="fc38" class="ng lu iq nc b gy nl ni l nj nk">print(sample(list_1,3))</span></pre><p id="0a01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(多种可能中的一种)输出:</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="8efe" class="ng lu iq nc b gy nh ni l nj nk">[3, 2, 4]</span></pre><h1 id="71ed" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">两个列表中元素的差异</h1><p id="a3f3" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf nx lh li lj ny ll lm ln nz lp lq lr ij bi translated">找出两个列表中不相同的元素。</p><p id="9440" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">示例:</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="663e" class="ng lu iq nc b gy nh ni l nj nk">cols = ['start','finish','version','country','device']<br/>test = ['start','finish']</span><span id="e3ce" class="ng lu iq nc b gy nl ni l nj nk">list(set(cols).difference(test))</span></pre><p id="96c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输出:</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="b7fc" class="ng lu iq nc b gy nh ni l nj nk">['version', 'country', 'device']</span></pre><h1 id="6fb3" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">创建一个随机数列表</h1><p id="60a0" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf nx lh li lj ny ll lm ln nz lp lq lr ij bi translated">让我们看一个创建10个随机数列表的例子，范围在0到1000之间。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="4da3" class="ng lu iq nc b gy nh ni l nj nk">list_1 = list(np.random.rand(10,1).ravel()*1000)</span><span id="a071" class="ng lu iq nc b gy nl ni l nj nk">list_1 = [ int(x) for x in list_1]</span><span id="ec08" class="ng lu iq nc b gy nl ni l nj nk">print (list_1)</span></pre><p id="7312" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输出:</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="b258" class="ng lu iq nc b gy nh ni l nj nk">[639, 170, 381, 44, 448, 178, 145, 17, 514, 607]</span></pre><h1 id="cf10" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">对列表排序</h1><p id="e15d" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf nx lh li lj ny ll lm ln nz lp lq lr ij bi translated">简单:</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="0363" class="ng lu iq nc b gy nh ni l nj nk">list_1 = [639, 170, 381, 44, 448, 178, 145, 17, 514, 607]<br/>list_1.sort()</span></pre><p id="2357" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输出:</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="2843" class="ng lu iq nc b gy nh ni l nj nk">[17, 44, 145, 170, 178, 381, 448, 514, 607, 639]</span></pre><p id="27d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想以相反的顺序排序:</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="0dc2" class="ng lu iq nc b gy nh ni l nj nk">list_1.sort(<!-- -->reverse <strong class="nc ir">=</strong> <!-- -->True<!-- -->)</span></pre><p id="6f0f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输出:</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="d496" class="ng lu iq nc b gy nh ni l nj nk">[639, 607, 514, 448, 381, 178, 170, 145, 44, 17]</span></pre><h1 id="40b8" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">在列表中查找第一个匹配项的位置</h1><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="526f" class="ng lu iq nc b gy nh ni l nj nk">list_1 = [17, 44, 145, 170, 178, 381, 448, 514, 607, 639]</span><span id="5acd" class="ng lu iq nc b gy nl ni l nj nk">import numpy as np<br/>np.argmax(np.array(list_1)&gt;=400)</span></pre><p id="165a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输出:</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="692a" class="ng lu iq nc b gy nh ni l nj nk">6<br/># the element equal or higher than 400, it's in the 6th position (starting from zero of course)</span></pre><h2 id="087b" class="ng lu iq bd lv nm nn dn lz no np dp md lf nq nr mf lj ns nt mh ln nu nv mj nw bi translated">用例</h2><p id="bf2f" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf nx lh li lj ny ll lm ln nz lp lq lr ij bi translated">它有助于在逻辑回归图中绘制垂直线，如下图所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/15cc2c08caf62442e8943ff5a8537f7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WL8lDll2GqpxNoS41libDg.png"/></div></div></figure><p id="16b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我有一个数字数组中的红色曲线，然后我执行</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="d241" class="ng lu iq nc b gy nh ni l nj nk"># for the first vertical line<br/>np.argmax(np.array(red_curve_points)&gt;=0.1)</span><span id="9099" class="ng lu iq nc b gy nl ni l nj nk"># for the second vertical line<br/>np.argmax(np.array(red_curve_points)&gt;=0.5)</span></pre><p id="034c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我找到了X轴上画垂直线的位置。</p></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><p id="097a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">希望你喜欢它！您可以关注我的个人资料，在未来几周内找到更多关于数据科学和数据分析的故事。</p><div class="ok ol gp gr om on"><a href="https://www.datadriveninvestor.com/2019/02/21/best-coding-languages-to-learn-in-2019/" rel="noopener  ugc nofollow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd ir gy z fp os fr fs ot fu fw ip bi translated">2019年最值得学习的编码语言|数据驱动的投资者</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">在我读大学的那几年，我跳过了很多次夜游去学习Java，希望有一天它能帮助我在…</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">www.datadriveninvestor.com</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb kp on"/></div></div></a></div><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pc pd l"/></div></figure></div></div>    
</body>
</html>