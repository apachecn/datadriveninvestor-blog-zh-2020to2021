<html>
<head>
<title>Redis as Object Storage</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Redis作为对象存储</h1>
<blockquote>原文：<a href="https://medium.datadriveninvestor.com/redis-as-object-storage-e6a084b46f8b?source=collection_archive---------0-----------------------#2020-12-09">https://medium.datadriveninvestor.com/redis-as-object-storage-e6a084b46f8b?source=collection_archive---------0-----------------------#2020-12-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="643a" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">Redis第5集</h2><div class=""/><div class=""><h2 id="8dcb" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">如何使用Redis存储对象</h2></div><p id="14a5" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">正如我们之前讨论的,<a class="ae lk" href="https://sthenusan.medium.com/introduction-to-redis-3e6c3a0083a7" rel="noopener"> Redis </a>是一个内存中的数据库，我们可以将数据存储为键值对。Redis有很多特性，像<a class="ae lk" href="https://sthenusan.medium.com/data-persistence-with-redis-52b7d7cdfc53" rel="noopener">数据持久性</a>和<a class="ae lk" href="https://blog.usejournal.com/availability-with-redis-66611f5a5e2b" rel="noopener ugc nofollow" target="_blank">高可用性</a>。我决定在本文中讨论如何将对象存储在Redis数据库中。首先，在深入这个话题之前，我将向你介绍一些新的术语。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ll"><img src="../Images/ff9e355dd23b64898b8b1bffd7cec0f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GaDOq1rr8dw6w3VD"/></div></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">Photo by <a class="ae lk" href="https://unsplash.com/@hellodannyfeng?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Danny Feng</a> on <a class="ae lk" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="1e84" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">目标</h1><p id="4514" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">对象表示抽象数据类型。一个对象可能有不同的属性和方法，甚至可能携带其他对象。在大多数编程语言中，对象被表示为类。对象为编程提供了结构化的途径。</p><p id="e0f0" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">由于Redis是一个键值存储，我们不能简单地直接存储复杂的对象。因此，我们需要一种方法来处理存储在Redis数据库中的对象。</p><h1 id="fd0c" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">对象序列化</h1><p id="c4aa" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">序列化意味着将对象转换成字节流，以便将对象存储在内存中。主要目标是保存对象的状态，以便在需要时能够重新创建它。序列化的反向过程称为反序列化。</p><h1 id="a517" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">客户</h1><p id="2dda" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">编程中的客户端是依赖于另一个程序运行的计算机程序。在所有广泛使用的编程语言中，许多技术都有可用的客户端，例如，MySQL有JAVA、Python、NodeJS等的客户端。同样，Redis也有许多不同编程语言的客户机。当我们使用客户端时，我们不必过多考虑内部连接是如何发生的。Redis的JAVA客户端叫做Jedis。Jedis给了我们一个很好的接口，可以通过JAVA很容易地使用Redis。我们可以从<a class="ae lk" href="https://jar-download.com/artifacts/redis.clients/jedis" rel="noopener ugc nofollow" target="_blank">这里</a>轻松下载Jedis jar文件。</p><h1 id="48ce" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">对象存储过程</h1><p id="fb87" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">在Redis中，所有东西都只能以键-值对格式存储。键必须是唯一的，以字符串格式存储对象无论如何都不是一个好的做法。对象通常以二进制数组格式存储在数据库中。这里我们也将使用二进制数组格式来存储对象。Jedis允许我们使用BinayJedis()构造函数来处理二进制数组。</p><figure class="lm ln lo lp gt lq"><div class="bz fp l di"><div class="my mz l"/></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">Redis Instance Creation</figcaption></figure><p id="63ac" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在这个方法中，我们以线程安全的方式创建了一个BinaryJedis对象。“jedis”变量被称为BinaryJedis。方法确保通过调用此方法只创建一个对象。当“jedis”变量为空时，创建新的对象。否则，该方法返回已经创建的对象。主机和端口是Redis部署的主机地址和端口号。</p><p id="fc33" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我将使用apache的序列化库来序列化和反序列化对象。您可以查看apache的<a class="ae lk" href="https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/SerializationUtils.html" rel="noopener ugc nofollow" target="_blank">文档</a>以获得更多关于该库使用的知识。下面显示的两种方法用于序列化和反序列化。</p><figure class="lm ln lo lp gt lq"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="bab6" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我选择一个简单的对象来演示目的。</p><figure class="lm ln lo lp gt lq"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="56e0" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在这里，我定义了一个名为human的样本类，它有两个属性，比如年龄和姓名。下面的代码是用Redis存储和检索样本对象的演示部分。</p><figure class="lm ln lo lp gt lq"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="76d6" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">最初，我们应该通过getJedisInstance()方法获取jedis对象。之后，我使用参数为12和“Alias”的human类创建了一个名为h1的示例对象。现在，对象创建完毕。然后，我们需要使用BinaryJedis将对象序列化为字节数组格式，以存储在Redis中。我们需要将对象转换为serializable接口来序列化对象。由于BinaryRedis set方法要求键和值采用字节数组的形式，因此键被转换为字节数组。当程序执行这一行时，对象存储在Redis中。</p><pre class="lm ln lo lp gt na nb nc nd aw ne bi"><span id="6c83" class="nf mc iq nb b gy ng nh l ni nj">jedis.set(“human_1”.getBytes(), h1_obj);</span></pre><p id="4a2f" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们还需要在从Redis中检索对象时使用字节数组格式的键。当我们从Redis数据库中检索对象时，对象将是字节数组格式。我们需要反序列化它以获得实际的人类对象。我们必须在反序列化后将其转换为人类对象。</p><pre class="lm ln lo lp gt na nb nc nd aw ne bi"><span id="28b1" class="nf mc iq nb b gy ng nh l ni nj">object h2_obj = deserialize(jedis.get("human_1".getBytes()));<br/>human h2 = (human)h2_obj;</span></pre><p id="8d69" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们需要测试对象h1和h2是否相同。因此，human类的get_age()方法在h1、h2之上被调用，并且值可以被比较。12将在终端中打印两次。</p><pre class="lm ln lo lp gt na nb nc nd aw ne bi"><span id="376a" class="nf mc iq nb b gy ng nh l ni nj">System.<em class="nk">out</em>.println(h1.get_age());<br/>System.<em class="nk">out</em>.println(h2.get_age());</span></pre><p id="cfb2" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">因此，我们可以成功地用Redis数据库存储和检索对象。</p><p id="2027" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我相信你已经理解了今天讨论的主题。如果您有任何问题或任何澄清，不要犹豫，通过回复部分与我联系。感谢您花费宝贵的时间阅读这篇文章。</p><p id="c1c4" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja"> <em class="nk">享受文章？成为</em> </strong> <a class="ae lk" href="https://sthenusan.medium.com/membership" rel="noopener"> <strong class="kq ja"> <em class="nk">中等会员</em> </strong> </a> <strong class="kq ja"> <em class="nk">继续无限制学习。如果你使用上面的链接，我会收到你的一部分会员费，不需要你额外付费。</em>T15】</strong></p><p id="387a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">干杯…</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nl"><img src="../Images/6a0376a0e0234b5a276191960abe2c04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*95bAJauR9ed5k3Bm"/></div></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">Photo by <a class="ae lk" href="https://unsplash.com/@jontyson?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jon Tyson</a> on <a class="ae lk" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="186d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">参考</p><div class="nm nn gp gr no np"><a href="https://javadoc.io/doc/redis.clients/jedis/latest/index.html" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd ja gy z fp nu fr fs nv fu fw iz bi translated">jedis 3.4.0 javadoc</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">编辑描述</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">javadoc.io</p></div></div></div></a></div><div class="nm nn gp gr no np"><a href="https://redis.io/" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd ja gy z fp nu fr fs nv fu fw iz bi translated">雷迪斯</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">Redis是一个开源的(BSD许可的)、内存中的数据结构存储，用作数据库、缓存和消息代理…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">redis.io</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od lv np"/></div></div></a></div></div></div>    
</body>
</html>